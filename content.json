[{"title":"wslç¯å¢ƒoh my zshé…ç½®","date":"2019-08-29T11:00:00.000Z","path":"2019/08/29/config-the-oh-my-zsh-in-wsl-windows10/","text":"wslç¯å¢ƒoh my zshé…ç½® æœ€è¿‘æŠ˜è…¾vs codeçš„Remote-sshåŠŸèƒ½ï¼Œæƒ³ç”¨ä¸€ä¸ªæ¼‚äº®çš„terminalï¼Œå°±æŠ˜è…¾äº†ä¸‹oh my zshï¼Œè®°å½•ä¸‹æ–¹ä¾¿ä»¥åæŸ¥çœ‹ã€‚ ä¿®æ”¹mirror1234cd /etc/apt/# å¤‡ä»½sources.listcp /etc/apt/sources.list /etc/apt/sources.list_back åˆ‡æ¢163é•œåƒ12345678910111213141516171819202122cd /etc/apt/# åˆ‡æ¢åˆ°163sudo vi change_mirror_to_163.sh# copyè¿™äº›å†…å®¹åˆ°æ–‡æœ¬,ä¿å­˜é€€å‡ºCodename=$( (lsb_release -a)|awk '&#123;print $2&#125;'|tail -n 1 )echo \"\\deb http://mirrors.163.com/ubuntu/ $Codename main multiverse restricted universedeb http://mirrors.163.com/ubuntu/ $Codename-backports main multiverse restricted universedeb http://mirrors.163.com/ubuntu/ $Codename-proposed main multiverse restricted universedeb http://mirrors.163.com/ubuntu/ $Codename-security main multiverse restricted universedeb http://mirrors.163.com/ubuntu/ $Codename-updates main multiverse restricted universedeb-src http://mirrors.163.com/ubuntu/ $Codename main multiverse restricted universedeb-src http://mirrors.163.com/ubuntu/ $Codename-backports main multiverse restricted universedeb-src http://mirrors.163.com/ubuntu/ $Codename-proposed main multiverse restricted universedeb-src http://mirrors.163.com/ubuntu/ $Codename-security main multiverse restricted universedeb-src http://mirrors.163.com/ubuntu/ $Codename-updates main multiverse restricted universe \"&gt;sources.list# æ‰§è¡Œä¸Šé¢çš„è„šæœ¬sudo sh change_mirror_to_163.sh åˆ‡æ¢åˆ°aliyun12345678910111213141516171819202122cd /etc/apt/# åˆ‡æ¢åˆ°aliyunsudo vi change_mirror_to_aliyun.sh# copyè¿™äº›å†…å®¹åˆ°æ–‡æœ¬,ä¿å­˜é€€å‡ºCodename=$( (lsb_release -a)|awk '&#123;print $2&#125;'|tail -n 1 )echo \"\\deb http://mirrors.aliyun.com/ubuntu/ $Codename main multiverse restricted universedeb http://mirrors.aliyun.com/ubuntu/ $Codename-backports main multiverse restricted universedeb http://mirrors.aliyun.com/ubuntu/ $Codename-proposed main multiverse restricted universedeb http://mirrors.aliyun.com/ubuntu/ $Codename-security main multiverse restricted universedeb http://mirrors.aliyun.com/ubuntu/ $Codename-updates main multiverse restricted universedeb-src http://mirrors.aliyun.com/ubuntu/ $Codename main multiverse restricted universedeb-src http://mirrors.aliyun.com/ubuntu/ $Codename-backports main multiverse restricted universedeb-src http://mirrors.aliyun.com/ubuntu/ $Codename-proposed main multiverse restricted universedeb-src http://mirrors.aliyun.com/ubuntu/ $Codename-security main multiverse restricted universedeb-src http://mirrors.aliyun.com/ubuntu/ $Codename-updates main multiverse restricted universe \"&gt;sources.list# æ‰§è¡Œä¸Šé¢çš„è„šæœ¬sudo sh change_mirror_to_aliyun.sh æ‰§è¡Œæ›´æ–° å¯ä»¥çœ‹åˆ°é€Ÿåº¦æ˜æ˜¾çš„æ”¹å–„ 1sudo apt update &amp;&amp; sudo apt upgrade oh my zshå®‰è£… å¦‚æœæ²¡ç”¨å®‰è£… zshï¼Œè¯·å…ˆå®‰è£…zsh. å®‰è£…zsh https://github.com/robbyrussell/oh-my-zsh/wiki/Installing-ZSH 123456789101112131415# æŸ¥çœ‹æœ¬æœºæœ‰å“ªäº›shellcat /etc/shells # æ˜¾ç¤ºå½“å‰ç”¨çš„shell: echo $SHELL# æµ‹è¯•zshzsh --version# å¦‚æœæ²¡ç”¨å®‰è£…sudo apt update &amp;&amp; sudo apt upgrade# sudo apt update &amp;&amp; sudo apt upgrade zsh# å®‰è£…zshsudo apt install zsh# åˆ‡æ¢shellchsh -s $(which zsh) curlå®‰è£… https://github.com/robbyrussell/oh-my-zsh#basic-installation 1sh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\" é…ç½®å¿½ç•¥user@hostname å‚è€ƒï¼šhttps://github.com/robbyrussell/oh-my-zsh/issues/2033 1234567891011# Context: user@hostname (who am I and where am I)prompt_context() &#123; if [[ \"$USER\" != \"$DEFAULT_USER\" || -n \"$SSH_CLIENT\" ]]; then prompt_segment black default \"%(!.%&#123;%F&#123;yellow&#125;%&#125;.)$DEFAULT_USER\" fi&#125;# DEFAULT_USER=desired_username# åŠ è½½é…ç½®æ–‡ä»¶source ~/.zshrc é…ç½®ä¸»é¢˜agnoster https://github.com/robbyrussell/oh-my-zsh#selecting-a-theme 1234567vi ~/.zshrc# ä¿®æ”¹ä¸»é¢˜ZSH_THEME=\"agnoster\"# åŠ è½½é…ç½®æ–‡ä»¶source ~/.zshrc ä¸»é¢˜agnosteréœ€è¦çš„å­—ä½“ https://github.com/powerline/fonts 1sudo apt-get install fonts-powerline é‡æ–°å¼€å¯ä¸€ä¸ªterminalæ¥éªŒè¯ï¼Œæ˜¯å¦æˆåŠŸåˆ‡æ¢åˆ°zsh å‚è€ƒèµ„æ–™WSLâ€”â€”Win10çš„Linuxå­ç³»ç»Ÿ ubuntu ä¿®æ”¹èµ„æºé•œåƒ","tags":[{"name":"wsl","slug":"wsl","permalink":"https://betgar.github.io/tags/wsl/"},{"name":"zsh","slug":"zsh","permalink":"https://betgar.github.io/tags/zsh/"}]},{"title":"axios.jsçš„å®æˆ˜ç»éªŒ","date":"2019-08-27T13:00:00.000Z","path":"2019/08/27/the-questions-about-axiosjs-are-here/","text":"axios.jsçš„å®æˆ˜ç»éªŒ æ€»ç»“ä¸€ä¸‹ä½¿ç”¨Axios.jsçš„é‡åˆ°çš„æ³¨æ„äº‹é¡¹ï¼Œå¦‚æœ‰ä¸å¯¹æ¬¢è¿æŒ‡æ­£ã€‚ æœ¬æ–‡ä¸æ˜¯ä¸€ç¯‡åˆ†ææºç çš„æ–‡ç« ï¼Œå¦‚æœéœ€è¦çœ‹æºç è§£æçœ‹è¿™é‡Œaxioså®ä¾‹åº”ç”¨åŠæºç å‰–æ - xhrç¯‡ ï¼ˆèµ°å¿ƒæ•™ç¨‹ï¼‰,å†™çš„éå¸¸ä¸é”™ã€‚ axios.jsçš„æµç¨‹å›¾ å…ˆæ”¾å¼ å›¾é•‡æ¥¼ï¼Œåç»­çš„é—®é¢˜éœ€è¦å¤šçœ‹çœ‹è¿™å¼ å›¾ã€‚ æ¥è‡ªèµ°å¿ƒæ•™ç¨‹ axios.jsç‰ˆæœ¬é—®é¢˜ ä¹‹å‰æ²¡æœ‰æ³¨æ„å®˜ç½‘è¯´æ˜ï¼Œåæ¥å‡çº§äº†ç‰ˆæœ¬å‘ç°æŠ¥é”™ï¼Œç«‹åˆ»æŠŠå®˜ç½‘çš„æ–‡æ¡£ç¿»äº†ä¸€ä¸‹ï¼Œå‘ç°Semverç« èŠ‚æœ‰æè¿°ï¼Œ ç›´åˆ°v1.0ä¹‹å‰ï¼Œå½“å‘å¸ƒä¸€ä¸ªminorç‰ˆæœ¬ï¼Œå°±ä»£è¡¨æœ‰breaking changesäº†ã€‚æ‰€ä»¥å‡çº§æœ‰å±é™©å•Šï¼ï¼ï¼ æ‹¦æˆªå™¨interceptor æ‹¦æˆªå™¨æ˜¯axios.jsçš„æ ¸å¿ƒäº†ï¼Œå°±æ˜¯æœ‰äº†æ‹¦æˆªå™¨åšè§£è€¦ï¼Œæ‰èƒ½æŠŠä»£ç ç»„åˆçš„æ›´ä¼˜é›…ã€‚ interceptorçš„è¿”å›å€¼ç±»å‹ å½“åˆåœ¨å†™æ‹¦æˆªå™¨æ—¶å‘ç°ï¼Œå®˜æ–¹ç»™çš„ä¾‹å­ï¼Œinterceptorçš„è¿”å›å€¼æ—¢å¯ä»¥æ˜¯æ™®é€šçš„valueå€¼ï¼Œåˆå¯ä»¥æ˜¯Promiseã€‚å½“æ—¶å°±ç–‘æƒ‘äº†ï¼Œæœ‰å•¥åŒºåˆ«ï¼Ÿï¼Ÿï¼Ÿ 123456789101112131415161718// å®˜æ–¹ä¾‹å­ï¼š// Add a request interceptoraxios.interceptors.request.use(function (config) &#123; // Do something before request is sent return config; &#125;, function (error) &#123; // Do something with request error return Promise.reject(error); &#125;);// Add a response interceptoraxios.interceptors.response.use(function (response) &#123; // Do something with response data return response; &#125;, function (error) &#123; // Do something with response error return Promise.reject(error); &#125;); å…·ä½“ç»†èŠ‚çœ‹æºç åˆ†æèµ°å¿ƒç¯‡ 1234567891011121314151617181920// æºç é‡Œé¢å°±æœ‰ä¸€è¡Œä»£ç promise = promise.then(chain.shift(), chain.shift());// å…¶å®æŠŠä¸Šé¢ä¾‹å­ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯è¿™æ ·çš„// Add a request interceptorpromise = promise.then(function (config) &#123; // Do something before request is sent return config; &#125;, function (error) &#123; // Do something with request error return Promise.reject(error); &#125;);// Add a response interceptorpromise = promise.then(function (response) &#123; // Do something with response data return response; &#125;, function (error) &#123; // Do something with response error return Promise.reject(error); &#125;); æ˜¯ä¸æ˜¯ç¬é—´å°±æ˜ç™½äº†æ‹¦æˆªå™¨çš„returnå€¼ï¼Œå…¶å®å¯ä»¥æ˜¯æ™®é€šçš„valueå€¼ï¼Œæˆ–è€…Promiseå¯¹è±¡ã€‚ è¿”å›Promiseå°±æœ‰å¾ˆå¤šæƒ³æ³•äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ‹¦æˆªå™¨interceptorä¸­åšå¼‚æ­¥æ“ä½œï¼Œç»ˆäºå¯ä»¥ä¸ºæ‰€æ¬²ä¸ºäº† :)ã€‚ interceptorçš„æ‰§è¡Œé¡ºåº è¿™ä¸ªé—®é¢˜å‘¢ï¼Œæ˜¯æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­çº ç»“çš„ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³åšä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å½“Content-Type: application/x-www-form-urlencoded;charset=utf-8æ—¶å€™ï¼Œè‡ªåŠ¨æŠŠdataä½¿ç”¨qs.stringifyï¼ˆåæ¥çŸ¥é“è¿™ä¸ªåŠŸèƒ½å…¶å®ä½¿ç”¨transformeræ›´åˆé€‚ï¼‰ã€‚ 123456789101112131415161718// axios/lib/core/Axios.js// æ ¸å¿ƒé€»è¾‘å°±æ˜¯è¿™æ®µvar chain = [dispatchRequest, undefined]; // æ­£ä¸­é—´çš„æ˜¯å‘é€è¯·æ±‚çš„æ‹¦æˆªå™¨var promise = Promise.resolve(config);// request æ‹¦æˆªå™¨unshiftï¼Œæ·»åŠ åˆ°æ•°ç»„çš„å¤´éƒ¨this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) &#123; chain.unshift(interceptor.fulfilled, interceptor.rejected);&#125;);// response æ‹¦æˆªå™¨ pushåˆ°æ•°ç»„å°¾éƒ¨this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) &#123; chain.push(interceptor.fulfilled, interceptor.rejected);&#125;);while (chain.length) &#123; // å¾ªç¯æ‰§è¡Œæ‹¦æˆªå™¨ promise = promise.then(chain.shift(), chain.shift());&#125; ä¸Šè¿°ä»£ç å…¶å®å°±æ˜¯åšäº†ä¸¤ä»¶äº‹æƒ…ï¼š æŠŠæ‹¦æˆªå™¨æ”¾å…¥æ•°ç»„chainä¸­ this.interceptors.requestæ‹¦æˆªå™¨æ˜¯ä»chainçš„å¤´éƒ¨æ”¾å…¥ï¼›this.interceptors.requestå…¶å®ä¹Ÿæ˜¯æ•°ç»„ï¼Œæ‰€ä»¥requestæ•°ç»„ä¸­æœ€åæ”¾å…¥çš„interceptorå´åœ¨chainæ•°ç»„çš„æœ€å‰é¢ï¼Œå’Œaxios.interceptors.request.useæ—¶å€™çš„é¡ºåºç›¸åã€‚ this.interceptors.responseæ‹¦æˆªå™¨æ˜¯æ”¾å…¥chainçš„å°¾éƒ¨ï¼Œæ‰€ä»¥interceptoré¡ºåºå’Œæ·»åŠ axios.interceptors.response.useæ—¶å€™çš„é¡ºåºç›¸åŒ å¾ªç¯æ‰§è¡Œchainä¸­çš„æ‹¦æˆªå™¨ requestæ‹¦æˆªå™¨ï¼Œæœ€åæ·»åŠ çš„ï¼Œæœ€å…ˆæ‰§è¡Œ responseæ‹¦æˆªå™¨ï¼ŒæŒ‰ç…§æ·»åŠ çš„é¡ºåºæ‰§è¡Œ æ³¨æ„ï¼šå¦‚æœä½ çš„interceptors ä¹‹é—´é¡ºåºæœ‰å…ˆåä¾èµ–å…³ç³»ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚ transformerçš„ä½¿ç”¨ transformRequestå’ŒtransformResponseéƒ½å±äºAxios.jsçš„transformerï¼Œå®˜æ–¹å®£ä¼ çš„Automatic transforms for JSON dataå°±æ˜¯é€šè¿‡transformResponseå®ç°çš„ã€‚å®˜æ–¹æ–‡æ¡£å†™çš„å¤ªç®€å•äº†ï¼Œæ²¡ç”¨å†™è¦æ³¨æ„çš„é—®é¢˜ã€‚ å†…ç½®çš„transformRequestå’ŒtransformResponse é»˜è®¤å¤„ç†JSON123456789101112131415161718192021222324252627282930313233343536373839// axios/lib/defaults.jsvar defaults = &#123; adapter: getDefaultAdapter(), transformRequest: [function transformRequest(data, headers) &#123; normalizeHeaderName(headers, 'Content-Type'); if (utils.isFormData(data) || utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data) ) &#123; return data; &#125; if (utils.isArrayBufferView(data)) &#123; return data.buffer; &#125; if (utils.isURLSearchParams(data)) &#123; setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8'); return data.toString(); &#125; if (utils.isObject(data)) &#123; setContentTypeIfUnset(headers, 'application/json;charset=utf-8'); return JSON.stringify(data); &#125; return data; &#125;], transformResponse: [function transformResponse(data) &#123; /*eslint no-param-reassign:0*/ if (typeof data === 'string') &#123; try &#123; data = JSON.parse(data); &#125; catch (e) &#123; /* Ignore */ &#125; &#125; return data; &#125;],&#125;; 123456789// transformRequestif (utils.isURLSearchParams(data)) &#123; setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8'); return data.toString();&#125;if (utils.isObject(data)) &#123; setContentTypeIfUnset(headers, 'application/json;charset=utf-8'); return JSON.stringify(data);&#125; å¦‚æœdataæ˜¯URLSearchParamsç±»å‹ï¼ŒaxiosæŠŠContent-Typeä¿®æ”¹ä¸ºapplication/x-www-form-urlencoded;charset=utf-8ï¼Œä¸”åºåˆ—åŒ–data å¦‚æœdataæ˜¯Objectï¼ŒaxiosæŠŠContent-Typeä¿®æ”¹ä¸ºapplication/json;charset=utf-8ï¼Œä¸”åºåˆ—åŒ–data transformResponseé»˜è®¤å°è¯•è§£æJSON å†…ç½®transformRequestå’ŒtransformResponseè¢«è¦†ç›– å†…ç½®çš„transformRequestå’ŒtransformResponseï¼Œå¾ˆå®¹æ˜“è¢«è¦†ç›–ï¼Œå¦‚æœä½ ä¸éœ€è¦å†…ç½®çš„é‚£å°±å¾ˆå¥½åŠï¼Œå¦‚æœä½ éœ€è¦å°±éœ€è¦æ³¨æ„ä¸‹ã€‚ 1234567import axios from 'axios';const defaults = &#123; // éœ€è¦æŠŠé»˜è®¤çš„æ·»åŠ å›æ¥ transformRequestï¼š [].concat(axios.defaults.transformRequest, (data, headers) =&gt; &#123; // do something return data; &#125;)&#125;; è‡ªåŠ¨åºåˆ—åŒ–dataå‚æ•°ä¸”ä¿®æ”¹Content-Type æ³¨æ„URLSearchParamså…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚æœå…¼å®¹IE 11,ä½¿ç”¨qså¤„ç†ä¸‹ã€‚ å¦‚æœdataæ˜¯URLSearchParamsç±»å‹ï¼ŒaxiosæŠŠContent-Typeä¿®æ”¹ä¸ºapplication/x-www-form-urlencoded;charset=utf-8ï¼Œä¸”åºåˆ—åŒ–data å¦‚æœdataæ˜¯Objectï¼ŒaxiosæŠŠContent-Typeä¿®æ”¹ä¸ºapplication/json;charset=utf-8ï¼Œä¸”åºåˆ—åŒ–data transformerå’Œinterceptorçš„åŒºåˆ« transformerå’Œinterceptoréƒ½èƒ½åœ¨è¯·æ±‚è¿‡ç¨‹ä¸­å‘æŒ¥ä½œç”¨ï¼Œæœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ åŒºåˆ«ï¼š transformerå’Œinterceptorçš„æ‰§è¡Œçš„æ—¶æœºä¸åŒï¼Œçœ‹ä¸Šå›¾ transformerä¸»è¦é’ˆå¯¹dataï¼ˆè™½ç„¶ä¹Ÿèƒ½ç›´æ¥æ”¹å˜headerï¼Œä½†æ˜¯ä¸å»ºè®®ï¼‰ transformeråªèƒ½åŒæ­¥ï¼Œè€Œinterceptorå¯ä»¥æ‰§è¡Œå¼‚æ­¥æ“ä½œ 12345678module.exports = function transformData(data, headers, fns) &#123; /*eslint no-param-reassign:0*/ utils.forEach(fns, function transform(fn) &#123; data = fn(data, headers); &#125;); return data;&#125;; baseUrlé…ç½® axioså†…éƒ¨åˆ¤æ–­config.urlï¼Œå¦‚æœæ˜¯ç»å¯¹è·¯å¾„å¼€å§‹å°±ä¸æ·»åŠ baseUrlï¼Œå¦åˆ™å°±æ·»åŠ  12345// axios/lib/core/dispatchRequest.js// Support baseURL configif (config.baseURL &amp;&amp; !isAbsoluteURL(config.url)) &#123; config.url = combineURLs(config.baseURL, config.url);&#125; äºŒè¿›åˆ¶æ•°æ®æ³¨æ„ å¦‚æœä½ çš„transformerå’Œinterceptorå¯¹dataæœ‰å˜å½¢æˆ–è€…ä½¿ç”¨ï¼Œä¸€å®šè¦å…ˆåˆ¤æ–­äºŒè¿›åˆ¶ï¼Œä¸ç„¶å®¹æ˜“å¯¼è‡´æŠ¥é”™ã€‚æ¨èçš„åšæ³•å°±æ˜¯ï¼Œä½¿ç”¨å•ç‹¬çš„axioså®ä¾‹å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚å¤šä¸ªaxioså®ä¾‹ä¹‹é—´ï¼Œæ³¨æ„å…±äº«headerséƒ¨åˆ†(è¿™ä¸ªå‘ï¼Œæˆ‘å·²ç»è¸©è¿›å»äº†)ã€‚ æ€»ç»“ ä»¥ä¸Šæ˜¯æœ¬äººä½¿ç”¨axios.jsè¿‡ç¨‹ä¸­é‡åˆ°çš„ç–‘æƒ‘ï¼Œç„¶åé€šè¿‡æŸ¥çœ‹æºç çš„æ€»ç»“ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæˆ‘ä¼šæ„Ÿåˆ°å¾ˆè£å¹¸ã€‚ axios.jsç›¸å…³èµ„æºaxios-retryaxios-cache-adapter","tags":[{"name":"axios","slug":"axios","permalink":"https://betgar.github.io/tags/axios/"}]},{"title":"TypeScriptç±»å‹å£°æ˜ä¹¦å†™","date":"2019-08-26T11:00:00.000Z","path":"2019/08/26/how-to-declare-typescript-types/","text":"TypeScriptç±»å‹å£°æ˜ä¹¦å†™ æœ¬æ–‡æ€»ç»“ä¸€ä¸‹TypeScriptç±»å‹å£°æ˜çš„ä¹¦å†™ï¼Œå¾ˆå¤šæ—¶å€™å†™TypeScriptä¸æ˜¯é—®é¢˜ï¼Œå†™ç±»å‹å°±ç‰¹åˆ«çº ç»“ï¼Œæˆ‘æ€»ç»“ä¸‹ï¼Œæˆ‘åœ¨ä½¿ç”¨TypeScriptä¸­é‡åˆ°çš„é—®é¢˜ã€‚å¦‚æœä½ é‡åˆ°ç±»å‹å£°æ˜ä¸ä¼šå†™çš„æ—¶å€™ï¼Œå¤šçœ‹çœ‹lodashçš„å£°æ˜ï¼Œå› ä¸ºlodashå¯¹æ•°æ®è¿›è¡Œå„ç§å˜å½¢æ“ä½œï¼Œæ‰€ä»¥ä½ èƒ½é‡åˆ°çš„ï¼Œéƒ½æœ‰å‚è€ƒç¤ºä¾‹ã€‚ åŸºæœ¬ç±»å‹12345678910// å˜é‡const num: number = 1;const str: string = 'str';const bool: boolean = true;const nulls: null = null;const undefine: undefined = undefined;const symbols: Symbol = Symbol('symbal');const any: any = 'any types'; // typescriptçš„anyç±»å‹ï¼Œç›¸å½“äºä»€ä¹ˆç±»å‹çº¦æŸéƒ½æ²¡æœ‰ æ•°ç»„1234567// æ•°ç»„: æ¨èä½¿ç”¨T[]è¿™ç§å†™æ³•const nums: number[] = [1, 2, 3, 4];// ä¸æ¨èï¼šArray&lt;T&gt;æ³›å‹å†™æ³•ï¼Œå› ä¸ºåœ¨JSXä¸­ä¸å…¼å®¹ï¼Œæ‰€ä»¥ä¸ºäº†ç»Ÿä¸€éƒ½ä½¿ç”¨T[]è¿™ç§ç±»å‹const strs: Array&lt;string&gt; = ['s', 't', 'r'];const dates: Date[] = [new Date(), new Date()]; æ•°ç»„çš„concatæ–¹æ³•ï¼Œè¿”å›ç±»å‹ä¸ºnever[]é—®é¢˜1234567// æ•°ç»„concatæ–¹æ³•çš„neveré—®é¢˜// æç¤ºï¼š Type 'string' is not assignable to type 'never'.const arrNever: string[] = [].concat(['s']);// ä¸»è¦é—®é¢˜æ˜¯ï¼š[]æ•°ç»„ï¼Œtsæ— æ³•æ ¹æ®ä¸Šä¸‹æ–‡åˆ¤æ–­æ•°ç»„å†…éƒ¨å…ƒç´ çš„ç±»å‹// @see https://github.com/Microsoft/TypeScript/issues/10479const fixArrNever: string[] = ([] as string[]).concat(['s']); æ¥å£æ¥å£æ˜¯ TypeScript çš„ä¸€ä¸ªæ ¸å¿ƒçŸ¥è¯†ï¼Œå®ƒèƒ½åˆå¹¶ä¼—å¤šç±»å‹å£°æ˜è‡³ä¸€ä¸ªç±»å‹å£°æ˜ï¼š è€Œä¸”æ¥å£å¯ä»¥ç”¨æ¥å£°æ˜ï¼šå‡½æ•°ï¼Œç±»ï¼Œå¯¹è±¡ç­‰æ•°æ®ç±»å‹ 123456789interface Name &#123; first: string; second: string;&#125;let username: Name = &#123; first: 'John', second: 'Doe'&#125;; anyã€nullã€undefinedã€voidç±»å‹123456789101112// ç‰¹æ®Šç±»å‹const any: any = 'any types'; // typescriptçš„anyç±»å‹ï¼Œç›¸å½“äºä»€ä¹ˆç±»å‹éƒ½æ²¡å†™let nobody: any = 'nobody, but you';nobody = 123;let nulls: number = null;let bool: boolean = undefined;// voidfunction printUsername (name: string): void &#123; console.log(name);&#125; è”åˆç±»å‹ è”åˆç±»å‹åœ¨option bagsæ¨¡å¼åœºæ™¯éå¸¸å®ç”¨ï¼Œä½¿ç”¨ | æ¥åšæ ‡è®° 123456function options(opts: &#123; types?: string; tag: string | number;&#125;): void &#123; &#125; äº¤å‰ç±»å‹ æœ€å…¸å‹çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ç»§æ‰¿å’Œmixinï¼Œæˆ–è€…copyç­‰æ“ä½œ 1234// äº¤å‰ç±»å‹ï¼šå¦‚æœä»¥åé‡åˆ°æ­¤ç§ç±»å‹å£°æ˜ä¸ä¼šå†™ï¼Œç›´æ¥çœ‹Object.assignå£°æ˜å†™æ³•function $extend&lt;T, U&gt;(first: T, second: U): T &amp; U &#123; return Object.assign(first, second); // ç¤ºæ„è€Œå·²&#125; å…ƒç»„ tuple å…ƒç»„å¾ˆå°‘ä½¿ç”¨ 123456789101112let nameNumber: [string, number];// OknameNumber = ['Jenny', 221345];// Error// nameNumber = ['Jenny', '221345'];let tuple: [string, number];nameNumber = ['Jenny', 322134];const [usernameStr, uselessNum] = nameNumber; typeçš„ä½œç”¨ typeç”¨æ¥åˆ›å»ºæ–°çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥é‡å‘½åï¼ˆåˆ«åï¼‰å·²æœ‰çš„ç±»å‹ï¼Œå»ºè®®ä½¿ç”¨typeåˆ›å»ºç®€å•ç±»å‹ï¼Œæ— åµŒå¥—çš„æˆ–è€…ä¸€å±‚åµŒå¥—çš„ç±»å‹ï¼Œå…¶å®ƒå¤æ‚çš„ç±»å‹éƒ½åº”è¯¥ä½¿ç”¨interface, ç»“åˆimplements ,extendså®ç°ã€‚ 123456789type StrOrNum = string | number;// ä½¿ç”¨let sample: StrOrNum;sample = 123;sample = '123';// ä¼šæ£€æŸ¥ç±»å‹sample = true; // Error å®è·µä¸­é‡åˆ°çš„é—®é¢˜ç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›å£°æ˜d.tsæ–‡ä»¶ å¦‚æœç¬¬ä¸‰æ–¹åº“æ²¡æœ‰æä¾›å£°æ˜æ–‡ä»¶ï¼Œç¬¬ä¸€æ—¶é—´å»å¾®è½¯å®˜æ–¹çš„ä»“åº“https://github.com/borisyankov/DefinitelyTyped æŸ¥æ‰¾ï¼Œæˆ–è€…åœ¨npmjs.comä¸Šæœç´¢@types/ä¾èµ–çš„æ¨¡å—åå¤§éƒ¨åˆ†æƒ…å†µéƒ½å¯ä»¥æ‰¾åˆ°ã€‚ æ‰‹åŠ¨æ·»åŠ å£°æ˜æ–‡ä»¶ å£°æ˜æ–‡ä»¶ä¸€èˆ¬éƒ½æ˜¯ç»Ÿä¸€æ”¾ç½®åœ¨typesæ–‡ä»¶å¤¹ä¸‹ 12// ä¾‹å­ï¼š types/axios.d.tsdeclare module 'axios'; // è¿™é‡Œçš„axioså£°æ˜ä¸ºanyç±»å‹ å…¨å±€å˜é‡ ä¾‹å¦‚ä¸€äº›åº“ç›´æ¥æŠŠåœ¨windowä¸Šæ·»åŠ çš„å…¨å±€å˜é‡ 1234// globals.d.ts// ä¾‹å­ï¼šjQueryï¼Œç°å®ä¸­jQueryæ˜¯æœ‰.d.tsdeclare const jQuery: any;declare const $: typeof jQuery; éJavaScriptèµ„æº åœ¨å‰ç«¯å·¥ç¨‹ä¸­ï¼Œimportå¾ˆå¤šéjsèµ„æºï¼Œä¾‹å¦‚ï¼šcss, html, å›¾ç‰‡ï¼Œvue, è¿™ç§tsæ— æ³•è¯†åˆ«çš„èµ„æºæ—¶ï¼Œå°±éœ€è¦å‘Šè¯‰tsï¼Œæ€ä¹ˆè¯†åˆ«è¿™äº›å¯¼å…¥çš„èµ„æºçš„ç±»å‹ã€‚ 12345678910// çœ‹çœ‹vueæ€ä¹ˆå¤„ç†çš„ï¼šshims-vue.d.tsdeclare module '*.vue' &#123; import Vue from 'vue'; export default Vue;&#125;// htmldeclare module '*.html';// cssdeclare module '*.css'; å¼ºåˆ¶ç±»å‹è½¬æ¢ æœ‰æ—¶å€™é‡åˆ°éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå°¤å…¶æ˜¯å¯¹è”åˆç±»å‹æˆ–è€…å¯é€‰å±æ€§æ—¶ã€‚ 12345// ç¬¬ä¸€ç§ï¼šä½¿ç”¨&lt;&gt;æ‹¬å·const convertArrType: string[] = &lt;Array&lt;string&gt;&gt;[].concat(['s']);// ç¬¬äºŒç§ï¼šä½¿ç”¨aså…³é”®å­—const fixArrNever: string[] = ([] as string[]).concat(['s']); å»ºè®®ä½¿ç”¨ç¬¬äºŒç§ï¼Œå› ä¸ºå…¼å®¹JSXï¼Œç¬¬ä¸€ç§å®˜æ–¹ä¹Ÿä¸æ¨èäº†ï¼Œè™½ç„¶å®ƒæ˜¯åˆæ³•çš„ã€‚ å¯é€‰å±æ€§å’Œé»˜è®¤å±æ€§ APIä¸­æä¾›çš„å‚æ•°å¾ˆå¤šéƒ½æœ‰é»˜è®¤å€¼ï¼Œæˆ–è€…å±æ€§å¯é€‰ï¼Œæ€ä¹ˆä¹¦å†™å‘¢ï¼Ÿ 1234567891011121314151617class Socket &#123;&#125;// è”åˆç±»å‹export type SocketType = 'WebSocket' | 'SockJs';export interface SocketOptions &#123; type: SocketType; protocols?: string | string[]; // å¯é€‰ pingMessage: string | (() =&gt; string); // è”åˆç±»å‹ï¼Œå¯ä»¥ä¸ºstringæˆ–è€…å‡½æ•° pongMessage: string | (() =&gt; string);&#125;// é»˜è®¤å€¼export function eventHandler = ( evt: CloseEvent | MessageEvent | Event, socket: Socket, type = 'WebSocket' // é»˜è®¤å€¼) =&gt; any; ç‹¬ç«‹å‡½æ•°æ€ä¹ˆå£°æ˜ç±»å‹ åˆšå¼€å§‹æˆ‘ä¹Ÿå¾ˆçº ç»“è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œæ€ä¹ˆå£°æ˜ç±»å‹å‘¢ï¼Ÿå°¤å…¶æ˜¯å†™äº‹ä»¶å¤„ç†å‡½æ•°çš„APIæ—¶ã€‚ 123456789101112131415class Socket &#123;&#125;// å‡½æ•°çš„å£°æ˜æ–¹å¼export type SocketEventHandler = ( evt: CloseEvent | MessageEvent | Event, socket: Socket) =&gt; any;const eventHandler: SocketEventHandler = (evt, socket) =&gt; &#123;&#125;// å¯é€‰å‚æ•°å’Œrestå‚æ•°let baz = (x = 1) =&gt; &#123;&#125;;let foo = (x: number, y: number) =&gt; &#123;&#125;;let bar = (x?: number, y?: number) =&gt; &#123;&#125;;let bas = (...args: number[]) =&gt; &#123;&#125;; ç´¢å¼•å±æ€§ç±»å‹å£°æ˜ JavaScriptä¸­çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ç´¢å¼•ç›´æ¥å–å±æ€§æˆ–è€…è°ƒç”¨æ–¹æ³•ï¼ŒTypeScriptä¸­ä¹Ÿæœ‰ç›¸åº”çš„ç±»å‹å£°æ˜æ–¹æ³•ã€‚ 1234567891011type Hello = &#123; hello: 'world'; // keyåªæ˜¯ä¸€ä¸ªå½¢å¼å±æ€§åï¼ˆç±»ä¼¼å½¢å‚ä¸€æ ·ï¼‰ [key: string]: string;&#125;;const greeting: Hello = &#123; hi: 'morning'&#125;console.log(greeting['hi']) åŠ¨æ€æ·»åŠ çš„å±æ€§å£°æ˜ æœ‰çš„æ—¶å€™æˆ‘ä»¬åªå£°æ˜äº†ä¸€ä¸ªåŸºæœ¬çš„ç±»å‹ç»“æ„ï¼Œç„¶ååç»­æœ‰æ‰©å±•çš„æƒ…å†µ ï¼Œå°¤å…¶æ—¶äºŒæ¬¡å°è£…æ—¶çš„optionsã€‚ 1234567891011121314151617181920interface AxiosOptions &#123;&#125;type AjaxOptions = &#123; axiosOptions: AxiosOptions; // é¢å¤–æ‰©å±•çš„æ”¾å…¥åˆ°å•ç‹¬çš„å±æ€§èŠ‚ç‚¹ä¸‹ extraOptions: &#123; [prop: string]: any &#125;; &#125;;type AjaxOptions1 = &#123; axiosOptions?: AxiosOptions; // ä¸è¦è¿™æ ·å†™ï¼Œå› ä¸ºaxiosOptionsæ‹¼å†™é”™è¯¯æ—¶ï¼Œtsä¸ä¼šæç¤º // å°½é‡æŠŠåç»­æ‰©å±•çš„å±æ€§ï¼Œç§»åŠ¨åˆ°ç‹¬ç«‹çš„å±æ€§èŠ‚ç‚¹ä¸‹ [prop: string]: any&#125;;const ajaxOptions: AjaxOptions1 = &#123; axiosOptions1: &#123;&#125;; // æœ¬æ„æ˜¯axiosOptionsï¼Œä½†æ˜¯tsä¸ä¼šæç¤º&#125; !çš„ä½¿ç”¨ ! æ ‡è¯†ç¬¦å‘Šè¯‰tsç¼–è¯‘å™¨ï¼Œå£°æ˜çš„å˜é‡æ²¡æœ‰é—®é¢˜ï¼Œå†è¿è¡ŒæœŸä¸ä¼šæŠ¥é”™ã€‚ 12345678910111213141516class BaseSelect extends Vue &#123; options: string[]; // è¿™é‡Œä¼šæç¤ºæ²¡æœ‰åœ¨constructorä¸­åˆå§‹åŒ– created() &#123; this.options = ['inited'] &#125;&#125;class BaseSelect extends Vue &#123; options!: string[]; // ä½¿ç”¨ ! å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ created() &#123; this.options = ['inited'] &#125;&#125; thisçš„ä½¿ç”¨ å¯¹äºç‹¬ç«‹ä½¿ç”¨çš„å‡½æ•°ï¼Œå¯ä»¥å£°æ˜æŒ‡å®šçš„è°ƒç”¨ä¸Šä¸‹æ–‡ 12345678910class Handler &#123; info: string; // å£°æ˜æŒ‡å®šçš„thisä¸Šä¸‹æ–‡ onClickBad(this: Handler, e: Event) &#123; // oops, used this here. using this callback would crash at runtime this.info = e.message; &#125;&#125;let h = new Handler();uiElement.addClickListener(h.onClickBad); // error! å£°æ˜åˆå¹¶ï¼ˆæ‰©å±•Vueå£°æ˜ï¼‰ æ¥çœ‹çœ‹ä½¿ç”¨åœºæ™¯ï¼Œæ‰©å±•vueï¼Œåœ¨vueä¸Šæ·»åŠ å…¨å±€çš„å±æ€§ã€‚ 12345678910111213// vueçš„å£°æ˜åœ¨ vue/types/vue.d.tsdeclare module 'vue/types/vue' &#123; // ç›¸å½“äºVue.$eventBus interface Vue &#123; $eventBus: Vue; &#125; // ç›¸å½“äºåœ¨Vue.prototype.$eventBus interface VueConstructor &#123; $eventBus: Vue; &#125;&#125; æ€»ç»“ TypeScriptå£°æ˜è¿˜æœ‰å¾ˆå¤šé«˜çº§çš„ç”¨æ³•ï¼Œç›®å‰æˆ‘ä¹Ÿæ²¡æœ‰ç”¨åˆ°é‚£ä¹ˆå¤šï¼Œåœ¨æˆ‘çº ç»“ä¸ä¼šå†™å£°æ˜çš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šçœ‹çœ‹åˆ«äººçš„å£°æ˜æ–‡ä»¶æ—¶æ€ä¹ˆå†™çš„ã€‚ æ³¨æ„ï¼šå°½é‡ä¸è¦æŠŠè§£æ„å’Œå£°æ˜å†™åœ¨ä¸€èµ·ï¼Œå¯è¯»æ€§æå·®ã€‚ 12345678910class Node &#123; onNodeCheck(checkedKeys: any, &#123; // è§£æ„ checked, checkedNodes, node, event, &#125; : &#123; // å£°æ˜ node: any; [key: string]: any; &#125; ) &#123; &#125;&#125;","tags":[{"name":"typescript","slug":"typescript","permalink":"https://betgar.github.io/tags/typescript/"}]},{"title":"åœ¨çº¿å·¥å…·æ”¶é›†","date":"2019-08-13T10:00:00.000Z","path":"2019/08/13/online-tools-collection/","text":"åœ¨çº¿å·¥å…·æ”¶é›† è…¾è®¯å¼€å‘è€…æ‰‹å†Œ https://cloud.tencent.com/developer/devdocs å°è®°ä¸­æ–‡ https://docschina.org/ learn git https://learngitbranching.js.org/ Babelåœ¨çº¿ç¼–è¯‘ https://babeljs.io/repl polyfill online https://polyfill.io/v3/ https://polyfill.alicdn.com/polyfill.min.js browserlist https://browserl.ist/ gitignore https://www.gitignore.io/ webpack config https://www.nkgr.app/webpack-config-generator/ https://doug2k1.github.io/webpack-generator/ Type Searchï¼š typescriptçš„ç±»å‹æ–‡ä»¶æœç´¢ https://github.com/DefinitelyTyped/DefinitelyTyped https://microsoft.github.io/TypeSearch/ TypeScript starter https://www.tslang.cn/samples/index.html https://www.typescriptlang.org/play/index.html wapm(webassembly package manager) https://wapm.io/ WasmExplorer(waåœ¨çº¿ç¼–è¯‘å™¨) http://mbebenita.github.io/WasmExplorer/ draw.io https://www.draw.io/ sql.js http://kripken.github.io/sql.js/examples/GUI/ uTools https://u.tools/ online tools http://tool.oschina.net/ jsnice: å¯ä»¥åç¼–è¯‘æ··æ·†è¿‡çš„ä»£ç  http://jsnice.org/ Online JavaScript Beautifier https://beautifier.io/ åœ¨çº¿å·¥å…· https://tool.lu/index.html CSS, JavaScript å‹ç¼©, ç¾åŒ–, åŠ å¯†, è§£å¯† https://tool.css-js.com/ cssdb https://cssdb.org/ https://preset-env.cssdb.org/features css playground https://preset-env.cssdb.org/playground stylelint https://stylelint.io/demo cssnano https://cssnano.co/guides/optimisations/ node green https://node.green/ ecmascript-compat-table http://kangax.github.io/compat-table/es6/ DOM lint https://kangax.github.io/domlint/ es-checker http://ruanyf.github.io/es-checker/index.cn.html htmlhint https://htmlhint.io/ htmllint http://htmllint.github.io/ redis http://try.redis.io/ mdown nice https://mdnice.com/ m2c (markdown to confluence) https://zhuyi731.github.io/m2c-webpage/ https://chunpu.github.io/markdown2confluence/browser/ npm package markdown2confluence-cws npm trends https://www.npmtrends.com px2em https://vasilis.nl/nerd/code/emcalc/","tags":[{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"}]},{"title":"å¸¸ç”¨çš„npmçš„packages mirroré…ç½®","date":"2019-08-12T10:00:00.000Z","path":"2019/08/12/npm-packages-mirror-config/","text":"å¸¸ç”¨çš„npmçš„packages mirroré…ç½® chrome driver https://www.npmjs.com/package/chromedriver 12345# å®‰è£…æŒ‡å®šåœ°å€npm install chromedriver --chromedriver_cdnurl=https://npm.taobao.org/mirrors/chromedriver# ç›´æ¥è®¾ç½®`.npmrc`å˜é‡npm config set chromedriver_cdnurl \"https://npm.taobao.org/mirrors/chromedriver\" 12# æ·»åŠ ç¯å¢ƒå˜é‡ CHROMEDRIVER_CDNURLCHROMEDRIVER_CDNURL=https://npm.taobao.org/mirrors/chromedriver npm install chromedriver electron https://npm.taobao.org/mirrors/electron/ 1234npm config set electron_mirror https://npm.taobao.org/mirrors/electron/# æˆ–è€…ELECTRON_MIRROR=\"https://npm.taobao.org/mirrors/electron/\" npm i electron phantomjs https://github.com/Medium/phantomjs 1234567npm install phantomjs-prebuilt --phantomjs_cdnurl=https://npm.taobao.org/mirrors/phantomjs/# .npmrc æ–¹å¼npm config set phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/# PATHPHANTOMJS_CDNURL=https://npm.taobao.org/mirrors/phantomjs/ node-sass https://github.com/sass/node-sass 123npm install -g mirror-config-china --registry=http://registry.npm.taobao.org# .npmrcnpm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/","tags":[{"name":"npm","slug":"npm","permalink":"https://betgar.github.io/tags/npm/"}]},{"title":"Polyfill æ–¹æ¡ˆçš„è¿‡å»ã€ç°åœ¨å’Œæœªæ¥","date":"2019-08-04T11:00:00.000Z","path":"2019/08/04/polyfill-passed-current-future/","text":"Polyfill æ–¹æ¡ˆçš„è¿‡å»ã€ç°åœ¨å’Œæœªæ¥ ä½œè€…ï¼šsorrycc æ—¥æœŸï¼š2019-01-29 01:31:04 åŸæ–‡åœ°å€: https://github.com/sorrycc/blog/issues/80 blog: https://gitissue.com/issues/5c4fe57daba98d5c7d6f4e2c ä»»ä½•ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œæ·±æŒ–ä¸‹å»ï¼Œä¹Ÿæ˜¯éå¸¸æœ‰æ„æ€çš„ã€‚ ä»€ä¹ˆæ˜¯è¡¥ä¸ï¼Ÿ A polyfill, or polyfiller, is a piece of code (or plugin) that provides the technology that you, the developer, expect the browser to provide natively. Flattening the API landscape if you will. æˆ‘ä»¬å¸Œæœ›æµè§ˆå™¨æä¾›ä¸€äº›ç‰¹æ€§ï¼Œä½†æ˜¯æ²¡æœ‰ï¼Œç„¶åæˆ‘ä»¬è‡ªå·±å†™ä¸€æ®µä»£ç æ¥å®ç°ä»–ï¼Œé‚£è¿™æ®µä»£ç å°±æ˜¯è¡¥ä¸ã€‚ æ¯”å¦‚ IE11 ä¸æ”¯æŒ Promiseï¼Œè€Œæˆ‘ä»¬åˆéœ€è¦åœ¨é¡¹ç›®é‡Œç”¨åˆ°ï¼Œå†™äº†è¿™æ ·çš„ä»£ç ï¼š 123456&lt;script&gt; Promise.resolve(&apos;bar&apos;) .then(function(foo) &#123; document.write(foo); &#125;);&lt;/script&gt; è¿™æ—¶åœ¨ IE ä¸‹è¿è¡Œå°±ä¼šæŠ¥é”™äº†ï¼Œ [ img](https://camo.githubusercontent.com/348c3453fc18218b9a60e6eb67821c83e1ec8bdf/68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f7a6f732f726d73706f7274616c2f6b766d4e755778747758636e764f574f6c6f4d752e706e67) ç„¶ååœ¨æ­¤ä¹‹å‰åŠ ä¸Šè¡¥ä¸ï¼Œ 1234567&lt;script src=&quot;https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Promise.resolve(&apos;bar&apos;) .then(function(foo) &#123; document.write(foo); &#125;);&lt;/script&gt; åˆ·æ–°æµè§ˆå™¨ï¼Œå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œ [ img](https://camo.githubusercontent.com/d8aae6399751c7cc33c634397162e0d3dfd3f31e/68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f7a6f732f726d73706f7274616c2f6c6b7a4e70546878667a7565506a51736f586a792e706e67) è¿‡å»shim + shamå¦‚æœä½ æ˜¯ä¸€ä¸ª 3 å¹´é™ˆ + çš„å‰ç«¯ï¼Œåº”è¯¥ä¼šæœ‰å¬è¯´è¿‡ shimã€shamã€es5-shim å’Œ es6-shim ç­‰ç­‰ç°åœ¨çœ‹èµ·æ¥å¾ˆå¤è€çš„è¡¥ä¸æ–¹å¼ã€‚ é‚£ä¹ˆï¼Œshim å’Œ sham æ˜¯å•¥ï¼Ÿåˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ shim æ˜¯èƒ½ç”¨çš„è¡¥ä¸ sham é¡¾åæ€ä¹‰ï¼Œæ˜¯å‡çš„æ„æ€ï¼Œæ‰€ä»¥ sham æ˜¯ä¸€äº›å‡çš„æ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨ä¿è¯ä¸å‡ºé”™ï¼Œä½†ä¸èƒ½ç”¨ã€‚è‡³äºä¸ºå•¥ä¼šæœ‰ shamï¼Œå› ä¸ºæœ‰äº›æ–¹æ³•çš„ä½ç«¯æµè§ˆå™¨é‡Œæ ¹æœ¬å®ç°ä¸äº† babel-polyfill.jsåœ¨ shim å’Œ sham ä¹‹åï¼Œè¿˜æœ‰ä¸€ç§è¡¥ä¸æ–¹å¼æ˜¯å¼•å…¥åŒ…å«æ‰€æœ‰è¯­è¨€å±‚è¡¥ä¸çš„ babel-polyfill.jsã€‚æ¯”å¦‚ï¼š 1&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.2.5/polyfill.js\"&gt;&lt;/script&gt; ç„¶åå°± es6ã€es7 ç‰¹æ€§éšä¾¿å†™äº†ã€‚ ä½†ç¼ºç‚¹æ˜¯ï¼Œbabel-polyfill åŒ…å«æ‰€æœ‰è¡¥ä¸ï¼Œä¸ç®¡æµè§ˆå™¨æ˜¯å¦æ”¯æŒï¼Œä¹Ÿä¸ç®¡ä½ çš„é¡¹ç›®æ˜¯å¦æœ‰ç”¨åˆ°ï¼Œéƒ½å…¨é‡å¼•äº†ï¼Œæ‰€ä»¥å¦‚æœä½ çš„ç”¨æˆ·å…¨éƒ½ä¸å·®æµé‡å’Œå¸¦å®½ï¼ˆæ¯”å¦‚å†…éƒ¨åº”ç”¨ï¼‰ï¼Œå°½å¯ä»¥ç”¨è¿™ç§æ–¹å¼ã€‚ ç°åœ¨ç°åœ¨è¿˜æ²¡æœ‰é“¶å¼¹ï¼Œå„ç§æ–¹æ¡ˆç™¾èŠ±é½æ”¾ã€‚ @babel/preset-env + useBuiltins: entry + targetsbabel-polyfill åŒ…å«æ‰€æœ‰è¡¥ä¸ï¼Œé‚£æˆ‘åªéœ€è¦æ”¯æŒæŸäº›æµè§ˆå™¨çš„æŸäº›ç‰ˆæœ¬ï¼Œæ˜¯å¦æœ‰åŠæ³•åªåŒ…å«è¿™äº›æµè§ˆå™¨çš„è¡¥ä¸ï¼Ÿè¿™å°±æ˜¯ @babel/preset-env + useBuiltins: entry + targets é…ç½®çš„æ–¹æ¡ˆã€‚ æˆ‘ä»¬å…ˆåœ¨å…¥å£æ–‡ä»¶é‡Œå¼•å…¥ @babel/polyfillï¼Œ 1import '@babel/polyfill'; ç„¶åé…ç½® .babelrcï¼Œæ·»åŠ  preset @babel/preset-envï¼Œå¹¶è®¾ç½® useBuiltIns å’Œ targetsï¼Œ 12345678&#123; \"presets\": [ [\"@babel/env\", &#123; useBuiltIns: 'entry', targets: &#123; chrome: 62 &#125; &#125;] ]&#125; useBuiltIns: entry çš„å«ä¹‰æ˜¯æ‰¾åˆ°å…¥å£æ–‡ä»¶é‡Œå¼•å…¥çš„ @babel/polyfillï¼Œå¹¶æ›¿æ¢ä¸º targets æµè§ˆå™¨/ç¯å¢ƒéœ€è¦çš„è¡¥ä¸åˆ—è¡¨ã€‚ æ›¿æ¢åçš„å†…å®¹ï¼Œæ¯”å¦‚ï¼š 123import \"core-js/modules/es7.string.pad-start\";import \"core-js/modules/es7.string.pad-end\";... è¿™æ ·å°±åªä¼šå¼•å…¥ chrome@62 åŠä»¥ä¸Šæ‰€éœ€è¦çš„è¡¥ä¸ï¼Œä»€ä¹ˆ Promise ä¹‹ç±»çš„éƒ½ä¸ä¼šå†æ‰“åŒ…å¼•å…¥ã€‚ æ˜¯ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Ÿ ğŸ˜„ æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ ğŸ¤” ç»†ç»†æƒ³æƒ³ï¼Œå…¶å®è¿˜æœ‰ä¸å°‘é—®é¢˜ï¼Œ ç‰¹æ€§åˆ—è¡¨æ˜¯æŒ‰æµè§ˆå™¨æ•´ç†çš„ï¼Œé‚£æ€ä¹ˆçŸ¥é“å“ªäº›ç‰¹æ€§æˆ‘ç”¨äº†ï¼Œå“ªäº›æ²¡æœ‰ç”¨åˆ°ï¼Œæ²¡æœ‰ç”¨åˆ°çš„éƒ¨åˆ†ä¹Ÿå¼•å…¥äº†æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯å†—ä½™ï¼Ÿ@babel/preset-env æœ‰æä¾› exclude çš„é…ç½®ï¼Œå¦‚æœæˆ‘é…ç½®äº† excludeï¼Œåé¢æ˜¯å¦å¾—å°å¿ƒç¿¼ç¿¼åœ°ç¡®ä¿ä¸è¦ç”¨åˆ° exclude æ‰çš„ç‰¹æ€§ è¡¥ä¸æ˜¯æ‰“åŒ…åˆ°é™æ€æ–‡ä»¶çš„ï¼Œå¦‚æœæˆ‘é…ç½® targets ä¸º chrome: 62, ie: 9ï¼Œé‚£æ„å‘³ç€ chrome 62 ä¹Ÿå¾—è½½å…¥ ie 9 ç›¸å…³çš„è¡¥ä¸ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä»½å†—ä½™ æˆ‘ä»¬æ˜¯åŸºäº core-js æ‰“çš„è¡¥ä¸ï¼Œæ‰€ä»¥åªä¼šåŒ…å« ecmascript è§„èŒƒé‡Œçš„å†…å®¹ï¼Œå…¶ä»–æ¯”å¦‚è¯´ dom é‡Œçš„è¡¥ä¸ï¼Œå°±ä¸åœ¨æ­¤åˆ—ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ æ‰‹åŠ¨å¼•å…¥ä¼ ç»Ÿçš„æ‰‹åŠ¨æ‰“è¡¥ä¸æ–¹æ¡ˆè™½ç„¶ä½æ•ˆï¼Œä½†ç›´è§‚æœ‰ç”¨ã€‚æœ‰äº›éå¸¸åœ¨ä¹æ€§èƒ½çš„åœºæ™¯ï¼Œæ¯”å¦‚æˆ‘ä»¬å…¬å¸çš„éƒ¨åˆ†æ— çº¿ H5 ä¸šåŠ¡ï¼Œä»–ä»¬å®å¯ç‰ºç‰²æ•ˆç‡ä¹Ÿè¦è¿½æ±‚æ€§èƒ½ã€‚æ‰€ä»¥ä»–ä»¬çš„è¡¥ä¸æ–¹æ¡ˆæ˜¯æ‰‹åŠ¨å¼•å…¥ core-js/modules ä¸‹çš„æ–‡ä»¶ï¼Œç¼ºå•¥åŠ å•¥å°±å¥½ã€‚ æ³¨æ„ï¼š core-js ç›®å‰ç”¨çš„æ˜¯ v2 ç‰ˆæœ¬ï¼Œä¸æ˜¯ v3-beta è¡¥ä¸ç”¨çš„æ˜¯ core-js/modulesï¼Œè€Œä¸æ˜¯ core-js/libraryã€‚ä¸ºå•¥ï¼ŸäºŒè€…åˆæœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿ åœ¨çº¿è¡¥ä¸ï¼Œæ¯”å¦‚ï¼špolyfill.ioå‰é¢çš„æ‰‹åŠ¨å¼•å…¥è§£å†³çš„æ˜¯ç‰¹æ€§åˆ—è¡¨çš„é—®é¢˜ï¼Œæœ‰äº†ç‰¹æ€§åˆ—è¡¨ï¼Œè¦åšåˆ°æŒ‰éœ€ä¸‹è½½ï¼Œå°±éœ€è¦ç”¨åˆ°åœ¨çº¿çš„è¡¥ä¸æœåŠ¡äº†ã€‚ç›®å‰æœ€æµè¡Œçš„åº”è¯¥å°±æ˜¯ polyfill.ioï¼Œæä¾›çš„æ˜¯ cdn æœåŠ¡ï¼Œæœ‰äº›ç«™ç‚¹åœ¨ç”¨ï¼Œä¾‹å¦‚ https://spectrum.chat/ã€‚å¦å¤–ï¼Œpolyfill.io è¿˜å¼€æºäº† polyfill-service ä¾›æˆ‘ä»¬è‡ªå·±æ­å»ºä½¿ç”¨ã€‚ ä½¿ç”¨ä¸Šï¼Œæ¯”å¦‚ï¼š 1&lt;script src=\"https://polyfill.io/v3/polyfill.min.js?features=default%2CPromise\"&gt;&lt;/script&gt; ç„¶ååœ¨ Chrome@71 ä¸‹çš„è¾“å‡ºæ˜¯ï¼š 1/* Disable minification (remove `.min` from URL path) for more info */ å•¥éƒ½æ²¡æœ‰ï¼Œå› ä¸º Promsie ç‰¹æ€§ Chrome@71 å·²ç»æ”¯æŒäº†ã€‚ æœªæ¥å…³äºè¡¥ä¸æ–¹æ¡ˆçš„æœªæ¥ï¼Œæˆ‘è§‰å¾—æŒ‰éœ€ç‰¹æ€§æ¢æµ‹ + åœ¨çº¿è¡¥ä¸æ‰æ˜¯ç»ˆææ–¹æ¡ˆã€‚ æŒ‰éœ€ç‰¹æ€§æ¢æµ‹ä¿è¯ç‰¹æ€§çš„æœ€å°é›†ï¼›åœ¨çº¿è¡¥ä¸åšæŒ‰éœ€ä¸‹è½½ã€‚ æŒ‰éœ€ç‰¹æ€§æ¢æµ‹å¯ä»¥ç”¨ @babel/preset-env é…ä¸Š targets ä»¥åŠè¯•éªŒé˜¶æ®µçš„ useBuiltIns: usageï¼Œä¿éšœç‰¹æ€§é›†çš„æœ€å°åŒ–ã€‚ä¹‹æ‰€ä»¥è¯´æ˜¯æœªæ¥ï¼Œå› ä¸º JavaScript çš„åŠ¨æ€æ€§ï¼Œè¯­æ³•æ¢æµ‹ä¸å¤ªå¯èƒ½æ¢æµ‹å‡ºæ‰€æœ‰ç‰¹æ€§ï¼Œä½†ä¸Šäº† TypeScript ä¹‹åå¯èƒ½ä¼šå¥½ä¸€äº›ã€‚å¦å¤–ï¼Œè¦æ³¨æ„ä¸€ä¸ªå‰ææ˜¯ node_modules ä¹Ÿéœ€è¦èµ° babel ç¼–è¯‘ï¼Œä¸ç„¶ node_modules ä¸‹ç”¨åˆ°çš„ç‰¹æ€§ä¼šæ¢æµ‹ä¸å‡ºæ¥ã€‚ åœ¨çº¿è¡¥ä¸å¯ä»¥ç”¨ç±»ä¼¼å‰é¢ä»‹ç»çš„ https://polyfill.io/ æä¾›çš„æ–¹æ¡ˆï¼Œè®©æµè§ˆå™¨åªä¸‹è½½å¿…è¦çš„è¡¥ä¸ï¼Œé€šå¸¸å¤§å…¬å¸ç”¨çš„è¯ä¼šéƒ¨ç½²ä¸€ä»½åˆ°è‡ªå·±çš„ cdn ä¸Šã€‚ï¼ˆé˜¿é‡Œå¥½åƒæœ‰å›¢é˜Ÿéƒ¨ç½²äº†ï¼Œä½†ä¸€æ—¶é—´æƒ³ä¸èµ·åœ°å€äº†ã€‚ï¼‰ FAQç»„ä»¶åº”è¯¥åŒ…å«è¡¥ä¸å—ï¼Ÿæ¯”å¦‚ dva é‡Œç”¨äº† Promiseï¼Œæ˜¯å¦åº”è¯¥æŠŠ Promise æ‰“åœ¨ dva çš„äº§å‡ºé‡Œï¼Ÿä¸åº”è¯¥ã€‚ æ¯”å¦‚é¡¹ç›®äº†ä¾èµ–äº† a å’Œ bï¼Œa å’Œ b éƒ½åŒ…å« Promise çš„è¡¥ä¸ï¼Œå°±ä¼šæœ‰å†—ä½™ã€‚æ‰€ä»¥ç»„ä»¶ä¸åº”è¯¥åŒ…å«è¡¥ä¸ï¼Œè¡¥ä¸åº”è¯¥ç”±é¡¹ç›®å†³å®šã€‚ ç»„ä»¶ä¸åŒ…å«è¡¥ä¸ï¼Ÿé‚£éœ€è¦å¤„ç†å•¥ï¼Ÿé€šå¸¸ä¸éœ€è¦åšç‰¹æ®Šå¤„ç†ï¼Œä½†æ˜¯æœ‰äº›è¯­è¨€ç‰¹æ€§çš„å®ç°ä¼šéœ€è¦å¼•å…¥é¢å¤–çš„ helper æ–¹æ³•ã€‚ æ¯”å¦‚ï¼š 1console.log(&#123; ...a &#125;); ç¼–è¯‘åæ˜¯ï¼š 12345function _objectSpread(target) &#123; for (var i = 1; i &lt; arguments.length; i++) &#123; var source = arguments[i] != null ? arguments[i] : &#123;&#125;; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') &#123; ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) &#123; return Object.getOwnPropertyDescriptor(source, sym).enumerable; &#125;)); &#125; ownKeys.forEach(function (key) &#123; _defineProperty(target, key, source[key]); &#125;); &#125; return target; &#125;function _defineProperty(obj, key, value) &#123; if (key in obj) &#123; Object.defineProperty(obj, key, &#123; value: value, enumerable: true, configurable: true, writable: true &#125;); &#125; else &#123; obj[key] = value; &#125; return obj; &#125;console.log(_objectSpread(&#123;&#125;, a)); ç„¶åæˆ‘ä»¬ä¼šæœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½å¼•å…¥ä¸€é helper æ–¹æ³•ï¼Œä¼šæœ‰å¾ˆå¤šå†—ä½™ã€‚æ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ @babel/plugin-transform-runtime æ¥å¤ç”¨è¿™äº› helper æ–¹æ³•ã€‚ åœ¨ .babelrc é‡Œé…ç½®ï¼š 12345&#123; \"plugins\": [ \"@babel/transform-runtime\" ]&#125; ç¼–è¯‘åæ˜¯ï¼š 1234var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");var _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));console.log((0, _objectSpread2.default)(&#123;&#125;, a)); æ‰€ä»¥ï¼Œç»„ä»¶ç¼–è¯‘åªè¦ç¡®ä¿æ²¡æœ‰å†—ä½™çš„ helper æ–¹æ³•å°±å¥½äº†ã€‚ core-js/library or core-js/modulesï¼Ÿcore-js æä¾›äº†ä¸¤ç§è¡¥ä¸æ–¹å¼ã€‚ core-js/libraryï¼Œé€šè¿‡ helper æ–¹æ³•çš„æ–¹å¼æä¾› core-js/moduleï¼Œé€šè¿‡è¦†ç›–å…¨å±€å˜é‡çš„æ–¹å¼æä¾› ä¸¾ä¸ªä¾‹å­ï¼Œ 12import '@babel/polyfill';Promise.resolve('foo'); .babelrc é…ï¼š 12345678910&#123; \"presets\": [ [\"@babel/env\", &#123; \"useBuiltIns\": \"entry\", \"targets\": &#123; \"ie\": 9 &#125; &#125;] ]&#125; ç¼–è¯‘ç»“æœæ˜¯ï¼š 12345require(\"core-js/modules/es6.promise\");require(\"core-js/modules/es7.promise.finally\");// æ­¤å¤„çœç•¥æ•°åä¸ªå…¶ä»–è¡¥ä¸...Promise.resolve('foo'); ç„¶åæŠŠæ–‡ä»¶å†…å®¹æ¢æˆï¼š 12// import '@babel/polyfill';Promise.resolve('foo'); .babelrc é…ï¼š 1234567&#123; \"plugins\": [ [\"@babel/transform-runtime\", &#123; \"corejs\": 2 &#125;] ]&#125; ç¼–è¯‘ç»“æœæ˜¯ï¼š 1234var _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");var _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));_promise.default.resolve('foo'); ç„¶å @babel/runtime-corejs2/core-js/promise çš„å†…å®¹æ˜¯ï¼š 1module.exports = require(\"core-js/library/fn/promise\"); ç›®å‰æ¨èæ˜¯ç”¨ core-js/modulesï¼Œå› ä¸º node_modules ä¸èµ° babel ç¼–è¯‘ï¼Œæ‰€ä»¥ core-js/library çš„æ–¹å¼æ— æ³•ä¸ºä¾èµ–åº“æä¾›è¡¥ä¸ã€‚ é core-js é‡Œçš„ç‰¹æ€§ï¼Œå¦‚ä½•æ‰“è¡¥ä¸ï¼Ÿæ‰‹åŠ¨å¼•å…¥ï¼Œæ¯”å¦‚ Intl.jsã€URL ç­‰ã€‚ä½†æ˜¯å¾—å°å¿ƒæœ‰äº›è§„èŒƒåç»­åŠ å…¥ ecmascript ä¹‹åå¯èƒ½çš„å†—ä½™ï¼Œæ¯”å¦‚ URLã€‚ å‚è€ƒ http://2ality.com/2011/12/shim-vs-polyfill.html https://babeljs.io/docs/en/next/babel-preset-env.html https://github.com/zloirock/core-js/tree/v2","tags":[{"name":"babel","slug":"babel","permalink":"https://betgar.github.io/tags/babel/"}]},{"title":"ä¸€æ­¥ä¸€æ­¥é…ç½®Typescriptå·¥ç¨‹","date":"2019-08-01T05:00:00.000Z","path":"2019/08/01/the-steps-of-configuration-typescript/","text":"ä¸€æ­¥ä¸€æ­¥é…ç½®Typescriptå·¥ç¨‹ è¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹æœ¬å·¥ç¨‹é…ç½®çš„æ­¥éª¤ï¼Œæœ‰å…´è¶£å¯ä»¥äº†è§£ã€‚ READMEæ¨¡æ¿é€‰æ‹© READMEæ¨¡æ¿ LICENSEæ¨¡æ¿é€‰æ‹© CHOOSE LICENSE é¡¹ç›®åˆå§‹åŒ– åˆå§‹åŒ–project 12345# åˆå§‹åŒ–ä»“åº“git init# åˆå§‹åŒ–packageä¿¡æ¯npm init .gitignore gitignoreåœ¨çº¿ç”Ÿæˆ .editorconfig EditorConfigç½‘ç«™ .browserlistrcç›®æ ‡ç¯å¢ƒåœ¨çº¿ç”ŸæˆåŠæŸ¥çœ‹æµè§ˆå™¨è¦†ç›–æƒ…å†µ Babelå®‰è£…å’Œé…ç½® Babelçš„ç›¸å…³æ–‡æ¡£é“¾æ¥ babel presetsæ–‡æ¡£ babel-polyfillæ–‡æ¡£ babel configæ–‡æ¡£ babel proposalæ–‡æ¡£ å®‰è£… å®‰è£…Babel 1npm i --save-dev @babel/core @babel/cli @babel/preset-env @babel/preset-typescript å®‰è£…proposal 1npm i --save-dev @babel/plugin-proposal-class-properties @babel/plugin-proposal-object-rest-spread å®‰è£…polyfill @babel/polyfillåœ¨babel v7.4.0 ä¹‹åä¸ºdeprecated 123# å¦‚æœéœ€è¦polyfill# æ³¨æ„ï¼šcore-jsç‰ˆæœ¬, babel 7.4.0ä¹‹å@babel/polyfillè¿‡æ—¶ï¼Œé»˜è®¤ä¾èµ–core-js@2ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŒ‡å®š3npm i @babel/polyfill core-js 1234567// å¦‚æœä¹‹å‰åœ¨entryè¿™ä¹ˆå¼•å…¥polyfill// beforeimport \"@babel/polyfill\";// ç°åœ¨æ›¿æ¢ä¸ºè¿™ç§æ–¹å¼ï¼ˆcore-js@3ï¼‰import \"core-js/stable\";import \"regenerator-runtime/runtime\"; Babelé…ç½® ä»…ä¾›å‚è€ƒï¼Œä½ å¯ä»¥è‡ªå·±è‡ªå®šä¹‰ 12345678910111213141516171819202122232425262728// babel.config.js// targetsæ¨èä½¿ç”¨.browserslistrcæ›¿æ¢const presets = [ [ '@babel/preset-env', &#123; useBuiltIns: 'usage', corejs: 3, &#125;, ], [ '@babel/preset-typescript', ],];const plugins = [ '@babel/plugin-proposal-class-properties', '@babel/plugin-proposal-object-rest-spread',];module.exports = &#123; presets, plugins, exclude: [ 'src/**/*.spec.(js|ts)', 'src/**/*.test.(js|ts)', ], comments: false,&#125;; eslinté…ç½®å®‰è£…eslintå¹¶åˆå§‹åŒ– å› ä¸ºTypeScriptå®˜æ–¹å›¢é˜Ÿé€‰æ‹©æ”¯æŒeslintï¼Œæ‰€ä»¥ä»¥åè¿˜æ˜¯é€‰æ‹©eslintç©å§ã€‚12345# å®‰è£…npm i -D eslint# ç”Ÿæˆé»˜è®¤çš„é…ç½®ï¼Œå› ä¸ºæ ¼å¼åŒ–æ˜¯tsï¼Œé»˜è®¤å…ˆä¸é€‰ä»£ç é£æ ¼npx eslint --init å®‰è£…TypeScriptè§£æå™¨å’Œæ’ä»¶ typescript-eslintå› ä¸ºeslintçš„è§£æå™¨ä¸è®¤è¯†TypeScriptï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦æ›¿æ¢æ‰é»˜è®¤çš„parser12# @typescript-eslint/parsernpm i --save-dev typescript @typescript-eslint/parser ä»£ç é£æ ¼(typescript-eslint + Prettier + airbnb)@typescript-eslint/eslint-pluginæ–‡æ¡£ @typescript-eslint/eslint-pluginæ”¯æŒçš„è§„åˆ™ å»ºè®®ä»¥åé€‰æ‹©eslint-config-alloy 12# å®‰è£…@typescript-eslint/eslint-pluginnpm i --save-dev @typescript-eslint/eslint-plugin Prettierä¸€èµ·ä½¿ç”¨ï¼ˆå¯é€‰ï¼‰1npm i --save-dev eslint-config-prettier airbnbä¸€èµ·ä½¿ç”¨ï¼ˆå¯é€‰ï¼‰ eslint-config-airbnbæ–‡æ¡£ 12# æ³¨æ„ï¼šå®˜æ–¹æ–‡æ¡£è¦æ±‚npm 5+npx install-peerdeps --dev eslint-config-airbnb eslintçš„æœ€ç»ˆçš„é…ç½®12345678910111213141516171819202122232425262728// .eslintrc.jsmodule.exports = &#123; parser: '@typescript-eslint/parser', // è§£æå™¨ plugins: ['@typescript-eslint'], extends: [ 'airbnb', 'plugin:@typescript-eslint/recommended', 'prettier', 'prettier/@typescript-eslint', ], env: &#123; browser: true, es6: true, node: true, &#125;, globals: &#123; Atomics: 'readonly', SharedArrayBuffer: 'readonly', &#125;, parserOptions: &#123; ecmaVersion: 2018, sourceType: 'module', &#125;, rules: &#123; '@typescript-eslint/no-explicit-any': ['off'], '@typescript-eslint/no-var-requires': ['off'] &#125;,&#125;; å› ä¸ºeslinté»˜è®¤è¯†åˆ«.jsç»“å°¾çš„æ–‡ä»¶ï¼Œè¿™é‡Œéœ€è¦æŒ‡å®šä¸‹æ–‡ä»¶åç¼€eslintä¹‹åæ˜¯æ–‡ä»¶å¤¹, â€“extå‚æ•°æ‰ç”Ÿæ•ˆï¼Œå¦‚æœæ˜¯å…·ä½“çš„æ­£åˆ™è¡¨è¾¾å¼åˆ™åŒ¹é…â€“extè¢«å¿½ç•¥123456// package.json&#123; \"scripts\":&#123; \"lint\": \"eslint src --ext .js,.ts,.tsx,.jsx\" &#125;&#125; TypeScripté…ç½® ç¼–è¯‘å™¨çš„optionsé…ç½® tsconfig.jsonåˆå§‹åŒ–1npx tsc --init --declaration --allowSyntheticDefaultImports --target esnext --outDir dist æ·»åŠ scriptså‘½ä»¤12345678910// package.json&#123; \"scripts\": &#123; \"checktypes\": \"tsc --noEmit\", \"checktypes:watch\": \"npm run checktype -- --watch\", \"build\": \"npm run build:types &amp;&amp; npm run build:js\", \"build:types\": \"tsc --emitDeclarationOnly\", \"build:js\": \"npx babel src --out-dir dist --source-maps inline --extensions .ts,.tsx\" &#125;&#125; package.jsonæŒ‡å®šå£°æ˜æ–‡ä»¶å…¥å£1234&#123; // å¦‚æœä¸æŒ‡å®šé»˜è®¤æŸ¥æ‰¾projectæ ¹ç›®å½•çš„index.d.ts \"types\": \"dist/index.d\"&#125; webpackå®‰è£…webpack1npm install --save-dev webpack webpack-cli babel-loader é…ç½®webpack1234567891011121314151617181920212223// webpack.config.jsconst path = require('path');module.exports = &#123; mode: \"production\", entry: './src/index', output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'app.bundle.js' &#125;, resolve: &#123; extensions: ['.ts', '.tsx', '.js', '.json'] &#125;, module: &#123; rules: [ &#123; test: /\\.(ts|js)x?$/, exclude: /node_modules/, loader: 'babel-loader' &#125; ] &#125;&#125;; 123456// package.json&#123; \"scripts\":&#123; \"bundle\": \"webpack\" &#125;&#125; çº¦å®šå¼æäº¤Conventional Commits commit message styleæ ¡éªŒ commitlintå®‰è£… 1npm install --save-dev @commitlint/config-conventional @commitlint/cli commitlinté…ç½® 1echo \"module.exports = &#123;extends: ['@commitlint/config-conventional']&#125;\" &gt; commitlint.config.js huskyå’Œlint-stagedå®‰è£… 12# å®‰è£…npm i husky lint-staged --save-dev huskyé…ç½® 123456789// package.json é…ç½®&#123;\"husky\": &#123; \"hooks\": &#123; \"commit-msg\": \"commitlint -E HUSKY_GIT_PARAMS\", // é…åˆcommitlintä½¿ç”¨ \"pre-commit\": \"lint-staged\" // é…ç½®lint-staged &#125; &#125;&#125; lint-stagedé…ç½® 123456789// package.json&#123; \"lint-staged\": &#123; \"src/**/*.&#123;js,ts,tsx,jsx&#125;\": [ \"eslint src --fix --ext .ts,.js,.tsx,.jsx\", // npm run lint \"git add\" ] &#125;&#125; TODO å®Œæˆäº†å¤§éƒ¨åˆ†å·¥ç¨‹æ¶‰åŠçš„å·¥å…·çš„é…ç½®ï¼Œè¿˜æœ‰æµ‹è¯•ç›¸å…³æ²¡æœ‰è¿›è¡Œé…ç½®ï¼Œä»¥åæœ‰æ—¶é—´ç»§ç»­ã€‚ [ ] jest [ ] jest + typescript","tags":[{"name":"typescript","slug":"typescript","permalink":"https://betgar.github.io/tags/typescript/"}]},{"title":"Babel 6 æ¾æ•£æ¨¡å¼","date":"2019-07-30T11:00:00.000Z","path":"2019/07/30/babel6-loose-mode/","text":"Babel 6 æ¾æ•£æ¨¡å¼ è‹±æ–‡åŸæ–‡ï¼šhttps://2ality.com/2015/12/babel6-loose-mode.html ä½œè€…ï¼šminwe ä¸­æ–‡ï¼šhttps://csspod.com/babel6-loose-mode/ æƒ³å¿…æ¯ä¸ªå†™ JavaScript çš„éƒ½æˆ–å¤šæˆ–å°‘äº†è§£è¿‡ ES5 å¼•å…¥çš„ä¸¥æ ¼æ¨¡å¼ï¼ŒBabel 6 åœ¨æŠŠ ES6+ ä»£ç è½¬æ¢ä¸º ES5 æ—¶ï¼Œä¹Ÿæä¾›äº†ã€Œæ¾æ•£æ¨¡å¼ã€ï¼ˆloose modeï¼‰çš„é€‰é¡¹ã€‚Babel çš„æ¾æ•£æ¨¡å¼å’Œ ES5 æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œè¿™é‡Œæ ES5 ä¸¥æ ¼æ¨¡å¼åªæ˜¯åœ¨æ¦‚å¿µä¸Šä½œä¸€ä¸ªæ¯”å¯¹ï¼Œæ–¹ä¾¿ç†è§£ Babel çš„æ¾æ•£æ¨¡å¼ã€‚ ä¸¤ç§æ¨¡å¼ä¸€äº› Babel æ’ä»¶æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼š æ ‡å‡†æ¨¡å¼ï¼šè½¬æ¢æ—¶å°½å¯èƒ½éµå¾ªã€æ¥è¿‘ ES6 è¯­ä¹‰ã€‚ æ¾æ•£æ¨¡å¼ï¼šè½¬æ¢ä¸ºç®€å•çš„ ES5 å®ç°ã€‚ æ¾æ•£æ¨¡å¼çš„ä¼˜ã€ç¼ºç‚¹æ˜¾è€Œæ˜“è§ï¼š ä¼˜ç‚¹ï¼šè½¬æ¢å‡ºæ¥çš„ä»£ç æ›´ç®€æ´ï¼Œæ²¡æœ‰ä¸ºäº†æ¥è¿‘ ES6 è€Œæ·»åŠ çš„ç¹æ‚é€»è¾‘ï¼Œæ–‡ä»¶æ›´å°ï¼Œè¿è¡Œé€Ÿåº¦æ›´å¿«ï¼Œå…¼å®¹æ€§æ›´å¥½ã€‚ ç¼ºç‚¹ï¼šä»¥åç›´æ¥ä½¿ç”¨åŸç”Ÿ ES6 æ—¶å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚éœ€è¦ç•™æ„ã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œä¸å»ºè®®ä½¿ç”¨æ¾æ•£æ¨¡å¼ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥ç»¼åˆè€ƒè™‘é¡¹ç›®çš„å¤æ‚ç¨‹åº¦ï¼Œç»“åˆå®é™…åšé€‰æ‹©ã€‚ é…ç½®æ–¹å¼å¯ä»¥ç›´æ¥ä½¿ç”¨ babel-preset-es2015-looseï¼š 12345&#123; \"presets\": [ \"es2015-loose\" ],&#125; å…·ä½“åˆ°æŸä¸ªæ’ä»¶æ—¶ï¼Œå¯ä»¥è®¾ç½® loose å‚æ•°ä¸º trueï¼š 123456&#123; \"plugins\": [ [\"transform-es2015-classes\", &#123;loose: true&#125;], \"transform-es2015-object-super\" ]&#125; è½¬æ¢ç»“æœæ¯”è¾ƒä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼š 123456789class Person &#123; constructor(name) &#123; this.name = name; &#125; sayHi() &#123; return `Hi, this is $&#123;this.name&#125;`; &#125;&#125; .babelrc é…ç½®ä¸ºæ ‡å‡†æ¨¡å¼æ—¶ï¼š 12345&#123; \"presets\": [ \"es2015\" ]&#125; è½¬æ¢ä»¥åçš„ä»£ç ä¸ºï¼š 12345678910111213141516171819202122\"use strict\";var _createClass = function () &#123; function defineProperties(target, props) &#123; for (var i = 0; i &lt; props.length; i++) &#123; var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); &#125; &#125; return function (Constructor, protoProps, staticProps) &#123; if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; &#125;; &#125;();function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(\"Cannot call a class as a function\"); &#125; &#125;var Person = function () &#123; function Person(name) &#123; _classCallCheck(this, Person); this.name = name; &#125; _createClass(Person, [&#123; key: \"sayHi\", value: function sayHi() &#123; return \"Hi, this is \" + this.name; &#125; &#125;]); return Person;&#125;(); ä½¿ç”¨ loose preset åï¼š 12345&#123; \"presets\": [ \"es2015-loose\" ]&#125; è½¬æ¢ç»“æœä¸ºï¼š 1234567891011121314151617\"use strict\";function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(\"Cannot call a class as a function\"); &#125; &#125;var Person = function () &#123; function Person(name) &#123; _classCallCheck(this, Person); this.name = name; &#125; Person.prototype.sayHi = function sayHi() &#123; return \"Hi, this is \" + this.name; &#125;; return Person;&#125;(); ç¡®å®æ›´åƒç†Ÿæ‚‰çš„ ES5 ä»£ç ã€‚ è¯¥å¦‚ä½•é€‰æ‹©ï¼Œè‡ªå·±çœ‹ç€åŠå’¯ã€‚ å…¶å®ƒhttps://fecoding.cn/2016/08/10/the-loose-mode-babel-6/","tags":[{"name":"babel","slug":"babel","permalink":"https://betgar.github.io/tags/babel/"}]},{"title":"node-glob-syntax","date":"2019-07-30T10:00:00.000Z","path":"2019/07/30/node-glob-syntax/","text":"Node globè¯­æ³• åŸæ–‡åœ°å€ï¼šhttps://github.com/isLishude/blog/issues/63 æœ¬æ–‡ ç”± Ivan Yan ç¿»è¯‘ï¼Œâ€œç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº«â€ï¼Œæ„è§åé¦ˆã€‚ é€šè¿‡æ˜Ÿå·ç­‰ shell æ‰€ç”¨çš„æ¨¡å¼åŒ¹é…æ–‡ä»¶ã€‚ è¿™æ˜¯ä¸€ä¸ª JavaScript ç‰ˆæœ¬çš„ glob å®ç°ã€‚ä½¿ç”¨ minimatch æ‰§è¡ŒåŒ¹é…æ“ä½œã€‚ è¯‘æ³¨ï¼šæ—©æœŸ Unix ï¼ˆç¬¬ 1-6 ç‰ˆï¼Œ1969-1975ï¼‰çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ä¾èµ–ç‹¬ç«‹ç¨‹åº /etc/glob å±•å¼€å‚æ•°ä¸­çš„é€šé…ç¬¦ã€‚è¿™ä¸ªç¨‹åºä¼šå±•å¼€é€šé…ç¬¦å¹¶æŠŠå±•å¼€åçš„æ–‡ä»¶åˆ—è¡¨ä¼ ç»™å‘½ä»¤ã€‚å®ƒçš„åå­—æ˜¯ â€œglobal commandâ€ çš„ç®€ç§°ã€‚åæ¥è¿™ä¸ªåŠŸèƒ½ç”±å·¥å…·å‡½æ•° glob() æä¾›ï¼Œè¢« shell ç­‰ç¨‹åºä½¿ç”¨ã€‚ï¼ˆè¯‘è‡ª WikiPedia#Origin)ã€‚ï¼‰ ç”¨æ³•ç”¨ npm å®‰è£…ï¼š 1npm i glob 12345678var glob = require(\"glob\")// options å¯é€‰glob(\"**/*.js\", options, function (er, files) &#123; // files æ˜¯ä¸€ä¸ªæ–‡ä»¶åæ•°ç»„ã€‚ // å¦‚æœè®¾ç½®äº†é€‰é¡¹ `nonull` å¹¶ä¸”æ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™ files æ˜¯ [\"**/*.js\"] // er æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡æˆ– nullã€‚&#125;) Glob åŸºç¡€â€œGlobsâ€ æ˜¯åƒè¿™æ ·çš„æ¨¡å¼ï¼šç”¨åœ¨å‘½ä»¤è¡Œä¸­çš„ ls *.js, ç”¨åœ¨ .gitignore æ–‡ä»¶ä¸­çš„ build/*ã€‚ åœ¨è§£æè·¯å¾„ä¸­çš„æ¨¡å¼å‰ï¼Œå…ˆå±•å¼€å¤§æ‹¬å·éƒ¨åˆ†ã€‚å¤§æ‹¬å·éƒ¨åˆ†ä»¥ { å¼€å§‹ï¼Œä»¥ } ç»“æŸï¼Œé‡Œé¢æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”åˆ—è¡¨ã€‚å¤§æ‹¬å·éƒ¨åˆ†å¯ä»¥åŒ…å«æ–œæ ï¼Œä¾‹å¦‚ a{/b/c,bcd} å°†å±•å¼€ä¸º a/b/c ä¸ abcdã€‚ è¯‘æ³¨ï¼šæ¯”å¦‚è·¯å¾„ â€œ/foo/barâ€, å…¶ä¸­ â€œfooâ€ ä¸ â€œbarâ€ æ˜¯è·¯å¾„ç‰‡æ®µ(path portion)ã€‚ ä¸‹é¢è¿™äº›å­—ç¬¦åœ¨è·¯å¾„ç‰‡æ®µä¸­æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼š * åŒ¹é…è·¯å¾„ç‰‡æ®µä¸­é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚ ? åŒ¹é…ä¸€ä¸ªå­—ç¬¦ã€‚ [...] åŒ¹é…ä¸€ä¸ªå­—ç¬¦é›†åˆï¼Œç±»ä¼¼äºæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦é›†åˆã€‚å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ ! æˆ– ^ é‚£ä¹ˆå®ƒåŒ¹é…ä¸€ä¸ªä¸åœ¨è¿™ä¸ªå­—ç¬¦é›†åˆå†…çš„å­—ç¬¦ã€‚ !(pattern|pattern|pattern) åŒ¹é…ä¸åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶ã€‚ ?(pattern|pattern|pattern) åŒ¹é…è¿™äº›æ¨¡å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ +(pattern|pattern|pattern) åŒ¹é…è¿™äº›æ¨¡å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ *(a|b|c) åŒ¹é…è¿™äº›æ¨¡å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ @(pattern|pat*|pat?erN) åŒ¹é…è¿™äº›æ¨¡å¼ä¸€æ¬¡ã€‚ ** å³ globstar æ¨¡å¼ï¼Œå¦‚æœè¿™æ˜¯å•ç‹¬çš„ä¸€ä¸ªè·¯å¾„ç‰‡æ–­ï¼Œåˆ™åŒ¹é…é›¶çº§æˆ–å¤šçº§ç›®å½•ï¼Œä½†ä¸ä¼šæœç´¢ç¬¦å·é“¾æ¥ç›®å½•ã€‚ ç‚¹å·å¦‚æœæ–‡ä»¶æˆ–ç›®å½•è·¯å¾„ç‰‡æ®µçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ç‚¹å·ï¼ˆ.ï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†ä¸åŒ¹é…ä»»ä½• globï¼Œé™¤é glob ç›¸åº”çš„è·¯å¾„ç‰‡æ®µçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¹Ÿæ˜¯ .ã€‚ ä¾‹å¦‚ï¼Œa/.*/c åŒ¹é… a/.b/cï¼Œä½†æ˜¯ a/*/c ä¸åŒ¹é…ï¼Œå› ä¸º * ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯ .ã€‚ å¯ä»¥è®¾ç½®é€‰é¡¹ dot:trueï¼Œå°† . å½“ä½œæ™®é€šçš„å­—ç¬¦ã€‚ è¯‘æ³¨ï¼šç‚¹æ–‡ä»¶ï¼ˆdot fileï¼‰ï¼Œåå­—ä»¥ . å¼€å§‹ï¼Œåœ¨ Unix ä¸‹æ˜¯éšè—æ–‡ä»¶ã€‚å³ä½¿ä½¿ç”¨ globstar æ¨¡å¼ï¼Œa/**/c ä¹Ÿä¸ä¼šåŒ¹é… a/.b/cã€‚ åŒ¹é…åŸºæœ¬åå¦‚æœè®¾ç½®é€‰é¡¹ matchBase:trueï¼Œå¹¶ä¸”æ¨¡å¼ä¸åŒ…å«æ–œæ ï¼Œé‚£ä¹ˆå°†æœç´¢ç›®å½•æ ‘ä¸‹ä»»æ„åœ°æ–¹çš„åŒ¹é…åŸºæœ¬åï¼ˆbasenameï¼‰çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ *.js åŒ¹é… test/simple/basic.jsã€‚ ç©ºé›†å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªç©ºçš„æ•°ç»„ã€‚è¿™è·Ÿ shell ä¸åŒï¼Œshell ä¼šè¿”å›æ¨¡å¼ã€‚ä¾‹å¦‚ï¼š 12$ echo a*s*d*fa*s*d*f æƒ³ä¸ shell ä¸€è‡´ï¼Œè®¾ç½®é€‰é¡¹ nonull:trueã€‚ å…¶å®ƒå‚è€ƒ man sh man bash (æœç´¢ â€œPattern Matchingâ€) man 3 fnmatch man 5 gitignore minimatch æ–‡æ¡£ glob.hasMagic(pattern, [options])å¦‚æœæ¨¡å¼åŒ…å«ç‰¹æ®Šçš„å­—ç¬¦åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ æ³¨æ„é€‰é¡¹ä¼šå½±å“ç»“æœã€‚å¦‚æœè®¾ç½®äº†é€‰é¡¹ noext:trueï¼Œåˆ™ +(a|b) ä¸ä¼šè§†ä¸ºé­”æ³•æ¨¡å¼ã€‚å¦‚æœæ¨¡å¼åŒ…å«å¤§æ‹¬å·å±•å¼€å¼ï¼Œæ¯”å¦‚ a/{b/c,x/y}ï¼Œåˆ™è®¤ä¸ºæ˜¯é­”æ³•çš„ï¼Œé™¤éè®¾ç½®äº†é€‰é¡¹ nobrace:trueã€‚ glob(pattern, [options], cb) pattern {String} å¾…åŒ¹é…çš„æ¨¡å¼ options {Object} cb {Function} err {Error | null} matches {Array&lt;String&gt;} åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶å è¿›è¡Œä¸€ä¸ªå¼‚æ­¥çš„ glob æœç´¢ã€‚ glob.sync(pattern, [options]) pattern {String} å¾…åŒ¹é…çš„æ¨¡å¼ options {Object} return: {Array&lt;String&gt;} åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶å è¿›è¡Œä¸€ä¸ªåŒæ­¥çš„ glob æœç´¢ã€‚ Class: glob.Globå®ä¾‹åŒ– glob.Glob ç±»ï¼Œåˆ›å»ºä¸€ä¸ª Glob å¯¹è±¡ã€‚ 12var Glob = require(&quot;glob&quot;).Globvar mg = new Glob(pattern, options, cb) è¿™æ˜¯ä¸€ä¸ª EventEmitter å¯¹è±¡ï¼Œç«‹åˆ»å¼€å§‹éå†æ–‡ä»¶ç³»ç»Ÿæœç´¢åŒ¹é…ã€‚ new glob.Glob(pattern, [options], [cb]) pattern {String} å¾…åŒ¹é…çš„æ¨¡å¼ options {Object} cb {Function} å½“é‡åˆ°é”™è¯¯æˆ–æ‰¾åˆ°åŒ¹é…æ—¶è°ƒç”¨ err {Error | null} matches {Array&lt;String&gt;} åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶å æ³¨æ„ï¼Œå¦‚æœè®¾ç½®äº†é€‰é¡¹ syncï¼Œåˆ™åŒ¹é…å°†ç«‹å³æ·»åŠ åˆ° g.foundã€‚ å±æ€§ minimatch glob æ‰€ç”¨çš„ minimatch å¯¹è±¡ã€‚ options ä¼ å…¥çš„é€‰é¡¹ã€‚ aborted å¸ƒå°”å€¼ï¼Œå½“è°ƒç”¨ abort() æ—¶è®¾ä¸º trueã€‚å–æ¶ˆä¹‹åä¸èƒ½ç»§ç»­ glob æœç´¢ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡é‡ç”¨ statCache é¿å…é‡å¤è°ƒç”¨ syscallã€‚ cache ç¼“å­˜ã€‚æ¯ä¸ªå­—æ®µéƒ½å¯ä»¥å–ä¸‹é¢çš„å€¼ï¼š false - è·¯å¾„ä¸å­˜åœ¨ true - è·¯å¾„å­˜åœ¨ &#39;FILE&#39; - è·¯å¾„å­˜åœ¨ï¼Œå¹¶ä¸”ä¸æ˜¯ç›®å½• &#39;DIR&#39; - è·¯å¾„å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯ç›®å½• [file, entries, ...] - è·¯å¾„å­˜åœ¨, å¹¶ä¸”æ˜¯ç›®å½•ï¼Œæ•°ç»„å€¼æ˜¯ fs.readdir çš„ç»“æœ statCache ç¼“å­˜ fs.stat çš„ç»“æœï¼Œé˜»æ­¢å¤šæ¬¡è¯»å–åŒä¸€è·¯å¾„çš„ä¿¡æ¯ã€‚ symlinks è®°å½•å“ªäº›è·¯å¾„æ˜¯ç¬¦å·é“¾æ¥ï¼Œä¸ ** è§£æç›¸å…³ã€‚ realpathCache å¯é€‰å¯¹è±¡ï¼Œä¼ ç»™ fs.realpathï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„ syscallã€‚å®ƒä¿å­˜åœ¨ Glob å®ä¾‹ä¸Šï¼Œå¯ä»¥é‡ç”¨ã€‚ äº‹ä»¶ end å½“ç»“æŸæœç´¢åŒ¹é…æ—¶è§¦å‘æ­¤äº‹ä»¶ï¼ŒåŒ…å«æ‰€æœ‰çš„åŒ¹é…ã€‚å¦‚æœè®¾ç½®äº†é€‰é¡¹ nonullï¼Œå¹¶ä¸”æ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™ matches åŒ…å«åŸæ¥çš„æ¨¡å¼ã€‚åŒ¹é…ç»è¿‡æ’åºï¼Œé™¤éè®¾ç½®äº†é€‰é¡¹ nosortã€‚ match æ¯å½“æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…æ—¶ä»¥è¿™ä¸ªåŒ¹é…è§¦å‘æ­¤äº‹ä»¶ï¼ŒåŒ¹é…æ²¡æœ‰å»é‡ï¼Œä¹Ÿæ²¡æœ‰è§£æä¸ºçœŸå®è·¯å¾„ã€‚ error å½“é‡åˆ°ä¸€ä¸ªå¼‚å¸¸æ—¶, æˆ–è€…åœ¨è®¾ç½®äº† options.strict çš„æƒ…å†µä¸‹é‡åˆ° fs é”™è¯¯æ—¶è§¦å‘æ­¤äº‹ä»¶ã€‚ abort å½“è°ƒç”¨ abort() æ—¶è§¦å‘æ­¤äº‹ä»¶ã€‚ æ–¹æ³• pause æš‚åœæœç´¢ã€‚ resume ç»§ç»­æœç´¢ã€‚ abort å–æ¶ˆæœç´¢ã€‚ é€‰é¡¹æ‰€æœ‰å¯ä»¥ä¼ ç»™ Minimatch çš„é€‰é¡¹ä¹Ÿå¯ä»¥ä¼ ç»™ Globï¼Œé€‰é¡¹ä¼šæ”¹å˜åŒ¹é…è¡Œä¸ºã€‚æœ‰äº›é€‰é¡¹æ˜¯æ–°åŠ çš„ï¼Œæœ‰äº›é€‰é¡¹æ˜¯ glob ç‰¹å®šé€‰é¡¹ã€‚ æ‰€æœ‰é€‰é¡¹é»˜è®¤æ˜¯ false, é™¤éç‰¹åˆ«è¯´æ˜ã€‚ æ‰€æœ‰é€‰é¡¹ä¹Ÿä¼šæ·»åŠ ç»™ Glob å¯¹è±¡ã€‚ å¦‚æœè¿è¡Œå¤šä¸ª glob æ“ä½œï¼Œå¯ä»¥å°†ä¸€ä¸ª Glob å¯¹è±¡ä½œä¸º options å‚æ•°ä¼ é€’ç»™åé¢çš„æ“ä½œï¼Œä»¥ç®€åŒ–ä¸€äº› stat å’Œ readdir çš„è°ƒç”¨ã€‚åœ¨æœ€æ–°çš„ç‰ˆæœ¬é‡Œï¼Œä½ å¯ä»¥ä¼ å…¥å…±äº«çš„ symlinks, statCache, realpathCache, cache é€‰é¡¹ï¼Œè¿™æ ·å¹¶è¡Œçš„ glob æ“ä½œå°†å› ä¸ºå…±äº«æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯è€Œæé€Ÿã€‚ cwd Stringï¼Œæœç´¢çš„å·¥ä½œç›®å½•ï¼Œé»˜è®¤ä¸º process.cwd()ã€‚ root Stringï¼Œä»¥ / å¼€å§‹çš„æ¨¡å¼çš„æŒ‚è½½ç›®å½•ï¼Œé»˜è®¤ä¸º path.resolve(options.cwd, &quot;/&quot;) (Unix ç³»ç»Ÿä¸‹ä¸º /ï¼ŒWindows ç³»ç»Ÿä¸‹ä¸º C:\\ æˆ–å…¶å®ƒç£ç›˜æ ¹ç›®å½•ã€‚) dot åœ¨å¸¸è§„åŒ¹é…ä¸ globstar åŒ¹é…ä¸­åŒ…å«ç‚¹æ–‡ä»¶ã€‚æ³¨æ„ï¼Œ. åœ¨æ¨¡å¼ç‰‡æ–­ä¸­å§‹ç»ˆåŒ¹é…ç‚¹æ–‡ä»¶ã€‚ nomount ä»¥ / å¼€å§‹çš„æ¨¡å¼é»˜è®¤æŒ‚è½½åˆ° root é€‰é¡¹è®¾ç½®çš„ç›®å½•ä¸Šï¼Œå› è€Œè¿”å›ä¸€ä¸ªåˆæ³•çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ã€‚è®¾ç½®æ­¤é€‰é¡¹ç¦æ­¢æ­¤è¡Œä¸ºã€‚ mark ç»™åŒ¹é…çš„ç›®å½•æ·»åŠ ä¸€ä¸ª / å­—ç¬¦ã€‚æ³¨æ„è¿™ä¼šè°ƒç”¨ statã€‚ nosort ä¸æ’åºç»“æœã€‚ stat stat æ‰€æœ‰çš„ç»“æœã€‚è¿™å¤šå°‘ä¼šé™ä½æ€§èƒ½ï¼Œå®Œå…¨æ²¡å¿…è¦ï¼Œé™¤éè®¤ä¸º readdir ä¸èƒ½ä½œä¸ºæ–‡ä»¶å­˜åœ¨çš„å¯é æŒ‡ç¤ºã€‚ silent å½“è¯»å–ç›®å½•æ—¶é‡åˆ°ä¸€ä¸ªä¸å¸¸è§çš„é”™è¯¯ï¼Œå°†æ‰“å°ä¸€æ¡è­¦å‘Šåˆ° stderrã€‚è®¾ç½®æ­¤é€‰é¡¹å¯å–æ¶ˆæ‰“å°ã€‚ strict å½“è¯»å–ç›®å½•æ—¶é‡åˆ°ä¸€ä¸ªä¸å¸¸è§çš„é”™è¯¯ï¼Œè¿›ç¨‹å°†ç»§ç»­æœç´¢å…¶å®ƒåŒ¹é…ã€‚è®¾ç½®æ­¤é€‰é¡¹å¯æŠ›å‡ºé”™è¯¯ã€‚ cache Object, è§ä¸Šæ–‡ã€‚ä¼ å…¥ä¹‹å‰ç”Ÿæˆçš„ç¼“å­˜å¯¹è±¡å¯ä»¥èŠ‚çœä¸€äº› fs è°ƒç”¨ã€‚ statCache Object, åŒ¹é…ç»“æœçš„æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯çš„ç¼“å­˜ï¼Œç”¨æ¥é˜»æ­¢ä¸å¿…è¦çš„ stat è°ƒç”¨ã€‚é€šå¸¸ä¸éœ€è¦è®¾ç½®æ­¤é€‰é¡¹ã€‚ä¸è¿‡å¦‚æœçŸ¥é“æ–‡ä»¶ç³»ç»Ÿåœ¨ä¸åŒçš„ glob() è°ƒç”¨ä¹‹é—´ä¸ä¼šå˜åŒ–ï¼Œå¯ä»¥å°†ä¸€ä¸ª glob() è°ƒç”¨çš„ statCache ä¼ ç»™å¦ä¸€ä¸ªè°ƒç”¨çš„é€‰é¡¹ï¼ˆè§ä¸‹é¢â€œç«æ€æ¡ä»¶â€ï¼‰ã€‚ symlinks Object, å·²çŸ¥çš„ç¬¦å·é“¾æ¥çš„ç¼“å­˜ã€‚å¯ä»¥ä¼ å…¥ä¸€ä¸ªä¹‹å‰ç”Ÿæˆçš„ symlinks å¯¹è±¡ï¼Œåœ¨åŒ¹é… ** æ—¶èŠ‚çœ lstat è°ƒç”¨ã€‚ sync åºŸå¼ƒï¼Œå¯ä»¥ç”¨ glob.sync(pattern, opts)ã€‚ nounique åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œå¤§æ‹¬å·å±•å¼€å¼ä¼šå¯¼è‡´åœ¨ç»“æœé‡Œé¢åŒä¸€æ–‡ä»¶å‡ºç°å¤šæ¬¡ã€‚æœ¬å®ç°é»˜è®¤é˜»æ­¢ç»“æœé‡Œé¢å‡ºç°é‡å¤ã€‚æ­¤é€‰é¡¹ç¦æ­¢æ­¤è¡Œä¸ºã€‚ nonull ä¸è¿”å›ç©ºé›†ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ¨¡å¼çš„é›†åˆï¼Œè¿™æ˜¯ glob(3) çš„é»˜è®¤è¡Œä¸ºã€‚ debug å¯ç”¨ minimatch å’Œ glob è°ƒè¯•ã€‚ nobrace ä¸å±•å¼€ {a,b} å’Œ {1..3} è¿™æ ·çš„é›†åˆã€‚ noglobstar ä¸æ”¯æŒ â€œglobstarâ€ æ¨¡å¼ï¼Œè¿™æ—¶ ** ä¸åŒ¹é…å¤šçº§æ–‡ä»¶åï¼Œåƒæ™®é€šçš„ * ä¸€æ ·å¯¹å¾…ã€‚ noext ä¸æ”¯æŒ â€œextglobâ€ æ¨¡å¼ï¼Œæ¯”å¦‚ +(a|b)ã€‚ nocase åŒ¹é…ä¸åŒºåˆ†å¤§å°å†™ã€‚æ³¨æ„ï¼šåœ¨ä¸åŒºåˆ†å¤§å°å†™çš„ç³»ç»Ÿé‡Œï¼Œé»˜è®¤åŒ¹é…æ²¡æœ‰ç‰¹æ®Šå­—ç¬¦çš„æ¨¡å¼ï¼Œå› ä¸º stat å’Œ readdir ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ matchBase å¦‚æœæ¨¡å¼ä¸åŒ…å«æ–œæ åˆ™åŒ¹é…åŸºåå­—ã€‚ä¾‹å¦‚ *.js å°†è§†ä¸º **/*.jsï¼ŒåŒ¹é…æ‰€æœ‰ç›®å½•ä¸‹çš„ js æ–‡ä»¶ã€‚ nodir ä¸åŒ¹é…ç›®å½•ï¼ŒåªåŒ¹é…æ–‡ä»¶ã€‚æ³¨æ„å¦‚æœåªåŒ¹é…ç›®å½•ï¼Œç®€å•åœ°åœ¨æ¨¡å¼çš„æœ«å°¾æ”¾ä¸€ä¸ª / å³å¯ã€‚ ignore æ·»åŠ ä¸€ä¸ªæ¨¡å¼æˆ–ä¸€ä¸ª glob æ¨¡å¼æ•°ç»„ï¼Œç”¨æ¥æ’é™¤åŒ¹é…ã€‚æ³¨æ„ï¼šignore æ¨¡å¼å§‹ç»ˆè®¤ä¸º dot:trueï¼Œä¸ç®¡å…¶å®ƒçš„é…ç½®æ˜¯æ€æ ·çš„ã€‚ follow åœ¨å±•å¼€ ** æ—¶è¿½è¸ªç¬¦å·é“¾æ¥ç›®å½•ã€‚æ³¨æ„è¿™å¯èƒ½å¯¼è‡´å¤§é‡é‡å¤çš„å¼•ç”¨ï¼ˆå¾ªç¯é“¾æ¥ï¼‰ã€‚ realpath åœ¨æ‰€æœ‰çš„ç»“æœä¸Šè°ƒç”¨ fs.realpathï¼Œåœ¨ä¸èƒ½è§£æç¬¦å·é“¾æ¥çš„æƒ…å†µä¸‹ï¼Œè¿”å›åŒ¹é…æ–‡ä»¶çš„å…¨è·¯å¾„ï¼Œä¸è¿‡å®ƒå¸¸å¸¸æ˜¯ä¸€ä¸ªæŸåçš„ç¬¦å·é“¾æ¥ã€‚ absolute è®¾ä¸º true æ—¶å§‹ç»ˆå¾—åˆ°åŒ¹é…æ–‡ä»¶çš„ç»å¯¹åœ°å€ã€‚ä¸åŒäº realpathï¼Œè¿™åŒæ—¶å½±å“ match äº‹ä»¶çš„è¿”å›å€¼ã€‚ ä¸å…¶å®ƒ fnmatch/glob å®ç°çš„æ¯”è¾ƒä¸¥æ ¼åœ°å…¼å®¹ç°å®è§„èŒƒæ˜¯å€¼å¾—è¿½æ±‚çš„ç›®æ ‡ï¼Œä¸è¿‡ node-glob ä¸å…¶å®ƒå®ç°ä¹‹é—´å­˜åœ¨å·®å¼‚ï¼Œå¹¶ä¸”æ˜¯æœ‰æ„çš„ã€‚ é»˜è®¤æ”¯æŒ **ï¼Œé™¤éè®¾ç½®äº†é€‰é¡¹ noglobstarã€‚è¿™ä¹Ÿæ˜¯ bsdglob å’Œ bash 4.3 çš„æ–¹å¼ã€‚åªæœ‰å½“ ** æ˜¯å•ç‹¬çš„ä¸€ä¸ªè·¯å¾„ç‰‡æ®µæ—¶å®ƒæ‰æœ‰è¿™ç§ç‰¹æ®Šæ„ä¹‰ã€‚ä¾‹å¦‚ a/**/b åŒ¹é… a/x/y/bï¼Œä½†æ˜¯ a/**b ä¸ä¼šã€‚ æ³¨æ„ï¼Œ** ä¸ä¼šæœç´¢ç¬¦å·é“¾æ¥ç›®å½•ï¼Œå°½ç®¡å®ƒä»¬å¯èƒ½åŒ¹é…æ¨¡å¼çš„å…¶å®ƒç‰‡æ–­ã€‚è¿™å¯ä»¥é˜²æ­¢æ— é™å¾ªç¯ã€é‡å¤ç­‰ã€‚ å¦‚æœè½¬ä¹‰çš„æ¨¡å¼æ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œå¹¶ä¸”è®¾ç½®äº†é€‰é¡¹ nonullï¼Œåˆ™ glob åŸæ ·è¿”å›æ¨¡å¼ï¼Œè€Œä¸æ˜¯è½¬ä¹‰åçš„æ¨¡å¼ã€‚ä¾‹å¦‚ glob.match([], &quot;\\\\*a\\\\?&quot;) è¿”å› &quot;\\\\*a\\\\?&quot; è€Œä¸æ˜¯ &quot;*a?&quot;ã€‚é»˜è®¤çš„è¡Œä¸ºç±»ä¼¼äºåœ¨ bash é‡Œè®¾ç½® nullglob é€‰é¡¹ï¼Œé™¤äº† bash ä¸ä¼šè§£æè½¬ä¹‰çš„æ¨¡å¼ã€‚ å¦‚æœæ²¡æœ‰ç¦æ­¢å±•å¼€å¤§æ‹¬å·ï¼Œåˆ™åœ¨è§£æ glob çš„å…¶å®ƒæ¨¡å¼ä¹‹å‰å…ˆå±•å¼€å®ƒã€‚ä¾‹å¦‚ +(a|{b),c)}ï¼Œåœ¨ bash æˆ– zsh ä¸‹é¢æ˜¯æ— æ•ˆçš„ï¼Œåœ¨è¿™å„¿ä¼šå…ˆå±•å¼€ä¸º +(a|b) å’Œ +(a|c)ï¼Œå†æ£€æŸ¥è¿™ä¸¤ä¸ªæ¨¡å¼çš„æœ‰æ•ˆæ€§ã€‚æ—¢ç„¶å®ƒä»¬æ˜¯æœ‰æ•ˆçš„ï¼Œåˆ™è¿›è¡ŒåŒ¹é…ã€‚ æ³¨é‡Šä¸æ’é™¤åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœæ¨¡å¼ä»¥ # å¼€å§‹åˆ™å®ƒæ˜¯ä¸€ä¸ªæ³¨é‡Šã€‚æ ‡è®°ä¸ºæ³¨é‡Šã€‚å¦‚æœæ¨¡å¼ä»¥ ! å¼€å§‹åˆ™å®ƒæ˜¯ä¸€ä¸ªæ’é™¤æ¨¡å¼ã€‚ v5 å·²ç»åºŸå¼ƒäº†é€‰é¡¹ nonegate å’Œ nocommentã€‚v6 åˆ™åˆ é™¤äº†è¿™ä¸¤ä¸ªé€‰é¡¹ã€‚ å¦‚æœæƒ³æ’é™¤æŸäº›æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é€‰é¡¹ ignore ã€‚ Windowsè¯·åœ¨ glob è¡¨è¾¾å¼é‡Œåªä½¿ç”¨æ–œæ ã€‚ è¯‘æ³¨ï¼šæ–œæ ï¼ˆforward-slashe â€œ/â€œï¼‰æ˜¯é¡ºæ—¶é’ˆæ–¹å‘ï¼Œåæ–œæ ï¼ˆbackward-slashe â€œâ€ï¼‰æ˜¯é€†æ—¶é’ˆæ–¹å‘ã€‚ å°½ç®¡ Windows å¯ä»¥ç”¨ / æˆ– \\ ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ï¼Œä½†æ˜¯æœ¬å®ç°åªä½¿ç”¨ /ã€‚åœ¨ glob è¡¨è¾¾å¼é‡Œå¿…é¡»åªä½¿ç”¨æ–œæ ã€‚åæ–œæ å§‹ç»ˆè§†ä¸ºè½¬ä¹‰ç¬¦ï¼Œè€Œä¸æ˜¯è·¯å¾„åˆ†éš”ç¬¦ã€‚ ç»å¯¹è·¯å¾„æ¨¡å¼æ¯”å¦‚ /foo/*ï¼ŒåŒ¹é…ç»“æœæŒ‚è½½åˆ°é€‰é¡¹ root è®¾ç½®çš„ç›®å½•ä¸Šï¼ˆä½¿ç”¨ path.join()ï¼‰ã€‚ åœ¨ Windows ä¸‹ï¼Œåœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œ/foo/* å¯ä»¥åŒ¹é…åˆ° C:\\foo\\bar.txtï¼ˆè¯‘æ³¨ï¼šæ­¤æ—¶ cwd åœ¨ C ç›˜ä¸‹ï¼‰ã€‚ ç«æ€æ¡ä»¶Glob æœç´¢æœ¬è´¨ä¸Šå®¹æ˜“å—ç«æ€æ¡ä»¶ï¼ˆrace conditionsï¼‰çš„å½±å“ï¼Œå› ä¸ºå®ƒå»ºç«‹åœ¨ç›®å½•éå†ç­‰ä¸Šé¢ã€‚ å› æ­¤ï¼Œå½“ glob æœç´¢æŸä¸ªæ–‡ä»¶æ—¶å®ƒæ˜¯å­˜åœ¨çš„ï¼Œç„¶ååœ¨è¿”å›ç»“æœæ—¶å®ƒå¯èƒ½è¢«åˆ é™¤æˆ–è¢«ä¿®æ”¹ã€‚ ä½œä¸ºå†…éƒ¨å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œä¸ºäº†é™ä½ç³»ç»Ÿå¼€é”€ï¼Œæ­¤å®ç°ç¼“å­˜äº†æ‰€æœ‰çš„ stat å’Œ readdir çš„ç»“æœã€‚ä½†æ˜¯ï¼Œè¿™ä¹Ÿå¯¼è‡´å®ƒæ›´åŠ å®¹æ˜“å—ç«æ€æ¡ä»¶çš„å½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šä¸ª glob è°ƒç”¨ä¹‹é—´é‡ç”¨ cache æˆ– statCache å¯¹è±¡æ—¶ã€‚ åœ¨é¢å¯¹å¿«é€Ÿçš„å˜åŒ–æ—¶ï¼Œå»ºè®®ç”¨æˆ·ä¸è¦å°† glob ç»“æœä½œä¸ºæ–‡ä»¶ç³»ç»ŸçŠ¶æ€çš„æ‹…ä¿ã€‚å¯¹äºç»å¤§å¤šæ•°çš„æ“ä½œï¼Œè¿™ç»ä¸ä¼šæ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ è´¡çŒ®å¯¹ç¨‹åºè¡Œä¸ºçš„ä»»ä½•æ”¹å˜ï¼ˆåŒ…å«è¡¥ä¸ï¼‰å¿…é¡»åŒæ—¶æäº¤æµ‹è¯•ã€‚ æµ‹è¯•å¤±è´¥çš„æˆ–é™ä½æ€§èƒ½çš„è¡¥ä¸å°†è¢«æ‹’ç»ã€‚ 1234567891011# to run testsnpm test# to re-generate test fixturesnpm run test-regen# to benchmark against bash/zshnpm run bench# to profile javascriptnpm run prof","tags":[{"name":"node","slug":"node","permalink":"https://betgar.github.io/tags/node/"}]},{"title":"TypeScript å’Œ Babel 7","date":"2019-07-29T14:00:00.000Z","path":"2019/07/29/typescript-and-babel-7/","text":"TypeScript å’Œ Babel 7 ä½œè€…ï¼šDaniel æ—¥æœŸï¼šAugust 27th, 2018 åŸæ–‡ï¼šhttps://devblogs.microsoft.com/typescript/typescript-and-babel-7/ ä»Šå¤©æˆ‘ä»¬å¾ˆé«˜å…´ä¸ºBabelç”¨æˆ·å®£å¸ƒä¸€äº›ç‰¹åˆ«çš„ä¸œè¥¿ã€‚ä¸€å¹´å‰ï¼Œæˆ‘ä»¬å¼€å§‹ç€æ‰‹å‘ç°ç”¨æˆ·åœ¨ä½¿ç”¨TypeScriptæ—¶é‡åˆ°çš„æœ€å¤§å›°éš¾ï¼Œæˆ‘ä»¬å‘ç°Babelç”¨æˆ·çš„ä¸€ä¸ªå…±åŒé—®é¢˜æ˜¯å°è¯•è®¾ç½®å¥½TypeScript å¤ªéš¾äº†ã€‚ åŸå› é€šå¸¸å„ä¸ç›¸åŒï¼Œä½†å¯¹äºè®¸å¤šå¼€å‘äººå‘˜æ¥è¯´ï¼Œé‡å†™å·²ç»æ­£åœ¨ä½¿ç”¨çš„æ„å»ºé…ç½®å¯èƒ½æ˜¯ä¸€é¡¹è‰°å·¨çš„ä»»åŠ¡ã€‚Babelæ˜¯ä¸€ä¸ªå‡ºè‰²çš„å·¥å…·ï¼Œæ‹¥æœ‰ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„ç”Ÿæ€ç³»ç»Ÿï¼Œé€šè¿‡å°†æœ€æ–°çš„JavaScriptç‰¹æ€§è½¬æ¢ä¸ºæ—§çš„è¿è¡Œæ—¶å’Œæµè§ˆå™¨ï¼Œä¸ºæ•°ç™¾ä¸‡å¼€å‘äººå‘˜æä¾›æœ ä½†å®ƒä¸è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæˆ‘ä»¬çš„å›¢é˜Ÿè®¤ä¸ºå¯ä»¥å°†è¿™ç§ä½“éªŒå¸¦åˆ°å¦ä¸€ä¸ªå±‚æ¬¡ã€‚ è™½ç„¶TypeScriptæœ¬èº«å¯ä»¥åŒæ—¶æ‰§è¡Œè¿™ä¸¤é¡¹æ“ä½œï¼Œä½†æˆ‘ä»¬å¸Œæœ›åœ¨ä¸å¼ºåˆ¶ç”¨æˆ·ä»Babelåˆ‡æ¢çš„æƒ…å†µä¸‹æ›´è½»æ¾åœ°è·å¾—è¯¥ä½“éªŒã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è¿‡å»çš„ä¸€å¹´é‡Œæˆ‘ä»¬ä¸Babelå›¢é˜Ÿåˆä½œï¼Œä»Šå¤©æˆ‘ä»¬å¾ˆé«˜å…´è”åˆå®£å¸ƒBabel 7ç°åœ¨æä¾›TypeScriptæ”¯æŒï¼ æˆ‘æ€ä¹ˆä½¿ç”¨å®ƒï¼Ÿå¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨Babelå¹¶ä¸”ä½ ä»æœªå°è¯•è¿‡TypeScriptï¼Œé‚£ä¹ˆç°åœ¨æ˜¯ä½ çš„æœºä¼šï¼Œå› ä¸ºå®ƒæ¯”ä»¥å¾€æ›´å®¹æ˜“ã€‚ è‡³å°‘ï¼Œæ‚¨éœ€è¦å®‰è£…TypeScriptæ’ä»¶ã€‚ 1npm install --save-dev @babel/preset-typescript æ‚¨å¯èƒ½è¿˜æƒ³è·å¾—TypeScriptæ”¯æŒçš„å…¶ä»–ECMAScriptç‰¹æ€§ï¼š 1npm install --save-dev @babel/preset-typescript @babel/preset-env @babel/plugin-proposal-class-properties @babel/plugin-proposal-object-rest-spread ç¡®ä¿ä½ çš„.babelrcä¸­çš„presetså’Œpluginsé…ç½®æ­£ç¡®ï¼š 12345678910&#123; \"presets\": [ \"@babel/env\", \"@babel/preset-typescript\" ], \"plugins\": [ \"@babel/proposal-class-properties\", \"@babel/proposal-object-rest-spread\" ]&#125; ä¸€ä¸ªä½¿ç”¨@babel/cliç¼–è¯‘çš„æ ·ä¾‹ï¼Œä½ ä»…éœ€è¦æ‰§è¡Œï¼š 1babel ./src --out-dir lib --extensions \".ts,.tsx\" ä½ çš„æ–‡ä»¶ç°åœ¨æ„å»ºå¹¶ç”Ÿæˆåˆ°äº†libæ–‡ä»¶å¤¹ä¸­ã€‚ ä½¿ç”¨TypeScriptæ£€æŸ¥ç±»å‹ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªtsconfig.jsonæ–‡ä»¶ï¼š 123456789101112131415161718192021&#123; \"compilerOptions\": &#123; // Target latest version of ECMAScript. \"target\": \"esnext\", // Search under node_modules for non-relative imports. \"moduleResolution\": \"node\", // Process &amp; infer types from .js files. \"allowJs\": true, // Don't emit; allow Babel to transform files. \"noEmit\": true, // Enable strictest settings like strictNullChecks &amp; noImplicitAny. \"strict\": true, // Disallow features that require cross-file information for emit. \"isolatedModules\": true, // Import non-ES modules as default imports. \"esModuleInterop\": true &#125;, \"include\": [ \"src\" ]&#125; ç„¶åæ‰§è¡Œtscï¼Œä»…ä»…å°±æ˜¯è¿™æ ·ï¼tscå°†ä¼šå¯¹ä½ çš„.tså’Œ.tsxè¿›è¡Œç±»å‹æ£€æŸ¥ éšæ„æ·»åŠ â€“watchæ ‡å¿—åˆ°ä»»ä¸€å·¥å…·ï¼Œä»¥ä¾¿åœ¨ä»»ä½•å˜åŒ–æ—¶è·å¾—å³æ—¶åé¦ˆã€‚ æ‚¨å¯ä»¥åœ¨æ­¤ç¤ºä¾‹å­˜å‚¨åº“ä¸­æŸ¥çœ‹å¦‚ä½•è®¾ç½®æ›´å¤æ‚çš„æ„å»ºï¼Œè¯¥å­˜å‚¨åº“ä¸Webpackç­‰å·¥å…·é›†æˆã€‚ æ‚¨ä¹Ÿå¯ä»¥åœ¨Babelçš„åœ¨çº¿REPLä¸Šä½¿ç”¨TypeScripté¢„è®¾ã€‚ è¿™å¯¹æˆ‘æ„å‘³ç€ä»€ä¹ˆï¼Ÿä½¿ç”¨TypeScriptç¼–è¯‘å™¨ä»ç„¶æ˜¯æ„å»ºTypeScriptçš„é¦–é€‰æ–¹æ³•ã€‚ è™½ç„¶Babelå¯ä»¥æ¥ç®¡ç¼–è¯‘/è½¬æ¢ - æ‰§è¡Œè¯¸å¦‚æ“¦é™¤ç±»å‹å’Œé‡å†™æœ€æ–°çš„ECMAScriptåŠŸèƒ½ä»¥åœ¨è¾ƒæ—§çš„è¿è¡Œæ—¶ä¸­å·¥ä½œ - å®ƒæ²¡æœ‰å†…ç½®ç±»å‹æ£€æŸ¥ï¼Œå¹¶ä¸”ä»ç„¶éœ€è¦ä½¿ç”¨TypeScriptæ¥å®ç°è¿™ä¸€ç‚¹ã€‚ å› æ­¤ï¼Œå³ä½¿Babelæ„å»ºæˆåŠŸï¼Œæ‚¨ä¹Ÿå¯èƒ½éœ€è¦ä½¿ç”¨TypeScriptä»‹å…¥ä»¥æ•è·ç±»å‹é”™è¯¯ã€‚ å‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬è®¤ä¸ºtscå’Œcompiler pipelineå‘¨å›´çš„å·¥å…·ä»ç„¶å¯ä»¥ä¸ºå¤§å¤šæ•°é¡¹ç›®æä¾›æœ€å¥½é›†æˆå’Œä¸€è‡´çš„ä½“éªŒã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨å·²ç»åœ¨ä½¿ç”¨TypeScriptï¼Œé‚£ä¹ˆè¿™å¯¹æ‚¨æ¥è¯´å¯èƒ½æ²¡ä»€ä¹ˆå˜åŒ–ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å·²ç»åœ¨ä½¿ç”¨Babelï¼Œæˆ–è€…å¯¹Babelç”Ÿæ€ç³»ç»Ÿæ„Ÿå…´è¶£ï¼Œå¹¶å¸Œæœ›è·å¾—TypeScriptçš„å¥½å¤„ï¼Œä¾‹å¦‚æ•è·æ‹¼å†™é”™è¯¯ï¼Œé”™è¯¯æ£€æŸ¥ä»¥åŠæ‚¨å¯èƒ½åœ¨Visual Studioå’ŒVisual Studioç­‰ä¸­çœ‹åˆ°çš„ç¼–è¾‘ä½“éªŒ ä»£ç ï¼Œè¿™æ˜¯ç»™ä½ çš„ï¼ æ³¨æ„äº‹é¡¹æ­£å¦‚æˆ‘ä»¬ä¸Šé¢æåˆ°çš„ï¼Œç”¨æˆ·åº”è¯¥æ³¨æ„çš„ç¬¬ä¸€ä»¶äº‹æ˜¯Babelä¸ä¼šå¯¹TypeScriptä»£ç æ‰§è¡Œç±»å‹æ£€æŸ¥;å®ƒåªä¼šè½¬æ¢ä½ çš„ä»£ç ï¼Œæ— è®ºæ˜¯å¦å­˜åœ¨ç±»å‹é”™è¯¯ï¼Œå®ƒéƒ½ä¼šç¼–è¯‘ã€‚è™½ç„¶è¿™æ„å‘³ç€Babelä¸ä¼šåƒè¯»å–.d.tsæ–‡ä»¶é‚£æ ·åšå¹¶ç¡®ä¿ä½ çš„ç±»å‹å…¼å®¹ï¼Œä½†å¯èƒ½ä½ ä¼šæƒ³è¦ä¸€äº›å·¥å…·æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥ä½ ä»ç„¶éœ€è¦TypeScriptã€‚è¿™å¯ä»¥åœ¨åå°ä½œä¸ºå•ç‹¬çš„tsc â€“watchä»»åŠ¡å®Œæˆï¼Œä¹Ÿå¯ä»¥æ˜¯æ„å»ºä¸­çš„lint / CIæ­¥éª¤çš„ä¸€éƒ¨åˆ†ã€‚å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡æ­£ç¡®çš„ç¼–è¾‘å™¨æ”¯æŒï¼Œæ‚¨ç”šè‡³å¯ä»¥åœ¨ä¿å­˜ä¹‹å‰å‘ç°å¤§å¤šæ•°é”™è¯¯ã€‚ å…¶æ¬¡ï¼Œæœ‰äº›ç»“æ„Babel 7æ²¡æœ‰æ­£ç¡®çš„ç¼–è¯‘ã€‚å…·ä½“æ¥è¯´ï¼Œ namespaces æ‹¬å·é£æ ¼çš„ç±»å‹æ–­è¨€/å¼ºåˆ¶è½¬æ¢è¯­æ³•ï¼Œå½“å¯ç”¨JSXæ—¶å¯ä»¥å¿½ç•¥å®ƒä»¬ã€‚ï¼ˆå³ï¼Œå¦‚æœæ‰“å¼€JSXæ”¯æŒï¼Œå†™å…¥ xå³ä½¿åœ¨.tsæ–‡ä»¶ä¸­ä¹Ÿä¸èµ·ä½œç”¨ï¼Œä½†æ‚¨å¯ä»¥å°†x as Fooï¼‰ã€‚ è·¨å¤šä¸ªå£°æ˜çš„æšä¸¾ï¼ˆå³æšä¸¾åˆå¹¶ï¼‰ é—ç•™å¼å¯¼å…¥/å¯¼å‡ºè¯­æ³•ï¼ˆå³import foo = requireï¼ˆâ€¦ï¼‰å’Œexport = fooï¼‰ è¿™äº›é—æ¼ä¸»è¦åŸºäºBabelçš„å•æ–‡ä»¶å‘å°„æ¶æ„ä¸­çš„æŠ€æœ¯é™åˆ¶ã€‚æˆ‘ä»¬ç›¸ä¿¡å¤§å¤šæ•°ç”¨æˆ·ä¼šå‘ç°è¿™ç§ä½“éªŒæ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚è¦ç¡®ä¿TypeScriptå¯ä»¥è°ƒå‡ºå…¶ä¸­çš„ä¸€äº›é—æ¼ï¼Œæ‚¨åº”è¯¥ç¡®ä¿TypeScriptä½¿ç”¨â€“isolatedModulesæ ‡å¿—ã€‚ æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿæ‚¨å¯ä»¥åœ¨å‘å¸ƒåšå®¢æ–‡ç« ä¸­é˜…è¯»Babelæ–¹é¢çš„è¯¦ç»†ä¿¡æ¯ã€‚ æˆ‘ä»¬å¾ˆé«˜å…´æˆ‘ä»¬æœ‰æœºä¼šä¸Babelå›¢é˜Ÿçš„äººä»¬åˆä½œï¼Œå¦‚Henry Zhuï¼ŒAndrew Levineï¼ŒLogan Smythï¼ŒDaniel Tschinderï¼ŒJames Henryï¼ŒDiogo Francoï¼ŒIvan Babakï¼ŒNicolÃ²Ribaudoï¼ŒBrian Ngå’ŒVladimir Kurchatkinã€‚ æˆ‘ä»¬ç”šè‡³æœ‰æœºä¼šåŠ é€ŸBabylonï¼ŒBabelçš„è§£æå™¨ï¼Œå¹¶å¸®åŠ©è°ƒæ•´James Henryåœ¨typescript-eslint-parserä¸Šçš„å·¥ä½œï¼Œè¯¥è§£æå™¨ç°åœ¨æ”¯æŒPrettierâ€™s TypeScriptã€‚ å¦‚æœæˆ‘ä»¬é—æ¼æ²¡æœ‰æåˆ°ä½ ï¼Œæˆ‘ä»¬å¾ˆæŠ±æ­‰ï¼Œä½†æˆ‘ä»¬å¾ˆæ„Ÿæ¿€ï¼Œæˆ‘ä»¬æ„Ÿè°¢æ‰€æœ‰äººä»¬å…±åŒæŠ•å…¥çš„å¸®åŠ©ï¼ æˆ‘ä»¬çš„å›¢é˜Ÿå°†ä¸ºTypeScriptæ’ä»¶çš„æœªæ¥æ›´æ–°åšå‡ºè´¡çŒ®ï¼Œæˆ‘ä»¬æœŸå¾…ä¸ºæ‰€æœ‰TypeScriptç”¨æˆ·å¸¦æ¥å‡ºè‰²çš„ä½“éªŒã€‚ å±•æœ›æœªæ¥ï¼Œæˆ‘ä»¬å¾ˆä¹æ„å¬åˆ°æ‚¨å¯¹Babelä¸­è¿™ç§æ–°TypeScriptæ”¯æŒçš„åé¦ˆï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•ä½¿å…¶æ›´æ˜“äºä½¿ç”¨ã€‚ åœ¨Twitterä¸Š@typescriptlangæˆ–ä¸‹é¢çš„è¯„è®ºä¸­ç»™æˆ‘ä»¬ä¸€ä¸ªå£°éŸ³ã€‚ å¿«ä¹çš„é»‘å®¢ï¼ èµ„æº Babel+TypeScriptä»¥åŠå…¶å®ƒå·¥å…·çš„é…ç½®å‚è€ƒ TypeScript-Babel-Starter react-webpack-typescript-babel webpack-typescript-babel TypeScript With Babel: A Beautiful Marriage","tags":[{"name":"babel","slug":"babel","permalink":"https://betgar.github.io/tags/babel/"},{"name":"typescript","slug":"typescript","permalink":"https://betgar.github.io/tags/typescript/"}]},{"title":"babelçš„é…ç½®çš„é»˜è®¤å¥—è·¯","date":"2019-07-15T05:00:00.000Z","path":"2019/07/15/learn-babel-guide/","text":"babelçš„é…ç½®çš„é»˜è®¤å¥—è·¯ æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜å…šï¼Œè¿™ç¯‡æ–‡ç« ä»‹ç»ä¸€ç‚¹babelçš„é»˜è®¤é…ç½®å¥—è·¯ï¼Œæ€»ç»“äº†ä¸€ç‚¹é‡åˆ°çš„é¡¹ç›®ç®¡ç†é—®é¢˜ã€‚ babelçš„bugåˆºæ¿€äº†æˆ‘ ç°è±¡ï¼šé¡¹ç›®ç¼–è¯‘æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œæ‰“å¼€é¡µé¢æ‰æŠ¥é”™ é—®é¢˜ç°è±¡consoleæŠ¥é”™ï¼š_objectSpread is not defined åŸå› ï¼šæ ¹æ®è¾“å‡ºçš„é”™è¯¯ï¼Œæˆ‘çŒœæµ‹æ˜¯babelçš„é—®é¢˜ï¼Œå› ä¸º_objectSpreadå°±æ˜¯ä½¿ç”¨äº†æ–°çš„å¯¹è±¡å±•å¼€çš„è¯­æ³•...objï¼Œç¼–è¯‘ä¹‹åæ‰å‡ºç°çš„ã€‚å½“ç„¶è¿™é‡Œæˆ‘ä¹Ÿè°ƒè¯•äº†ç¼–è¯‘åæ‰“ä»£ç ã€‚ã€å¦‚æœä½ æƒ³çœ‹ç¼–è¯‘æ‰“åŒ…åä»£ç ï¼Œä»‹ç»ä¸€ç¯‡æ–‡ç« ç»™ä½ : webpackç¼–è¯‘vueé¡¹ç›®ç”Ÿæˆçš„ä»£ç æ¢ç´¢ã€‘ åˆ†æï¼šé€šè¿‡git logå¿«é€Ÿåˆ†æpackage.jsonçš„å˜æ›´ï¼Œå‘ç°åªæ›´æ–°è¿‡babelç›¸å…³ã€‚æ‰€ä»¥å®é”¤æ˜¯babelé—®é¢˜ã€‚ åˆ†ægit logæ—¶ï¼Œæˆ‘ä»¬å½“æ—¶åšçš„commit message styleç»Ÿä¸€çš„ä½œç”¨å°±å‘æŒ¥å‡ºæ¥äº†ï¼Œæ‰€æœ‰çš„å·¥å…·é“¾ç›¸å…³å˜æ›´ï¼Œç»Ÿä¸€éƒ½æ˜¯choreå¼€å¤´ï¼Œæ‰€ä»¥æ‰èƒ½åšåˆ°å¿«é€Ÿå®šä½ã€‚é¡ºä¾¿çœ‹çœ‹æˆ‘ä»¬é¡¹ç›®çš„commit message commit message style åœºæ™¯é‡ç°ï¼šbabel repl demoé“¾æ¥ çœŸå®åŸå› ï¼šå¯¹è±¡å±•å¼€çš„è¯­æ³•ï¼Œbabelç¼–è¯‘ä¹‹åæ³¨å…¥äº†_objectSpreadæˆ–è€…_objectSpread2å‡½æ•°æ¥å¤„ç†ï¼Œç»´æŠ¤çš„å°ä¼™ä¼´æ²¡æœ‰æŠŠæ‰€æœ‰çš„åˆ†æ”¯éƒ½è¦†ç›–ã€‚ä¿®å¤è¿™ä¸ªissuesçš„å°ä¼™ä¼´ä¹ŸæŒºå¹½é»˜ï¼Œä¼°è®¡ä¹Ÿæ˜¯è¢«æŠ˜è…¾çš„å¤Ÿå‘›ï¼Œè¯´äº†ä¸€å¥ç©ç¬‘è¯Iâ€™ll now go hiding myself somewhere and I wonâ€™t touch an helper for a few months ğŸ˜† è€Œä¸”æ­¤bugæ˜¯babel v7.5.4ä¿®å¤çš„ï¼Œè€Œä¸”åœ¨ä½ç‰ˆæœ¬çš„@babel/coreä½¿ç”¨äº†é«˜ç‰ˆæœ¬çš„@babel/plugin-proposal-object-rest-spreadæ‰èƒ½é‡ç°ã€‚ _objectSpreadå®˜æ–¹issuesç›¸å…³é“¾æ¥ï¼š ReferenceError: _objectSpread is not defined after update Missing helpers only throw once Fix _objectSpread2 for real æ‰¾çš„é—®é¢˜çš„æ ¹æºäº†ï¼Œæ–°é—®é¢˜æ¥äº†ï¼Œæˆ‘æ€ä¹ˆæ›´æ–°@babel/coreå‘¢ï¼Ÿ å› ä¸ºä¸æ˜¯é¡¹ç›®ç›´æ¥ä¾èµ–çš„@babel/coreï¼Œè€Œæ˜¯å…¶å®ƒå·¥å…·ä¾èµ–ï¼Œæˆ‘æ›´æ–°äº†ä¹Ÿä¸ä¸€å®šèµ·ä½œç”¨ã€‚ ä»‹ç»npmä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼š æŸ¥çœ‹é¡¹ç›®ä¸­å®‰è£…çš„packageç‰ˆæœ¬å’Œä¾èµ–å…³ç³» 123npm ls @babel/core`-- @vue/cli-plugin-babel@3.9.2 `-- @babel/core@7.5.4 çŸ¥é“äº†ä¾èµ–@babel/coreæ˜¯@vue/cli-plugin-babelï¼Œé‚£å‡çº§@vue/cli-plugin-babelå°±è¡Œäº†ã€‚ æŸ¥çœ‹npmä»“åº“çš„packageç‰ˆæœ¬å’Œä¾èµ– 1npm show @babel/core æ¨èä¸€ä¸ªnpm-checkå·¥å…·ï¼Œä¸“é—¨ç”¨æ¥æ›´æ–°ä¾èµ–ã€‚ å¯ä»¥æ‰§è¡Œnpm-check -uæ¥è¿›è¡Œäº¤äº’å¼é€‰æ‹©æ›´æ–°ï¼Œè€Œä¸”è¿˜åˆ—å‡ºäº†å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥ç›´æ¥çœ‹çœ‹release logä¹‹åå†å†³å®šæ˜¯å¦æ›´æ–°ã€‚ babelçš„pluginå’Œpreseté…ç½®é»˜è®¤å¥—è·¯ æœ¬æ¥æˆ‘å°±æ¯”è¾ƒæ‡’ï¼Œä¸€ç›´åœ¨è®¡åˆ’å­¦ä¹ çš„è·¯ä¸Šï¼ŒåŸºæœ¬éƒ½æ²¡è½å®è¡ŒåŠ¨ã€‚è¿™æ¬¡é¡¹ç›®å‡ºç°é—®é¢˜ï¼Œæˆ‘ä¸å¾—ä¸å»äº†è§£äº†ä¸€ä¸‹ï¼Œbabelé…ç½®çš„é‚£äº›å¥—è·¯ã€‚Babelçš„v7ç‰ˆæœ¬æ‰€æœ‰åŒ…éƒ½é‡å‘½åäº†ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦åšåˆ°äº†è§£ã€‚ babel v7 å®˜æ–¹å‡çº§æ–‡æ¡£é“¾æ¥ åŒ…å«çš„å†…å®¹å¤ªå¤šï¼Œä»”ç»†è¿‡ä¸€éæ‰è¡Œï¼Œå¾ˆå¤šé…ç½®æˆ–è€…åŒ…åç§°å‘½åè§„åˆ™éƒ½ä¿®æ”¹äº†ã€‚ babel v7.4æ”¯æŒcore-js@3 babel v7.4æ”¯æŒcore-js@3ï¼Œå°¤å…¶æ˜¯å¯¹@babel/polyfillå’Œ@babel/preset-envåˆå¸¦æ¥äº†å¾ˆå¤šæ”¹å˜ã€‚ æ–°çš„corejsé…ç½®é¡¹ corejsé…ç½®é¡¹é“¾æ¥options corejs å½“é¡¹ç›®ä¸­çš„babelå‡çº§åˆ°v7.4+æ—¶ä¼šå‡ºç°ä¸‹é¢çš„è­¦å‘Šï¼š WARNING: We noticed youâ€™re using the useBuiltIns option without declaring a core-js version. Currently, we assume version 2.x when no version is passed. Since this default version will likely change in future versions of Babel, we recommend explicitly setting the core-js version you are using via the corejs option. 1234567891011121314151617181920// ä½¿ç”¨core-js@3çš„babel.config.jsmodule.exports = function (api) &#123; api.cache(true); const presets = [ [\"@babel/preset-env\", &#123; \"useBuiltIns\": \"usage\", \"corejs\":3, // æŒ‡å®šç‰ˆæœ¬ \"targets\":&#123; \"browsers\":[\"&gt; 1%\", \"last 2 versions\", \"not ie &lt;= 8\"] &#125; &#125; ] ]; return &#123; presets, // plugins &#125;;&#125; æ³¨æ„ï¼šæŠŠç›¸åº”çš„core-jså®‰è£…åˆ°é¡¹ç›®ä¾èµ–ä¸­ï¼Œnpm i core-js@2 æˆ–è€…npm i core-js@3 @babel/polyfillä¸æ”¯æŒä»core-js2å‡çº§åˆ°core-js3ï¼Œæ‰€ä»¥v7.4å¼€å§‹@babel/polyfillå˜æˆè¿‡æ—¶(deprecated) å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨core-js@3ï¼Œåˆ™åº”è¯¥ä¿®æ”¹å¯¼å…¥é…ç½® 1import \"@babel/polyfill\"; æ›¿æ¢ä¸ºï¼š 12import \"core-js/stable\";import \"regenerator-runtime/runtime\"; ç›´æ¥å®‰è£…ä¾èµ–åˆ°é¡¹ç›®ï¼š 1npm i --save core-js regenerator-runtime å› ä¸ºbabelå’Œcore-jsç»‘å®šçš„å¾ˆç´§å¯†ï¼Œæ‰€ä»¥æ¨èçœ‹ä¸€ä¸‹core-jsä½œè€…çš„æ–‡ç« ï¼šcore-js-3-babel-and-a-look-into-the-futureè¯¦ç»†ä»‹ç»äº†core-js@3ç‰ˆæœ¬å¸¦æ¥çš„æ”¹å˜ï¼Œä»¥åŠè§£å†³çš„é—®é¢˜ã€‚ Pluginé…ç½®å¥—è·¯ syntax pluginså…è®¸babelå»parseç‰¹å®šçš„ç±»å‹çš„syntaxè€Œä¸æ˜¯å»è½¬æ¢å˜å½¢ï¼ˆtransformï¼‰ æ³¨æ„ï¼štransform pluginsä¼šè‡ªåŠ¨å¯ç”¨syntax pluginsã€‚ å› æ­¤ï¼Œå¦‚æœå·²ç»ä½¿ç”¨äº†ç›¸åº”çš„transform pluginsï¼Œåˆ™æ— éœ€æŒ‡å®šsyntax pluginsã€‚ Plugin è·¯å¾„å¦‚æœ plugin åœ¨ npm ä¸Šï¼Œä½ å¯ä»¥ä¼ å…¥é¢„è®¾åç§°ï¼Œbabel å°†æ£€æŸ¥å®ƒæ˜¯å¦å·²å®‰è£…åœ¨ node_modules ä¸­ 123&#123; \"plugins\": [\"babel-plugin-myPlugin\"]&#125; è¿˜å¯ä»¥æŒ‡å®šçš„ç›¸å¯¹/ç»å¯¹è·¯å¾„ã€‚ 123&#123; \"plugins\": [\"./node_modules/asdf/plugin\"]&#125; Plugin ç®€å†™(å®˜æ–¹éå¸¸ä¸æ¨è)å¦‚æœåŒ…çš„åç§°ä»¥ babel-plugin- ä¸ºå‰ç¼€ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™ï¼š 123456&#123; \"plugins\": [ \"myPlugin\", \"babel-plugin-myPlugin\" // equivalent ]&#125; è¿™ä¹Ÿé€‚ç”¨äº scoped åŒ…ï¼š 123456&#123; \"plugins\": [ \"@org/babel-plugin-name\", \"@org/name\" // equivalent ]&#125; Pluginæ‰§è¡Œé¡ºåº å¦‚æœä¸¤ä¸ªtransformséƒ½è®¿é—®â€œç¨‹åºâ€èŠ‚ç‚¹ï¼Œåˆ™transformså°†ä»¥pluginæˆ–preseté¡ºåºè¿è¡Œã€‚ pluginåœ¨presetä¹‹å‰è¿è¡Œã€‚ pluginæ‰§è¡Œé¡ºåºæ˜¯ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªã€‚ preseté¡ºåºç›¸åï¼ˆä»æœ€ååˆ°ç¬¬ä¸€ä¸ªï¼‰ã€‚ 123&#123; \"plugins\": [\"transform-decorators-legacy\", \"transform-class-properties\"]&#125; å…ˆæ‰§è¡Œtransform-decorators-legacyåtransform-class-properties Plugin é€‰é¡¹ pluginså’Œ presets éƒ½å¯ä»¥é€šè¿‡å°†åç§°å’Œé€‰é¡¹å¯¹è±¡æ”¾åœ¨é…ç½®ä¸­çš„æ•°ç»„ä¸­æ¥æŒ‡å®šé€‰é¡¹ã€‚ å¯¹äºä¸æŒ‡å®šé€‰é¡¹ï¼Œè¿™äº›éƒ½æ˜¯ç­‰åŒçš„ï¼š 123&#123; \"plugins\": [\"pluginA\", [\"pluginA\"], [\"pluginA\", &#123;&#125;]]&#125; è¦æŒ‡å®šé€‰é¡¹ï¼Œè¯·ä½¿ç”¨é€‰é¡¹åç§°ä½œä¸º key ä¼ é€’å¯¹è±¡ã€‚ 1234567891011&#123; \"plugins\": [ [ \"transform-async-to-module-method\", &#123; \"module\": \"bluebird\", \"method\": \"coroutine\" &#125; ] ]&#125; preseté…ç½®å¥—è·¯ presetæ˜¯ä¸€ä¸ªæ’ä»¶æ•°ç»„ 123456789module.exports = function() &#123; return &#123; plugins: [ \"pluginA\", \"pluginB\", \"pluginC\", ] &#125;;&#125; Presets å¯ä»¥åŒ…å«å…¶ä»–çš„ presets ä»¥åŠå¸¦æœ‰é€‰é¡¹çš„æ’ä»¶ã€‚ 123456789module.exports = () =&gt; (&#123; presets: [ require(\"@babel/preset-env\"), ], plugins: [ [require(\"@babel/plugin-proposal-class-properties\"), &#123; loose: true &#125;], require(\"@babel/plugin-proposal-object-rest-spread\"), ],&#125;); Preset è·¯å¾„å¦‚æœ preset åœ¨ npm ä¸Šï¼Œä½ å¯ä»¥ä¼ å…¥é¢„è®¾åç§°ï¼Œbabel å°†æ£€æŸ¥å®ƒæ˜¯å¦å·²å®‰è£…åœ¨ node_modules ä¸­ 123&#123; \"presets\": [\"babel-preset-myPreset\"]&#125; è¿˜å¯ä»¥æŒ‡å®š presets çš„ç›¸å¯¹/ç»å¯¹è·¯å¾„ã€‚ 123&#123; \"presets\": [\"./myProject/myPreset\"]&#125; Preset ç®€å†™(å®˜æ–¹éå¸¸ä¸æ¨è)å¦‚æœåŒ…çš„åç§°ä»¥ babel-preset- ä¸ºå‰ç¼€ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™ï¼š 123456&#123; \"presets\": [ \"myPreset\", \"babel-preset-myPreset\" // ç­‰åŒ ]&#125; è¿™ä¹Ÿé€‚ç”¨äº scoped åŒ…ï¼š 123456&#123; \"presets\": [ \"@org/babel-preset-name\", \"@org/name\" // ç­‰åŒ ]&#125; 1234567891011// vue-cliç”Ÿæˆçš„babel.config.jsmodule.exports = &#123; presets: [ [ '@vue/app', // å¯¹åº” @vue/babel-preset-app,å½“æ—¶å®³çš„æˆ‘æ‰¾æ¥æ‰¾å»éƒ½æ²¡æ‰¾åˆ°åŒ… &#123; useBuiltIns: 'entry', corejs: 2, // @see https://babeljs.io/docs/en/babel-preset-env#corejs &#125;, ],&#125;; Presetæ‰§è¡Œé¡ºåºç›¸å Preset çš„é¡ºåºæ˜¯ç›¸åçš„(ä»æœ€åä¸€ä¸ªåˆ°ç¬¬ä¸€ä¸ª). 1234567&#123; \"presets\": [ \"a\", \"b\", \"c\" ]&#125; å°†ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºè¿è¡Œï¼šc, b, ç„¶å aã€‚ Preset é€‰é¡¹ æ’ä»¶å’Œ presets éƒ½å¯ä»¥é€šè¿‡å°†åç§°å’Œé€‰é¡¹å¯¹è±¡æ”¾åœ¨é…ç½®ä¸­çš„æ•°ç»„ä¸­æ¥æŒ‡å®šé€‰é¡¹ã€‚ å¯¹äºä¸æŒ‡å®šé€‰é¡¹ï¼Œè¿™äº›éƒ½æ˜¯ç­‰åŒçš„ï¼š 1234567&#123; \"presets\": [ \"presetA\", [\"presetA\"], [\"presetA\", &#123;&#125;], ]&#125; è¦æŒ‡å®šé€‰é¡¹ï¼Œè¯·ä½¿ç”¨é€‰é¡¹åç§°ä½œä¸º key ä¼ é€’å¯¹è±¡ã€‚ 12345678&#123; \"presets\": [ [\"@babel/preset-env\", &#123; \"loose\": true, \"modules\": false &#125;] ]&#125; æ€»ç»“ å‰ç«¯çš„çŸ¥è¯†é“¾å¤ªé•¿ï¼ŒæŠ€æœ¯æ›´æ–°è¶Šæ¥è¶Šå¿«ã€‚å‰ç«¯çš„æŠ•èµ„é£é™©è¿˜æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥è°¨æ…é€‰æ‹©æ¡†æ¶ï¼Œåˆ†é…ä¸€ç‚¹æ—¶é—´æŠ•èµ„åœ¨ä¸šç•Œå…¬è®¤çš„å·¥å…·ä¸Šä¹Ÿæ˜¯ä¸é”™çš„ï¼Œä¾‹å¦‚ï¼šwebpack, babel, vs code, scssç­‰ã€‚è¿™äº›éƒ½æ˜¯ç°ä»£å‰ç«¯å·¥ç¨‹çš„æ„å»ºå·¥å…·ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸä¼šæ¯”æŸä¸€ä¸ªæ¡†æ¶æ›´é•¿è¿œã€‚ å‚è€ƒbabel-plugin-handbook babel-user-handbook å¼ºåˆ¶jestä½¿ç”¨æ–°çš„babel options corejs Babel 7ä½¿ç”¨æ€»ç»“ core-js-3-babel-and-a-look-into-the-future babel-preset-envå®˜æ–¹ä»“åº“ npm å¸¸ç”¨å‘½ä»¤è¯¦è§£ A Beginnerâ€™s Guide to npm â€” the Node Package Manager","tags":[{"name":"babel","slug":"babel","permalink":"https://betgar.github.io/tags/babel/"}]},{"title":"babelçš„é…ç½®çš„é»˜è®¤å¥—è·¯","date":"2019-07-15T05:00:00.000Z","path":"2019/07/15/babel-plugin-preset-default-configration/","text":"babelçš„é…ç½®çš„é»˜è®¤å¥—è·¯ æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜å…šï¼Œè¿™ç¯‡æ–‡ç« ä»‹ç»ä¸€ç‚¹babelçš„é»˜è®¤é…ç½®å¥—è·¯ï¼Œæ€»ç»“äº†ä¸€ç‚¹é‡åˆ°çš„é¡¹ç›®ç®¡ç†é—®é¢˜ã€‚ babelçš„bugåˆºæ¿€äº†æˆ‘ ç°è±¡ï¼šé¡¹ç›®ç¼–è¯‘æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œæ‰“å¼€é¡µé¢æ‰æŠ¥é”™ é—®é¢˜ç°è±¡consoleæŠ¥é”™ï¼š_objectSpread is not defined åŸå› ï¼šæ ¹æ®è¾“å‡ºçš„é”™è¯¯ï¼Œæˆ‘çŒœæµ‹æ˜¯babelçš„é—®é¢˜ï¼Œå› ä¸º_objectSpreadå°±æ˜¯ä½¿ç”¨äº†æ–°çš„å¯¹è±¡å±•å¼€çš„è¯­æ³•...objï¼Œç¼–è¯‘ä¹‹åæ‰å‡ºç°çš„ã€‚å½“ç„¶è¿™é‡Œæˆ‘ä¹Ÿè°ƒè¯•äº†ç¼–è¯‘åæ‰“ä»£ç ã€‚ã€å¦‚æœä½ æƒ³çœ‹ç¼–è¯‘æ‰“åŒ…åä»£ç ï¼Œä»‹ç»ä¸€ç¯‡æ–‡ç« ç»™ä½ : webpackç¼–è¯‘vueé¡¹ç›®ç”Ÿæˆçš„ä»£ç æ¢ç´¢ã€‘ åˆ†æï¼šé€šè¿‡git logå¿«é€Ÿåˆ†æpackage.jsonçš„å˜æ›´ï¼Œå‘ç°åªæ›´æ–°è¿‡babelç›¸å…³ã€‚æ‰€ä»¥å®é”¤æ˜¯babelé—®é¢˜ã€‚ åˆ†ægit logæ—¶ï¼Œæˆ‘ä»¬å½“æ—¶åšçš„commit message styleç»Ÿä¸€çš„ä½œç”¨å°±å‘æŒ¥å‡ºæ¥äº†ï¼Œæ‰€æœ‰çš„å·¥å…·é“¾ç›¸å…³å˜æ›´ï¼Œç»Ÿä¸€éƒ½æ˜¯choreå¼€å¤´ï¼Œæ‰€ä»¥æ‰èƒ½åšåˆ°å¿«é€Ÿå®šä½ã€‚é¡ºä¾¿çœ‹çœ‹æˆ‘ä»¬é¡¹ç›®çš„commit message commit message style åœºæ™¯é‡ç°ï¼šbabel repl demoé“¾æ¥ çœŸå®åŸå› ï¼šå¯¹è±¡å±•å¼€çš„è¯­æ³•ï¼Œbabelç¼–è¯‘ä¹‹åæ³¨å…¥äº†_objectSpreadæˆ–è€…_objectSpread2å‡½æ•°æ¥å¤„ç†ï¼Œç»´æŠ¤çš„å°ä¼™ä¼´æ²¡æœ‰æŠŠæ‰€æœ‰çš„åˆ†æ”¯éƒ½è¦†ç›–ã€‚ä¿®å¤è¿™ä¸ªissuesçš„å°ä¼™ä¼´ä¹ŸæŒºå¹½é»˜ï¼Œä¼°è®¡ä¹Ÿæ˜¯è¢«æŠ˜è…¾çš„å¤Ÿå‘›ï¼Œè¯´äº†ä¸€å¥ç©ç¬‘è¯Iâ€™ll now go hiding myself somewhere and I wonâ€™t touch an helper for a few months ğŸ˜† è€Œä¸”æ­¤bugæ˜¯babel v7.5.4ä¿®å¤çš„ï¼Œè€Œä¸”åœ¨ä½ç‰ˆæœ¬çš„@babel/coreä½¿ç”¨äº†é«˜ç‰ˆæœ¬çš„@babel/plugin-proposal-object-rest-spreadæ‰èƒ½é‡ç°ã€‚ _objectSpreadå®˜æ–¹issuesç›¸å…³é“¾æ¥ï¼š ReferenceError: _objectSpread is not defined after update Missing helpers only throw once Fix _objectSpread2 for real æ‰¾çš„é—®é¢˜çš„æ ¹æºäº†ï¼Œæ–°é—®é¢˜æ¥äº†ï¼Œæˆ‘æ€ä¹ˆæ›´æ–°@babel/coreå‘¢ï¼Ÿ å› ä¸ºä¸æ˜¯é¡¹ç›®ç›´æ¥ä¾èµ–çš„@babel/coreï¼Œè€Œæ˜¯å…¶å®ƒå·¥å…·ä¾èµ–ï¼Œæˆ‘æ›´æ–°äº†ä¹Ÿä¸ä¸€å®šèµ·ä½œç”¨ã€‚ ä»‹ç»npmä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼š æŸ¥çœ‹é¡¹ç›®ä¸­å®‰è£…çš„packageç‰ˆæœ¬å’Œä¾èµ–å…³ç³» 123npm ls @babel/core`-- @vue/cli-plugin-babel@3.9.2 `-- @babel/core@7.5.4 çŸ¥é“äº†ä¾èµ–@babel/coreæ˜¯@vue/cli-plugin-babelï¼Œé‚£å‡çº§@vue/cli-plugin-babelå°±è¡Œäº†ã€‚ æŸ¥çœ‹npmä»“åº“çš„packageç‰ˆæœ¬å’Œä¾èµ– 1npm show @babel/core æ¨èä¸€ä¸ªnpm-checkå·¥å…·ï¼Œä¸“é—¨ç”¨æ¥æ›´æ–°ä¾èµ–ã€‚ å¯ä»¥æ‰§è¡Œnpm-check -uæ¥è¿›è¡Œäº¤äº’å¼é€‰æ‹©æ›´æ–°ï¼Œè€Œä¸”è¿˜åˆ—å‡ºäº†å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥ç›´æ¥çœ‹çœ‹release logä¹‹åå†å†³å®šæ˜¯å¦æ›´æ–°ã€‚ babelçš„pluginå’Œpreseté…ç½®é»˜è®¤å¥—è·¯ æœ¬æ¥æˆ‘å°±æ¯”è¾ƒæ‡’ï¼Œä¸€ç›´åœ¨è®¡åˆ’å­¦ä¹ çš„è·¯ä¸Šï¼ŒåŸºæœ¬éƒ½æ²¡è½å®è¡ŒåŠ¨ã€‚è¿™æ¬¡é¡¹ç›®å‡ºç°é—®é¢˜ï¼Œæˆ‘ä¸å¾—ä¸å»äº†è§£äº†ä¸€ä¸‹ï¼Œbabelé…ç½®çš„é‚£äº›å¥—è·¯ã€‚Babelçš„v7ç‰ˆæœ¬æ‰€æœ‰åŒ…éƒ½é‡å‘½åäº†ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦åšåˆ°äº†è§£ã€‚ babel v7 å®˜æ–¹å‡çº§æ–‡æ¡£é“¾æ¥ åŒ…å«çš„å†…å®¹å¤ªå¤šï¼Œä»”ç»†è¿‡ä¸€éæ‰è¡Œï¼Œå¾ˆå¤šé…ç½®æˆ–è€…åŒ…åç§°å‘½åè§„åˆ™éƒ½ä¿®æ”¹äº†ã€‚ babel v7.4æ”¯æŒcore-js@3 babel v7.4æ”¯æŒcore-js@3ï¼Œå°¤å…¶æ˜¯å¯¹@babel/polyfillå’Œ@babel/preset-envåˆå¸¦æ¥äº†å¾ˆå¤šæ”¹å˜ã€‚ æ–°çš„corejsé…ç½®é¡¹ corejsé…ç½®é¡¹é“¾æ¥options corejs å½“é¡¹ç›®ä¸­çš„babelå‡çº§åˆ°v7.4+æ—¶ä¼šå‡ºç°ä¸‹é¢çš„è­¦å‘Šï¼š WARNING: We noticed youâ€™re using the useBuiltIns option without declaring a core-js version. Currently, we assume version 2.x when no version is passed. Since this default version will likely change in future versions of Babel, we recommend explicitly setting the core-js version you are using via the corejs option. 1234567891011121314151617181920// ä½¿ç”¨core-js@3çš„babel.config.jsmodule.exports = function (api) &#123; api.cache(true); const presets = [ [\"@babel/preset-env\", &#123; \"useBuiltIns\": \"usage\", \"corejs\":3, // æŒ‡å®šç‰ˆæœ¬ \"targets\":&#123; \"browsers\":[\"&gt; 1%\", \"last 2 versions\", \"not ie &lt;= 8\"] &#125; &#125; ] ]; return &#123; presets, // plugins &#125;;&#125; æ³¨æ„ï¼šæŠŠç›¸åº”çš„core-jså®‰è£…åˆ°é¡¹ç›®ä¾èµ–ä¸­ï¼Œnpm i core-js@2 æˆ–è€…npm i core-js@3 @babel/polyfillä¸æ”¯æŒä»core-js2å‡çº§åˆ°core-js3ï¼Œæ‰€ä»¥v7.4å¼€å§‹@babel/polyfillå˜æˆè¿‡æ—¶(deprecated) å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨core-js@3ï¼Œåˆ™åº”è¯¥ä¿®æ”¹å¯¼å…¥é…ç½® 1import \"@babel/polyfill\"; æ›¿æ¢ä¸ºï¼š 12import \"core-js/stable\";import \"regenerator-runtime/runtime\"; ç›´æ¥å®‰è£…ä¾èµ–åˆ°é¡¹ç›®ï¼š 1npm i --save core-js regenerator-runtime å› ä¸ºbabelå’Œcore-jsç»‘å®šçš„å¾ˆç´§å¯†ï¼Œæ‰€ä»¥æ¨èçœ‹ä¸€ä¸‹core-jsä½œè€…çš„æ–‡ç« ï¼šcore-js-3-babel-and-a-look-into-the-futureè¯¦ç»†ä»‹ç»äº†core-js@3ç‰ˆæœ¬å¸¦æ¥çš„æ”¹å˜ï¼Œä»¥åŠè§£å†³çš„é—®é¢˜ã€‚ Pluginé…ç½®å¥—è·¯ syntax pluginså…è®¸babelå»parseç‰¹å®šçš„ç±»å‹çš„syntaxè€Œä¸æ˜¯å»è½¬æ¢å˜å½¢ï¼ˆtransformï¼‰ æ³¨æ„ï¼štransform pluginsä¼šè‡ªåŠ¨å¯ç”¨syntax pluginsã€‚ å› æ­¤ï¼Œå¦‚æœå·²ç»ä½¿ç”¨äº†ç›¸åº”çš„transform pluginsï¼Œåˆ™æ— éœ€æŒ‡å®šsyntax pluginsã€‚ Plugin è·¯å¾„å¦‚æœ plugin åœ¨ npm ä¸Šï¼Œä½ å¯ä»¥ä¼ å…¥é¢„è®¾åç§°ï¼Œbabel å°†æ£€æŸ¥å®ƒæ˜¯å¦å·²å®‰è£…åœ¨ node_modules ä¸­ 123&#123; \"plugins\": [\"babel-plugin-myPlugin\"]&#125; è¿˜å¯ä»¥æŒ‡å®šçš„ç›¸å¯¹/ç»å¯¹è·¯å¾„ã€‚ 123&#123; \"plugins\": [\"./node_modules/asdf/plugin\"]&#125; Plugin ç®€å†™(å®˜æ–¹éå¸¸ä¸æ¨è)å¦‚æœåŒ…çš„åç§°ä»¥ babel-plugin- ä¸ºå‰ç¼€ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™ï¼š 123456&#123; \"plugins\": [ \"myPlugin\", \"babel-plugin-myPlugin\" // equivalent ]&#125; è¿™ä¹Ÿé€‚ç”¨äº scoped åŒ…ï¼š 123456&#123; \"plugins\": [ \"@org/babel-plugin-name\", \"@org/name\" // equivalent ]&#125; Pluginæ‰§è¡Œé¡ºåº å¦‚æœä¸¤ä¸ªtransformséƒ½è®¿é—®â€œç¨‹åºâ€èŠ‚ç‚¹ï¼Œåˆ™transformså°†ä»¥pluginæˆ–preseté¡ºåºè¿è¡Œã€‚ pluginåœ¨presetä¹‹å‰è¿è¡Œã€‚ pluginæ‰§è¡Œé¡ºåºæ˜¯ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªã€‚ preseté¡ºåºç›¸åï¼ˆä»æœ€ååˆ°ç¬¬ä¸€ä¸ªï¼‰ã€‚ 123&#123; \"plugins\": [\"transform-decorators-legacy\", \"transform-class-properties\"]&#125; å…ˆæ‰§è¡Œtransform-decorators-legacyåtransform-class-properties Plugin é€‰é¡¹ pluginså’Œ presets éƒ½å¯ä»¥é€šè¿‡å°†åç§°å’Œé€‰é¡¹å¯¹è±¡æ”¾åœ¨é…ç½®ä¸­çš„æ•°ç»„ä¸­æ¥æŒ‡å®šé€‰é¡¹ã€‚ å¯¹äºä¸æŒ‡å®šé€‰é¡¹ï¼Œè¿™äº›éƒ½æ˜¯ç­‰åŒçš„ï¼š 123&#123; \"plugins\": [\"pluginA\", [\"pluginA\"], [\"pluginA\", &#123;&#125;]]&#125; è¦æŒ‡å®šé€‰é¡¹ï¼Œè¯·ä½¿ç”¨é€‰é¡¹åç§°ä½œä¸º key ä¼ é€’å¯¹è±¡ã€‚ 1234567891011&#123; \"plugins\": [ [ \"transform-async-to-module-method\", &#123; \"module\": \"bluebird\", \"method\": \"coroutine\" &#125; ] ]&#125; preseté…ç½®å¥—è·¯ presetæ˜¯ä¸€ä¸ªæ’ä»¶æ•°ç»„ 123456789module.exports = function() &#123; return &#123; plugins: [ \"pluginA\", \"pluginB\", \"pluginC\", ] &#125;;&#125; Presets å¯ä»¥åŒ…å«å…¶ä»–çš„ presets ä»¥åŠå¸¦æœ‰é€‰é¡¹çš„æ’ä»¶ã€‚ 123456789module.exports = () =&gt; (&#123; presets: [ require(\"@babel/preset-env\"), ], plugins: [ [require(\"@babel/plugin-proposal-class-properties\"), &#123; loose: true &#125;], require(\"@babel/plugin-proposal-object-rest-spread\"), ],&#125;); Preset è·¯å¾„å¦‚æœ preset åœ¨ npm ä¸Šï¼Œä½ å¯ä»¥ä¼ å…¥é¢„è®¾åç§°ï¼Œbabel å°†æ£€æŸ¥å®ƒæ˜¯å¦å·²å®‰è£…åœ¨ node_modules ä¸­ 123&#123; \"presets\": [\"babel-preset-myPreset\"]&#125; è¿˜å¯ä»¥æŒ‡å®š presets çš„ç›¸å¯¹/ç»å¯¹è·¯å¾„ã€‚ 123&#123; \"presets\": [\"./myProject/myPreset\"]&#125; Preset ç®€å†™(å®˜æ–¹éå¸¸ä¸æ¨è)å¦‚æœåŒ…çš„åç§°ä»¥ babel-preset- ä¸ºå‰ç¼€ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™ï¼š 123456&#123; \"presets\": [ \"myPreset\", \"babel-preset-myPreset\" // ç­‰åŒ ]&#125; è¿™ä¹Ÿé€‚ç”¨äº scoped åŒ…ï¼š 123456&#123; \"presets\": [ \"@org/babel-preset-name\", \"@org/name\" // ç­‰åŒ ]&#125; 1234567891011// vue-cliç”Ÿæˆçš„babel.config.jsmodule.exports = &#123; presets: [ [ '@vue/app', // å¯¹åº” @vue/babel-preset-app,å½“æ—¶å®³çš„æˆ‘æ‰¾æ¥æ‰¾å»éƒ½æ²¡æ‰¾åˆ°åŒ… &#123; useBuiltIns: 'entry', corejs: 2, // @see https://babeljs.io/docs/en/babel-preset-env#corejs &#125;, ],&#125;; Presetæ‰§è¡Œé¡ºåºç›¸å Preset çš„é¡ºåºæ˜¯ç›¸åçš„(ä»æœ€åä¸€ä¸ªåˆ°ç¬¬ä¸€ä¸ª). 1234567&#123; \"presets\": [ \"a\", \"b\", \"c\" ]&#125; å°†ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºè¿è¡Œï¼šc, b, ç„¶å aã€‚ Preset é€‰é¡¹ æ’ä»¶å’Œ presets éƒ½å¯ä»¥é€šè¿‡å°†åç§°å’Œé€‰é¡¹å¯¹è±¡æ”¾åœ¨é…ç½®ä¸­çš„æ•°ç»„ä¸­æ¥æŒ‡å®šé€‰é¡¹ã€‚ å¯¹äºä¸æŒ‡å®šé€‰é¡¹ï¼Œè¿™äº›éƒ½æ˜¯ç­‰åŒçš„ï¼š 1234567&#123; \"presets\": [ \"presetA\", [\"presetA\"], [\"presetA\", &#123;&#125;], ]&#125; è¦æŒ‡å®šé€‰é¡¹ï¼Œè¯·ä½¿ç”¨é€‰é¡¹åç§°ä½œä¸º key ä¼ é€’å¯¹è±¡ã€‚ 12345678&#123; \"presets\": [ [\"@babel/preset-env\", &#123; \"loose\": true, \"modules\": false &#125;] ]&#125; æ€»ç»“ å‰ç«¯çš„çŸ¥è¯†é“¾å¤ªé•¿ï¼ŒæŠ€æœ¯æ›´æ–°è¶Šæ¥è¶Šå¿«ã€‚å‰ç«¯çš„æŠ•èµ„é£é™©è¿˜æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥è°¨æ…é€‰æ‹©æ¡†æ¶ï¼Œåˆ†é…ä¸€ç‚¹æ—¶é—´æŠ•èµ„åœ¨ä¸šç•Œå…¬è®¤çš„å·¥å…·ä¸Šä¹Ÿæ˜¯ä¸é”™çš„ï¼Œä¾‹å¦‚ï¼šwebpack, babel, vs code, scssç­‰ã€‚è¿™äº›éƒ½æ˜¯ç°ä»£å‰ç«¯å·¥ç¨‹çš„æ„å»ºå·¥å…·ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸä¼šæ¯”æŸä¸€ä¸ªæ¡†æ¶æ›´é•¿è¿œã€‚ å‚è€ƒbabel-plugin-handbook babel-user-handbook å¼ºåˆ¶jestä½¿ç”¨æ–°çš„babel options corejs Babel 7ä½¿ç”¨æ€»ç»“ core-js-3-babel-and-a-look-into-the-future babel-preset-envå®˜æ–¹ä»“åº“ npm å¸¸ç”¨å‘½ä»¤è¯¦è§£ A Beginnerâ€™s Guide to npm â€” the Node Package Manager","tags":[{"name":"babel","slug":"babel","permalink":"https://betgar.github.io/tags/babel/"}]},{"title":"å‰ç«¯å¼€å‘VSCodeæ’ä»¶æ¨è","date":"2019-07-10T11:00:00.000Z","path":"2019/07/10/the-vscode-plugins/","text":"å‰ç«¯å¼€å‘VSCodeæ’ä»¶æ¨è VSCodeç¤¾åŒºçš„ç¹è£å‘å±•ï¼Œæ’ä»¶ç¤¾åŒºä¹Ÿæ˜¯çƒ­é—¹éå‡¡ï¼Œæ’ä»¶å¤šäº†é€‰æ‹©å°±å¤šäº†ï¼Œè¿™é‡Œæ¨èä¸€ä¸‹æˆ‘å¸¸ç”¨çš„æ’ä»¶ã€‚æˆ‘ç”¨Vueå¼€å‘ï¼Œæ‰€ä»¥ä¸€äº›æ’ä»¶å’ŒVueç›¸å…³ã€‚ æ’ä»¶VSCodeç›¸å…³ one dark proä¸»é¢˜ https://marketplace.visualstudio.com/items?itemName=zhuangtongfa.Material-theme GlassIt-VSCï¼ˆæ¯›ç»ç’ƒé€æ˜æ•ˆæœï¼‰ https://marketplace.visualstudio.com/items?itemName=s-nlf-fh.glassit vscode-icons https://marketplace.visualstudio.com/items?itemName=vscode-icons-team.vscode-icons local history ( vscodeæ‹¥æœ‰æœ¬åœ°æ¢å¤çš„æŸä¸€æ—¶åˆ»èƒ½åŠ›) https://marketplace.visualstudio.com/items?itemName=xyz.local-history codeç›¸å…³ codeif(å˜é‡èµ·å) https://marketplace.visualstudio.com/items?itemName=unbug.codelf search node_modules https://marketplace.visualstudio.com/items?itemName=jasonnutter.search-node-modules path-intellisense https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense vscode-element-helper https://marketplace.visualstudio.com/items?itemName=ElemeFE.vscode-element-helper ant-design-vue-helper https://marketplace.visualstudio.com/items?itemName=ant-design-vue.vscode-ant-design-vue-helper font awesome icons https://marketplace.visualstudio.com/items?itemName=idleberg.icon-fonts auto-close-tag https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-close-tag auto-rename-tag https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag è‡ªåŠ¨å¯¼å…¥(import) (TypeScript &amp; TSX) https://marketplace.visualstudio.com/items?itemName=steoates.autoimport æˆå¯¹çš„æ‹¬å·è‡ªåŠ¨æ·»åŠ é¢œè‰²ï¼ˆbracket-pair-colorizerï¼‰ https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer é¢œè‰²é«˜äº®æ˜¾ç¤º https://marketplace.visualstudio.com/items?itemName=naumovs.color-highlight npm-intellisense https://marketplace.visualstudio.com/items?itemName=christian-kohler.npm-intellisense â€‹ debugger ç³»åˆ— debugger for chrome https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome debugger for edge(Edge HTML &amp; edge Chromium) https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-edge debugger for firefox https://marketplace.visualstudio.com/items?itemName=hbenl.vscode-firefox-debug é…ç½®æ–‡ä»¶ç³»åˆ— .envé…ç½®æ–‡ä»¶ ç¼–è¾‘ä»¥.envç»“å°¾çš„æ–‡ä»¶. https://marketplace.visualstudio.com/items?itemName=mikestead.dotenv 123456789// setting.jsonæ·»åŠ è¿™ä¹ˆä¸€å¥ï¼Œæ‰€æœ‰ä»¥.envå¼€å¤´çš„å…¨éƒ½åŒ¹é…// vueä¸‹çš„ç¯å¢ƒé…ç½®æ–‡ä»¶å‘½åæ¨èï¼š// .env.production .env.development // .env.alpha .env.beta .env.rc&#123; \"files.associations\": &#123; \".env*\": \"dotenv\" &#125;&#125; .editorconfigé…ç½®æ–‡ä»¶æ’ä»¶ https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig ä»£ç æ ¼å¼åŒ– eslint https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint htmlHint https://marketplace.visualstudio.com/items?itemName=mkaufman.HTMLHint 123456// setting.json&#123; \"files.associations\": &#123; \"*.vue\": \"html\", // æˆ‘æ²¡è¯•è¿‡ï¼Œå› ä¸ºæœ‰vetur &#125;&#125; prettier https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode Beautify(prettier é€‰æ‹©å…¶ä¸€) https://marketplace.visualstudio.com/items?itemName=HookyQR.beautify gitç›¸å…³ Git History https://marketplace.visualstudio.com/items?itemName=donjayamanne.githistory gitlens https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens Vueç›¸å…³ vue-peek https://marketplace.visualstudio.com/items?itemName=dariofuzinato.vue-peek vetur https://marketplace.visualstudio.com/items?itemName=octref.vetur è¾…åŠ©å·¥å…· setting sync (å¢™è£‚æ¨è) å¦‚æœä½ æœ‰å¤šå°ç”µè„‘ï¼Œæƒ³åœ¨ä¸åŒç”µè„‘ä¹‹é—´åŒæ­¥VSCodeé…ç½®ï¼Œå°±ç”¨å®ƒå§ã€‚ æ³¨æ„ï¼š ä½¿ç”¨gist æ—¶è®°å¾—ä½¿ç”¨privateï¼Œé˜²æ­¢ç§æœ‰tokenæ³„éœ²ã€‚ https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync todo tree https://marketplace.visualstudio.com/items?itemName=Gruntfuggly.todo-tree live server https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer jira plugin https://marketplace.visualstudio.com/items?itemName=gioboa.jira-plugin powershell https://marketplace.visualstudio.com/items?itemName=ms-vscode.PowerShell","tags":[{"name":"vscode","slug":"vscode","permalink":"https://betgar.github.io/tags/vscode/"}]},{"title":"å‰ç«¯å°çº ç»“--Event Busæ¨¡å—çº¦å®š","date":"2019-07-08T11:30:00.000Z","path":"2019/07/08/the-event-layer-design/","text":"å‰ç«¯å°çº ç»“â€“Event Busæ¨¡å—çº¦å®š æœ¬æ–‡åªæ˜¯ç»™ä¸€ä¸ªé’ˆå¯¹æŸä¸€ç±»é—®é¢˜çš„å¤„ç†æ€è·¯ã€‚ èƒŒæ™¯æ ‡é¢˜æœ‰ç‚¹å¤§ï¼Œæœ¬æ–‡äº§ç”Ÿçš„èƒŒæ™¯æ˜¯ï¼Œå› ä¸ºåœ¨å°è£…Axiosçš„æ—¶å€™ï¼Œå¯¹äºæœåŠ¡ç«¯çš„å¼‚å¸¸æˆ–è€…éœ€è¦æ ¹æ®ä¸šåŠ¡ä¸Šå¼‚å¸¸codeï¼Œè¿›è¡Œä¸åŒçš„å¤„ç†é€»è¾‘ã€‚ä½†æ˜¯åŸºäºAxiosåšçš„å°è£…ä½œä¸ºè·¨é¡¹ç›®ã€è·¨æ¡†æ¶æ¨¡å—ä½¿ç”¨æ‰€ä»¥ä¸èƒ½å’Œå…·ä½“çš„routeræˆ–è€…storeç­‰æ¨¡å—è€¦åˆï¼Œæ‰€ä»¥ä½¿ç”¨Event Busï¼Œåœ¨æ•´ä¸ªWebèŒƒå›´ä¸­æ¥è§£è€¦å„ä¸ªç»„ä»¶ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨Event Busï¼Ÿ Event Busæœ‰ç‰¹æ®Šçš„ä½¿ç”¨åœºæ™¯ï¼Œä¸æ­¢åœ¨viewç»„ä»¶ä¹‹é—´çš„é€šä¿¡ä½¿ç”¨ï¼›Event Busè®¾è®¡ä½œä¸ºæ•´ä¸ªSPAåº”ç”¨çš„äº‹ä»¶ï¼ˆæ¶ˆæ¯ï¼‰æŠ•é€’å±‚ä½¿ç”¨ã€‚ æ¨¡å—é€šä¿¡ è§£å†³æ¨¡å—ä¹‹é—´çš„é€šä¿¡é—®é¢˜ï¼Œviewç»„ä»¶å±‚é¢ï¼Œçˆ¶å­ç»„ä»¶ã€å…„å¼Ÿç»„ä»¶é€šä¿¡éƒ½å¯ä»¥ä½¿ç”¨event buså¤„ç†ã€‚ æ¨¡å—è§£è€¦ storage changeäº‹ä»¶ï¼Œcookie changeäº‹ä»¶ï¼Œviewç»„ä»¶çš„äº‹ä»¶ç­‰ï¼Œå…¨éƒ¨è½¬æ¢ ä½¿ç”¨Event Busæ¥è®¢é˜…å’Œå‘å¸ƒï¼Œè¿™æ ·å°±ç»Ÿä¸€äº†æ•´ä¸ªåº”ç”¨ä¸åŒæ¨¡å—ä¹‹é—´çš„é€šä¿¡æ¥å£é—®é¢˜ã€‚ çˆ¶å­é¡µé¢é€šä¿¡ window.postMessage + Event Bus å¤šé¡µé¢é€šä¿¡ storage change + Event Bus Event Busæ¨¡å—å°è£…Event Busæ¥å£è®¾è®¡ å‚è€ƒjQueryå’ŒVue æ–¹æ³•ï¼š on, off, once, publish(å¯é€‰trigger/dispatch/emit) å¦‚æœä½ ä½¿ç”¨vueæ¡†æ¶ï¼Œå°±ä½¿ç”¨Vueå¯¹è±¡æˆ–è€…ä½¿ç”¨dynamic-vue-busåŒ…ï¼ˆå…¶å®ä¹Ÿæ˜¯åŒ…è£…äº†ä¸‹Vueï¼Œå®ç°è‡ªåŠ¨destroy handlerï¼‰ã€‚ å¦‚æœæä¸€ä¸ªæ¡†æ¶æ— å…³çš„ï¼Œå…¼å®¹æ€§å¥½çš„å°±åŸºäºPubSubJS å°è£…ã€‚ BusEventå…ƒæ•°æ®æ¨¡å‹è®¾è®¡ å‚è€ƒDOMä¸­çš„Eventå¯¹è±¡ 123456789101112// æœåŠ¡ç«¯è¿”å›çš„å…ƒæ•°æ®æ¨¡å‹(responeBody)export interface ResponseResult&lt;T = any&gt; &#123; message: string; code: number; data: T;&#125;export interface BusEvent&lt;T = any&gt; extends ResponseResult&lt;T&gt; &#123; type: string;&#125;export type BusEventHandler = (data: BusEvent) =&gt; any; è¿™é‡Œçš„messageæ˜¯å‚è€ƒErroræ¥è®¾è®¡çš„ï¼Œå› ä¸ºå½“æˆ‘ä»¬ç¨‹åºå¼‚å¸¸æˆ–è€…ä¸šåŠ¡ä¸Šå¼‚å¸¸æ—¶ï¼Œå°±å¯ä»¥ç»Ÿä¸€ç›´æ¥ä½¿ç”¨new Error()è¿›è¡Œå¤„ç†ã€‚ å°è£…å®ç° é¡¹ç›®ä¸­å®ç°é€‰æ‹©ä¸€ç§å³å¯ã€‚ åŸºäºVueå°è£…å®ç°1234567891011121314151617181920212223242526272829303132333435import EventBus from 'dynamic-vue-bus';import &#123; isFunction &#125; from 'lodash-es';// åŸºäºVueå®ç°export const VueBus = &#123; originBus: EventBus, on(topic: string | string[], handler: BusEventHandler): string[] &#123; // @ts-ignore this.originBus.$on(topic, handler) return []; &#125;, off(topic: string | string[], handler?: any) &#123; const length = arguments.length; switch (length) &#123; case 1: this.originBus.$off(topic); break; case 2: this.originBus.$off(topic, handler); break; default: this.originBus.$off(); &#125; &#125;, once(topic: string, handler: BusEventHandler) &#123; // @ts-ignore return this.originBus.$once(topic, handler); &#125;, publish(topic: string, data: BusEvent) &#123; return this.originBus.$emit(topic, data); &#125;,&#125;; ä½¿ç”¨ï¼š 12345678910111213141516171819202122232425function wsHandler(evt: BusEvent) &#123; console.log(evt);&#125;const topic = 'ws.100021';VueBus.on(topic, wsHandler);// VueBus.once(topic, wsHandler);VueBus.publish(topic, &#123; code: 100021, type: 'ws', message: '', data: &#123; result: [&#123; id: 1, name: 'junna' &#125;] &#125;&#125;);// VueBus.off();VueBus.off(topic);// VueBus.off(topic, wsHandler);// ä½¿ç”¨åŸç”Ÿçš„Vueconst eventBus = PubSubBus.originBus; åŸºäºPubSubJSå®ç° ä»¥ä¸‹ä»£ç å¹¶æ²¡æµ‹è¯• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647export const PubSubBus = &#123; originBus: PubSub, on(topic: string | string[], handler: BusEventHandler): string[] &#123; if (!topic) &#123; return []; &#125; // @ts-ignore let events: string[] = [].concat(topic); return events.map(evt =&gt; PubSub.subscribe(evt, () =&gt; (topic: string, data: BusEvent) =&gt; handler(data) ) ); &#125;, /** * ä¸å…¼å®¹è¿™ç§æ¨¡å¼ï¼šPubSubBus.off('ws.001', handler); * å› ä¸ºPubSubJSä½¿ç”¨tokenæ¥offè¿™ç§æ“ä½œ */ off(tokenOrHandler?: () =&gt; void | string | string[]) &#123; let length = arguments.length, evts: string[], listener; if (length === 0) &#123; PubSub.clearAllSubscriptions(); &#125; else &#123; // PubSubBus.off(handler); if (isFunction(tokenOrHandler)) &#123; PubSub.unsubscribe(listener); &#125; else &#123; // @ts-ignore evts = [].concat(tokenOrHandler); evts.forEach(evt =&gt; PubSub.unsubscribe(evt)); &#125; &#125; &#125;, once(topic: string, handler: BusEventHandler) &#123; // @ts-ignore return PubSub.subscribeOnce(topic, handler); &#125;, publish(topic: string, data: BusEvent, sync = false) &#123; return sync ? PubSub.publishSync(topic, data) : PubSub.publish(topic, data); &#125;,&#125;; ä½¿ç”¨ï¼š 1234567891011121314151617181920212223242526function wsHandler(evt: BusEvent) &#123; console.log(evt);&#125;const topic = 'ws.100021';const tokens: string[] = PubSubBus.on(topic, wsHandler);// PubSubBus.once(topic, wsHandler);PubSubBus.publish(topic, &#123; code: 100021, type: 'ws', message: '', data: &#123; result: [&#123; id: 1, name: 'junna' &#125;] &#125;&#125;);// PubSubBus.off();PubSubBus.off(topic);// PubSubBus.off(tokens[0]); // ç­‰ä»·äºVueBus.off(topic, wsHandler);// PubSubBus.off(wsHandler); // ç§»é™¤å¤šä¸ªtopicä½¿ç”¨çš„åŒä¸€ä¸ªhandler.// ä½¿ç”¨åŸç”Ÿçš„PubSubJSconst PubSub = PubSubBus.originBus; Eventç›¸å…³çº¦å®šBusEvent#typeç±»å‹çº¦å®š äº‹ä»¶ç±»å‹çš„çº¦å®šå‚è€ƒï¼š wsï¼š WebSocketäº‹ä»¶ storage: å‚¨å­˜äº‹ä»¶, sessionStorage, localStorage cs: cache storage ap: application cache cookie: cookieäº‹ä»¶ biz: ä¸šåŠ¡äº‹ä»¶ system: ç³»ç»Ÿäº‹ä»¶ ui: ç•Œé¢ cmpï¼š componentsäº‹ä»¶ BusEvent#codeèŒƒå›´çº¦å®š codeèŒƒå›´çº¦å®šåªæ˜¯å‚è€ƒï¼Œå› ä¸ºè¿™ä¸ªçº¦å®šéœ€è¦å’ŒæœåŠ¡ç«¯å°ä¼™ä¼´ï¼Œç”šè‡³ç³»ç»Ÿè®¾è®¡æ—¶è§„åˆ’å†³å®šã€‚ï¼ˆçå†™ï¼‰ wsï¼š 10000~19999 storage: 20000~29999, sessionStorage: 22000~22999, localStorage: 23000~23999 cs: 24000~24999 ap: 25000~25999 cookie: 26000~26999 biz: 30000~31000 system: 40000~41000 ui: 42000~42999 cmpï¼š 43000~44999 ç»Ÿä¸€å¤„ç†EventBusäº‹ä»¶ æœ‰äº†çº¦å®šï¼Œå°±å¯ä»¥ç»Ÿä¸€å‘å¸ƒç›¸å…³çš„äº‹ä»¶ 123456789101112131415161718192021222324// æ¨¡æ‹ŸWebSocketçš„æ¶ˆæ¯const data = [&#123; code: 100021, type: 'ws', message: '', data: &#123; result: [&#123; id: 1, name: 'junna' &#125;] &#125;&#125;,&#123; code: 100022, type: 'ws', message: '', data: &#123; result: [&#123; id: 1, name: 'junna' &#125;] &#125;&#125;];data.forEach(event =&gt; PubSubBus.publish(`$&#123;event.type&#125;.$&#123;event.code&#125;`), event)); æ€»ç»“ é€šè¿‡å¯¹Event Busçš„ç»Ÿä¸€å°è£…ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œç»Ÿä¸€æ•´ä¸ªSPAäº‹ä»¶ç³»ç»Ÿï¼ˆéDOMå±‚é¢ï¼‰ï¼Œå®Œæˆäº†æ¨¡å—ä¹‹é—´çš„è§£è€¦ã€‚ ç¼ºç‚¹ï¼š åŸºäºVueå°è£…å®ç°çš„ä¸æ”¯æŒnamespace åŸºäºVueå°è£…å®ç°å’ŒPubSubJSæ¥å£å‚æ•°å’Œè¿”å›å€¼æœ‰å·®å¼‚ï¼Œæ‰€ä»¥é€‰æ‹©ä¸€ç§å³å¯ å‚è€ƒglobal-event-bus PubSubJS dynamic-vue-bus è®©åœ¨Vueä¸­ä½¿ç”¨çš„EventBusä¹Ÿæœ‰ç”Ÿå‘½å‘¨æœŸ Web Storage Support Test Working with quota on mobile browsers Browser Storage Abuser BrowserStorageAbuser github","tags":[{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"},{"name":"vue","slug":"vue","permalink":"https://betgar.github.io/tags/vue/"}]},{"title":"çœ‹è¿‡å»å‰ç«¯æŠ€æœ¯æµè¡Œè¶‹åŠ¿ï¼Œå¸ƒå±€æœªæ¥å‰ç«¯æŠ€æœ¯","date":"2019-07-04T12:30:00.000Z","path":"2019/07/04/look-at-past-front-end-trends-and-prepare-for-future-front-end-technologies/","text":"çœ‹è¿‡å»å‰ç«¯æŠ€æœ¯æµè¡Œè¶‹åŠ¿ï¼Œå¸ƒå±€æœªæ¥å‰ç«¯æŠ€æœ¯ æ ‡é¢˜å…šï¼Œä¸ºå•¥ï¼Ÿå› ä¸ºåªæ˜¯è®°å½•ä¸€ä¸‹ï¼Œæä¾›å‰ç«¯æŠ€æœ¯æµè¡Œè¶‹åŠ¿çš„ç½‘ç«™èµ„æ–™æ¥æºã€‚ç»™å‡†å¤‡è¿›å…¥å‰ç«¯é¢†åŸŸæˆ–è€…åˆšå¦‚å…¥é—¨çš„å‰ç«¯å°ä¼™ä¼´ï¼Œä¸€ç‚¹å¤§æ–¹å‘ä¸Šçš„æŒ‡å¼•ã€‚ å‰ç«¯æŠ€æœ¯è¶‹åŠ¿èµ„æ–™ JavaScriptç¤¾åŒºçš„è¶‹åŠ¿ï¼ˆæ–¹æ–¹é¢é¢ï¼‰ https://stateofjs.com/ CSSç¤¾åŒºçš„æŠ€æœ¯è¶‹åŠ¿ï¼ˆæ–¹æ–¹é¢é¢ï¼‰ https://stateofcss.com/ æ¯å¹´JavaScriptçš„æ˜æ˜Ÿé¡¹ç›® https://risingstars.js.org/ JavaScripté¡¹ç›®çš„å—æ¬¢è¿ç¨‹åº¦ï¼ˆæ–¹æ–¹é¢é¢ï¼‰ https://bestofjs.org/ Webå¼€å‘è€…è·¯çº¿å›¾è°±ï¼ˆFront-end, DevOps, Back-endï¼‰ https://github.com/kamranahmedse/developer-roadmap å‰ç«¯å¼€å‘æ‰‹å†Œï¼ˆæŒ‡å¯¼æ€§ï¼Œæ¯å¹´ä¸€æœ¬ï¼‰ https://github.com/FrontendMasters/front-end-handbook-2019 CSS in js http://michelebertoli.github.io/css-in-js/ æœªæ¥çš„æœºä¼šå’Œæ–¹å‘ï¼ˆå¹ç‰›çš®ï¼‰ ä» æ¯”è¾ƒçƒ­é—¨æµè§ˆå™¨çš„APIæ¥çœ‹æœªæ¥çš„è¶‹åŠ¿ã€‚ hot-browser-api æ¸è¿›å¼çš„Web Apps Webç»„ä»¶åŒ– å¯è§†åŒ–ï¼ˆWebGL, åŠ¨ç”», éŸ³é¢‘ï¼Œå®æ—¶é€šä¿¡, è¯­éŸ³ï¼Œ VRï¼‰ åŠ ä¸Šä»Šå¹´çš„5Gå¼€é€šï¼Œå¯¹äºæ•´ä¸ªè¡Œä¸šå’Œç”Ÿæ€é“¾éƒ½æ˜¯æœºä¼šå’ŒæŒ‘æˆ˜ã€‚ä½ æ•¢é¢„æµ‹ä»¥åçš„Webæˆ–è€…æµè§ˆå™¨åŠŸèƒ½æœ‰å¤šå¼ºå¤§å—ï¼Ÿå‘Šè¯‰ä½ ä¸ªæ¶ˆæ¯ï¼Œè…¾è®¯ç›´æ’­åœ¨ç”¨å¾®ä¿¡å°ç¨‹åºåšç›´æ’­ï¼Œå¾ˆæµç•…ã€‚ å¦‚æœå¾ˆå¤šå…¬ä¼—å·åšä¸»ç›´æ¥è¿›å…¥ç›´æ’­å¹³å°ï¼Œé‚£æ˜¯è‡ªå¸¦æµé‡ï¼Œä½ è¯´æ˜¯ä¸æ˜¯æœºä¼šï¼Ÿ å¦‚æœæœ‰èƒ½åŠ›å¤šå…³æ³¨è¿™äº›é¢†åŸŸï¼š æµåª’ä½“(ç›´æ’­,çŸ­è§†é¢‘) å¯è§†åŒ– VR/AR IoT å›¾å½¢å­¦ Vueç”Ÿæ€ç›¸å…³èµ„æºå’Œå·¥å…·åˆ—ä¸¾ åˆ—ä¸¾ä¸€ä¸‹Vueç”Ÿæ€çš„ç›¸å…³å­¦ä¹ å’Œè¿›é˜¶èµ„æº Vueï¼ˆjsx &amp; render &amp; async componentï¼‰ vue-cli3 &amp; Webpack &amp; Rollup vue-router vuex vue-i18n Sass &amp; less CSS Modules &amp; PostCSS lodash &amp; moment.js (day.js) element-ui ant-design-vue nuxt.js vuepress TypeScript Babel vue-test-utils Jest &amp; Mocha cypress é™„ï¼šæ–°æ‰‹å‘ï¼šVue 2.0 çš„å»ºè®®å­¦ä¹ é¡ºåº å¹ç‰›çš®å®Œæ¯•ã€‚","tags":[{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"}]},{"title":"é‡æ–°è®¤è¯†Cookieçš„é™åˆ¶","date":"2019-07-03T00:00:00.000Z","path":"2019/07/03/ie11-lost-cookie-when-domain-is-localhost/","text":"é‡æ–°è®¤è¯†Cookieçš„é™åˆ¶ èƒŒæ™¯æ˜¯åœ¨ä½¿ç”¨vue-cli3å¼€å‘æ¨¡å¼å¯åŠ¨çš„æœåŠ¡ï¼Œç™»å½•æˆåŠŸæœåŠ¡ç«¯è¿”å›äº†ä¿¡æ¯ï¼Œå¹¶ä¸”è®¾ç½®äº†cookieï¼Œä½†æ˜¯åœ¨IE11ä¸‹å´æ— æ³•æ‰¾åˆ°æœåŠ¡ç«¯è®¾ç½®çš„cookieä¿¡æ¯ï¼Œè‡ªå·±ä»£ç ä¸­æ·»åŠ çš„cookieåè€ŒæˆåŠŸäº†ã€‚åˆæ˜¯æ½œåœ¨çš„å‘ï¼Ÿ vue-cli3ä½¿ç”¨developmentæ¨¡å¼å¯åŠ¨çš„é…ç½® vue.config.jsé…ç½® 12345678910111213141516module.exports = &#123; devServer: &#123; proxy: &#123; '/api': &#123; target: 'api.com', // å¼€å‘ç¯å¢ƒ changeOrigin: true, pathRewrite: &#123; '^/api': '/api', &#125;, cookieDomainRewrite: &#123; 'api.com': 'localhost', &#125;, &#125;, &#125;, &#125;,&#125;; åŸå›  åŸå› å°±æ˜¯Set-Cookieä¸­çš„Domain=localhostçš„é—®é¢˜ï¼Œå› ä¸ºè§„èŒƒè§„å®šdomainå¿…é¡»æ˜¯ä¸€ä¸ªè‡³å°‘å«æœ‰ä¸¤ä¸ªdotçš„ï¼Œä½†æ˜¯è¿˜ä¸èƒ½æ˜¯ipã€‚å…¶å®å‘¢ï¼ŒIEæ²¡é”™ï¼Œé”™åœ¨è‡ªå·±ä¸çŸ¥é“è§„èŒƒå’Œå¥—è·¯ã€‚ è§£å†³æ–¹æ¡ˆ ä¿®æ”¹vue.configçš„é…ç½®ï¼Œé‡å®šå‘ç»™null, false, â€˜â€™, æˆ–è€…localhost.cn (etc/hostsæ–‡ä»¶é‡Œé¢é…ç½®ä¸‹) 12345678910111213141516module.exports = &#123; devServer: &#123; proxy: &#123; '/api': &#123; target: 'api.com', // å¼€å‘ç¯å¢ƒ changeOrigin: true, pathRewrite: &#123; '^/api': '/api', &#125;, cookieDomainRewrite: &#123; 'api.com': null, // '' æˆ– null æˆ– falseéƒ½è¡Œ &#125;, &#125;, &#125;, &#125;,&#125;; é‡æ–°è®¤è¯†cookieçš„é™åˆ¶ è™½ç„¶cookieæµè§ˆå™¨éƒ½æ”¯æŒï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€å †çš„æ½œè§„åˆ™ã€‚ cookieçš„å±æ€§ cookieå±æ€§å€¼å’Œå±æ€§åç§°ç¼–ç  æ‰€æœ‰åœ¨ cookie åç§°æˆ– cookie å€¼ä¸­ä¸å…è®¸çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä½¿ç”¨ç™¾åˆ†æ¯”ç¼–ç å¯¹æ¯ä¸ªå­—ç¬¦çš„ UTF-8 åå…­è¿›åˆ¶ç­‰æ•ˆé¡¹è¿›è¡Œç¼–ç ã€‚Cookie åç§°æˆ– Cookie å€¼ä¸­å…è®¸å¹¶ä¸”ä»ç„¶ç¼–ç çš„å”¯ä¸€å­—ç¬¦æ˜¯ç™¾åˆ†æ¯”å­—ç¬¦,å®ƒå°†è½¬ä¹‰ä»¥å°†ç™¾åˆ†æ¯”è¾“å…¥è§£é‡Šä¸ºæ–‡æœ¬ã€‚ IEä¸‹cookieçš„pathä¸èƒ½åŒ…å«æ–‡ä»¶åhttp://blogs.msdn.com/b/ieinternals/archive/2009/08/20/wininet-ie-cookie-internals-faq.aspxQ8: Are there any limits to the HTML DOM document.cookie property? ç”±äºåŸºç¡€ WinINET InternetGetCookie å®ç°ä¸­å­˜åœ¨ä¸€ä¸ªæ¨¡ç³Šçš„ bug,IE çš„æ–‡æ¡£.cookie å¦‚æœä½¿ç”¨åŒ…å«æ–‡ä»¶åçš„è·¯å¾„å±æ€§è®¾ç½®,åˆ™ä¸ä¼šè¿”å› Cookieã€‚ 1Set-Cookie: HTTPSet-PathCookie=PASS;path=/check.htm è¿™ä¸ªcookieä¸ä¼šå‡ºç°åœ¨document.cookieä¸­ï¼Œä½†æ˜¯HTTP requestsè¿˜æ˜¯ä¼šé™„å¸¦ä¸Šã€‚ ä¸ºä»€ä¹ˆæˆ‘çš„ Cookie è¢«åˆ é™¤?https://github.com/js-cookie/js-cookie/wiki/Frequently-Asked-Questions#why-are-my-cookies-being-deleted å®ƒä»¬å¯èƒ½å¤ªå¤§,æˆ–è€…åŒä¸€åŸŸä¸­çš„ Cookie å¤ªå¤šã€‚ æ ¹æ®RFC 6265,è¿™æ˜¯æµè§ˆå™¨ä¸º Cookie å®ç°çš„è§„èŒƒ: å®é™…çš„ç”¨æˆ·ä»£ç†å®ç°å¯¹å®ƒä»¬å¯ä»¥å­˜å‚¨çš„ Cookie çš„æ•°é‡å’Œå¤§å°æœ‰é™åˆ¶ã€‚é€šç”¨ç”¨æˆ·ä»£ç†åº”æä¾›ä»¥ä¸‹æ¯ä¸ªæœ€ä½åŠŸèƒ½: æ¯ä¸ª Cookie è‡³å°‘ 4096 å­—èŠ‚(ä»¥ Cookie çš„åç§°ã€å€¼å’Œå±æ€§çš„é•¿åº¦ä¹‹å’Œæ¥è¡¡é‡)ã€‚ æ¯ä¸ªåŸŸæœ€å¤š 50 ä¸ª Cookieã€‚ æ€»å…±æœ€å¤š3000ä¸ªcookieã€‚ ä¸è¦è¶…è¿‡ RFC ä¸­è§„å®šçš„å¼ºåˆ¶é™åˆ¶ï¼Œè¿™æ„å‘³ç€æµè§ˆå™¨å¯èƒ½ä¼šç”±äºæ­¤å¤§å°é™åˆ¶è€Œæˆªæ–­ Cookieã€‚ è®¾ç½®ä¸¤ä¸ªåŒåçš„ Cookie å—?https://github.com/js-cookie/js-cookie/issues/226 ä¸å¯ä»¥ï¼Œä¼šæœ‰æ„æƒ³ä¸åˆ°æ•ˆæœã€‚ cookieä¸ä¼šè¢«åˆ é™¤çš„æƒ…å†µ è¿™ä¸ªé—®é¢˜æˆ‘çœŸçš„é‡åˆ°äº†ï¼Œå½“æ—¶è¿˜å¾ˆå¥‡æ€ªï¼Œåˆçº ç»“äº†ã€‚ ä¼šè¯æœŸCookiehttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies#%E4%BC%9A%E8%AF%9D%E6%9C%9FCookieä¼šè¯æœŸCookieæ˜¯æœ€ç®€å•çš„Cookieï¼šæµè§ˆå™¨å…³é—­ä¹‹åå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»…åœ¨ä¼šè¯æœŸå†…æœ‰æ•ˆã€‚ä¼šè¯æœŸCookieä¸éœ€è¦æŒ‡å®šè¿‡æœŸæ—¶é—´ï¼ˆExpiresï¼‰æˆ–è€…æœ‰æ•ˆæœŸï¼ˆMax-Ageï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›æµè§ˆå™¨æä¾›äº†ä¼šè¯æ¢å¤åŠŸèƒ½ï¼Œè¿™ç§æƒ…å†µä¸‹å³ä½¿å…³é—­äº†æµè§ˆå™¨ï¼Œä¼šè¯æœŸCookieä¹Ÿä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼Œå°±å¥½åƒæµè§ˆå™¨ä»æ¥æ²¡æœ‰å…³é—­ä¸€æ ·ã€‚ æ³¨æ„ ï¼šå¦‚æœä½ è¿™æ ·è®¾ç½®ï¼Œä¼šè¯æœŸcookieä¹Ÿä¸ä¼šåˆ é™¤ï¼Œæ‰€ä»¥å‰ç«¯ä¸€å®šè¦åšå¥½åˆ¤æ–­ï¼Œè¿™ä¸ªå‘æˆ‘åˆè¸©äº† Continue where you left off æŒä¹…æ€§Cookieå’Œå…³é—­æµè§ˆå™¨ä¾¿å¤±æ•ˆçš„ä¼šè¯æœŸCookieä¸åŒï¼ŒæŒä¹…æ€§Cookieå¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„è¿‡æœŸæ—¶é—´ï¼ˆExpiresï¼‰æˆ–æœ‰æ•ˆæœŸï¼ˆMax-Ageï¼‰ã€‚ cookieçš„Secureå’ŒHttpOnlyå±æ€§ æ ‡è®°ä¸º Secure çš„Cookieåªåº”é€šè¿‡è¢«HTTPSåè®®åŠ å¯†è¿‡çš„è¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯ã€‚ä» Chrome 52 å’Œ Firefox 52 å¼€å§‹ï¼Œä¸å®‰å…¨çš„ç«™ç‚¹ï¼ˆhttp:ï¼‰æ— æ³•ä½¿ç”¨Cookieçš„ Secure æ ‡è®°ã€‚HttpOnly æ ‡è®°çš„Cookieï¼Œåªèƒ½åœ¨HTTP request headersé‡Œé¢ï¼ŒJavaScriptä¸èƒ½è·å–ã€‚ åˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦å¯ç”¨cookie navigator.cookieEnabled è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œæ¥è¡¨ç¤ºå½“å‰é¡µé¢æ˜¯å¦å¯ç”¨äº† cookieã€‚æœ¬å±æ€§ä¸ºåªè¯»å±æ€§ã€‚ Cookie SameSiteå±æ€§ å¦‚æœæ‰€æœ‰ç°ä»£æµè§ˆå™¨é»˜è®¤SameSite=Strictï¼Œå˜¿å˜¿ä¸€å †åº”ç”¨ä¼šå‡ºé—®é¢˜ã€‚åˆ«äººçš„æ–‡ç« Chromeé»˜è®¤å¯ç”¨Cookie Samesiteå±æ€§ cookie-samesite-attribute å¾®è½¯ä½ æœ‰æ¯›ç—…ï¼ŒIE11è¿˜åŒºåˆ†Windowsç‰ˆæœ¬ï¼ŒSameSiteåŠŸèƒ½éƒ¨åˆ†æ”¯æŒã€‚ æ€»ç»“ æ²¡æƒ³åˆ°æ™®éæ”¯æŒçš„cookieï¼Œè¿˜æœ‰å¦‚æ­¤å¤šçš„é™åˆ¶ï¼Œæ¨è‡ªå·±çš„ç»éªŒä¸è¶³ã€‚ å‚è€ƒinternet-explorer-11-wont-set-cookies-on-a-site understanding-session-lifetime/ cookie_spec cookies-on-localhost-with-explicit-domain cookie-domain MDN_HTTP_Access_control_CORS é˜®ä¸€å³°â€“è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ cors-tutorials preflight-request å‰ç«¯å¸¸è§è·¨åŸŸæ–¹æ¡ˆ Spring mvcè§£å†³è·¨åŸŸè¯·æ±‚ï¼šResponse to preflight request doesnâ€™t pass access control check ä»€ä¹ˆæ˜¯æµè§ˆå™¨è·¨åŸŸï¼Œå¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Œä»€ä¹ˆæ˜¯ CORSï¼Ÿä»å…¥é—¨åˆ°ç²¾é€š Chromeé»˜è®¤å¯ç”¨Cookie Samesiteå±æ€§ node-http-proxy#options HTTP Cookie and Set-Cookie header fields js-cookieFrequently-Asked-Questions#why-are-my-cookies-being-deletedInternet Explorer Cookie Internals (FAQ)Chrome doesnâ€™t delete session cookiesã€è¯‘ã€‘Cookieçš„SameSiteå±æ€§","tags":[{"name":"cookie","slug":"cookie","permalink":"https://betgar.github.io/tags/cookie/"},{"name":"ie","slug":"ie","permalink":"https://betgar.github.io/tags/ie/"}]},{"title":"è‡ªå¸¦â€œæ­§è§†æ€§â€çš„IE11 inputäº‹ä»¶","date":"2019-07-02T12:30:00.000Z","path":"2019/07/02/the-weird-input-event-in-ie11/","text":"è‡ªå¸¦â€œæ­§è§†æ€§â€çš„IE11 inputäº‹ä»¶ ç¬¬ä¸€æ¬¡ç¢°åˆ°è‡ªå¸¦çš„æ­§è§†çš„bugï¼ŒIE 11æ³¥æ½­ä¸è§£é‡Šã€‚ èµ·å›  ant-design-vueçš„RangePickeråœ¨IE11ä¸‹calendar panelæ— æ³•æ­£å¸¸å±•å¼€ï¼Œçœ‹å›¾ã€‚ RangePicker å…·ä½“çš„ç›¸å…³è®¨è®ºçœ‹å‚è€ƒé“¾æ¥ä¸­çš„ant-design-vueéƒ¨åˆ†ã€‚ å› ä¸ºæˆ‘çŸ¥é“IEå’Œfirefoxã€chromeä¸‹æ—¶é—´å¤„ç†æœ‰é—®é¢˜ï¼ˆes5ä¹‹å‰ï¼‰ï¼Œä»¥ä¸ºæ˜¯Dateçš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘çš„è°ƒè¯•æ–¹å‘å°±èµ°åäº†ï¼Œé¡ºä¾¿ä»‹ç»ä¸‹Date.parseçš„è¡Œä¸ºï¼Œnew Date(â€˜å­—ç¬¦ä¸²â€™)ï¼Œå†…éƒ¨ä½¿ç”¨Date.parseè§£æã€‚ Date.parseè¡Œä¸ºè¯¡å¼‚ å‚è€ƒé“¾æ¥éƒ¨åˆ†æœ‰å¤§é‡çš„DateçŸ¥è¯†æ€»ç»“ï¼Œå¤šå¤šæµè§ˆã€‚ Date.parseåœ¨ES5ä¹‹å‰ä¸åŒæµè§ˆå™¨ï¼Œè¡Œä¸ºå·®å¼‚å¾ˆå¤§ã€‚ç°åœ¨æˆ‘åªèƒ½é‡ç°ä¸€ä¸‹IEä¸‹çš„ï¼ŒChromeå’Œfirefoxç‰ˆæœ¬éƒ½å¤ªé«˜ï¼Œå·²ç»ä¿®æ­£è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœæƒ³çœ‹ä»¥å‰çš„å…¼å®¹æ€§é—®é¢˜ï¼Œçœ‹è¿™ç¯‡åšå®¢javascript-and-dates-what-mess 12345// æ§åˆ¶å°new Date('2019-07-02')// Tue Jul 02 2019 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)new Date('2019/07/02')// Tue Jul 02 2019 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿtimeéƒ¨åˆ†ï¼Œä¸€ä¸ªä»0ç‚¹å¼€å§‹ï¼Œä¸€ä¸ªä»8ç‚¹å¼€å§‹ï¼Œä¸ºå•¥å‘¢ï¼Ÿçœ‹çœ‹MDNæ€ä¹ˆè¯´å§ã€‚ MDNæ–‡æ¡£ä¸æ¨èåœ¨ES5ä¹‹å‰ä½¿ç”¨Date.parseæ–¹æ³•ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„è§£æå®Œå…¨å–å†³äºå®ç°ã€‚ç›´åˆ°è‡³ä»Šï¼Œä¸åŒå®¿ä¸»åœ¨å¦‚ä½•è§£ææ—¥æœŸå­—ç¬¦ä¸²ä¸Šä»å­˜åœ¨è®¸å¤šå·®å¼‚ï¼Œå› æ­¤æœ€å¥½è¿˜æ˜¯æ‰‹åŠ¨è§£ææ—¥æœŸå­—ç¬¦ä¸²ï¼ˆåœ¨éœ€è¦é€‚åº”ä¸åŒæ ¼å¼æ—¶åº“èƒ½èµ·åˆ°å¾ˆå¤§å¸®åŠ©ï¼‰ã€‚ æ³¨æ„ï¼šå¦‚æœä½ è¦å…¼å®¹IEï¼Œå¯¹æ—¥æœŸå¤„ç†ï¼Œè¯·ä½¿ç”¨ä¸“é—¨çš„ç±»åº“ï¼Œä¾‹å¦‚ï¼šmoment.js, day.jsä¹‹ç±»ã€‚ Date#toString() é¡ºä¾¿æä¸€ä¸‹ï¼ŒDate#toString()ç«Ÿç„¶æœ‰è§„èŒƒï¼Œçœ‹è¿™é‡ŒDate.toStringï¼Œæ‰€ä»¥ä»Dateå­—ç¬¦ä¸²ä¸­è§£ææå–ä¸€äº›å­—ç¬¦å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„ç”¨ã€‚ä»¥åæ¨èä½¿ç”¨Intlå¯¹è±¡æ˜¯ ECMAScript å›½é™…åŒ– API çš„ä¸€ä¸ªå‘½åç©ºé—´ï¼Œå®ƒæä¾›äº†ç²¾ç¡®çš„å­—ç¬¦ä¸²å¯¹æ¯”ã€æ•°å­—æ ¼å¼åŒ–ï¼Œå’Œæ—¥æœŸæ—¶é—´æ ¼å¼åŒ– 12345678910111213141516/** * æå–GMTæ—¶åŒº * @param date * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toString#Description * @returns ''æˆ–è€…GMTï¼Œæˆ–è€…GMT+0000æˆ–è€…GMT-0000ï¼›å…¶ä¸­0000ä»£è¡¨GMTåç§»é‡ï¼Œæ˜¯å››ä½å‰ä¸¤ä½è¡¨ç¤ºhourså°æ—¶ï¼Œåä¸¤ä½è¡¨ç¤ºminutsåˆ†é’Ÿ. */function extractTimezoneOffsetWithGMT(date) &#123; if (!date) &#123; return ''; &#125; const dateTimeStr = date.toString(); // Thu May 23 2019 14:52:15 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) const gmtIndexStart = dateTimeStr.indexOf('GMT'); const timezoneEnd = dateTimeStr.indexOf(' ', gmtIndexStart); return dateTimeStr.substring(gmtIndexStart, timezoneEnd);&#125; placeholderå’Œinputäº‹ä»¶ å’Œant-design-vueç»´æŠ¤è€…æ²Ÿé€šä¹‹åï¼Œå¾—çŸ¥è¿™ä¸ªbugåœ¨ant-design-vueçš„è‹±æ–‡è¯­è¨€æ¨¡å¼ä¸‹ä¸ä¼šæœ‰é—®é¢˜ï¼Œç»´æŠ¤çš„å°ä¼™ä¼´ï¼Œæ¨æµ‹è¯­è¨€ç¯å¢ƒä¸åŒï¼Œæœ‰å¯èƒ½å¯¼è‡´ç¼–è¯‘çš„ä»£ç ä¸åŒï¼ˆä¹Ÿæœ‰é“ç†ï¼Œç°åœ¨jséƒ½ä¸Šç¼–è¯‘å™¨ï¼Œä½ ä¸çŸ¥é“ç¼–è¯‘åä»£ç æœ‰å¤šå¤§å˜åŒ–ï¼Œå½“æ—¶å·²ç»æåˆ°äº†placeholderï¼Œæˆ‘æ²¡æ³¨æ„ï¼‰ã€‚ æ€è·¯ï¼šè‹±æ–‡ç‰ˆå’Œä¸­æ–‡ç‰ˆï¼Œæœ€å¤§çš„ä¸åŒåº”è¯¥æ˜¯è¯­è¨€æ–‡ä»¶ï¼Œæ¶‰åŠåˆ°RangePickeråªæœ‰æ—¶é—´æ ¼å¼å’Œplaceholderï¼Œæ—¶é—´æ ¼å¼å·²ç»æ€€ç–‘è¿‡ï¼Œå› ä¸ºåº•å±‚ä½¿ç”¨momentåº“å¤„ç†ï¼Œæ‰€ä»¥æ²¡é—®é¢˜ã€‚æ‰€ä»¥åªèƒ½çœ‹çœ‹placeholderå…¼å®¹æ€§ã€‚ placeholderå…¼å®¹æ€§ caniuse-placeholder æ³¨æ„ï¼šçœ‹ä¸‹Known issuesçš„tabé¡µç­¾ï¼Œçœ‹åˆ°ç¬¬äºŒæ¡ï¼Œæˆ‘éœ‡æƒŠäº†ï¼Œä¸ºå•¥å½“placeholderä¸ºä¸­æ–‡æ—¶ä¼šè§¦å‘inputäº‹ä»¶ï¼Ÿï¼Ÿï¼Ÿ inputäº‹ä»¶çš„å…¼å®¹æ€§ caniuse-input-event é‡ç°IE11å½“placeholder=â€ä¸­æ–‡â€æ—¶ï¼Œè§¦å‘inputäº‹ä»¶ 12345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;placeholder&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=\"content\"&gt; &lt;input type=\"text\" placeholder=\"english\" id=\"en\"&gt; &lt;input type=\"text\" placeholder=\"ä¸­æ–‡\" id=\"cn\"&gt; &lt;/div&gt; &lt;script&gt; window.onload = function () &#123; var enInput = document.getElementById('en'); var cnInput = document.getElementById('cn'); enInput.addEventListener('input', function (evt) &#123; console.log('en inpu'); &#125;); cnInput.addEventListener('input', function (evt) &#123; console.log('cn input'); &#125;); &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; placeholder-fire-input-event ä¸´æ—¶å¤„ç†æ–¹æ¡ˆ çŸ¥é“äº†åŸå› å°±å¾ˆå®¹æ˜“å¤„ç†äº†ï¼Œåªè¦inputçš„placeholder=â€â€å°±æå®šäº†ï¼Œè™½ç„¶ä¸å¥½çœ‹ï¼Œæ€»æ¯”æœ‰bugå¥½ã€‚ 12&lt;!-- é‡ç½®placeholderï¼Œå› ä¸ºé»˜è®¤æœ‰è¯­è¨€æ–‡ä»¶ï¼Œplaceholderé»˜è®¤æœ‰æ–‡å­—çš„ --&gt; &lt;a-range-picker @change=\"onChange\" :placeholder=\"['', '']\"/&gt; åˆ°è¿™é‡Œæ‰æ‰¾åˆ°çœŸæ­£é€ æˆRangePickeré—®é¢˜çš„åŸå› ï¼Œåé¦ˆç»™äº†ant-desing-vueç»´æŠ¤å°ä¼™ä¼´ï¼Œä»–ä»¬ä¸‹æ¬¡ä¿®å¤ä¸Šçº¿ã€‚ æ€»ç»“è§£å†³é—®é¢˜çš„æ€è·¯å¾ˆé‡è¦ï¼Œå¾ˆé‡è¦ï¼Œä»¥åå¦‚æœç¢°åˆ°IEä¸‹çš„é—®é¢˜ï¼Œç¬¬ä¸€æ—¶é—´https://caniuse.com/ç½‘ç«™çœ‹å…¼å®¹æ€§ï¼Œè¢«IEå‘æ€•äº†ï¼Œå…¼å®¹IEï¼Œå°±æ˜¯åœ¨æµªè´¹ç”Ÿå‘½ã€‚ å‚è€ƒDate.parse é˜®ä¸€å³° JavaScriptæ ‡å‡†å‚è€ƒæ•™ç¨‹ Dateå¯¹è±¡ javascript-and-dates-what-mess JSåŸç”ŸDateç±»å‹æ–¹æ³•çš„ä¸€äº›å†·çŸ¥è¯† wxyyxc1992â€“æ—¶é—´ä¸æ—¥æœŸ IE11æ—¥å†é€‰æ‹©æ¡†æœ‰å€¼çš„æƒ…å†µæ— æ³•æ‰“å¼€é€‰æ‹©æ¡†ie11ä¸‹ç»„ä»¶DatePicker æ—¥æœŸé€‰æ‹©æ¡†ä¸æ˜¾ç¤ºä¸”æ§åˆ¶å°æŠ¥é”™IEä¸‹ç‚¹å‡»RangePickerä¼šé—ªä¸€ä¸‹å…³é—­ï¼ŒopenChangeæ‰§è¡Œ3æ¬¡","tags":[{"name":"ie","slug":"ie","permalink":"https://betgar.github.io/tags/ie/"},{"name":"input","slug":"input","permalink":"https://betgar.github.io/tags/input/"}]},{"title":"å‰ç«¯å°çº ç»“--IE11ä¸‹SVGå…ƒç´ é»˜è®¤focusable=true","date":"2019-07-02T04:00:00.000Z","path":"2019/07/02/svg-elements-default-focusable-in-ie11/","text":"IE11ä¸‹SVGå…ƒç´ é»˜è®¤focusable=true æœ¬æ¥æˆ‘ä¹Ÿä¸å¤ªå…³æ³¨ä¸€äº›äº¤äº’çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤„ç†IE11ä¸‹çš„svgèƒ½å¤Ÿfocus(å°±æ˜¯tabæ—¶å€™èƒ½å¤Ÿè·å–ç„¦ç‚¹)æ—¶å€™ï¼Œå‘ç°åŸæ¥tabindexä¹Ÿæ˜¯å¤§å‘ã€‚æ¯ä¸€æ¬¡å…¼å®¹æ€§é—®é¢˜èƒŒåï¼Œéƒ½æ˜¯æœ‰ç›¸å…³é—®é¢˜çš„å¥½å‡ ä¸ªæ ‡å‡†ï¼Œä¸€ä¸ªæ ‡å‡†è¿˜æœ‰å¥½å‡ ä¸ªç‰ˆæœ¬ï¼Œä¸åŒçš„æ—¶æœŸçš„æµè§ˆå™¨ï¼Œå®ç°çš„åˆæœ‰å·®å¼‚ï¼Œåªè¦æœ‰ä¸€ä¸ªæµè§ˆå™¨å’Œå…¶å®ƒæµè§ˆå™¨è¡Œä¸ºä¸åŒï¼Œå°±ä¼šè¢«å®šä¹‰ä¸ºä½ æœ‰bugã€‚PS: æœ€è¿‘æå…¼å®¹æ€§å¥½ç´¯ã€‚ tabindexå€¼çš„èŒƒå›´ ä½¿ç”¨ä¹‹å‰å…ˆçœ‹çœ‹è¿™ç¯‡æ–‡ç« dont-use-tabindex-greater-than-0 tabindex çš„æœ€å¤§å€¼ä¸åº”è¶…è¿‡ 32767ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå®ƒçš„é»˜è®¤å€¼ä¸º -1ã€‚ è¿˜æœ‰ä¸€ä¸ªå¥½ç©çš„z-indexå±æ€§ï¼ŒçœŸå¯æ€•ã€‚ å…·ä½“å–å†³äºæ•´æ•°çš„å€¼ï¼š tabindex=è´Ÿå€¼ (é€šå¸¸æ˜¯tabindex=â€œ-1â€)ï¼Œè¡¨ç¤ºå…ƒç´ æ˜¯å¯èšç„¦çš„ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡é”®ç›˜å¯¼èˆªæ¥è®¿é—®åˆ°è¯¥å…ƒç´ ï¼Œç”¨JSåšé¡µé¢å°ç»„ä»¶å†…éƒ¨é”®ç›˜å¯¼èˆªçš„æ—¶å€™éå¸¸æœ‰ç”¨ã€‚ tabindex=&quot;0&quot; ï¼Œè¡¨ç¤ºå…ƒç´ æ˜¯å¯èšç„¦çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡é”®ç›˜å¯¼èˆªæ¥èšç„¦åˆ°è¯¥å…ƒç´ ï¼Œå®ƒçš„ç›¸å¯¹é¡ºåºæ˜¯å½“å‰å¤„äºçš„DOMç»“æ„æ¥å†³å®šçš„ã€‚ tabindex=æ­£å€¼ï¼Œè¡¨ç¤ºå…ƒç´ æ˜¯å¯èšç„¦çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡é”®ç›˜å¯¼èˆªæ¥è®¿é—®åˆ°è¯¥å…ƒç´ ï¼›å®ƒçš„ç›¸å¯¹é¡ºåºæŒ‰ç…§tabindex çš„æ•°å€¼é€’å¢è€Œæ»åè·ç„¦ã€‚å¦‚æœå¤šä¸ªå…ƒç´ æ‹¥æœ‰ç›¸åŒçš„ tabindexï¼Œå®ƒä»¬çš„ç›¸å¯¹é¡ºåºæŒ‰ç…§ä»–ä»¬åœ¨å½“å‰DOMä¸­çš„å…ˆåé¡ºåºå†³å®šã€‚ æ ¹æ®é”®ç›˜åºåˆ—å¯¼èˆªçš„é¡ºåºï¼Œå€¼ä¸º 0 ã€éæ³•å€¼ã€æˆ–è€…æ²¡æœ‰ tabindex å€¼çš„å…ƒç´ åº”è¯¥æ”¾ç½®åœ¨ tabindex å€¼ä¸ºæ­£å€¼çš„å…ƒç´ åé¢ã€‚ elementçš„tabbableå’Œfocusable å…ƒç´ è¿˜åˆ†ä¸ºfocusableå’Œéfocusableï¼Œå¦‚æœä½¿ç”¨äº†tabindexå°±å¯ä»¥æ”¹å˜ç›¸å…³çš„è¡Œä¸ºï¼Œçœ‹å‚è€ƒé“¾æ¥çš„èµ„æ–™ï¼Œè¿™é‡Œåšä¸€ä¸‹è®°å½•ï¼Œæ–¹ä¾¿ä»¥åå›é¡¾ã€‚ focusableå’Œtabbableçš„ç›¸å…³è§£é‡Š ä¸ç¿»è¯‘äº†ï¼Œç›´æ¥ä¸Šé“¾æ¥what-is-focusable focusableçš„å…¼å®¹æ€§è¡¨æ ¼ å…¼å®¹æ€§è¡¨æ ¼ï¼Œçœ‹ç€å…¼å®¹æ€§è¡¨æ ¼è¿˜æ˜¯æ¯”è¾ƒå–œäººã€‚ focusable-table IE11ä¸‹SVGå…ƒç´ é»˜è®¤å¯ä»¥focusable IE11ä¸‹æœ‰ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼Œå°±æ˜¯svgé»˜è®¤å¯ä»¥è·å–ç„¦ç‚¹(focus)ï¼Œå°¤å…¶æ˜¯åœ¨ç™»å½•ç•Œé¢ï¼Œinputå‰åæœ‰prefixå’Œsuffixæ—¶ï¼Œå°¤å…¶åˆ«æ‰­ã€‚å®˜æ–¹ä¸€ç›´åˆ°EdgeHTMLæ—¶ä»£çš„æŸä¸ªç‰ˆæœ¬æ‰ä¿®å¤ï¼Œçœ‹è¿™é‡Œmicrosoft-edge Support tabindex in SVG, donâ€™t make every focusable by default é—®é¢˜çš„åŸå›  IE 11ä¸‹çš„svgå…ƒç´ é»˜è®¤æ˜¯focusableçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶å®ƒæµè§ˆå™¨svgå…ƒç´ é»˜è®¤æ˜¯ä¸èƒ½è·å–ç„¦ç‚¹çš„ï¼Œè¿™å°±é€ æˆäº†ï¼Œå½“inputæœ‰prefixå’Œsuffixçš„svgæ—¶ï¼Œtabè¿›è¡Œè¡¨å•è¾“å…¥åˆ‡æ¢å°±å¾ˆéº»çƒ¦ï¼Œè¢«è®¤ä¸ºæ˜¯bugã€‚ ä¾‹å¦‚ï¼š 123456&lt;form&gt; &lt;svg&gt;&lt;/svg&gt; &lt;input type=\"text\"/&gt; &lt;svg&gt;&lt;/svg&gt; &lt;input type=\"text\"/&gt;&lt;/form&gt; è§£å†³æ–¹æ¡ˆ è§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å• 1&lt;svg focusable=\"false\"&gt;&lt;svg&gt; å¦‚æœå…¨å±€å¾ˆå¤šsvgå°±å¾ˆéš¾å—äº†ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ally.jsè§£å†³ã€‚ ant-designç»„ä»¶åº“ å› ä¸ºå·¥ä½œä¸­ä½¿ç”¨çš„æ˜¯ant-design-vueæ‰€ä»¥é¡ºä¾¿äº†è§£äº†ä¸‹ï¼Œå‘ç° ant-designçš„å·²ç»è§£å†³äº†è¿™ä¸ªäº‹æƒ…çœ‹ant-design-icons Set svg default focusable=false è¿™é‡Œã€‚ å‚è€ƒally.js - making accessibility simpler focusable table focusable-test how-to-prevent-svg-elements-from-gaining-focus-with-tabs-in-ie11 disable-onfocus-event-for-svg-element microsoft-edge Support tabindex in SVG, donâ€™t make every focusable by default Focus, tabIndex and behavior of browsers ant-design-icons Set svg default focusable=false tabindex attributes","tags":[{"name":"ie","slug":"ie","permalink":"https://betgar.github.io/tags/ie/"},{"name":"focus","slug":"focus","permalink":"https://betgar.github.io/tags/focus/"}]},{"title":"å‰ç«¯å°çº ç»“--Browser&WebViewè°ƒè¯•å·¥å…·å’Œæ–‡æ¡£æ•´ç†","date":"2019-06-29T01:20:00.000Z","path":"2019/06/29/the-browser-debugger-documents-and-tools-collect/","text":"å‰ç«¯å°çº ç»“â€“Browser&amp;WebViewè°ƒè¯•å·¥å…·å’Œæ–‡æ¡£æ•´ç† ä¸ºä»€ä¹ˆåˆè¿™ç¯‡æ–‡ç« å‘¢ï¼Ÿå› ä¸ºæœ€è¿‘åœ¨åšIE 11çš„å…¼å®¹æ€§æµ‹è¯•ï¼Œã®æœ‰ç”Ÿä¹‹å¹´è¿˜ä¼šåšIE é€‚é…ï¼Œæˆ‘æ²¡æƒ³åˆ°ã€‚ æœŸé—´é‡åˆ°äº†ä¸€ä¸ªå°é—®é¢˜ï¼Œæ²¡æƒ³åˆ°ç«Ÿç„¶æ²¡æå®šã€‚è¿™ä¹ˆç®€å•ï¼Œæˆ‘ç«Ÿç„¶æä¸å®šâ€¦..æˆ‘å¯¹è‡ªå·±çš„ç»éªŒå’ŒæŠ€æœ¯æ°´å¹³äº§ç”Ÿäº†æ€€ç–‘ï¼Œæ‰€ä»¥å†³å®šæ•´ç†ä¸€ä¸‹ï¼Œæµè§ˆå™¨è°ƒè¯•æ–¹é¢çš„å·¥å…·å’Œèµ„æ–™ã€‚ è°ƒè¯•åè®®(devtools-protocol) é¦–å…ˆè¯´æˆ‘çŸ¥é“çš„ï¼Œè¿œç¨‹è°ƒè¯•åè®®(devtools-protocol)å¾ˆé‡è¦ï¼Œå› ä¸ºåªè¦æµè§ˆå™¨æˆ–è€…webviewå®ç°äº†è°ƒè¯•åè®®ï¼Œæˆ‘ä»¬ä¸ç®¡ç”¨ä»€ä¹ˆå·¥å…·éƒ½å¯ä»¥æ–¹ä¾¿çš„è°ƒè¯•ï¼Œå¥½åƒç›®å‰è¿™æ–¹é¢æ²¡æœ‰æ ‡å‡†ï¼Œ å¦‚æœæœ‰å¤§å®¶å‘Šè¯‰æˆ‘ï¼Œchrome-devtools-protocolåšçš„æœ€å¥½ã€‚ chrome-devtools-protocol WICG-devtools-protocol remotedebug å®˜ç½‘æä¾›äº†å¾ˆå¤šä¸åŒæµè§ˆå™¨è°ƒè¯•åè®®çš„Protocol Adaptorså’Œintegrationsï¼Œå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å…¼å®¹æ€§compatibility VS Code debugger plugins å› ä¸ºVS Codeçš„æµè¡Œï¼Œæ‰€ä»¥è¯ç”Ÿäº†ä¸€ä¸ªé’ˆå¯¹è°ƒè¯•çš„debugger for xxxç³»åˆ—çš„æ’ä»¶ã€‚å¾ˆå¤šæ’ä»¶è¿˜æ˜¯Microsoftè‡ªå·±å¼€å‘çš„ï¼Œå¾®è½¯YES. Debugger-for-edge æ”¯æŒEdgeHTMLå’ŒChromiumç‰ˆæœ¬ Debugger-for-chrome Debugger for Firefox ios-webkit-adapter-Safari RemoteDebugå‡ºå“ï¼Œå¾®è½¯åœ¨vscode-ios-web-debugä¸Šæ¨è. vscodeå®˜æ–¹åˆ—è¡¨ æœ‰ä¸€äº›å·²ç»è¿‡æ—¶ï¼Œå¹¶ä¸”æœ‰æ¨èçš„æ›¿ä»£çš„åœ°å€ã€‚ VS Code Chrome Debugger VS Code iOS Web Debugger VS Code PhantomJS Debugger VS Code Node Debugger VS Code Edge Debugger VS Code NWjs Debugger VS Code Cordova VS Code NativeScript debugger Visual Studio 2017 Update 2 Node.js Debugger ChromeChromeæ²¡å•¥ä»‹ç»çš„è°ƒè¯•å·¥å…·å®˜æ–¹åšçš„æœ€å¥½ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚ Firefox firebug ä»¥å‰åšçš„éå¸¸å¥½çš„å·¥å…·ï¼Œä»¥è‡³äºæœ€åç›´æ¥é›†æˆåˆ°firefoxå†…éƒ¨ã€‚ IE ä»‹ç»ä¸€ä¸ªIE 11ç‰ˆæœ¬çš„ï¼Œå…¶å®ƒä½äºIE 11çš„æˆ‘æ¨èä½ ä½¿ç”¨google chrome frameï¼Œè™½ç„¶è°·æ­Œå·²ç»åœ¨2013åœæ­¢ç»´æŠ¤äº†ï¼Œä½†æ˜¯å¯¹äºä½äºIE 11çš„è¿˜æ˜¯æœ‰å¾ˆå¤§çš„å¸®åŠ©çš„ã€‚å¾®è½¯å®˜æ–¹æä¾›çš„IEDiagnosticsAdapterï¼Œè™½ç„¶ç°åœ¨å·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œä½†æ˜¯å®ƒæœ€åæ›´æ–°åœ¨2015å¹´ï¼ŒIE 11å¥½åƒæ˜¯2013å¹´å‘å¸ƒçš„ï¼ˆå½“æ—¶æˆ‘åœ¨ä¸Šå¤§å­¦â€¦..ï¼‰ï¼Œå®ç°äº†chrome-devtools-protocol v1.1ï¼Œæˆ‘ç‰¹æ„çœ‹äº†ä¸€ä¸‹ç°åœ¨åè®®å‘å±•åˆ°v1.3ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨chrome devtoolsè°ƒè¯•IEï¼Œæœ¬æ¥å¾ˆå¤§å¸Œæœ›ï¼Œåæ¥å‘ç°å°±æ˜¯é¸¡è‚‹ï¼Œå“ï¼ŒèŠèƒœäºæ— äº†ã€‚ ä½äºIE 11ç‰ˆæœ¬ using-firebug-to-inspect-element-in-internet-explorer debugbar IEDiagnosticsAdapter å®˜æ–¹çš„ä»‹ç»å·¥å…·çš„åšå®¢æ–‡ç« ï¼šintroducing-the-ie-diagnostics-adapter-for-third-party-developer-tools â€‹ ä½†æ˜¯æˆ‘äº²è‡ªè¯•äº†ä¸€ä¸‹å‘ç°æ•ˆæœæ²¡è¿™ä¹ˆå¥½ï¼ŒæŸ¥çœ‹DOMå…ƒç´ å·²ç»æ²¡æœ‰äº’åŠ¨æ•ˆæœäº†ï¼Œéš¾é“æˆ‘çš„Chromeç‰ˆæœ¬å¤ªé«˜äº†ï¼Ÿï¼Ÿï¼ŸChrome v75ï¼Œå¯èƒ½Chromeç‰ˆæœ¬å¤ªé«˜ï¼Œdevtoolsåè®®ç‰ˆæœ¬è¾ƒé«˜ï¼Œæœ‰æœºä¼šæ‰¾ä¸ªä½ç‰ˆæœ¬Chromeå°è¯•ä¸‹ã€‚ æµ‹è¯•çš„ç»“æœ VS Codeè°ƒè¯•IE 11å°è¯• æˆ‘æ€è€ƒï¼Œæ—¢ç„¶IE Diagnostics Adapterå®ç°äº†devtools protocol v1.1ï¼Œåšäº†ä»£ç†è½¬å‘ï¼Œdebugger for chromeä¹Ÿæ˜¯å®ç°çš„devtools protocol ï¼Œæˆ‘æ˜¯å¦å¯ä»¥ä½¿ç”¨VS Codeçš„debugæ¨¡å¼ï¼Œå¼€å¯chrome attachæ¨¡å¼è¯•ä¸€ä¸‹å‘¢ï¼Ÿ æ€è·¯ï¼šVS Code â€“&gt;debugger for chrome â€“&gt; attach port 9222 â€“&gt; IE Diagnostics Adapter â€“&gt; IE 11 ç»“è®ºï¼šVS Code é€šè¿‡debugger for chromeçš„attachæ¨¡å¼ï¼ŒæˆåŠŸé“¾æ¥ã€‚ä½†æ˜¯å°±æˆåŠŸä¸€æ¬¡ï¼Œå…¶ä½™çš„å°è¯•å¯¼è‡´IE Diagnostics Adapterä¸€ç›´å¥”æºƒã€‚è™½ç„¶å¤±è´¥äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆé«˜å…´ï¼Œå› ä¸ºè‡³å°‘è¯´æ˜æˆ‘çš„æ€è·¯æ˜¯æ­£ç¡®çš„ï¼Œè§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œæ€è·¯ï¼ˆæ–¹å‘ï¼‰æœ€é‡è¦ï¼Œè¦æ˜¯æ–¹å‘æé”™äº†ï¼Œé‚£å¯è¦æµªè´¹å¾ˆå¤šç²¾åŠ›å’¯ã€‚:) æ€»ç»“ æŠ˜è…¾äº†å¤§åŠå¤©ï¼Œè¿˜æ˜¯æœ‰ç‚¹æ”¶è·ï¼Œæœ€å°‘æ”¶è·äº†è§£å†³é—®é¢˜çš„æ€è·¯å’ŒVS Codeçš„debuggerç³»åˆ—ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹è¿˜åœ¨å’ŒIE 11äº’ç›¸æŠ˜ç£¨çš„åŒè¡Œæœ‰ç‚¹å¸®åŠ©ã€‚ å…³æ³¨å…¬ä¼—å·ï¼Œå‘ç°æ›´å¤šç²¾å½©å†…å®¹ã€‚ å‚è€ƒchrome-devtools-protocol remotedebug vscode-chrome-debug-core WICG-devtools-protocol vscode-chrome-debug-core IEDiagnosticsAdapter attach-vs-code-debugger-to-internet-explorer ie-developer how-to-attach-vs-code-debugger-to-internet-explorer-11","tags":[{"name":"vue","slug":"vue","permalink":"https://betgar.github.io/tags/vue/"},{"name":"debug","slug":"debug","permalink":"https://betgar.github.io/tags/debug/"}]},{"title":"vue-devtoolsåœ¨IE11ä¸­çš„ä½¿ç”¨","date":"2019-06-27T11:00:00.000Z","path":"2019/06/27/vue-remote-devtools/","text":"vue-devtoolsåœ¨IE11ä¸­çš„ä½¿ç”¨ IEä¸‹çš„è°ƒè¯•ä¸€ç›´éƒ½å¾ˆå¤´ç—›ï¼Œæœ¬æ¥vueå®˜æ–¹æ²¡æœ‰æä¾›ieä¸‹çš„å¼€å‘å·¥å…·æ’ä»¶ï¼Œåæ¥è¿˜æ˜¯ä¸æ­»å¿ƒå»å®˜ç½‘çœ‹äº†ä¸‹ï¼Œç»“æœæœ‰äº†æ„å¤–çš„æ”¶è·ã€‚ vueå®˜æ–¹ç‹¬ç«‹çš„vue-devtoolsåº”ç”¨ç¨‹åºï¼Œå¯ç”¨äºè°ƒè¯•ä»»ä½•Vueåº”ç”¨ç¨‹åºï¼Œæ— è®ºç¯å¢ƒå¦‚ä½•ã€‚ ç°åœ¨ï¼Œæ‚¨å¯ä»¥è°ƒè¯•åœ¨ç§»åŠ¨æµè§ˆå™¨ï¼ŒSafariï¼Œæœ¬æœºè„šæœ¬ç­‰ä¸­æ‰“å¼€çš„åº”ç”¨ç¨‹åºï¼Œè€Œä¸ä»…ä»…æ˜¯æ¡Œé¢chromeæˆ–firefoxã€‚ æŸ¥çœ‹IEä¸‹Vueç»„ä»¶çŠ¶æ€ æ–‡æ¡£ä¸­å·²ç»æåˆ°äº†æ€ä¹ˆåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨äº†ï¼Œç°åœ¨ä½¿ç”¨vue-cli3è¿›è¡Œæ ¹æ®ç¯å¢ƒå˜é‡æ¥å·®å¼‚åŒ–ç¼–è¯‘index.htmlæ¨¡æ¿ã€‚å‚è€ƒHTMLå’Œé™æ€æ–‡ä»¶ç« èŠ‚) index.htmlæ–‡ä»¶æ·»åŠ æ ‡ç­¾ æœ€ç®€å•çš„ä¿®æ”¹ï¼š 1&lt;script src=\"http://localhost:8089\"&gt;&lt;/script&gt; ä¸ºäº†å®ç°å·®å¼‚åŒ–ç¼–è¯‘(developmentç”Ÿæˆï¼Œproductionä¸ç”Ÿæˆè°ƒè¯•script)å¯ä»¥è¿™æ ·åšï¼š 1234567891011&lt;!-- /public/index.html --&gt;&lt;head&gt; &lt;meta charset=\"utf-8\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\"&gt; &lt;link rel=\"icon\" href=\"&lt;%= BASE_URL %&gt;favicon.ico\"&gt; &lt;% if (VUE_APP_REMOTE_DEBUG_ENABLE === 'true') &#123; %&gt; &lt;script src=\"&lt;%= VUE_APP_REMOTE_DEBUG_HOST + ':' + VUE_APP_REMOTE_DEBUG_PORT%&gt;\"&gt; &lt;/script&gt; &lt;% &#125; %&gt; &lt;title&gt;debug&lt;/title&gt; &lt;/head&gt; 1234# ç¯å¢ƒå˜é‡æ–‡ä»¶ .envVUE_APP_REMOTE_DEBUG_ENABLE=falseVUE_APP_REMOTE_DEBUG_HOST=http://localhostVUE_APP_REMOTE_DEBUG_PORT=8089 12# .env.developmentVUE_APP_REMOTE_DEBUG_ENABLE=true æ•ˆæœå›¾ï¼š vue-devtoolsæŸ¥çœ‹IE 11ä¸‹Vueç»„ä»¶çš„çŠ¶æ€ åŸç†çŒœæƒ³ å·¥å…·åŸç†çš„çŒœæƒ³æ˜¯ä½¿ç”¨WebSocketé“¾æ¥ï¼ŒæŠŠvue componentçš„çŠ¶æ€åºåˆ—åŒ–å‘é€åˆ°host:8089ç«¯å£ï¼Œæœ¬åœ°å¯åŠ¨çš„devtoolsåœ¨8089è¿›è¡Œå®æ—¶çš„è§£ææ˜¾ç¤ºã€‚ ä»¥ä¸‹æ˜¯å®˜æ–¹READMEç¿»è¯‘ï¼Œå¯ä»¥ç•¥è¿‡ ğŸ’¿å®‰è£…å…¨å±€å®‰è£…åŒ…ï¼š 1npm install -g @vue/devtools æˆ–åœ¨æœ¬åœ°ä½œä¸ºé¡¹ç›®ä¾èµ–ï¼š 1npm install --save-dev @vue/devtools ğŸš€ç”¨æ³•ä½¿ç”¨å…¨å±€åŒ…åœ¨å…¨å±€å®‰è£…è½¯ä»¶åŒ…åï¼Œè¿è¡Œï¼š 1vue-devtools ç„¶ååŠ ï¼š æˆ–è€…ï¼Œå¦‚æœè¦è¿œç¨‹è°ƒè¯•è®¾å¤‡ï¼š window . VUE_DEVTOOLS_HOST =â€™â€˜//é»˜è®¤å€¼ï¼šlocalhost window . VUE_DEVTOOLS_PORT =â€™â€˜//é»˜è®¤å€¼ï¼š8098 åˆ°æ‚¨åº”ç”¨çš„éƒ¨åˆ†ã€‚ ï¼ˆåœ¨éƒ¨ç½²åˆ°ç”Ÿäº§ä¹‹å‰ä¸è¦å¿˜è®°å°†å…¶åˆ é™¤ï¼ï¼‰ é€šå¸¸å¦‚ä¸‹æ‰€ç¤ºï¼š192.168.x.x. ä½œä¸ºä¾èµ–å®‰è£…å°†ç¨‹åºåŒ…å®‰è£…ä¸ºé¡¹ç›®ä¾èµ–é¡¹åï¼Œè¿è¡Œï¼š 1./node_modules/.bin/vue-devtools æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å…¨å±€vue-devtoolsæ¥å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œä½†æ‚¨å¯èƒ½éœ€è¦æ£€æŸ¥æœ¬åœ°ç‰ˆæœ¬æ˜¯å¦ä¸æ­¤æ–¹æ¡ˆä¸­çš„å…¨å±€ç‰ˆæœ¬åŒ¹é…ï¼Œä»¥é¿å…ä»»ä½•ä¸å…¼å®¹æ€§ã€‚ ç„¶åç›´æ¥åœ¨æ‚¨çš„åº”ç”¨ä¸­å¯¼å…¥å®ƒï¼š 12import devtools from '@vue/devtools'// import Vue from 'vue' ç¡®ä¿åœ¨Vueä¹‹å‰å¯¼å…¥devtoolsï¼Œå¦åˆ™å®ƒå¯èƒ½æ— æ³•æŒ‰é¢„æœŸå·¥ä½œã€‚ å¹¶è¿æ¥åˆ°ä¸»æœºï¼š 123if (process.env.NODE_ENV === 'development') &#123; devtools.connect(/* host, port */)&#125; host - æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå®ƒå‘Šè¯‰åº”ç”¨ç¨‹åºdevtoolsä¸­é—´ä»¶æœåŠ¡å™¨æ­£åœ¨è¿è¡Œçš„ä½ç½®ï¼Œå¦‚æœä½ åœ¨è®¡ç®—æœºä¸Šè°ƒè¯•appï¼Œåˆ™ä¸å¿…è®¾ç½®å®ƒï¼ˆé»˜è®¤ä¸ºhttp:// localhostï¼‰ï¼Œä½†æ˜¯å¦‚æœè¦è°ƒè¯•æ‚¨çš„ç§»åŠ¨è®¾å¤‡ä¸Šçš„åº”ç”¨ï¼Œæ‚¨å¯èƒ½æƒ³è¦ä¼ é€’æœ¬åœ°IPï¼ˆä¾‹å¦‚192.168.1.12ï¼‰ã€‚ port - æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå®ƒå‘Šè¯‰åº”ç”¨ç¨‹åºdevtoolsä¸­é—´ä»¶æœåŠ¡å™¨æ­£åœ¨è¿è¡Œçš„ç«¯å£ã€‚å¦‚æœä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼Œåˆ™å¯èƒ½éœ€è¦å°†å…¶è®¾ç½®ä¸ºnullï¼Œä»¥ä¾¿ç«¯å£ä¸ä¼šæ·»åŠ åˆ°è¿æ¥URLã€‚ å¸¸é—®é—®é¢˜ï¼š å¦‚ä½•æ›´æ”¹æ­£åœ¨è¿è¡ŒdevtoolsæœåŠ¡å™¨ç«¯å£ï¼Ÿ æ‚¨å¯ä»¥åœ¨è¿è¡Œä¹‹å‰é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¥æ›´æ”¹å®ƒï¼š 1PORT=8000 vue-devtools ç„¶ååœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å°†å¿…é¡»è®¾ç½®ï¼š 1window.__ VUE_DEVTOOLS_PORT__=8000 æˆ–è€…ä½¿ç”¨æ–°ç«¯å£æ›´æ–°connectæ–¹æ³•ï¼š 1devtools.connectï¼ˆ/ * host * /ï¼Œ8000ï¼‰ å¦‚ä½•è¿œç¨‹æ£€æŸ¥(inspect)æœåŠ¡å™¨ä¸Šçš„é¡µé¢ï¼Ÿ ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`ngrok`ä»£ç†ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ã€‚ ä¸€æ—¦ä½ å¯åŠ¨`vue-devtools`è¿è¡Œï¼š 1ngrok http 8098 ç„¶åç›¸åº”åœ°æ›´æ–°æ‚¨çš„ä¸»æœºå’Œç«¯å£ï¼š 1devtools.connectï¼ˆ'example.ngrok.io'ï¼Œnullï¼‰ â€‹ ç¡®ä¿å°†portè®¾ç½®ä¸ºnullæˆ–falseï¼Œå› ä¸ºngrokä¸»æœºå·²ç»ä»£ç†åˆ°æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªå‘½ä»¤ä¸­å®šä¹‰çš„æ­£ç¡®ç«¯å£ã€‚ å¦‚ä½•æ£€æŸ¥é€šè¿‡HTTPSæä¾›çš„é¡µé¢ï¼Ÿ ä¸ºæ­¤ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ngrokï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨å°†httpsè¯·æ±‚ä»£ç†åˆ°httpã€‚è¯·æŸ¥çœ‹é—®é¢˜2ä»¥è·å–è¯´æ˜ã€‚ å‚è€ƒè°ƒè¯•å·¥å…·å®˜æ–¹ä»“åº“","tags":[{"name":"vue","slug":"vue","permalink":"https://betgar.github.io/tags/vue/"},{"name":"debug","slug":"debug","permalink":"https://betgar.github.io/tags/debug/"}]},{"title":"VS Codeè°ƒè¯•é…ç½®åˆ†äº«","date":"2019-06-26T04:00:00.000Z","path":"2019/06/26/vscode-debug-configuration/","text":"VS Codeè°ƒè¯•é…ç½®åˆ†äº« è¿™ä¸æ˜¯ä¸€ç¯‡ç§‘æ™®æ–‡ï¼Œåªæ˜¯ä¸€ç¯‡æµè§ˆå™¨è°ƒè¯•é…ç½®çš„åˆ†äº«ï¼ˆä¸»è¦å¯¹å‡†å¯¹å‡†vs codeè°ƒè¯•ï¼‰ è°ƒè¯•é…ç½® ä½¿ç”¨vs codeæ’ä»¶debugger-for-chromeå’Œdebugger-for-edge(EdgeHTML&amp;Chromium)è°ƒè¯•ä¹‹å‰ï¼Œä¼šè‡ªåŠ¨åœ¨å·¥ç¨‹ä¸‹æ·»åŠ .vscodeæ–‡ä»¶å¤¹ï¼Œé‡Œé¢çš„launch.jsonå°±æ˜¯é…ç½®è°ƒè¯•å‚æ•°çš„ä½ç½®ã€‚ launch.json å¾ˆå¤šçš„é…ç½®å‚æ•°ï¼Œå…·ä½“çœ‹å‚è€ƒç« èŠ‚çš„nodejs-debuggingå’Œdebugging-protocolã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&#123; // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387 \"version\": \"0.2.0\", \"configurations\": [ &#123; \"type\": \"chrome\", \"request\": \"launch\", \"name\": \"vuejs: launch chrome\", \"url\": \"http://localhost:8080\", \"webRoot\": \"$&#123;workspaceFolder&#125;/src\", \"userDataDir\": false, \"breakOnLoad\": true, \"sourceMapPathOverrides\": &#123; \"webpack:///./src/*\": \"$&#123;webRoot&#125;/*\" &#125; &#125;, &#123; \"type\": \"chrome\", \"request\": \"attach\", \"name\": \"vuejs: attach chrome\", \"webRoot\": \"$&#123;workspaceFolder&#125;/src\", \"port\": 9222, \"sourceMapPathOverrides\": &#123; \"webpack:///./src/*\": \"$&#123;webRoot&#125;/*\" &#125; &#125;, &#123; \"type\": \"edge\", \"request\": \"launch\", \"name\": \"vuejs: launch EdgeHTML\", \"url\": \"http://localhost:8080\", \"webRoot\": \"$&#123;workspaceFolder&#125;/src\", \"userDataDir\": false, \"breakOnLoad\": true, \"sourceMapPathOverrides\": &#123; \"webpack:///./src/*\": \"$&#123;webRoot&#125;/*\" &#125; &#125;, &#123; \"type\": \"edge\", \"request\": \"attach\", \"name\": \"vuejs: attach EdgeHTML\", \"webRoot\": \"$&#123;workspaceFolder&#125;/src\", \"port\": 2015, \"sourceMapPathOverrides\": &#123; \"webpack:///./src/*\": \"$&#123;webRoot&#125;/*\" &#125; &#125;, &#123; \"type\": \"edge\", \"request\": \"attach\", \"version\": \"dev\", // dev, beta, or canary \"name\": \"vuejs: attach Edge(Chromium)\", \"webRoot\": \"$&#123;workspaceFolder&#125;/src\", \"port\": 9223, \"sourceMapPathOverrides\": &#123; \"webpack:///./src/*\": \"$&#123;webRoot&#125;/*\" &#125; &#125;, &#123; \"type\": \"edge\", \"request\": \"launch\", \"version\": \"dev\", \"name\": \"vuejs: launch Edge(Chromium)\", \"url\": \"http://localhost:8080\", \"webRoot\": \"$&#123;workspaceFolder&#125;/src\", \"userDataDir\": false, \"breakOnLoad\": true, \"sourceMapPathOverrides\": &#123; \"webpack:///./src/*\": \"$&#123;webRoot&#125;/*\" &#125; &#125;, &#123; \"type\": \"firefox\", \"request\": \"launch\", \"name\": \"vuejs: firefox\", \"url\": \"http://localhost:8080\", \"webRoot\": \"$&#123;workspaceFolder&#125;/src\", \"pathMappings\": [&#123; \"url\": \"webpack:///src/\", \"path\": \"$&#123;webRoot&#125;/\" &#125;] &#125; ]&#125; launchæ¨¡å¼ launchæ¨¡å¼å°±æ˜¯é‡æ–°æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨å®ä¾‹ï¼ˆä¸æ˜¯tabï¼‰ã€‚ attachæ¨¡å¼ attachæ¨¡å¼ï¼Œæ˜¯é™„åŠ åˆ°ç°åœ¨å·²ç»æ‰“å¼€çš„æµè§ˆå™¨è°ƒè¯•ç«¯å£ä¸Šï¼Œæ‰€ä»¥éœ€è¦ä½ åœ¨å·²ç»æ‰“å¼€çš„æµè§ˆå™¨ä¸­è®¿é—®launch.jsonä¸­é…ç½®çš„ç½‘ç«™åœ°å€ã€‚ attachæ¨¡å¼çš„tabçª—å£é€‰æ‹© chromeé…ç½® windows chromeé…ç½®è¿œç¨‹è°ƒè¯•ç«¯å£ mac ç»ˆç«¯æ‰§è¡Œ: /Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --remote-debugging-port=9222 Linux ç»ˆç«¯æ‰§è¡Œï¼š google-chrome --remote-debugging-port=9222 Edge(Chromium) windows å‘½ä»¤è¡Œï¼šmsedge.exe --remote-debugging-port=2015 macå’ŒLiunxç°åœ¨å®˜æ–¹æ²¡è¯´æ€ä¹ˆè°ƒè¯•â€¦.. Microsoft Edge (EdgeHTML) windows å‘½ä»¤è¡Œï¼š microsoftedge.exe --devtools-server-port=2015 ç«Ÿç„¶ä¸èƒ½å¿«æ·æ–¹å¼é…ç½®ï¼Œä¸ç§‘å­¦ã€‚ ä¸ªäººå»ºè®® ä¸ªäººå»ºè®®å¹³æ—¶å¼€å‘ï¼ŒæŠŠç«¯å£é…ç½®åˆ°å¿«æ·æ–¹å¼ï¼Œä½¿ç”¨attachæ¨¡å¼å¯ä»¥å…±äº«ä½¿ç”¨å·²ç»å®‰è£…çš„æµè§ˆå™¨æ’ä»¶ã€‚ å…·ä½“è¿˜æœ‰å¾ˆå¤šå‚æ•°é…ç½®ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ å‚è€ƒdebugger-for-chrome debugger-for-edge vscode-chrome-debug-github vscode-recipes devtools-protocol-chromium devtools-protocol-edge nodejs-debugging","tags":[{"name":"vscode","slug":"vscode","permalink":"https://betgar.github.io/tags/vscode/"}]},{"title":"å‰ç«¯å°çº ç»“--commonæ¨¡å—è®¾è®¡","date":"2019-06-20T10:00:00.000Z","path":"2019/06/20/frontend-little-tangle-common-module-design/","text":"å‰ç«¯å°çº ç»“â€“commonæ¨¡å—è®¾è®¡æ‰¿æ¥ä¸Šä¸€ç¯‡å‰ç«¯å°çº ç»“â€“Vueé¡¹ç›®ä»£ç ç»„ç»‡å’Œé£æ ¼çº¦å®š commonæ¨¡å—çš„å•ç‹¬æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ï¼Œå› ä¸ºcommonæ¨¡å—è®¾è®¡çš„å¥½ï¼Œå¯ä»¥è·¨é¡¹ç›®ä½¿ç”¨ï¼Œç”šè‡³åœ¨éƒ¨ç½²æˆè‡ªå·±çš„ç§æœ‰çš„packageã€‚ commonç›®æ ‡ï¼šä¸»è¦æ˜¯ä¸ºäº†åœ¨ç¬¬ä¸‰æ–¹åº“ä¹‹ä¸Šåšä¸€å±‚ç®€å•çš„å°è£…ï¼Œé¢„ç½®é…ç½®ï¼Œåšä¸€å±‚éš”ç¦»ï¼Œä¹Ÿå¯ä»¥åœ¨è°ƒç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶åšä¸€äº›åŸ‹ç‚¹ç»Ÿä¸€å¤„ç†ä¸€äº›é€»è¾‘ã€‚ è®¾è®¡åŸåˆ™ ä¸èƒ½æœ‰ä»»ä½•çš„ä¸šåŠ¡é€»è¾‘ ä¸èƒ½è€¦åˆå·¥ç¨‹çš„ä¸šåŠ¡çŠ¶æ€ ä¸èƒ½ä¾èµ–ç»„ä»¶åº“ï¼Œå¯ä»¥ä¾èµ–ç‹¬ç«‹çš„UIç»„ä»¶ï¼ˆä¾‹å¦‚: nprogressï¼‰ å¯ä»¥ä¾èµ–vueæ¡†æ¶ï¼Œä¸èƒ½ä¾èµ–routerå®ä¾‹å’Œvuexå®ä¾‹ç»„ä»¶ï¼ˆå¦‚æœä¾èµ–å°±è¯´æ˜è€¦åˆä¸šåŠ¡ï¼‰ commonå‚è€ƒç»“æ„ è¿™ä¸ªæ˜¯æˆ‘ä½¿ç”¨çš„commonå±‚çš„ç›®å½•ç»“æ„ï¼Œä»…ä¾›å‚è€ƒã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162src/commonâ”œâ”€â”€ ajaxâ”‚ â”œâ”€â”€ Ajax.tsâ”‚ â”œâ”€â”€ AjaxConfig.tsâ”‚ â”œâ”€â”€ AjaxUtils.tsâ”‚ â”œâ”€â”€ interceptorsâ”‚ â”‚ â”œâ”€â”€ BackendInterceptor.tsâ”‚ â”‚ â”œâ”€â”€ CacheInterceptor.tsâ”‚ â”‚ â”œâ”€â”€ Interceptors.tsâ”‚ â”‚ â””â”€â”€ LoadingInterceptor.tsâ”‚ â””â”€â”€ transformerâ”‚ â”œâ”€â”€ RequestTransformer.tsâ”‚ â”œâ”€â”€ ResponseTransformer.tsâ”‚ â””â”€â”€ Transformers.tsâ”œâ”€â”€ axiosâ”‚ â”œâ”€â”€ axios.tsâ”‚ â””â”€â”€ index.d.tsâ”œâ”€â”€ cookieâ”‚ â””â”€â”€ Cookies.tsâ”œâ”€â”€ datetimeâ”‚ â””â”€â”€ Datetime.tsâ”œâ”€â”€ dayâ”‚ â””â”€â”€ day.tsâ”œâ”€â”€ downloaderâ”‚ â””â”€â”€ Downloader.tsâ”œâ”€â”€ event-busâ”‚ â”œâ”€â”€ EventBus.tsâ”‚ â””â”€â”€ index.d.tsâ”œâ”€â”€ httpâ”‚ â””â”€â”€ Http.tsâ”œâ”€â”€ index.tsâ”œâ”€â”€ localforageâ”‚ â””â”€â”€ Localforage.tsâ”œâ”€â”€ loggerâ”‚ â””â”€â”€ Logger.tsâ”œâ”€â”€ numberalâ”‚ â””â”€â”€ numberal.tsâ”œâ”€â”€ pagerâ”‚ â””â”€â”€ Pager.tsâ”œâ”€â”€ patternsâ”‚ â”œâ”€â”€ numeric.tsâ”‚ â”œâ”€â”€ patterns.tsâ”‚ â””â”€â”€ strings.tsâ”œâ”€â”€ storageâ”‚ â”œâ”€â”€ index.d.tsâ”‚ â””â”€â”€ Storage.tsâ”œâ”€â”€ textâ”‚ â”œâ”€â”€ formatterâ”‚ â”‚ â””â”€â”€ formatter.tsâ”‚ â””â”€â”€ Text.tsâ”œâ”€â”€ tokenâ”‚ â””â”€â”€ Token.tsâ”œâ”€â”€ utilsâ”‚ â””â”€â”€ Utils.tsâ””â”€â”€ validation â”œâ”€â”€ email â”‚ â””â”€â”€ EmailValidator.ts â”œâ”€â”€ numeric â”‚ â””â”€â”€ NumericValidator.ts â”œâ”€â”€ phone â”‚ â””â”€â”€ PhoneValidator.ts â””â”€â”€ Validation.ts å°è£…å®è·µç¤ºä¾‹ç¤ºä¾‹ï¼šæ ¹æ®è¿è¡Œç¯å¢ƒè°ƒæ•´ç»„ä»¶é…ç½®å‚æ•° loggeræ¨¡å—ç®€å•å°è£…ï¼Œæ ¹æ®éƒ¨ç½²ç¯å¢ƒè°ƒæ•´æ—¥å¿—çº§åˆ«ã€‚ 1234567891011121314151617181920import Logger from 'js-logger';Logger.useDefaults();// å¯ä»¥å‘é€åˆ°æ—¥å¿—æœåŠ¡å™¨ï¼Œè‡ªå·±æ­å»ºä¸ªsentryæ—¥å¿—æœåŠ¡// https://sentry.io/for/javascript/Logger.setHandler(function (messages, context) &#123; // Send messages to a custom logging endpoint for analysis. // TODO: Add some security? (nah, you worry too much! :P) jQuery.post('/logs', &#123; message: messages[0], level: context.level &#125;);&#125;);// è°ƒæ•´æ—¥å¿—çº§åˆ«if (process.env.NODE_ENV === 'production') &#123; Logger.setLevel(Logger.ERROR);&#125; else &#123; Logger.setLevel(Logger.DEBUG);&#125;export default Logger; ç¤ºä¾‹ï¼šæŒ‰éœ€æ·»åŠ ä¾èµ– ç¤ºä¾‹æŒ‰éœ€æ·»åŠ ï¼šå¾ˆå¤šç»„ä»¶å†…éƒ¨ä¹Ÿåˆ†æˆå¤šä¸ªå­ç»„ä»¶ï¼Œè€Œä¸”éƒ½æ˜¯å¯ä»¥æŒ‰éœ€æ·»åŠ  1234567891011121314// storejsconst store: StoreJsAPI = require('store/dist/store.modern.min');const expirePlugin = require('store/plugins/expire');const eventsPlugin = require('store/plugins/events');const updatePlugin = require('store/plugins/update');// const observePlugin = require('store/plugins/observe');// æ·»åŠ æ’ä»¶.store.addPlugin(expirePlugin);store.addPlugin(eventsPlugin);store.addPlugin(updatePlugin);// store.addPlugin(observePlugin);export default store; ç¤ºä¾‹ï¼šè£…é¥°åŸæœ‰æ¥å£ï¼Œå¢å¼ºåŠŸèƒ½ cookieså’Œstorageè¿™ä¸¤ä¸ªæ¨¡å—ä¹Ÿåšä¸€äº›ç®€å•å°è£…ï¼Œå¯ä»¥åšåˆ°ï¼Œå¯¹å†™åœ¨å®¢æˆ·ç«¯å¯è§çš„æ•°æ®è¿›è¡Œç¼–ç åŠ å¯†ï¼Œå¢å¼ºå®‰å…¨æ€§ï¼Œæé«˜è§£æé—¨æ§›ã€‚ è¿›è¡Œç»Ÿä¸€å°è£…ï¼Œè‡ªåŠ¨åŠ è§£å¯† å°è£…clearå’Œremoveæ–¹æ³•ï¼Œæ·»åŠ ç™½åå• å½“é€€å‡ºç½‘ç«™æˆ–è€…å…³é—­ç½‘é¡µæ—¶ï¼Œè¿›è¡Œæ¸…ç†æ—¶å¯ä»¥æ’é™¤ç™½åå•å±æ€§ã€‚ ç¤ºä¾‹ï¼š 123456789101112131415161718import Cookies, &#123; CookieAttributes &#125; from 'js-cookie';const NodeRSA = require('node-rsa');const rsaKey = new NodeRSA(&#123;b: 512&#125;);const cookieGet = Cookies.get;const cookieSet = Cookies.set;// @ts-ignoreCookies.get = function (key: string): string | undefined &#123; return rsaKey.decrypt(cookieGet(key), 'base64');&#125;Cookies.set = function (name: string, value: any, options?: CookieAttributes) &#123; cookieSet(name, rsaKey.encrypt(value, 'base64'));&#125;export const cookies = Cookies;","tags":[{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"}]},{"title":"å‰ç«¯å°çº ç»“--Vueé¡¹ç›®ä»£ç ç»„ç»‡å’Œé£æ ¼çº¦å®š","date":"2019-06-12T10:00:00.000Z","path":"2019/06/12/frontend-little-tangle-vue-project-code-organization-conventional-style-guideline/","text":"å‰ç«¯å°çº ç»“â€“Vueé¡¹ç›®ä»£ç ç»„ç»‡å’Œé£æ ¼çº¦å®š é£æ ¼çº¦å®šä½†ä¸é™äºä»£ç é£æ ¼ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„é»˜è®¤çº¦å®šã€‚ ä»£ç ç»„ç»‡å’Œåˆ†å±‚ ä»£ç ç»„ç»‡æ˜¯ä¸€ä¸ªä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºçš„è¯é¢˜ï¼Œæ²¡æœ‰é“¶å¼¹ã€‚ä¸è¿‡ä¸ç®¡æ€ä¹ˆå˜åŒ–ï¼ŒæŒ‡å¯¼æ€æƒ³è¿˜æ˜¯ä¸å˜çš„é«˜å†…èšï¼Œä½è€¦åˆã€‚ å¼ºçƒˆæ¨èä¸¤ç¯‡æ–‡ç« ï¼Œèƒ½å¤Ÿæ‹“å®½ä½ çš„è§†é‡ï¼Œå¸¦ä½ èµ°å‘æ–°é«˜åº¦ã€‚ ç”¨ Feature First çš„æ–¹å¼ç®¡ç†å‰ç«¯é¡¹ç›®å¤æ‚åº¦ ä»£ç ç»„ç»‡çš„ä¼˜é›…ï¼Œæ¨¡å—åŒ–æ‰èƒ½å¤Ÿåšå¥½ã€‚ åˆ†å±‚ æŒ‰ç…§èŒèƒ½çš„ä¸åŒè¿›è¡Œä¸åŒç»´åº¦è¿›è¡Œå±‚çº§åˆ’åˆ†ï¼Œå±‚çº§åˆ’åˆ†ä¹‹åï¼Œè¿›è¡Œè¿›ä¸€æ­¥çš„æ¨¡å—åˆ’åˆ†ï¼ˆåŸåˆ™ä¸Šï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ï¼‰ æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å‘½å é€‰æ‹©é€‚åˆè‡ªå·±çš„é£æ ¼ã€‚ æ–‡ä»¶å¤¹å’Œæ–‡ä»¶éƒ½ä½¿ç”¨kebab-case kebab-caseé‡åº¦ä½¿ç”¨è€…å¯ä»¥é€‰æ‹©è¿™ç§ã€‚ æ–‡ä»¶å¤¹ä½¿ç”¨kebab-caseï¼Œ æ–‡ä»¶ä½¿ç”¨Pascal Case å»ºè®®ä½¿ç”¨è¿™ç§ã€‚ 12æ–‡ä»¶å¤¹ï¼ševent-busæ–‡ä»¶ï¼šEventBus.ts ä¾‹å¤– indexæ–‡ä»¶ä¸å—ä¸Šè¿°çº¦æŸ å·¥å…·è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼ˆè‡ªå·±è€ƒè™‘æ˜¯å¦å—çº¦æŸï¼‰ æ¨¡å—åŒ–åŸåˆ™ æ¨¡å—åŒ–ä»£ç é¦–å…ˆè¦åšåˆ°ä»£ç çš„åˆ†å±‚ã€éš”ç¦»ã€æŠ½è±¡ã€‚ ä¸åŒæ¨¡å—å®Œæˆä¸åŒçš„èŒèƒ½ï¼Œä¸åŒèŒèƒ½ä¹‹é—´ç›¸äº’åä½œã€‚ æ¯ä¸ªæ¨¡å—ä¿æŒä¸€ä¸ªå…¥å£å’Œå‡ºå£ å¯¹äºå¤–éƒ¨æ¨¡å—æ¥è¯´ï¼Œå°½é‡ä¿è¯ä¸€ä¸ªå…¥å£ å¯¹äºå†…éƒ¨å­æ¨¡å—æ¥è¯´ï¼Œå°½é‡ä¿è¯ä¸€ä¸ªå‡ºå£ å¦‚æœæŒ‰ç…§æ–‡ä»¶å¤¹ä½œä¸ºæ¨¡å—ç•Œé™ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½æœ‰ä¸€ä¸ªå‡ºå£ï¼ˆå¯ä»¥é»˜è®¤ä¸ºindexæ–‡ä»¶ï¼‰ æ¨¡å—çš„å…¥å£åç§°é»˜è®¤indexæˆ–è€…æ–‡ä»¶å¤¹åå­—çš„æ–‡ä»¶ 123456// ä¾‹å¦‚ï¼š groupæ–‡ä»¶å¤¹group/|---index.ts // A. é»˜è®¤ä½œä¸ºå…¥å£|---group.ts // B. ä¹Ÿå¯ä»¥é»˜è®¤ä½œä¸ºå…¥å£äºŒè€…ä»»é€‰å…¶ä¸€å°±å¥½ï¼ŒAæ–¹æ¡ˆåº”è¯¥æ˜¯å¤§å®¶é»˜è®¤çš„æ–¹æ¡ˆï¼›Bæ–¹æ¡ˆï¼Œæ£€ç´¢ä»£ç çš„æ—¶å€™æ›´æ–¹ä¾¿ æ¨¡å—å†…éƒ¨åˆ†å±‚ æ¨¡å—å†…éƒ¨è¿˜å¯ä»¥æœ‰base, common, components, helper,utils,filter,configç­‰å±‚çº§ï¼ˆè¯ç©·äº†â€¦..ï¼‰ importå’ŒexportåŸåˆ™ importå¯¼å…¥ï¼ŒæŒ‡å®šåˆ°æ–‡ä»¶ æŒ‡å®šåˆ°æ–‡ä»¶èƒ½å¤Ÿæé«˜ç¼–è¯‘æ‰“åŒ…çš„é€Ÿåº¦ 12// æŒ‡å®šåˆ°indexæ–‡ä»¶import &#123; Logger &#125; from './common/index'; commonæ¨¡å— ç‹¬ç«‹æ–‡ç« è¯´æ˜ã€‚ routeræ¨¡å— routeræ¨¡å—çš„é£æ ¼çº¦å®šã€‚ æ¨¡å—ç»“æ„123456789routerâ”œâ”€â”€ helperâ”‚ â”œâ”€â”€ ImportRoute.tsâ”‚ â””â”€â”€ RouteGenerator.tsâ”œâ”€â”€ modulesâ”‚ â”œâ”€â”€ AboutRoutes.tsâ”‚ â””â”€â”€ HomeRoutes.tsâ”œâ”€â”€ router.tsâ””â”€â”€ Routes.ts helper: å¸®åŠ©å·¥å…·æ–¹æ³• modules: ä¸åŒçš„ä¸šåŠ¡æ¨¡å— router: vue-routeråˆå§‹åŒ–çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯æ¨¡å—å…¥å£ Routes: RouteConfigçš„å‡ºå£ï¼Œå…¶å®ƒæ¨¡å—éƒ½ä»è¿™é‡Œè·å–routeé…ç½®ï¼Œä»è€Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ï¼Œå°¤å…¶æ˜¯ä¸åŒçš„viewsé‡Œé¢çš„è·¯ç”±è·³è½¬ï¼Œä½¿ç”¨Routesé…ç½®è¾¾åˆ°è§£è€¦çš„ç›®çš„ã€‚ ä¾‹å­ï¼š 123456import &#123; HomeRoute &#125; from 'Routes';// è·³è½¬,è¿™æ ·æ²¡æœ‰ç¡¬ç¼–ç ä»»ä½•çš„routeä¿¡æ¯ï¼Œå…¨éƒ¨éƒ½æ˜¯ä»Routesé…ç½®æ¥ï¼Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ã€‚this.$router.push(&#123; name: HomeRoute.name&#125;) moduleså­æ¨¡å— æ–‡ä»¶åï¼šviewsä¸‹æ–‡ä»¶å¤¹åï¼ˆæ¨¡å—åï¼‰ + Routesç»“å°¾ modulesä¸‹çš„æ–‡ä»¶ï¼Œæœ€å¥½å’Œviewsä¸‹æ–‡ä»¶å¤¹ä¸€ä¸€å¯¹åº”ï¼Œæ–¹ä¾¿ç»´æŠ¤ï¼ˆå¯¹æ¨¡å—åˆ‡åˆ†æœ‰è¾ƒé«˜çš„ç†è§£ï¼‰ 123456789ä¾‹å¦‚ï¼šviewsâ”œâ”€â”€ groupâ”‚ â”œâ”€â”€ xxx1.vueâ”‚ â””â”€â”€ xxx2.vueâ”œâ”€â”€ reportâ”‚ â”œâ”€â”€ xxx3.vueâ”‚ â””â”€â”€ xxx4.vueâ”œâ”€â”€ Home.vue moduleså¯¹åº”çš„å°±æ˜¯ 123456ä¾‹å¦‚ï¼šrouterâ”œâ”€â”€ modulesâ”‚ â”œâ”€â”€ GroupRoutes.ts| â”œâ”€â”€ ReportRoutes.tsâ”‚ â””â”€â”€ HomeRoutes.ts å¯¼å‡ºæ¨¡å—é…ç½®ï¼š 123456789// HomeRoutes.tsexport const HomeRoute = &#123; path: '/', name: 'HomeRoute', component: 'Home',&#125;;// å¿…é¡»å¯¼å‡ºä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªæ¨¡å—çš„é…ç½®ä¿¡æ¯ï¼Œå¯èƒ½æœ‰å¤šä¸ªé…ç½®ï¼Œè¿˜å¯ä»¥è¿›è¡Œé…ç½®å±‚çº§å…³ç³»export default [HomeRoute]; æ³¨æ„ï¼š è¿™åªæ˜¯ä¸ªæ€è·¯ï¼Œå…·ä½“çš„æ“ä½œè¿˜è¦çµæ´»è¿ç”¨ã€‚ RouteConfigé£æ ¼çº¦å®š RouteConfigå˜é‡å vueæ–‡ä»¶å+Routeç»“å°¾ 1234567// æ–‡ä»¶Home.vue// å˜é‡åHomeRouteexport const HomeRoute = &#123; path: '/', name: 'HomeRoute', component: 'Home',&#125;; nameå±æ€§ å’ŒRouteConfigå˜é‡åä¿æŒä¸€è‡´ componentå±æ€§ å¦‚æœå¼‚æ­¥åŠ è½½ï¼Œcomponentéœ€è¦ä½¿ç”¨ç›¸å¯¹äºviewsçš„pathæ ¼å¼ï¼Œå› ä¸ºåœ¨ImportRouteä¸­ç»Ÿä¸€å¤„ç†ã€‚ 12345// ImportRoute.tsç»Ÿä¸€å¤„ç†export function importRoute(file: string) &#123; // @see https://github.com/webpack/webpack/issues/1949 return () =&gt; import(/* webpackChunkName: \"chunk-[request][index]\" */ '@/views/' + file + '.vue');&#125; pathå±æ€§ æ²¡æœ‰æœ€ä½³å®è·µï¼Œæœ€å¥½ä½¿ç”¨restfulé£æ ¼çº¦æŸ å¦‚æœä½¿ç”¨route.queryç­‰ä¹‹ç±»çš„å‚æ•°ä¼ é€’ï¼Œé¢åŒ…å±‘å¯¼èˆªå¾ˆéš¾å¤„ç†ã€‚ metaå±æ€§ æ²¡æœ‰æœ€ä½³å®è·µï¼Œå¤šæ•°æƒ…å†µä¸‹æœ‰è¿™ä¹ˆå‡ ä¸ªå±æ€§ 1234567891011121314151617181920212223export const HomeRoute = &#123; path: '/', name: 'HomeRoute', component: 'Home', // component: () =&gt; import('@/views/Home.vue') meta: &#123; // titleçš„å€¼å¯ä»¥ä¸º`i18n`çš„è¯­è¨€æ–‡ä»¶keyï¼Œæ–¹ä¾¿åšå›½é™…åŒ– title: 'é¦–é¡µ', // ä½œä¸ºmenu.titleå’Œbreadcrumb.titleå¤‡é€‰ icon: '', // iconçš„class,ä½œä¸ºmenu.iconå’Œbreadcrumb.iconå¤‡é€‰ menu: &#123; title: 'é¦–é¡µ', visible: true, icon: '', // iconçš„class &#125;, breadcrumb: &#123; title: 'è·¯å¾„å', visible: false, // æœ‰çš„æ—¶å€™ä¸éœ€è¦åœ¨é¢åŒ…å±‘ä¸Šæ¸²æŸ“ icon: '', // iconçš„class &#125;, auth: &#123; roles: [1, 2, 3] &#125; &#125;&#125;; propså±æ€§ è·¯ç”±ç»„ä»¶ä¼ å‚ï¼Œæ›´å¤šé«˜çº§ç”¨æ³•ï¼Œè¯·æŸ¥çœ‹ä¾‹å­ ä½¿ç”¨propsæ–¹å¼æŠŠcomponentså’Œ$routeè§£è€¦ï¼Œè¿™æ ·componentsæ—¢å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå­ç»„ä»¶ä½¿ç”¨ï¼Œè€Œä¸”æ–¹ä¾¿æµ‹è¯•ã€‚ ç‰¹æ®Šåœºæ™¯å¯ä»¥ä¸ä½¿ç”¨propsï¼Œä¾‹å¦‚æœ¬æ¥å°±ä¸æ˜¯é€šç”¨çš„ç»„ä»¶ï¼Œæ˜¯éœ€è¦ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„çˆ¶å­ç»„ä»¶ï¼Œæ˜¯å¯ä»¥å’Œrouteè€¦åˆçš„ã€‚ å¦‚æœ props è¢«è®¾ç½®ä¸º trueï¼Œroute.params å°†ä¼šè¢«è®¾ç½®ä¸ºç»„ä»¶å±æ€§ã€‚ 123456789// å‡½æ•°å¼(åŠ¨æ€)const router = new VueRouter(&#123; routes: [&#123; path: '/search', component: SearchUser, // routeæ˜¯SearchUserå†…éƒ¨çš„this.$route props: (route) =&gt; (&#123; query: route.query.q &#125;) &#125;]&#125;) 12345678// é™æ€const router = new VueRouter(&#123; routes: [&#123; path: '/promotion/from-newsletter', component: Promotion, props: &#123; newsletterPopup: false &#125; &#125;]&#125;) storeæ¨¡å— vueåº”ç”¨çš„çŠ¶æ€æ¨¡å— æ¨¡å—ç»“æ„ å‚è€ƒå®˜æ–¹æ–‡ä»¶ç»“æ„ å®˜æ–¹è´­ç‰©è½¦ä¾‹å­ 123456789storeâ”œâ”€â”€ StoreTypes.ts # actions mutations gettersç±»å‹â”œâ”€â”€ Actions.ts # æ ¹çº§åˆ«çš„ actionâ”œâ”€â”€ Mutations.ts # æ ¹çº§åˆ«çš„ Mutationsâ”œâ”€â”€ Getters.ts # æ ¹çº§åˆ«çš„ gettersâ”œâ”€â”€ modules # æ¨¡å—â”‚ â”œâ”€â”€ xxxStore.ts # å­æ¨¡å—â”‚ â”œâ”€â”€ SystemStore.ts # SystemStoreå­æ¨¡å—â”œâ”€â”€ index.ts # å…¥å£ indexï¼š ä½œä¸ºå…¥å£ StoreTypesä½œä¸ºç±»å‹çš„å¸¸é‡æ–‡ä»¶ å‚è€ƒä½¿ç”¨å¸¸é‡æ›¿ä»£-mutation-äº‹ä»¶ç±»å‹ æ‰€ä»¥mutationå’Œactionçš„ç±»å‹å…¨éƒ¨ä½¿ç”¨å¸¸é‡ï¼Œæ–¹ä¾¿å…¶å®ƒæ¨¡å—å’Œstoreæ¨¡å—çš„è§£è€¦ã€‚ moduleså­æ¨¡å— æ–‡ä»¶åï¼šæ¨¡å—å + Storeç»“å°¾ modulesä¸‹çš„ä¸šåŠ¡storeï¼Œæœ€å¥½å’Œviewsä¸‹æ–‡ä»¶å¤¹å¯¹åº”ï¼Œæ–¹ä¾¿ç»´æŠ¤ 1234# ä¾‹å­ï¼š LocaleStore.ts # i18næ¨¡å—LoginStore.ts # ç™»å½•æ¨¡å—UserStore.ts # ç”¨æˆ·æ¨¡å— Store moduleçº¦å®š å‚è€ƒStore Module ä¸»è¦çº¦å®šmoduleå†…éƒ¨ä»£ç ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š SystemStoreä¸ºä¾‹ï¼š éœ€è¦ä½¿ç”¨å‰ç¼€çš„åœ°æ–¹ä½¿ç”¨æ¨¡å—åä½œä¸ºå‰ç¼€ ä¾‹å­ä¸­æ¨¡å—åä¸ºSystem çº¦å®šå£°æ˜å¤§è‡´é¡ºåºå¦‚ä¸‹ï¼šé™¤stateéƒ¨åˆ†å¤–å…¶ä»–éƒ½æ˜¯å¯é€‰ stateå£°æ˜ï¼ˆä¾‹å¦‚ï¼šsystemStateï¼‰ getter typeså£°æ˜ï¼ˆå¯é€‰ï¼Œçµæ´»è¿ç”¨ï¼‰ getterså£°æ˜ï¼ˆå¯é€‰, çµæ´»è¿ç”¨ï¼‰ mutation types å£°æ˜ï¼ˆå¯é€‰ï¼‰ mutationså£°æ˜ï¼ˆå¯é€‰ï¼‰ action typeså£°æ˜ï¼ˆå¯é€‰ï¼‰ actionså£°æ˜ï¼ˆå¯é€‰ï¼‰ store optionså¯¼å‡º 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374// ä¾‹å­: SystemStore.ts// å£°æ˜stateconst systemState: SystemState = &#123; initialized: false,&#125;;// å£°æ˜GetterTypes export const SystemGetterTypes = &#123; IS_SYSTEM_INITIALIZED: 'IS_SYSTEM_INITIALIZED',&#125;;// å£°æ˜gettersconst getters = &#123; [SystemGetterTypes.IS_SYSTEM_INITIALIZED](state: SystemState, getters: any, rootState: any)&#123; return state.initialized; &#125;&#125;;// å£°æ˜MutationTypesexport const SystemMutationTypes = &#123; SYSTEM_SET_INITIALIZED: 'SYSTEM_SET_INITIALIZED',&#125;;// å£°æ˜mutationsconst mutations: MutationTree&lt;SystemState&gt; = &#123; [SystemMutationTypes.SYSTEM_SET_INITIALIZED]: ( state: SystemState, payload: boolean ) =&gt; &#123; state.initialized = payload; logger.log('system-store.initialized: ' + payload); &#125;,&#125;;// å£°æ˜ActionTypesexport const SystemActionTypes = &#123; SYSTEM_UPDATE_INITIALIZED: 'SYSTEM_UPDATE_INITIALIZED', SYSTEM_RESET: 'SYSTEM_RESET', SYSTEM_INIT: 'SYSTEM_INIT',&#125;;// å£°æ˜actionsconst actions = &#123; [SystemActionTypes.SYSTEM_UPDATE_INITIALIZED]: ( &#123; commit &#125;: ActionContext&lt;SystemState, any&gt;, initialized: boolean ) =&gt; &#123; commit(SystemMutationTypes.SYSTEM_SET_INITIALIZED, initialized); &#125;, [SystemActionTypes.SYSTEM_RESET]: (&#123; commit, dispatch, &#125;: ActionContext&lt;SystemState, any&gt;) =&gt; &#123; // æ¸…ç©ºæ‰€æœ‰ä½¿ç”¨storeå‚¨å­˜çš„æ•°æ®. &#125;, [SystemActionTypes.SYSTEM_INIT]: ( &#123; commit, dispatch &#125;: ActionContext&lt;SystemState, any&gt;, payload: &#123; user: UserModel; userCookie: UserCookie; &#125; ) =&gt; &#123; // åˆå§‹åŒ–æ•°æ® &#125;,&#125;;// å¯¼å‡ºstoreOptionsconst storeOptions = &#123; state: systemState, getters, mutations, actions,&#125;;export default storeOptions; æ³¨æ„ï¼šå…¶ä¸­çš„action types, mutation typeså’Œ getter types ä¸å¼ºåˆ¶è¦æ±‚ï¼Œåœ¨es6ç¯å¢ƒä¸­ä½¿ç”¨å®˜æ–¹çš„mapStateï¼ŒmapGetters, mapActions, mapMutationså·¥å…·å‡½æ•°æ›´æ–¹ä¾¿ã€‚ apiæ¨¡å— apiæ¨¡å—æ˜¯æ¥å£æœåŠ¡å±‚ï¼Œä¸»è¦åšä¸€äº›å¯¹å‚æ•°çš„è½¬æ¢å¤„ç†ï¼ŒåŒæ—¶è§£è€¦å…¶å®ƒä¸šåŠ¡å±‚ã€‚ æ¨¡å—ç»“æ„ æ¨¡å—çš„å¤§è‡´å‚è€ƒç»“æ„ 123456apiâ”œâ”€â”€ api.ts # å…¥å£â””â”€â”€ modules # å­æ¨¡å— â”œâ”€â”€ DictionaryService.ts # å…·ä½“çš„ä¸šåŠ¡æ¨¡å— â”œâ”€â”€ GroupService.ts â”œâ”€â”€ HistoryService.ts service moduleçº¦å®š æ–‡ä»¶åï¼šæ¨¡å—å + Serviceç»“å°¾ modulesä¸‹çš„ä¸šåŠ¡serviceï¼Œå’Œviewsä¸‹æ–‡ä»¶å¤¹å¯¹åº”ï¼Œæ–¹ä¾¿ç»´æŠ¤ å¦‚æœå•ä¸ªserviceæ–‡ä»¶å¯¹åº”çš„ä¸šåŠ¡æ¨¡å—æ¥å£å¤ªå¤šï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶å¤¹æ¥è¿›ä¸€æ­¥åˆ†å‰²ã€‚ 1234567891011//ä¾‹å­ï¼šLoginService// å£°æ˜urlï¼Œå¯¼å‡ºurlæ–¹ä¾¿mockæ¨¡å—ä½¿ç”¨export const GET_SIGN_IN = '/api/login';// å£°æ˜serviceå‡½æ•°export function signIn(data: &#123;account: string; pass: string&#125;) &#123; return ajax(&#123; url: GET_SIGN_IN, data, method: 'post' &#125;);&#125; URLå‰ç¼€çº¦å®šï¼š æŸ¥è¯¢ï¼šä½¿ç”¨GETä½œä¸ºå‰ç¼€ï¼ˆç‰¹æ®Šæƒ…å†µä¾‹å¤–ï¼‰ æ›´æ–°ï¼šä½¿ç”¨UPDATE æ–°å¢ï¼šä½¿ç”¨ADD åˆ é™¤ï¼šä½¿ç”¨DELETE å…¶å®ƒï¼šEXPORTï¼ŒIMPORTï¼ŒUPLOADï¼ŒDOWNLOADç­‰ service å‡½æ•°åå‰ç¼€çº¦å®šï¼š å¯¹äºå•ä¸ªå®ä½“å¯ä»¥è€ƒè™‘ä½¿ç”¨get, add, update, deleteä½œä¸ºå‰ç¼€ i18næ¨¡å— ä¸»è¦æ˜¯å»ºè®®ä¸‹ä»£ç çš„åˆ†å‰²çš„çº¦å®šã€‚ æ¨¡å—ç»“æ„12345678910i18nâ”œâ”€â”€ i18n.tsâ”œâ”€â”€ index.d.tsâ””â”€â”€ locales â”œâ”€â”€ en_US.js â”œâ”€â”€ modules â”‚ â””â”€â”€ actions â”‚ â”œâ”€â”€ en_US.js â”‚ â””â”€â”€ zh_CN.js â””â”€â”€ zh_CN.js è¯­è¨€æ–‡ä»¶ç»„ç»‡ è¯­è¨€æ¨¡å—çš„ç»„ç»‡ï¼Œä¸»è¦æŒ‰ç…§æ¨¡å—ï¼ˆæ–‡ä»¶å¤¹å±‚æ¬¡ï¼‰æ¥ç»„ç»‡ï¼Œèƒ½å¤Ÿæœ€å°çš„å‡å°‘å†²çªå¯èƒ½æ€§ã€‚ è¯­è¨€æ–‡ä»¶çº¦å®šï¼š æ–¹è¨€æ–‡ä»¶æ”¾ç½®åœ¨localsæ–‡ä»¶å¤¹ä¸‹ æ–‡ä»¶ä»¥æ–¹è¨€ç¼–ç å‘½å å±‚çº§ç»„ç»‡çš„ä¾‹å­ï¼š 123456789101112131415viewsâ”œâ”€â”€ accountâ”‚ â”œâ”€â”€ Account.vueâ”‚ â”œâ”€â”€ localesâ”‚ â”‚ â”œâ”€â”€ en_US.jsâ”‚ â”‚ â””â”€â”€ zh_CN.jsâ”‚ â””â”€â”€ XXX.vueâ”œâ”€â”€ feedbackâ”‚ â”œâ”€â”€ localesâ”‚ â”‚ â”œâ”€â”€ en_US.jsâ”‚ â”‚ â””â”€â”€ zh_CN.jsâ”‚ â””â”€â”€ Suggestion.vueâ”œâ”€â”€ localesâ”‚ â”‚ â”œâ”€â”€ en_US.jsâ”‚ â”‚ â””â”€â”€ zh_CN.js 123456789// views/feedback/locales/zh_CN.jsexport const feedbackModule = &#123; // è¯­è¨€æ¨¡å—å±æ€§ï¼šæ¨¡å—å+moduleç»“å°¾ // å¯é€‰çš„æ–¹å¼å°±æ˜¯ï¼šä¸¥æ ¼æŒ‰ç…§æ–‡ä»¶å¤¹å±‚æ¬¡æ¥æ„é€ å±æ€§å±‚çº§(ç¼ºç‚¹å–å±æ€§å€¼æ—¶å¤ªé•¿ï¼ŒåæœŸå¯ä»¥ä½¿ç”¨__dirnameè‡ªåŠ¨ç”Ÿæˆ) label: 'æ‚¨çš„æ„è§:', textarea: &#123; placeholder: 'è¯·å†™ä¸‹æ‚¨çš„æ„è§ä¸å»ºè®®, 500å­—ç¬¦ä»¥å†…' &#125; &#125;; 123456789101112// views/locales/zh_CN.jsimport feedbackModule from '../feedback/locales/zh_CN.js';export default &#123; // å¦‚æœæ¨¡å—ä¼—å¤šå»ºè®®åŠ ä¸Šviews // views: &#123; // ...feedbackModule, // &#125; // å¦‚æœæ¨¡å—å°‘ï¼Œç›´æ¥ feedbackModule,&#125;; 123456// i18n/locales/zh_CN.jsimport viewsLocales from '../../views/locales/zh_CN';export default &#123; ...viewsLocales&#125; mockæ¨¡å— mockæ¨¡å—ä¸»è¦åšäº›æ•°æ®æ¨¡æ‹Ÿçš„å·¥ä½œ æ¨¡å—ç»“æ„ å­æ¨¡å—çš„å¤§è‡´å‚è€ƒç»“æ„ 1234mockâ”œâ”€â”€ mock.js # å…¥å£â””â”€â”€ modules # å­æ¨¡å— â”œâ”€â”€ LoginMock.js # å…·ä½“çš„ä¸šåŠ¡æ¨¡å— mock moduleçº¦å®š æ–‡ä»¶åï¼šæ¨¡å—å + mockç»“å°¾ modulesä¸‹çš„mockæ–‡ä»¶ï¼Œå’Œapiæ¨¡å—ä¸‹æ–‡ä»¶å¯¹åº”ï¼Œæ–¹ä¾¿ç»´æŠ¤ æ–¹æ³•çº¦å®šï¼š mockæ¨¡å—æ–¹æ³•å’Œserviceè¯·æ±‚æ–¹æ³•å¯¹åº” ä¾‹å¦‚ï¼šLoginServiceçš„signIn mockæ¨¡å—å¯¹åº”ä¹Ÿå«signIn mock moduleéœ€è¦æä¾›setupæ–¹æ³• setupæ–¹æ³•ä¾›å¤–éƒ¨ç»Ÿä¸€è°ƒç”¨ï¼Œä½œä¸ºmock moduleçš„å¼€å…³ ä¾‹å­ï¼š 123456789101112131415161718// LoginMock.jsimport Mock from 'mockjs';import &#123; genSuccessResult, genFailResult &#125; from './mock-utils';import &#123; GET_SIGN_IN &#125; from '../api/api';import Cookies from 'js-cookie';const signIn = (data) =&gt; &#123; Cookies.set('SESSIONID', 'mock SESSIONID'); return genSuccessResult(&#123; msg: 'ç™»é™†æˆåŠŸ', &#125;);&#125; export default &#123; setup() &#123; Mock.mock(GET_SIGN_IN, 'post', signIn); &#125;&#125; 123456// mock.jsimport loginMocker from './modules/login';export const start = function() &#123; loginMocker.setup();&#125;; 12345// main.jsimport mocker from './mock/mock'if (process.env.NODE_ENV === 'development') &#123; mocker.start();&#125; å…¶å®ƒæ¨¡å— å…¶å®ƒæ¨¡å—å¦‚filtersï¼Œdirectives,testç›®å‰æ²¡æœ‰æ€»ç»“ï¼Œä»¥åè¡¥å……ã€‚","tags":[{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"}]},{"title":"windows 10 é”å±å£çº¸ä¿å­˜æ–¹æ³•","date":"2019-06-12T01:00:00.000Z","path":"2019/06/12/save-the-windows-spotlight/","text":"åˆ†äº«å¿…åº”å£çº¸windows 10 é”å±å£çº¸ä¿å­˜æ–¹æ³• windows é”å±å£çº¸åŠŸèƒ½å«åšspotlightï¼Œå…¶å®å£çº¸éƒ½ä¸‹è½½åœ¨æœ¬åœ°ç”µè„‘ä¸Šï¼Œåªéœ€è¦æ‹·è´å‡ºæ¥å°±è¡Œäº†ã€‚ è„šæœ¬ ä¿å­˜ä¸º spotlight.ps1 ï¼Œä½¿ç”¨å³é”®powershellè¿è¡Œ åœ¨ä¸ªäººæ–‡ä»¶å¤¹çš„Picturesä¸‹æœ‰ä¸¤ä¸ªHorizontalå’ŒVerticalä¿å­˜ç€å›¾ç‰‡ 12345678910111213141516171819add-type -AssemblyName System.DrawingNew-Item \"$($env:USERPROFILE)\\Pictures\\Spotlight\" -ItemType directory -Force;New-Item \"$($env:USERPROFILE)\\Pictures\\Spotlight\\CopyAssets\" -ItemType directory -Force;New-Item \"$($env:USERPROFILE)\\Pictures\\Spotlight\\Horizontal\" -ItemType directory -Force;New-Item \"$($env:USERPROFILE)\\Pictures\\Spotlight\\Vertical\" -ItemType directory -Force;foreach($file in (Get-Item \"$($env:LOCALAPPDATA)\\Packages\\Microsoft.Windows.ContentDeliveryManager_cw5n1h2txyewy\\LocalState\\Assets\\*\"))&#123; if ((Get-Item $file).length -lt 100kb) &#123; continue &#125; Copy-Item $file.FullName \"$($env:USERPROFILE)\\Pictures\\Spotlight\\CopyAssets\\$($file.Name).jpg\";&#125;foreach($newfile in (Get-Item \"$($env:USERPROFILE)\\Pictures\\Spotlight\\CopyAssets\\*\"))&#123; $image = New-Object -comObject WIA.ImageFile; $image.LoadFile($newfile.FullName); if($image.Width.ToString() -eq \"1920\")&#123; Move-Item $newfile.FullName \"$($env:USERPROFILE)\\Pictures\\Spotlight\\Horizontal\" -Force; &#125; elseif($image.Width.ToString() -eq \"1080\")&#123; Move-Item $newfile.FullName \"$($env:USERPROFILE)\\Pictures\\Spotlight\\Vertical\" -Force; &#125;&#125;Remove-Item \"$($env:USERPROFILE)\\Pictures\\Spotlight\\CopyAssets\\*\"; å¿…åº”ç¼¤çº·æ¡Œé¢ å¾®è½¯å‡ºå“å¿…åº”ç¼¤çº·æ¡Œé¢ æ”¶é›†å¿…åº”å£çº¸çš„ç½‘ç«™","tags":[{"name":"windows","slug":"windows","permalink":"https://betgar.github.io/tags/windows/"}]},{"title":"nvsä½¿ç”¨çš„æ³¨æ„äº‹é¡¹","date":"2019-06-05T16:00:00.000Z","path":"2019/06/06/nvs-usage-considerations/","text":"nvsä½¿ç”¨çš„æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨nvsä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„æ˜¯nvm windowsè¿™æ¬¾å·¥å…·ï¼Œç”¨ç€ä¹ŸæŒºçˆ½çš„ï¼Œå‰ä¸ä¹…çœ‹åˆ°ç§‘æ™®æ–‡ï¼Œæ‰€ä»¥ä¹Ÿæƒ³è¯•è¯•ï¼Œè¯•äº†ä¹‹ååœ¨windowsä¸Šç¿»è½¦äº†ï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚å…ˆçœ‹ç§‘æ™®æ–‡ï¼šä½¿ç”¨ nvs ç®¡ç†æœ¬åœ° Node.js ç‰ˆæœ¬ windowsä¸‹å®‰è£… æ¨ècmdæ‰‹åŠ¨å®‰è£…æ­¥éª¤ git bashç¯å¢ƒé…ç½®1234# ~/.bashrc æ·»åŠ ä¸‹é¢çš„ç¯å¢ƒé…ç½®# æ ¹æ®ä½ å®‰è£…çš„è·¯å¾„é€‰æ‹©$ProgramData æˆ–è€… $LOCALAPPDATAexport NVS_HOME=$LOCALAPPDATA/nvs. $NVS_HOME/nvs.sh git bashä¸­nvsæŠ¥é”™æ‰¾ä¸åˆ°å‘½ä»¤ nvs v1.5.1ä½¿ç”¨MSIæˆ–è€…choco install nvså®‰è£…ä¹‹åå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ä¼šç¼ºå¤±nvs.shï¼Œå¦‚æœä½ åœ¨git bashä¸‹ä½¿ç”¨nvsä¼šå‡ºç°æ‰¾ä¸åˆ°å‘½ä»¤ï¼Œåç»­ç‰ˆæœ¬ä¼šä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚æ¨ècmdæ‰‹åŠ¨å®‰è£…æ­¥éª¤åˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚ nvså’Œnpmå‘½ä»¤ä¸ç”Ÿæ•ˆ å®‰è£…ä¹‹ååœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­nvså’Œnpmä¸ç”Ÿæ•ˆæ—¶ï¼Œæ³¨æ„æ³¨é”€é‡æ–°ç™»å½•ï¼Œæˆ–è€…é‡æ–°å¯åŠ¨ä¸€æ¬¡ç³»ç»Ÿã€‚ æ³¨æ„ï¼š å°¤å…¶æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨nvs linkä¹‹åï¼Œå‘ç°nodeå’Œnpmä¸ä¼šç”Ÿæ•ˆï¼Œæœ€å¥½æ³¨é”€é‡æ–°ç™»å½•ã€‚ å…±ç”¨npmå…¨å±€æ¨¡å— é¦–å…ˆä¸å»ºè®®å¤§å®¶è·¨ç‰ˆæœ¬å…¬ç”¨å…¨å±€æ¨¡å—ï¼Œé™¤éä½ çŸ¥é“ä½ åœ¨å¹²ä»€ä¹ˆã€‚ ç§‘æ™®æ–‡ï¼šä½¿ç”¨ nvs ç®¡ç†æœ¬åœ° Node.js ç‰ˆæœ¬ è¿™é‡Œæœ‰ä»‹ç»æ€ä¹ˆè®¾ç½®ã€‚ 123# ä½¿ç”¨git bashåˆ›å»ºmkdir -p ~/.npm-globalnpm config set prefix ~/.npm-global 123456# .bashrcä¸­æ·»åŠ å…¨å±€æ¨¡å—çš„è·¯å¾„# æ³¨æ„~/.npm-global/ ä¸æ˜¯~/.npm-global/bin# windows 10ä¸‹æ²¡æœ‰binæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æœ€å¥½æ£€æŸ¥ä¸‹ã€‚ã€‚ã€‚echo \"export PATH=~/.npm-global/:$PATH\" &gt;&gt; ~/.bashrcsource ~/.bashrc æ³¨æ„ï¼š (nvs v1.5.1) æ³¨æ„æ£€æŸ¥å…¨å±€æ¨¡å—çš„é…ç½®è·¯å¾„ï¼Œæ˜¯å¦æ­£ç¡®ï¼ˆå‘ï¼‰ cmdå’Œpower shellä¸‹æ·»åŠ å…¨å±€æ¨¡å—ç¯å¢ƒå˜é‡ é€šè¿‡ä»¥ä¸Šçš„é…ç½®åœ¨git bashä¸‹ï¼Œå…¨å±€å®‰è£…çš„npmæ¨¡å—å·¥ä½œçš„å¾ˆæ­£å¸¸ï¼Œä½†æ˜¯åœ¨cmdæˆ–è€…power shellä¼šå‘ç°æ‰¾ä¸åˆ°å‘½ä»¤ï¼Œå°è¯•è¿‡æ·»åŠ åˆ°ç³»ç»Ÿå˜é‡ï¼Œä½†æ˜¯ä¾ç„¶ä¸ç”Ÿæ•ˆï¼Œæœ€åæä¸ªissuesï¼Œå®˜æ–¹ç»™äº†è§£å†³æ–¹æ¡ˆã€‚ 12# è®¾ç½®å®Œå¦‚æœä¸ç”Ÿæ•ˆï¼Œæ–°å¼€ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£å°è¯•ï¼ˆå¦‚æœä¸è¡Œï¼Œæ³¨é”€é‡æ–°ç™»å½•ï¼‰setx PATH \"%PATH%;%USERPROFILE%\\.npm-global\" è®¾ç½®ä¹‹åï¼šcmder, cmd , powershell, cygwiné€šé€šç”Ÿæ•ˆäº† æ³¨æ„ï¼š nvs use æ˜¯æ”¹å˜å½“å‰shellçª—å£çš„nodeç‰ˆæœ¬ï¼Œä¸æ˜¯å…¨å±€ç¯å¢ƒï¼ˆnvmçš„åŒºåˆ«ï¼‰ nvs linkæ˜¯æ”¹å˜å…¨å±€ç¯å¢ƒçš„nodeç‰ˆæœ¬ å‚è€ƒç§‘æ™®æ–‡ï¼šä½¿ç”¨ nvs ç®¡ç†æœ¬åœ° Node.js ç‰ˆæœ¬ ä» nvm è¿ç§»åˆ° nvs cmder using .bashrc VS Code Support - Node Version Switcher xizhibei Node Version Manager Windows: when use npm prefix share global modules fails setx ss64 setx","tags":[{"name":"node","slug":"node","permalink":"https://betgar.github.io/tags/node/"},{"name":"nvs","slug":"nvs","permalink":"https://betgar.github.io/tags/nvs/"}]},{"title":"å‰ç«¯å°çº ç»“--é›†æˆgitflowå’Œstandard-versionä½¿ç”¨","date":"2019-05-21T00:00:00.000Z","path":"2019/05/21/frontend-little-tangle-integrate-git-flow-and-standard-version/","text":"å‰ç«¯å°çº ç»“â€“é›†æˆgitflowå’Œstandard-versionä½¿ç”¨ è¯·çœ‹ä¸Šä¸€ç¯‡å‰ç«¯å°çº ç»“â€“çº¦å®šå¼æäº¤å’Œè‡ªåŠ¨ç”Ÿæˆchangelog git flowå·¥ä½œæµå¯¹æ¯” Gitå·¥ä½œæµæŒ‡å— git flow ä»‹ç» git flowæºè‡ªè¿™ç¯‡æ–‡ç« a-successful-git-branching-modelï¼Œå¤§ç¥ï¼ï¼ï¼ã€‚ å…³äºgit flowçš„ä½¿ç”¨ï¼Œè¯·çœ‹ä»¥ä¸‹é“¾æ¥ï¼Œéå¸¸å¤šçš„æ–‡ç« ï¼Œå†™çš„éå¸¸å¥½ã€‚ å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨git flow git-flow å¤‡å¿˜æ¸…å• git-branching-model å¦‚å›¾ git-flow-nvie git flowå¸¸ç”¨çš„åˆ†æ”¯ ä»¥ä¸‹éƒ¨åˆ†å†…å®¹æ¥è‡ªå¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨git flowåšå®¢å’Œgitflow-examples develop : è¿™ä¸ªåˆ†æ”¯æ˜¯æˆ‘ä»¬æ˜¯æˆ‘ä»¬çš„ä¸»å¼€å‘åˆ†æ”¯ï¼ŒåŒ…å«æ‰€æœ‰è¦å‘å¸ƒåˆ°ä¸‹ä¸€ä¸ªReleaseçš„ä»£ç ï¼Œè¿™ä¸ªä¸»è¦åˆå¹¶ä¸å…¶ä»–åˆ†æ”¯ï¼Œæ¯”å¦‚Featureåˆ†æ”¯ release/* : å½“ä½ éœ€è¦ä¸€ä¸ªå‘å¸ƒä¸€ä¸ªæ–°Releaseçš„æ—¶å€™ï¼Œæˆ‘ä»¬åŸºäºDevelopåˆ†æ”¯åˆ›å»ºä¸€ä¸ªReleaseåˆ†æ”¯ï¼Œå®ŒæˆReleaseåï¼Œæˆ‘ä»¬åˆå¹¶åˆ°Masterå’ŒDevelopåˆ†æ”¯ master : ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„Masteråˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯æœ€è¿‘å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ï¼Œæœ€è¿‘å‘å¸ƒçš„Releaseï¼Œ è¿™ä¸ªåˆ†æ”¯åªèƒ½ä»å…¶ä»–åˆ†æ”¯åˆå¹¶ï¼Œä¸èƒ½åœ¨è¿™ä¸ªåˆ†æ”¯ç›´æ¥ä¿®æ”¹ hotfix/* å½“æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒ(master)å‘ç°æ–°çš„Bugæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªHotfix, å®ŒæˆHotfixåï¼Œæˆ‘ä»¬åˆå¹¶å›Masterå’ŒDevelopåˆ†æ”¯ï¼Œæ‰€ä»¥Hotfixçš„æ”¹åŠ¨ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªRelease feature/* : è¿™ä¸ªåˆ†æ”¯ä¸»è¦æ˜¯ç”¨æ¥å¼€å‘ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œä¸€æ—¦å¼€å‘å®Œæˆï¼Œæˆ‘ä»¬åˆå¹¶å›Developåˆ†æ”¯è¿›å…¥ä¸‹ä¸€ä¸ªRelease git Flowå¦‚ä½•å·¥ä½œ æ‰€æœ‰åœ¨Masteråˆ†æ”¯ä¸Šçš„Commitåº”è¯¥Tag git-workflow-release-cycle-1historical featureåˆ†æ”¯ åˆ†æ”¯å feature/* Featureåˆ†æ”¯åšå®Œåï¼Œå¿…é¡»åˆå¹¶å›Developåˆ†æ”¯, åˆå¹¶å®Œåˆ†æ”¯åä¸€èˆ¬ä¼šåˆ ç‚¹è¿™ä¸ªFeatureåˆ†æ”¯ git-workflow-release-cycle-2feature feature-branch releaseåˆ†æ”¯ åˆ†æ”¯å release/* Releaseåˆ†æ”¯åŸºäºDevelopåˆ†æ”¯åˆ›å»ºï¼Œæ‰“å®ŒReleaseåˆ†ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªReleaseåˆ†æ”¯ä¸Šæµ‹è¯•ï¼Œä¿®æ”¹Bugç­‰ã€‚åŒæ—¶ï¼Œå…¶å®ƒå¼€å‘äººå‘˜å¯ä»¥åŸºäºå¼€å‘æ–°çš„Feature (è®°ä½ï¼šä¸€æ—¦æ‰“äº†Releaseåˆ†æ”¯ä¹‹åä¸è¦ä»Developåˆ†æ”¯ä¸Šåˆå¹¶æ–°çš„æ”¹åŠ¨åˆ°Releaseåˆ†æ”¯) å‘å¸ƒReleaseåˆ†æ”¯æ—¶ï¼Œåˆå¹¶Releaseåˆ°Masterå’ŒDevelopï¼Œ åŒæ—¶åœ¨Masteråˆ†æ”¯ä¸Šæ‰“ä¸ªTagè®°ä½Releaseç‰ˆæœ¬å·ï¼Œç„¶åå¯ä»¥åˆ é™¤Releaseåˆ†æ”¯äº†ã€‚ git-workflow-release-cycle-3release minorç‰ˆæœ¬å‘å¸ƒ minor-release majorç‰ˆæœ¬å‘å¸ƒ major-release hotfixåˆ†æ”¯ åˆ†æ”¯å hotfix/* hotfixåˆ†æ”¯åŸºäºMasteråˆ†æ”¯åˆ›å»ºï¼Œå¼€å‘å®Œåéœ€è¦åˆå¹¶å›Masterå’ŒDevelopåˆ†æ”¯ï¼ŒåŒæ—¶åœ¨Masterä¸Šæ‰“ä¸€ä¸ªtag git-workflow-release-cycle-4maintenance hotfixä¿®å¤åˆ†æ”¯ hotfix-branch supportåˆ†æ”¯ GitFlowæ²¡æœ‰çœŸæ­£æ¶µç›–supportåˆ†æ”¯ï¼Œå¦‚æœéœ€è¦åŒæ—¶ç»´æŠ¤å¤šä¸ªä¸»è¦ç‰ˆæœ¬ï¼Œåˆ™å¿…ä¸å¯å°‘ã€‚ æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨supportåˆ†æ”¯æ¥æ”¯æŒminorç‰ˆæœ¬ã€‚ å¦‚æœæ‚¨åªæ˜¯æ”¯æŒmajorï¼Œå‘½åsupport/&lt;major&gt;.xï¼Œminorç‰ˆæœ¬ä¸ºsupport/&lt;major&gt;.&lt;minor&gt;.x å¤šç‰ˆæœ¬hotfixä¿®å¤ support-hotfix å¤šç‰ˆæœ¬çš„release å¤šç‰ˆæœ¬çš„git flowçš„releaseæµç¨‹åªæ˜¯æŠŠmasteræ›¿æ¢ä¸ºéœ€è¦ç»´æŠ¤çš„åˆ†æ”¯ã€‚ git flowå·¥å…·çš„ä½¿ç”¨ windowså’Œmacå»ºè®®ä½¿ç”¨sourcetreeå®¢æˆ·ç«¯ï¼Œå†…ç½®äº†git flowæµç¨‹ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•ï¼Œè¯·è‡ªè¡Œæœç´¢. å½“ç„¶windowsä¸‹çš„git for windows(git bashä¸­)ä¹Ÿå†…ç½®äº†gitflow-scriptsï¼Œè¯·å‚è€ƒå‡çº§ç‰ˆgit-flow-completionå®Œæˆè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ å¦‚æœä½¿ç”¨linuxï¼Œå†…ç½®äº†gitflow-scriptsï¼ˆä¸çŸ¥é“æ˜¯é‚£ä¸ªç‰ˆæœ¬ï¼‰ï¼Œå¾ˆä¸è´Ÿè´£ä»»çš„å»ºè®®ä½¿ç”¨å‡çº§ç‰ˆgitflow-avh. å…³äºä½¿ç”¨git flowå·¥å…·ä½¿ç”¨å¯ä»¥å‚è€ƒå¦‚ä½•æ­£ç¡®ä½¿ç”¨Git Flowè¿™ç¯‡åšå®¢æ–‡ç«  ä¸Šå›¾æ˜¯sourcetreeä¸­git flowçš„èœå• git flowå’Œstandard-versionæ­é…ä½¿ç”¨ è¯·åŠ¡å¿…åœ¨ç†Ÿæ‚‰git flowçš„åŸºç¡€ä¸Šé›†æˆä½¿ç”¨standard-versionï¼Œå› ä¸ºä¸¤ä¸ªå·¥å…·çš„ä½¿ç”¨ä¸å½“ï¼Œä¼šé€ æˆå†²çªã€‚ git flowæµç¨‹ä¸­standard-versionä½¿ç”¨ standard-versionçš„ä½œç”¨å°±æ˜¯ç”Ÿæˆchangelogæ›´æ–°package.jsonå’Œpackage.lock.jsonä¸­çš„versionå­—æ®µã€‚æ‰€ä»¥å®ƒåœ¨git flowä¸­ä½¿ç”¨å—git flowçš„æµç¨‹é™åˆ¶ã€‚ç›®å‰æˆ‘çš„ç»éªŒæ˜¯åªèƒ½åœ¨git flowçš„release/*å’Œhotfix/*åˆ†æ”¯ä¸­ä½¿ç”¨ã€‚å› ä¸ºåªæœ‰è¿™ä¸¤ä¸ªåˆ†æ”¯æ¶‰åŠåˆ°å‘ç‰ˆæµç¨‹ï¼Œè€Œchangelogåªæœ‰åœ¨å‘ç‰ˆæ—¶åˆ»æ‰ç”Ÿæˆã€‚ git flowå’Œstandard-versionå†²çªçš„tagåŠŸèƒ½ git flowå’Œstandard-versionåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½æœ‰è‡ªåŠ¨æ‰“tagçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸¤è€…éƒ½æ”¯æŒè·³è¿‡tagé˜¶æ®µï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªå·¥å…·å†²çªçš„åœ°æ–¹ï¼Œå»ºè®®ä»ä¸¤è€…ä¸­é€‰å–å…¶ä¸€ã€‚ å¼ºçƒˆæ¨è standard-version è‡ªåŠ¨ tagï¼Œä¸æ¨èä½¿ç”¨git flowçš„tagåŠŸèƒ½ ä½¿ç”¨git flowè‡ªåŠ¨tagå¿…é¡»ä¿è¯tagæ ¼å¼standard-versionèƒ½å¤Ÿè¯†åˆ«ï¼Œstandard-versionä½¿ç”¨git-semver-tagsè§£ætagï¼Œå‚è€ƒgit-semver-tagsæ”¯æŒçš„æ ¼å¼ å¦‚æœstandard-versionè¯†åˆ«tagå‡ºç°é—æ¼ï¼Œä¼šé€ æˆç”Ÿæˆçš„changelogå†…å®¹é‡å¤ã€‚standard-versioné»˜è®¤çš„tagå‰ç¼€æ˜¯vï¼Œå¯ä»¥è‡ªå®šä¹‰ã€‚ standard-versionè·³è¿‡tagæ–¹æ³• 12345678// æ–¹æ³•ä¸€ï¼š package.jsonæ·»åŠ é…ç½®&#123; \"standard-version\": &#123; \"skip\": &#123; \"tag\": true &#125; &#125;&#125; 12# æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œä¸­æ·»åŠ å‚æ•°standard-version -r minor --skip.tag git flowè·³è¿‡tagçš„æ–¹æ³• 12# è·³è¿‡tagï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰commit message(ä¸ºäº†è®©commit messageç¬¦åˆçº¦å®šæäº¤çš„æ ¼å¼è§„èŒƒ)git flow release finish v0.2.0 -n -m \"chore(release): 0.2.0\" standard-versionè¿è¡Œæ—¶æœº release åˆ†æ”¯æµç¨‹ä¸­è¿è¡Œ git flowåœ¨release finishé˜¶æ®µæ˜¯æŠŠrelease/*åˆ†æ”¯åˆå¹¶åˆ°masterå’Œdevelopï¼Œæ‰€ä»¥standard-versionå°±æ˜¯è¦åœ¨finishç»“æŸä¹‹å‰è¿è¡Œç”Ÿæˆchangelog. 123456789101112131415161718# 1. æ¨¡æ‹Ÿä¸€ä¸ªreleaseæµç¨‹git flow release start v0.2.0# 2. åšä¸€äº›ä¿®æ”¹æˆ–è€…commitgit commit -m 'fix(src): ä¿®å¤é—®é¢˜'# 3. ï¼ˆå¯é€‰ï¼‰å¦‚æœéœ€è¦åœ¨release/* åˆ†æ”¯ç”Ÿæˆbetaæµ‹è¯•é˜¶æ®µçš„changelognpx standard-version -p beta# 4. release finish ä¹‹å‰# å¼ºçƒˆæ¨è standard-version è‡ªåŠ¨tagï¼Œä¸æ¨èä½¿ç”¨git flowçš„tagåŠŸèƒ½npx standard-version -r v0.2.0# 5. æ­£å¼å‘å¸ƒreleaseï¼Œè‡ªå®šä¹‰commit messageä¸ºäº†ç¬¦åˆçº¦å®šå¼æäº¤çš„æ ¼å¼git flow release finish v0.2.0 -m \"chore(release): 0.2.0\"# å¦‚æœä½ ä½¿ç”¨äº†standard-versionçš„tagåŠŸèƒ½ï¼Œgit flowåº”è¯¥è·³è¿‡tag# git flow release finish v0.2.0 -n -m \"chore(release): 0.2.0\" hotfixåˆ†æ”¯æµç¨‹ä¸­è¿è¡Œ hotfix finishé˜¶æ®µå’Œreleaseéå¸¸åƒæ˜¯æŠŠhotfix/*åˆ†æ”¯åˆå¹¶åˆ°masterå’Œdevelopï¼Œä½†æ˜¯æ˜¯å¦åœ¨hotfixåˆ†æ”¯ç”Ÿæˆchangelogè¿˜éœ€è¦è‡ªè¡Œå†³å®šï¼ˆæœ‰å†²çªçš„é£é™©ï¼‰ 1234567891011121314151617# 1. æ¨¡æ‹Ÿä¸€ä¸ªhotfixæµç¨‹git flow hotfix start v0.2.1# 2. åšä¸€äº›ä¿®æ”¹æˆ–è€…commitgit commit -m 'fix(src): ä¿®å¤é—®é¢˜'# 3. hotfix finish ä¹‹å‰# å¼ºçƒˆæ¨è standard-version è‡ªåŠ¨tagï¼Œä¸æ¨èä½¿ç”¨git flowçš„tagåŠŸèƒ½npx standard-version -r v0.2.1 # patchç‰ˆæœ¬å·å¯ä»¥ä½¿ç”¨ patch æ›¿ä»£# npx standard-version -r patch# æ­£å¼å‘å¸ƒhotfixï¼Œè‡ªå®šä¹‰commit messageä¸ºäº†ç¬¦åˆçº¦å®šå¼æäº¤çš„æ ¼å¼git flow hotfix finish v0.2.1 -m \"chore(release): 0.2.1\"# å¦‚æœä½ ä½¿ç”¨äº†standard-versionçš„tagåŠŸèƒ½ï¼Œgit flowåº”è¯¥è·³è¿‡tag# git flow hotfix finish v0.2.0 -n -m \"chore(release): 0.2.1\" standard-versionåœ¨git flowä¸åŒæµç¨‹é˜¶æ®µæ³¨æ„çš„é—®é¢˜ standard-versionåœ¨releaseæµç¨‹ä¸­æ³¨æ„äº‹é¡¹ï¼š releaseä¸­ç”Ÿæˆbetaç‰ˆæœ¬çš„changelog å‰ç½®æ¡ä»¶ï¼š release åœ¨hotfixä¹‹å‰åˆ›å»º hotfixä¸­ç”Ÿæˆchangelog releaseä¸­ç”Ÿæˆbetaç‰ˆçš„changelog releaseåˆ†æ”¯çš„åˆ›å»ºæ—¶æœºå¾ˆé‡è¦ï¼Œgit flowæµç¨‹ä¸­releaseåœ¨hotfixä¹‹ååˆ›å»º å¦‚æœåˆ›å»ºreleaseåˆ†æ”¯ä¹‹åï¼Œå‡ºç°å¹¶ä¿®å¤hotfixå¹¶ä¸”åœ¨hotfixç”Ÿæˆchangelogï¼Œhotfix finishä¹‹årelease finishå°±ä¼šé€ æˆreleaseåˆå¹¶åˆ°masterå’Œdevelopæ—¶å‡ºç°å†²çª. è§£å†³æ–¹æ¡ˆï¼š release åˆ†æ”¯åŒ…å«hotfixå†…å®¹ï¼ˆrelease åˆ†æ”¯åœ¨hotfixä¹‹ååˆ›å»ºï¼Œæˆ–è€…hotfixæå–æˆpatchï¼Œåœ¨releaseåˆ†æ”¯ä¸Šapplyï¼‰ï¼ˆgit flowæµç¨‹ä¸­hotfixæ˜¯åŒ…å«åœ¨next releaseä¸­çš„ï¼‰ å¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•è¯·å‘Šè¯‰æˆ‘ ~): standard-versionåœ¨hotfixæµç¨‹ä¸­æ³¨æ„äº‹é¡¹ï¼š hotfixä¸­ç”Ÿæˆchangelog releaseåˆ†æ”¯åœ¨hotfix finish ä¹‹å‰å»ºç«‹ï¼Œä¼šå‡ºç°åœ¨releaseåˆ†æ”¯ä¸€æ ·çš„é—®é¢˜ hotfixåˆ†æ”¯ä¸ç”Ÿæˆchangelog releaseåˆ†æ”¯åœ¨hotfix finish ä¹‹å‰å»ºç«‹ï¼Œä¼šé€ æˆhotfixä¿®å¤çš„çš„æ—¥å¿—æ— æ³•å‡ºç°åœ¨changelogä¸­ è§£å†³æ–¹æ³•ï¼š release åˆ†æ”¯åŒ…å«hotfixå†…å®¹ï¼ˆrelease åˆ†æ”¯åœ¨hotfixä¹‹ååˆ›å»ºï¼Œæˆ–è€…hotfixæå–æˆpatchï¼Œåœ¨releaseåˆ†æ”¯ä¸Šapplyï¼‰ standard-versionä¸å¸¦å‚æ•°ä½¿ç”¨ 12# å¦‚æœç›´æ¥åœ¨åˆ†æ”¯ä¸Šï¼Œä½¿ç”¨standard-version å¦‚æœä¸æŒ‡å®šå‚æ•°ç›´æ¥ä½¿ç”¨standard-versionå‘½ä»¤ï¼Œstandard-versionä¼šè‡ªåŠ¨åˆ†æcommit messageç±»å‹ï¼Œå¦‚æœåŒ…å«patchå°±ç´¯åŠ patchï¼Œæœ‰featå°±è‡ªåŠ¨ç´¯åŠ minorï¼Œæœ‰break changeå°±è‡ªåŠ¨ç”Ÿæˆ majorç‰ˆæœ¬å·ï¼Œé£é™©è¾ƒå¤§ï¼Œå»ºè®®æŒ‡å®šå‚æ•°ã€‚ å»ºè®® å·¥å…·å’Œæµç¨‹æ¨¡å‹éƒ½æ˜¯æ ¹æ®ä½¿ç”¨åœºæ™¯ï¼Œçµæ´»å¤šå˜çš„ï¼Œæ‰€ä»¥ä¸è¦å±€é™äºå·¥å…·å’Œæµç¨‹æ¨¡å‹ï¼Œå®è·µå‡ºé€‚åˆè‡ªå·±çš„æµç¨‹æ¨¡å‹æ‰æ˜¯æœ€é‡è¦çš„ã€‚ å‚è€ƒa-successful-git-branching-model åŸç‰ˆgit flow scriptså¼ƒå‘çŠ¶æ€ä¸å»ºè®®ä½¿ç”¨ åŸç‰ˆgit-flow-completion å‡çº§ç‰ˆgitflow-avh å‡çº§ç‰ˆgit-flow-completion çº¦å®šå¼æäº¤è§„èŒƒ git-flow å¤‡å¿˜æ¸…å• git-flow-standard-version git-flow-conventional-commits å¦‚ä½•æ­£ç¡®ä½¿ç”¨Git Flow git rebaseä¿æŒä»£ç æ ‘æ•´æ´ é›†ä¸­å¼å·¥ä½œæµ åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµ Gitflowå·¥ä½œæµ Forkingå·¥ä½œæµ comparing-workflowsgitflow-examples","tags":[{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"},{"name":"gitflow","slug":"gitflow","permalink":"https://betgar.github.io/tags/gitflow/"},{"name":"standard-version","slug":"standard-version","permalink":"https://betgar.github.io/tags/standard-version/"}]},{"title":"å‰ç«¯å°çº ç»“--çº¦å®šå¼æäº¤å’Œè‡ªåŠ¨ç”Ÿæˆchangelog","date":"2019-05-20T00:00:00.000Z","path":"2019/05/20/frontend-little-tangle-conventional-commit-and-generate-changelog/","text":"å‰ç«¯å°çº ç»“â€“çº¦å®šå¼æäº¤å’Œè‡ªåŠ¨ç”Ÿæˆchangelogçº¦å®šå¼æäº¤ çº¦å®šå¼æäº¤ï¼šæ¯æ¬¡ä½¿ç”¨git commit çš„æ—¶å€™éƒ½éœ€è¦å†™commit message,å¦‚æœmessage styleæ˜¯æŒ‰ç…§å›ºå®šçš„æ¨¡ç‰ˆæ ¼å¼ä¹¦å†™ï¼Œå¯¹äºåæœŸçš„ç»´æŠ¤å’Œç¼–å†™changelogéƒ½æœ‰å·¨å¤§çš„å¥½å¤„ã€‚è€Œä¸”ç°åœ¨çš„å¾ˆå¤šè‡ªåŠ¨ç”Ÿæˆchangelogçš„å·¥å…·ï¼Œéƒ½æ˜¯å»ºç«‹åœ¨çº¦å®šå¼æäº¤çš„åŸºç¡€ä¹‹ä¸Šã€‚ çº¦å®šå¼æäº¤æ ¡éªŒé…ç½® çº¦å®šå¼æäº¤ä¸éœ€è¦ä»»ä½•çš„é…ç½®ï¼Œåªéœ€è¦ä¸¥æ ¼éµå®ˆå…¶è§„èŒƒå°±å¯ä»¥äº†ã€‚ä¸ºäº†ä¿è¯æ¯æ¬¡æäº¤çš„commit messageéƒ½æ˜¯éµå®ˆconventional commit specæ‰€ä»¥æ·»åŠ äº†æ ¡éªŒé…ç½®. çº¦å®šå¼æäº¤å·¥å…· çº¦å®šå¼æäº¤ä½¿ç”¨äº¤äº’å¼æäº¤å·¥å…·ï¼ˆä¾‹å¦‚ï¼š commitizenï¼‰ï¼Œä½¿ç”¨å·¥å…·èƒ½å¤Ÿä¿è¯çº¦å®šå¼æäº¤ä¸ªæ ¼å¼æ˜¯æ»¡è¶³è§„èŒƒçš„ã€‚ æ¨èä½¿ç”¨vs code æ’ä»¶commitizen å‘½ä»¤è¡Œæ–¹å¼çš„commitizené…ç½®(vscode commitizenå’Œå‘½ä»¤è¡Œæ–¹å¼ä»»é€‰å…¶ä¸€å³å¯) 1npm install --save-dev commitizen 123456// package.jsoné…ç½®&#123; scripts: &#123; \"commit\": \"git-cz\" &#125;&#125; 12# ä½¿ç”¨npm run commit # è¿›å…¥äº¤äº’å¼, å¦‚æœcommit messageåœ¨consoleä¸­æ¢è¡Œï¼Œè¯·ä½¿ç”¨'å¼€å§‹ commitizençš„é€‚é…å™¨cz-conventional-changelog commitizenåªæ˜¯ä¸€ä¸ªæäº¤çš„å·¥å…·ï¼Œåªæœ‰æ·»åŠ äº†çº¦å®šæ ¼å¼çš„é€‚é…å™¨æ‰èƒ½æŒ‰ç…§å›ºå®šæ ¼å¼è¿›è¡Œäº¤äº’å¼æäº¤ï¼Œå¦åˆ™å°±å’Œæ™®é€šçš„git commitä¸€æ ·äº†ã€‚ï¼ˆè¿˜æœ‰å…¶ä»–é€‚é…å™¨å¯é€‰ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼‰ä¸åŒçš„é€‚é…å™¨ï¼Œæä¾›çš„çº¦å®šæ ‡å‡†æœ‰å·®å¼‚ã€‚ 12# å»ºè®®å®‰è£…npxè¿™ä¸ªç¥å™¨ npm i npx -gnpx commitizen init cz-conventional-changelog --save-dev --save-exact commitizenå·¥å…·ä¼šåœ¨package.jsonä¸­è‡ªåŠ¨æ·»åŠ é…ç½®ï¼š 12345678&#123; \"config\": &#123; \"commitizen\": &#123; // \"path\": \"cz-conventional-changelog\" // å…¨å±€å®‰è£…æ¨¡å¼ \"path\": \"./node_modules/cz-conventional-changelog\" &#125; &#125;&#125; çº¦å®šå¼æäº¤æ ¼å¼æ ¡éªŒ ä¸ºäº†é˜²æ­¢å‡ºç°ä¸æ»¡è¶³æ ¼å¼è¦æ±‚çš„commit messageå‡ºç°ï¼Œè¿˜æ˜¯éœ€è¦æ·»åŠ ä¸Šå¿…è¦çš„æ ¼å¼æ ¡éªŒ. commitlintæ ¡éªŒçº¦å®šå¼æäº¤æ ¼å¼ commitlintæ˜¯åœ¨commit messageä¹‹å‰è¿›è¡Œæ ¡éªŒæ ¼å¼ï¼Œæ ¼å¼ä¸å¯¹ä¸è¿›è¡Œæäº¤ã€‚ 12# å®‰è£…npm install --save-dev @commitlint/config-conventional @commitlint/cli 12# æ·»åŠ é…ç½®æ–‡ä»¶commitlint.config.js,å·¥ç¨‹æ ¹ç›®å½•echo \"module.exports = &#123;extends: ['@commitlint/config-conventional']&#125;\" &gt; commitlint.config.js huskyé…ç½®git hooks huskyå®˜ç½‘ huskyé…ç½® æœ‰äº†git hooksæˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šæäº¤ä¹‹å‰çš„éªŒè¯ã€‚ 12# å®‰è£…npm i husky --save-dev 123456789// package.json é…ç½®&#123;\"husky\": &#123; \"hooks\": &#123; \"commit-msg\": \"commitlint -E HUSKY_GIT_PARAMS\", // é…åˆcommitlintä½¿ç”¨ // \"pre-commit\": \"lint-staged\" // é…ç½®lint-staged &#125; &#125;&#125; lint-stagedé…ç½®(å¯é€‰) lint-staged list-stagedä¸»è¦é…åˆlinterç”¨æ¥æ ¼å¼åŒ–ä»£ç ï¼ˆç»Ÿä¸€çš„ä»£ç é£æ ¼ï¼‰ï¼Œè¿™éƒ¨æ˜¯å¯é€‰çš„ã€‚ lint-stagedæ˜¯ç”¨æ¥è®©æ ¼å¼åŒ–å·¥å…·åªlintéœ€è¦æäº¤çš„æ–‡ä»¶ï¼Œå…¶å®ƒæ–‡ä»¶å¿½ç•¥ï¼Œè¿™æ ·èƒ½å¤Ÿæé«˜æ•ˆç‡ã€‚ 1npm i lint-staged --save-dev 123456789// package.json é…ç½®&#123; \"lint-staged\": &#123; \"src/**/*.&#123;js,ts,css,vue,tsx,jsx&#125;\": [ \"vue-cli-service lint\", // npm run lint \"git add\" ] &#125;&#125; è‡ªåŠ¨ç”Ÿæˆchangelog è‡ªåŠ¨ç”Ÿæˆchangelogæ˜¯å»ºç«‹åœ¨çº¦å®šå¼æäº¤çš„åŸºç¡€ä¸Šã€‚ è‡ªåŠ¨ç”Ÿæˆchangelogæœ‰ä¸¤ç§æ–¹å¼ï¼š conventional-changelog-cliç”Ÿæˆchangelog standard-versionç”Ÿæˆchangelog standard-versionå¸®ä½ åšäº†è‡ªåŠ¨æ‰“tagï¼Œè‡ªåŠ¨ç”Ÿæˆchangelogç­‰è¿‡ç¨‹. conventional-changelog-clié…ç½® åœ¨çº¦å®šå¼æäº¤çš„åŸºç¡€ä¸Šæ¥è‡ªåŠ¨ç”Ÿæˆchangelogï¼Œå·¥å…·ç±»åº“å¼€å‘ï¼Œæ¨èç›´æ¥ä½¿ç”¨standard-versionï¼Œé«˜åº¦é›†æˆäº†æ‰€æœ‰ä¸œè¥¿ã€‚ 1npm install conventional-changelog-cli --save-dev 12# åŸºæœ¬ä½¿ç”¨ï¼Œå…¶å®ƒå‚æ•°å‚è€ƒå®˜æ–¹ç½‘ç«™conventional-changelog -p angular -i CHANGELOG.md -s -r 0 123456// package.jsoné…ç½®&#123; scripts: &#123; \"changelog\": \"conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md\", &#125;&#125; 12# ä½¿ç”¨npm run changelog standard-versioné…ç½®12# å®‰è£…npm install standard-version --save-dev 1234567891011121314// package.json é…ç½®&#123; \"scripts\": &#123; \"release\": \"standard-version\" &#125;, // standard-version å¥½å¤šé…ç½®çœ‹å®˜æ–¹æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰ \"standard-version\": &#123; // å¯ä»¥é…ç½®ä¸éœ€è¦çš„ç¯èŠ‚ \"skip\": &#123; // bump, changelog, commit, tag \"tag\": true &#125; &#125;&#125; 123456789101112# é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨ï¼Œè‡ªè¡Œå®‰è£…npx æ¨¡å—# npm i npx -g npx standard-version --release-as majornpx standard-version --release-as minornpx standard-version --release-as patchnpx standard-version --prerelease alphanpx standard-version --prerelease betanpx standard-version --prerelease rcnpm run release -- -r minornpm run release -- -p beta package.jsonä¸­çš„scriptså‘½ä»¤ç»„ç»‡12345678910111213&#123; scripts: &#123; \"commit\": \"git-cz\", \"release\": \"standard-version\", \"changelog\": \"conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md\", \"release:major\": \"standard-version -r major -n, \"release:minor\": \"standard-version -r minor -n, \"release:patch\": \"standard-version -r patch -n\", \"prerelease:alpha\": \"standard-version -p alpha -n, \"prerelease:beta\": \"standard-version -p beta -n, \"prerelease:rc\": \"standard-version -p rc -n\" &#125;&#125; å‚è€ƒçº¦å®šå¼æäº¤è§„èŒƒ git commit ã€CHANGELOG å’Œç‰ˆæœ¬å‘å¸ƒçš„æ ‡å‡†è‡ªåŠ¨åŒ– Commit message å’Œ Change log ç¼–å†™æŒ‡å—","tags":[{"name":"git","slug":"git","permalink":"https://betgar.github.io/tags/git/"},{"name":"conventionalcommit","slug":"conventionalcommit","permalink":"https://betgar.github.io/tags/conventionalcommit/"},{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"}]},{"title":"shellä¸Šæ˜¾ç¤ºå½“å‰gitåˆ†æ”¯","date":"2019-04-28T16:00:00.000Z","path":"2019/04/29/terminal-prompt-display-what-branch-you-are-currently-on/","text":"shellä¸Šæ˜¾ç¤ºå½“å‰gitåˆ†æ”¯ åœ¨å½“å‰ç»ˆç«¯ä¸Šæ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„åˆ†æ”¯ï¼Œèƒ½å¤Ÿæä¾›æå¤§çš„ä¾¿åˆ©ã€‚ ä¿®æ”¹bashçš„é…ç½® ~/.bash_profile æˆ–è€…~/.bashrc åŸç‰ˆ123456789function git-branch-name &#123; git symbolic-ref HEAD 2&gt;/dev/null | cut -d\"/\" -f 3&#125;function git-branch-prompt &#123; local branch=`git-branch-name` if [ $branch ]; then printf \" [%s]\" $branch; fi&#125;PS1=\"\\u@\\h \\[\\033[0;36m\\]\\W\\[\\033[0m\\]\\[\\033[0;32m\\]\\$(git-branch-prompt)\\[\\033[0m\\] \\$ \" ä¿®æ”¹ç‰ˆ123456789# terminal-prompt-display-what-branch-you-are-currently-onfunction git-branch-name &#123; git symbolic-ref --short -q HEAD 2&gt;/dev/null&#125;function git-branch-prompt &#123; local branch=`git-branch-name` if [ $branch ]; then printf \" [%s]\" $branch; fi&#125;PS1=\"\\u@\\h \\[\\033[0;36m\\]\\W\\[\\033[0m\\]\\[\\033[0;32m\\]\\$(git-branch-prompt)\\[\\033[0m\\] \\$ \" æŠŠä¸Šé¢çš„è„šæ­¥æ·»åŠ åˆ°shellé…ç½®æ–‡ä»¶ä¸­ã€‚ 123# åŠ è½½ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼Œä½¿ä¹‹ç”Ÿæ•ˆsource ~/.bash_profile # source ~/.bashrc å‚è€ƒgit-setting-up-a-remote-repository-and-doing-an-initial-push è®© Shell å‘½ä»¤æç¤ºç¬¦æ˜¾ç¤º Git åˆ†æ”¯åç§°","tags":[{"name":"git","slug":"git","permalink":"https://betgar.github.io/tags/git/"}]},{"title":"axioså®ç°æ–‡ä»¶ä¸‹è½½åŠŸèƒ½","date":"2019-04-14T10:30:00.000Z","path":"2019/04/14/download-binary-file-use-axios/","text":"axioså®ç°æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ åœ¨å¼€å‘ä¸­é‡åˆ°äº†éœ€è¦å®ç°æ–‡ä»¶ä¸‹è½½çš„åŠŸèƒ½ï¼Œèµ·åˆä»¥ä¸ºåªç”¨&lt;a&gt;æ ‡ç­¾å°±èƒ½æå®šï¼Œ&lt;a&gt;æ ‡ç­¾ç¡®å®èƒ½å¤Ÿæå®šå¸¸è§çš„åœºæ™¯ã€‚ä½†æ˜¯åƒå¯¼å‡ºæˆ–è€…åœ¨headeré‡Œé¢æ·»åŠ äº†ç‰¹æ®Šå­—æ®µçš„æ—¶å€™ï¼Œä½¿ç”¨&lt;a&gt;æ ‡ç­¾å°±æä¸å®šäº†ï¼Œåˆä¸æƒ³å»ä½¿ç”¨åŸç”ŸXMLHttpRequestï¼Œå› ä¸ºåˆä¸€å †çš„å…¼å®¹æ€§éœ€æ±‚ï¼ˆæŠ€æœ¯èƒ½åŠ›ä¸å¤ŸÎµ=Îµ=Îµ=â”(ã‚œãƒ­ã‚œ;)â”›ï¼Œæœ‰ç°æˆçš„å…¼å®¹æ–¹æ¡ˆä¸ºå•¥è¦è‡ªå·±é€ è½®å­å‘¢ï¼Œè¯´ä¸å®šè¿˜çˆ†èƒ&gt;é€ƒ666ï¼‰ï¼Œæ‰€ä»¥èŒç”ŸåŸºäºAxioså°è£…ã€‚ Ajaxæ— æ³•ä¸‹è½½æ–‡ä»¶çš„åŸå› æµè§ˆå™¨çš„GET(frameã€a)å’ŒPOST(form)è¯·æ±‚å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š responseä¼šäº¤ç”±æµè§ˆå™¨å¤„ç† responseå†…å®¹å¯ä»¥ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ã€å­—ç¬¦ä¸²ç­‰ Ajaxè¯·æ±‚å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š responseä¼šäº¤ç”±Javascriptå¤„ç† responseå†…å®¹ä»…å¯ä»¥ä¸ºå­—ç¬¦ä¸² Ajaxæœ¬èº«è®¾è®¡çš„ç›®æ ‡å°±æ˜¯ç”¨æ¥è·å–æ–‡æœ¬æ•°æ®çš„ï¼Œè€Œä¸æ˜¯ç”¨æ¥æäºŒè¿›åˆ¶çš„ã€‚ XMLHttpRequest 2.0æ–°å¢çš„æ•°æ®ç±»å‹Blob çœ‹å¼ è€å¸ˆçš„æ–‡ç«  ç†è§£DOMStringã€Documentã€FormDataã€Blobã€Fileã€ArrayBufferæ•°æ®ç±»å‹ æœ‰äº†Blobç±»å‹ä¹‹åï¼ŒJavaScriptå¤„ç†äºŒè¿›åˆ¶è¿›ä¸€æ­¥å¢å¼ºï¼Œå¯ä»¥è¯´ä»¥åæƒ³æ€æ ·å°±æ€æ ·ï¼ˆåºŸè¯ï¼‰ã€‚ æ–‡ä»¶ä¸‹è½½å®ç°response headerå‰ææ¡ä»¶ æœåŠ¡ç«¯è¿”å›çš„å¤´éƒ¨éœ€è¦è®¾ç½® Content-Disposition: â€œattachment; filename=xxxx.docx;â€ &lt;a&gt;æ ‡ç­¾çš„ç›´æ¥ä¸‹è½½12345678910111213141516171819202122232425262728293031323334import qs from 'qs';/** * downloadByUrl * @param config - é…ç½®å‚æ•° * @param config.url - åœ°å€ * @param config.params - querystringå‚æ•°. * @param filename æ–‡ä»¶åç§°,åŒ…æ‹¬æ‰©å±•åéƒ¨åˆ†(ä¸ä¸€å®šç”Ÿæ•ˆ) * * @description * åŸç†æ˜¯ä½¿ç”¨&lt;a&gt;çš„hrefå’Œdownloadå±æ€§ï¼Œæ‰€ä»¥filenameä¸ä¸€å®šä¼šç”Ÿæ•ˆ, æµè§ˆå™¨æœºåˆ¶é—®é¢˜. * * @see https://zhuanlan.zhihu.com/p/58888918 * @see https://github.com/kennethjiang/js-file-download */export function downloadByUrl(config: &#123; url: string; params: any;&#125;, filename = ''): void &#123; var tempLink = document.createElement('a'); tempLink.style.display = 'none'; tempLink.href = config.url + qs.stringify(config.params, &#123; addQueryPrefix: true &#125;); tempLink.setAttribute('download', filename); if (typeof tempLink.download === 'undefined') &#123; tempLink.setAttribute('target', '_blank'); &#125; document.body.appendChild(tempLink); tempLink.click(); document.body.removeChild(tempLink);&#125; ä¸»è¦æ˜¯ä½¿ç”¨äº†js-file-downloadçš„ä»£ç ï¼Œè¿›è¡Œäº†ç®€å•çš„å°è£…ï¼Œè€Œä¸”å»é™¤äº†å¯¹Blobçš„ä¾èµ–ï¼Œä¸»è¦ä¸ºäº†å…¼å®¹ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ã€‚åŒæ—¶ä½¿ç”¨äº†qså¯¹querystringå‚æ•°è¿›è¡Œäº†ç®€å•çš„å¤„ç†ã€‚ åŸºäºaxiosçš„å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081import axios, &#123; AxiosResponse, AxiosRequestConfig &#125; from 'axios';import fileDownload from 'js-file-download';import logger from 'js-logger';/** * æå–æ–‡ä»¶å. * @param response axiosçš„response * @description ä»reponse headerçš„content-dispositionä¸­æå–æ–‡ä»¶å. */const extractFilenameFromResponseHeader = (response: AxiosResponse): string =&gt; &#123; // content-disposition: \"attachment; filename=xxxx.docx;\" const contentDisposition = response.headers['content-disposition']; const patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*'); const result = patt.exec(contentDisposition) as RegExpExecArray; let filename = ''; if (result) &#123; filename = result.length &gt; 0 ? result[1] : ''; &#125; // è§£ç ä¹‹å‰å°è¯•å»é™¤ç©ºæ ¼å’ŒåŒå¼•å· // content-disposition: \"attachment; filename=\\\"xxxx.docx\\\";\" return decodeURIComponent(filename.trim().replace(new RegExp('\"', 'g'), ''));&#125;;const axiosInstance = axios.create(&#123;/* å¯ä»¥ä¼ é€’å…¬å…±é»˜è®¤çš„axiosé…ç½®ï¼Œä½†æ˜¯æ³¨æ„reponse interceptorä¸­é»˜è®¤æŠŠreponse.dataä½œä¸ºJSONè§£æçš„æƒ…å†µ*/&#125;);// https://www.zhihu.com/question/263323250// https://github.com/axios/axios/issues/815#issuecomment-340972365const downloadByAxios = async function ( config: AxiosRequestConfig, filename = ''): Promise&lt;any | AxiosResponse&lt;any&gt;&gt; &#123; let response = await axiosInstance(&#123; ...config, responseType: 'blob', // æŒ‡å®šç±»å‹ &#125;); let resBlob = response.data; // &lt;--- store the blob if it is let respData = null; // å¦‚æœç¡®å®šæ¥å£response.dataæ˜¯äºŒè¿›åˆ¶ï¼Œæ‰€ä»¥è¯·æ±‚å¤±è´¥æ—¶æ˜¯JSON. // è¿™é‡Œåªå¯¹response.dataåšJSONçš„å°è¯•è§£æ try &#123; let respText = await new Promise((resolve, reject) =&gt; &#123; let reader = new FileReader(); reader.addEventListener('abort', reject); reader.addEventListener('error', reject); reader.addEventListener('loadend', () =&gt; &#123; resolve(reader.result as string); &#125;); reader.readAsText(resBlob); &#125;); respData = JSON.parse(respText as string); // &lt;--- try to parse as json evantually &#125; catch (err) &#123; // ignore &#125; // å¦‚æœresponse.dataèƒ½å¤Ÿç¡®å®šæ˜¯äºŒè¿›åˆ¶ï¼Œåˆ™respData = nullè¯´æ˜è¯·æ±‚æˆåŠŸ // å¦åˆ™ respData !== nullè¯´æ˜è¯·æ±‚å¤±è´¥ if (respData as ResponseData) &#123; logger.error(respData); // æ–¹ä¾¿è°ƒç”¨è€…æœ‰è¿›ä¸€æ­¥çš„ then().catch()å¤„ç† return Promise.reject(&#123; ...respData, &#125;); &#125; else &#123; // è§¦å‘æµè§ˆå™¨ä¸‹è½½ // å¦‚æœæ²¡æœ‰ä¼ é€’filenameå°è¯•ä»Content-Dispositionæå– fileDownload(resBlob, filename || extractFilenameFromResponseHeader( response )); // æ–¹ä¾¿è°ƒç”¨è€…æœ‰è¿›ä¸€æ­¥çš„ then().catch()å¤„ç† return Promise.resolve(&#123; ...response, &#125;); &#125;&#125;; ä»£ç å¤§éƒ¨åˆ†éƒ½æ˜¯å‚è€ƒè¿™ä¸ªissueå®ç°çš„ï¼Œåªæœ‰å°‘éƒ¨åˆ†çš„ä¸ªäººä»£ç ã€‚ åŸºäºaxioså®ç°çš„åŠŸèƒ½ï¼š å¯ä»¥ä½¿ç”¨axiosçš„æ‰€æœ‰å‚æ•°ï¼Œä¸ç®¡è¯·æ±‚æ˜¯GETæˆ–è€…POST è§£å†³äº†åœ¨headerä¸­æ·»åŠ é¢å¤–çš„å‚æ•°çš„éœ€æ±‚ å¯ä»¥æŒ‡å®šfilenameï¼Œå¦‚æœæœåŠ¡ç«¯æ²¡æœ‰è®¾ç½®content-dispositionçš„æƒ…å†µ è¿”å›Promiseæ–¹ä¾¿è°ƒç”¨è€…è¿›ä¸€æ­¥å¤„ç†è¯·æ±‚ ç¼ºç‚¹ï¼š åªèƒ½ä½¿ç”¨ç‹¬ç«‹çš„axioså®ä¾‹ï¼Œä¸èƒ½å…¬ç”¨ä¸€ä¸ªaxios æœ¬æ¥æƒ³æŠŠä¸‹è½½åŠŸèƒ½ä½¿ç”¨axios interceptoræ‹¦æˆªå™¨å®ç°ï¼Œä½†æ˜¯è¿”å›çš„response.dataæ˜¯BlobäºŒè¿›åˆ¶ï¼Œä½†æ˜¯å…¶å®ƒçš„response interceptoré»˜è®¤å‰æéƒ½æ˜¯æŠŠresponse.dataå½“ä½œJSONå¤„ç†ï¼Œå¯¼è‡´å…¨éƒ¨å‡ºç°å¼‚å¸¸ï¼Œæ‰€ä»¥æŠŠä¸‹è½½åŠŸèƒ½ç‹¬ç«‹å‡ºæ¥ï¼Œæ›´æ–¹ä¾¿ç»´æŠ¤ã€‚ ä½¿ç”¨ç‹¬ç«‹çš„axioså®ä¾‹ï¼Œæ‰€ä»¥é¡¹ç›®ä¸­çš„axiosé»˜è®¤é…ç½®éœ€è¦é‡æ–°é…ç½®ä¸€é å‚è€ƒé“¾æ¥Content-Disposition axios.jså®ç°ä¸‹è½½åŠŸèƒ½ axios.js #815å®ç° StreamSaver FileSaver js-file-downloadç†è§£DOMStringã€Documentã€FormDataã€Blobã€Fileã€ArrayBufferæ•°æ®ç±»å‹","tags":[{"name":"axios","slug":"axios","permalink":"https://betgar.github.io/tags/axios/"}]},{"title":"windows 10ä½¿ç”¨cygwinå®‰è£…opensshæœåŠ¡ç«¯","date":"2019-04-05T01:00:00.000Z","path":"2019/04/05/install-openssh-with-cygwin-on-windows-10/","text":"windows 10ä½¿ç”¨cygwinå®‰è£…opensshæœåŠ¡ç«¯ install-openssh-with-cygwin-on-windows-10 æœ¬æ¥windows10ä¸Šå·²ç»æœ‰å†…ç½®çš„opensshï¼Œæˆ‘å¯èƒ½çˆ±æŠ˜è…¾ä¸æ„¿æ„ä½¿ç”¨å†…ç½®çš„ï¼Œæ‰€ä»¥ä½¿ç”¨cygwiné‡æ–°å®‰è£…äº†ä¸€ä¸ªsshæœåŠ¡. å®‰è£…æ­¥éª¤æ€»ç»“ å®‰è£…cygwin ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œcygwinå®‰è£…opensshå’Œopenssl ssh-host-configå‘½ä»¤å¼€å§‹é…ç½®ssh windows10å†…ç½®çš„sshdå’Œssh-host-configé»˜è®¤çš„æœåŠ¡åå†²çªè§£å†³ ä¸€ç³»åˆ—ssh-host-configé…ç½®ï¼ŒåŒ…æ‹¬daemonåç§° ntsecå’Œåˆ›å»ºé»˜è®¤çš„cyg_serveræ¥è¿è¡ŒsshdæœåŠ¡ ssh-user-configç”Ÿæˆç”¨æˆ·çš„å¯†é’¥ï¼ˆéå¿…é¡»ï¼Œå¯ä»¥ä½¿ç”¨å¯†ç ç™»é™†ï¼Œç”¨æˆ·å°±æ˜¯windowsçš„æ­£å¸¸ç”¨æˆ·ï¼‰ å¯åŠ¨æœåŠ¡net start cygsshd ä½¿ç”¨puttyç™»é™†localhostæµ‹è¯• å¸è½½ssh é‡æ–°å®‰è£…ssh æ³¨æ„ï¼šcygwinä½¿ç”¨çš„æ˜¯windowsçš„ç”¨æˆ·å’Œæƒé™ï¼Œæ‰€ä»¥é»˜è®¤/etc/ä¸‹æ˜¯æ²¡ç”¨passwdå’Œgroupç­‰æ–‡ä»¶çš„ï¼Œä¸è¦å¤ªæƒŠè®¶ã€‚ å¼€å§‹æˆ‘ä¹Ÿæ²¡ç”¨ææ˜ç™½ï¼Œè€Œä¸”ssh-host-configä¸­åˆ›å»ºä¸€ä¸ªcyg_serverç”¨æˆ·æ˜¯çœŸå®çš„windowsè´¦æˆ·ï¼Œä½†æ˜¯éœ€è¦ç»„ç­–ç•¥æ‰èƒ½å¤Ÿçœ‹åˆ°ï¼Œè¿™ä¸ªç”¨æˆ·ç”¨æ¥å¯åŠ¨sshdæœåŠ¡çš„ï¼Œè€Œä¸”ä¸èƒ½ç”¨æ¥ç™»é™†windowsï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªä»¤ç‰Œç”¨æˆ·ï¼Œåœ¨ç»„ç­–ç•¥&gt;è®¡ç®—æœºé…ç½®&gt;windowsé…ç½®&gt;å®‰å…¨è®¾ç½®&gt;æœ¬åœ°ç­–ç•¥&gt;ç”¨æˆ·æƒé™åˆ†é…&gt; åˆ›å»ºä¸€ä¸ªä»¤ç‰Œå¯¹è±¡ä¸­çœ‹åˆ°ã€‚ cygwinå®‰è£…opensshå’Œopensslå‡è®¾ä½ å·²ç»å®‰è£…äº†cygwinï¼Œä½¿ç”¨cygwinå®‰è£…opensshå’Œopensslè¯¦æƒ…çœ‹å‚è€ƒ: how-to-get-ssh-command-line-access-to-windows-7-using-cygwin/ ä¿®å¤sshd service is already installed. è­¦å‘Šï¼šsshd service is already installed. sshd-service-installed-error å‡ºç°sshd service is already installed.çš„é—®é¢˜æ˜¯å› ä¸ºwindows 10å†…ç½®äº†ä¸€ä¸ªopensshï¼Œé€ æˆäº†å†²çªï¼Œç°åœ¨åªéœ€è¦ä¿®æ”¹cygwinå®‰è£…çš„opensshä¸­çš„é»˜è®¤çš„sshdæœåŠ¡åç§°ã€‚ ä¿®æ”¹é»˜è®¤çš„sshdæœåŠ¡åè·¯å¾„: C:/cygwin64/bin/sshd-host-config (32ä½çš„æœ‰æ‰€åŒºåˆ«ï¼Œæ‰¾ä¸åˆ°ç”¨everythingæœç´¢ä¸€ä¸‹å•Š) ä¿®æ”¹: service_name=sshd ä¸º service_name=cygsshd (cygsshdè‡ªå®šä¹‰çš„) ä¿®æ”¹å®Œä¹‹åé‡æ–°æ‰§è¡Œssh-host-config,ä¸Šé¢çš„é—®é¢˜è§£å†³. ä¸‹é¢æ˜¯è¿è¡Œä¸­çš„æˆªå›¾. å»ºè®®ä½¿ç”¨é»˜è®¤çš„cyg_serverï¼Œæ²¡ç”¨å¿…è¦é‡æ–°è‡ªå®šä¹‰ï¼Œæˆ‘å½“æ—¶ä¹Ÿæ˜¯å¥½å¥‡ï¼Œæå¾—èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚ å¯åŠ¨æœåŠ¡ ä¹Ÿå¯ä»¥é‡å¯ä¸€ä¸‹ç³»ç»Ÿï¼ŒæœåŠ¡ä¼šè‡ªåŠ¨å¯åŠ¨ 123net start cygsshd # cygsshdæ˜¯è‡ªå®šä¹‰çš„service_name# æˆ–è€…ä½¿ç”¨cygwinè¿è¡Œcygrunsrv -S cygsshd ssh-user-config é€‰æ‹©ç”Ÿæˆç”¨æˆ·çš„RSAå£ä»¤å°±è¡Œäº†ï¼ŒRSAæ¯”è¾ƒå¸¸ç”¨ï¼Œå…¶å®ƒçš„ä¸æ˜¯å¾ˆå¸¸ç”¨ã€‚ å¸è½½sshæœåŠ¡123456789101112# åˆ é™¤sshdæœåŠ¡, sshdæ—¶é»˜è®¤çš„æœåŠ¡åï¼Œå¦‚æœä½ å®šä¹‰äº†ï¼Œè¾“å…¥ä½ çš„æœåŠ¡åcygrunsrv --stop sshdcygrunsrv --remove sshd# Delete any sshd or related users (such as cyg_server) from /etc/passwd# (use your favorite editor)# Delete any sshd or related users (such as cyg_server) from the system# è¿™é‡Œåˆ é™¤çš„æ˜¯windowsä¸Šçš„ç”¨æˆ·net user sshd /delete# å¦‚æœssh-host-configé…ç½®è¿‡ç¨‹ä¸­æ²¡ç”¨ä½¿ç”¨cyg_serverï¼Œè¯·æ›¿æ¢ä¸ºä½ è‡ªå®šä¹‰çš„åå­—net user cyg_server /delete é‡è£…sshé‡æ–°è®¾ç½®æƒé™ å¦‚æœè®¾ç½®æƒé™ä¸è¡Œï¼Œåˆ é™¤sshd.logå’Œemptyæ–‡ä»¶å¤¹. 123456chown &lt;USERNAME&gt; /var/log/sshd.logchown -R &lt;USERNAME&gt; /var/emptychown &lt;USERNAME&gt; /etc/ssh*chmod 755 /var/emptychmod 644 /var/log/sshd.log å‚è€ƒèµ„æ–™Installing Cygwin and Starting the SSH Daemon how-to-get-ssh-command-line-access-to-windows-7-using-cygwin/ cygwin-sshd-on-windows-domain how-to-regenerate-ssh-client-keys mkpasswd mkgroup how-to-uninstall-reinstall-cygwin-to-use-the-sshd","tags":[{"name":"openssh","slug":"openssh","permalink":"https://betgar.github.io/tags/openssh/"},{"name":"cygwin","slug":"cygwin","permalink":"https://betgar.github.io/tags/cygwin/"}]},{"title":"deepinå®‰è£…ä¹‹ååˆ†é…swapç©ºé—´","date":"2019-03-12T23:00:00.000Z","path":"2019/03/13/allocation-swap-partition-on-deepin-linux/","text":"deepinå®‰è£…ä¹‹ååˆ†é…swapç©ºé—´å‚è€ƒè¿™é‡Œçš„æ–‡ç« åšä¸ªè®°å½• å¢åŠ swapæ–‡ä»¶ä½œä¸ºç©ºé—´ï¼Œäº”æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼šæˆä¸ºè¶…çº§ç”¨æˆ·ï¼› 1sudo su ç¬¬äºŒæ­¥ï¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆswapæ–‡ä»¶,countè®¾å®šå—æ•°,bsè®¾å®šå—å¤§å°,ç”Ÿæˆ4Gçš„swapä»£ç å¦‚ä¸‹ 1dd if=/dev/zero of=/swapfile count=4096 bs=1024k ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®äº¤æ¢åˆ†åŒºï¼Œæ³¨æ„è·¯å¾„å’Œä¸Šé¢çš„of=/swapfileçš„ä¸€è‡´ 1mkswap /swapfile ç¬¬å››æ­¥ï¼šæŒ‚è½½äº¤æ¢åˆ†åŒºï¼Œæ³¨æ„swapæ–‡ä»¶è·¯å¾„ 1swapon /swapfile ç¬¬äº”æ­¥ï¼šå¼€æœºè‡ªåŠ¨æŒ‚è½½swapæ–‡ä»¶ï¼š 1ã€ç”¨ç¼–è¾‘å™¨æ‰“å¼€fstabæ–‡ä»¶ï¼š 1vim /etc/fstab 2ã€åœ¨åé¢è¿½åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ³¨æ„swapæ–‡ä»¶è·¯å¾„ï¼‰ 12#å¼€æœºæŒ‚è½½äº¤æ¢åˆ†åŒº /swapfile swap swap defaults 0 0 æ‰“å¼€æ·±åº¦ç³»ç»Ÿç›‘è§†å™¨æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦ç”Ÿæ•ˆäº†ã€‚","tags":[{"name":"linux","slug":"linux","permalink":"https://betgar.github.io/tags/linux/"},{"name":"deepin","slug":"deepin","permalink":"https://betgar.github.io/tags/deepin/"}]},{"title":"npmç§æœ‰ä»“åº“verdaccioçš„éƒ¨ç½²","date":"2019-03-09T03:00:00.000Z","path":"2019/03/09/deploy-private-npm-registry-verdaccio/","text":"verdaccio å› ä¸ºæŠ€æœ¯å˜é©å¤ªå¿«ï¼Œæ³¨æ„çŸ¥è¯†çš„æ—¶æ•ˆæ€§ã€‚ verdaccioæ˜¯åŸºäºnodeå¼€å‘çš„ä¸€ä¸ªåº“ï¼Œç”¨æ¥æ­å»ºç§æœ‰çš„npmä»“åº“ã€‚å› ä¸ºnpmä»“åº“å¤§å¤šæ•°æ˜¯å…¬æœ‰çš„å…è´¹çš„ï¼Œç§æœ‰ä»“åº“æˆ–è€…ä¼ä¸šç‰ˆæ˜¯æ”¶è´¹çš„ï¼Œåœ¨å•ä½å†…éƒ¨æˆ–è€…ä¸ªäººä¸€äº›ç§æœ‰çš„æ¨¡å—éœ€è¦æ‰˜ç®¡çš„æ—¶å€™å°±éœ€è¦è‡ªå·±æ­å»ºä¸€ä¸ªç§æœ‰çš„ä»“åº“ï¼Œè€Œverdaccioå°±æ˜¯é€‰æ‹©ä¹‹ä¸€ï¼Œæœ€ä¾¿æ·çš„ä¸€ç§ã€‚ å®‰è£…verdaccio å‚ç…§å®˜æ–¹æ–‡æ¡£ï¼Œè€Œä¸”æ˜¯ä¸­æ–‡ç‰ˆå“Ÿ~~~ã€‚ æ³¨æ„ï¼š node.jsçš„ç‰ˆæœ¬è¦æ±‚ 1234567891011# å…¨å±€å®‰è£…npm i -g verdaccio# å¯åŠ¨verdaccio # ä½¿ç”¨foreveræˆ–è€…pm2èƒ½å¤Ÿå¯åŠ¨verdaccioåˆ°åå°# åå°è¿è¡Œforever start `which verdaccio`# æˆ–è€…pm2 start which verdaccio é…ç½®verdaccio é…ç½®æ–‡ä»¶è·¯å¾„å‚è€ƒï¼šhttps://verdaccio.org/docs/zh-CN/cli windows: C:\\Users\\ç”¨æˆ·å\\.config\\verdaccio\\config.yaml è‡ªå®šä¹‰ç«¯å£å·12listen: 0.0.0.0:10086 æ·»åŠ taobaoæº12345uplinks: npmjs: url: https://registry.npmjs.org/ taobao: url: https://registry.npm.taobao.org é…ç½®packages å®˜æ–¹å‚è€ƒ é…ç½®ç§æœ‰åŒ…çš„è§„åˆ™ å»ºè®®ç§æœ‰çš„åŒ…éƒ½æ·»åŠ ç»Ÿä¸€çš„å‰ç¼€æˆ–è€…ä½¿ç”¨ @npmuser/ è¿™æ ·çš„å°ç»„èŒƒå›´ç±»å‹ã€‚ 1234packages: 'npmuser-*': access: npmuser publish: npmuser è¿™æ ·é…ç½®npmuser-*å¼€å¤´çš„åŒ…ï¼Œå‘å¸ƒçš„æ—¶å€™å…¨éƒ¨éƒ½å‘å¸ƒåˆ°verdaccioä¸­ã€‚è€Œä¸”ä¹‹èƒ½npmuserè¿™ä¸ªç”¨æˆ·ä½¿ç”¨ã€‚ 1234567packages: 'npmuser-*': access: $authenticated publish: $authenticated # verdaccioå†…ç½®ä½¿ç”¨htpasswdæ’ä»¶éªŒè¯ï¼Œå†…ç½®çš„å°ç»„åç§°æœ‰ï¼š # '$all', '$anonymous', '@all', '@anonymous', 'all', 'undefined', 'anonymous' è¿™æ ·é…ç½®å°±æ˜¯npmuser-*åŒ…ï¼Œåªèƒ½ç™»é™†çš„ç”¨æˆ·ä½¿ç”¨ã€‚ é…ç½®proxy ä¿®æ”¹é»˜è®¤çš„proxyä¸ºuplinksä¸­çš„taobao 1234567891011packages: '@*/*': # scoped packages access: $all publish: $authenticated proxy: taobao # å¼•ç”¨äº†uplinksä¸­çš„é…ç½® '**': access: $all publish: $authenticated proxy: taobao # å¼•ç”¨äº†uplinksä¸­çš„é…ç½® é…ç½®npmçš„registry å»ºè®®ä½¿ç”¨nrmç®¡ç†registry è¯¦æƒ…å‚è€ƒè¿™ç¯‡æ–‡ç«  1234# æ·»åŠ æœ¬åœ°çš„verdaccionrm add local http://127.0.0.1:4873# åˆ‡æ¢åˆ°localnrm use local ç§æœ‰æ¨¡å—å‘å¸ƒå’Œä½¿ç”¨ å‘å¸ƒç§æœ‰çš„æ¨¡å—å‰ï¼Œè¦å…ˆä½¿ç”¨nrmåˆ‡æ¢åˆ°verdaccioå‘å¸ƒçš„registryï¼Œå¹¶ä¸”å†™å…ˆæ³¨å†Œä¸€ä¸ªç”¨æˆ·ï¼Œç„¶åæ‰èƒ½å‘å¸ƒæ¨¡å— åˆ‡æ¢registry 1nrm use local ä½¿ç”¨npmæ³¨å†Œä¸€ä¸ªè´¦æˆ· 1234npm adduser # æ³¨å†Œç”¨æˆ·# æ³¨æ„è¿™ä¸ªè´¦æˆ·ä¸æ˜¯npmjs.comçš„è´¦æˆ·ï¼Œè¿™ä¸ªè´¦æˆ·åªæ˜¯æ³¨å†Œåˆ°è‡ªå·±å‘å¸ƒçš„verdaccioæœåŠ¡ä¸­# verdaccioä½¿ç”¨htpasswdæ¥éªŒè¯ç”¨æˆ·å¯†ç # verdaccioæœ‰æ’ä»¶å¯ä»¥ä½¿ç”¨è‡ªå·±æ­å»ºçš„gitlabç”¨æˆ·æ¥éªŒè¯ã€‚ å‘å¸ƒæ¨¡å— 1234# ä¾‹å¦‚: nodeé¡¹ç›®ä¸ºnode-demo# node-demoç›®å½•ä¸‹æ‰§è¡Œ# å‘å¸ƒä¹‹å‰æ³¨æ„ä¿®æ”¹package.jsonä¸­çš„versionç‰ˆæœ¬å·npm publish ä½¿ç”¨ç§æœ‰æ¨¡å— 12# ä¾‹å¦‚ï¼šç§æœ‰æ¨¡å—åç§°ä¸ºï¼špvt-nodenpm i pvt-node","tags":[{"name":"npm","slug":"npm","permalink":"https://betgar.github.io/tags/npm/"},{"name":"verdaccio","slug":"verdaccio","permalink":"https://betgar.github.io/tags/verdaccio/"}]},{"title":"Linuxç¯å¢ƒå®‰è£…node,éƒ¨ç½²verdaccioç§æœ‰npmä»“åº“","date":"2019-02-25T16:00:00.000Z","path":"2019/02/26/install-node-on-ubuntu/","text":"ubuntu(16.04)å®‰è£…nodeç¯å¢ƒ è®°å½•ä¸€ä¸‹åœ¨Linuxä¸‹å®‰è£…Nodeç¯å¢ƒçš„ç»è¿‡. å®‰è£…æ­¥éª¤æ›´æ”¹ubuntuçš„é•œåƒæºï¼ˆéå¿…é¡»ï¼‰ å› ä¸º ç½‘ç»œç¯å¢ƒçš„é™åˆ¶ æ›´æ”¹é•œåƒæºå¯ä»¥åŠ å¿«åŒ…çš„ä¸‹è½½ 12345678910111213&gt; ## è¦æ³¨æ„çš„æ˜¯ä¸åŒçš„ç‰ˆæœ¬å¯¹åº”çš„ä»“åº“æ˜¯ä¸åŒçš„ã€‚&gt; &gt; # å¤‡ä»½é•œåƒæº&gt; sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak&gt; &gt; # ç¼–è¾‘source.list&gt; sodo vim /etc/apt/sources.list&gt; &gt; # å¯ä»¥ä½¿ç”¨ç½‘æ˜“æºï¼Œæœç‹æºï¼Œé˜¿é‡Œæº&gt; # å‚è€ƒ https://mirrors.ustc.edu.cn/help/ubuntu.html&gt; # http://mirrors.sohu.com/&gt; # http://mirrors.163.com/&gt; å®‰è£…nvm1curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash å¦‚æœå®‰è£…ä¹‹ånvmï¼Œå†å‘½ä»¤è¡Œä¸Šä½¿ç”¨nvmå‡ºç°æœªæ‰¾åˆ°å‘½ä»¤ï¼Œåªéœ€è¦é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£é‡è¯•ã€‚ å®‰è£…node 12345&gt; nvm install node # æœ€æ–°ç‰ˆæœ¬&gt; nvm install 6.14.4 # å…·ä½“ç‰ˆæœ¬&gt; nvm ls-remote # æœ‰å“ªäº›ç‰ˆæœ¬&gt; nvm use node # ä½¿ç”¨å…·ä½“çš„å“ªä¸ªç‰ˆæœ¬&gt; å®‰è£…nrm1npm install -g nrm --registry=https://registry.npm.taobao.org å®‰è£…python å› ä¸ºnode-gypæ¨¡å—åªæ”¯æŒpython2.xæ‰€ä»¥éœ€è¦å®‰è£…pythonï¼Œå¦‚æœlinuxå·²ç»å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨node-gypåˆ¶å®šé…ç½®pythonåœ°å€ã€‚ å‚è€ƒå†ubuntuä¸Šå®‰è£…python2.7 å®‰è£…node-gyp1npm install -g node-gyp 123456# é…ç½®pythonä¾èµ–# å¦‚æœæ˜¯ç›´æ¥å‘½ä»¤è°ƒç”¨node-gypï¼Œå°±è¿™æ ·é…ç½®node-gyp --python /path/to/python2.7 # pythonçš„åœ°å€# å¦‚æœæ˜¯é€šè¿‡npmå·¥å…·é—´æ¥è°ƒç”¨node-gypå°±è¿™æ ·é…ç½®npm config set python /path/to/executable/python2.7 å®‰è£…verdaccio12345678# å®‰è£…verdaccionpm install --global verdaccio# ä½¿ç”¨nrmæ·»åŠ åä¸ºlocalçš„registrynrm add local http://localhost:4873/# å¯åŠ¨verdaccioverdaccio # è¿™æ ·å¯åŠ¨ä¸èƒ½å…³é—­å‘½ä»¤è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨pm2å·¥å…· å…·ä½“çš„é…ç½®çœ‹verdaccioé…ç½® å®‰è£…pm21npm install pm2 -g å®‰è£…æ—¥å¿—æ¨¡å—ï¼ˆpm2-logrotateï¼‰1pm2 install pm2-logrotate å®‰è£…ç›‘æ§æ¨¡å—(pm2-server-monit)1pm2 install pm2-server-monit pm2å¯åŠ¨verdaccio123456pm2 start which verdaccio # å¯åŠ¨ä¹‹åå¯ä»¥å…³é—­å‘½ä»¤è¡Œï¼Œè¿›ç¨‹ä¸ä¼šç»ˆæ­¢ã€‚# pm2çš„å…¶å®ƒåŠŸèƒ½å‚è€ƒæ–‡æ¡£# pm2 show# pm2 list# pm2 stop# pm2 restart é“¾æ¥ nvmå®˜ç½‘ nrmå®˜ç½‘ node-gypå®˜ç½‘ verdaccioå®˜ç½‘ pm2å®˜ç½‘ pm2-logrotateæ—¥å¿—ç®¡ç† pm2-server-monitç›‘æ§æ¨¡å—","tags":[{"name":"linux","slug":"linux","permalink":"https://betgar.github.io/tags/linux/"},{"name":"node","slug":"node","permalink":"https://betgar.github.io/tags/node/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://betgar.github.io/tags/ubuntu/"}]},{"title":"Vue2+TypeScriptå®è·µå‡†å¤‡","date":"2019-02-12T16:00:00.000Z","path":"2019/02/13/vue2-typescript-action-prepare/","text":"Vue2 + TypeScriptå®è·µå‡†å¤‡ åŸºäºVue2.5ç‰ˆæœ¬ï¼ŒVue3.0å¯èƒ½æœ‰æ‰€æ”¹å˜. çŸ¥è¯†å‡†å¤‡ æ‰å®çš„ JavaScript / HTML / CSS åŸºæœ¬åŠŸ é€šè¯»Vueå®˜æ–¹æ•™ç¨‹ (guide) çš„åŸºç¡€ç¯‡ ç†Ÿæ‚‰vue-router å’Œ vuex ç†Ÿæ‚‰ES6 modules ç†Ÿæ‚‰Node.js åŸºç¡€ äº†è§£å¦‚ä½•ä½¿ç”¨ / é…ç½® Babel æ¥å°† ES2015 ç¼–è¯‘åˆ° ES5 ç”¨äºæµè§ˆå™¨ç¯å¢ƒ ç†Ÿæ‚‰ Webpack vue-cli æ¥æ­å»ºVueé¡¹ç›® Node.jsNode.jsæ˜¯ä»€ä¹ˆï¼Ÿ Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚ npmæ¨¡å—ç®¡ç†å™¨npmæœ‰ä¸¤å±‚å«ä¹‰ã€‚ä¸€å±‚å«ä¹‰æ˜¯Nodeçš„å¼€æ”¾å¼æ¨¡å—ç™»è®°å’Œç®¡ç†ç³»ç»Ÿï¼Œç½‘å€ä¸ºnpmjs.orgã€‚å¦ä¸€å±‚å«ä¹‰æ˜¯Nodeé»˜è®¤çš„æ¨¡å—ç®¡ç†å™¨ï¼Œæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œä¸‹çš„è½¯ä»¶ï¼Œç”¨æ¥å®‰è£…å’Œç®¡ç†Nodeæ¨¡å—ã€‚ 1234567npm initnpm install lodash-esnpm uninstall lodash-esnpm update lodash-esnpm install lodash-es --savenpm install lodash-es --save-dev npm run npmä¸ä»…å¯ä»¥ç”¨äºæ¨¡å—ç®¡ç†ï¼Œè¿˜å¯ä»¥ç”¨äºæ‰§è¡Œè„šæœ¬ã€‚package.jsonæ–‡ä»¶æœ‰ä¸€ä¸ªscriptså­—æ®µï¼Œå¯ä»¥ç”¨äºæŒ‡å®šè„šæœ¬å‘½ä»¤ï¼Œä¾›npmç›´æ¥è°ƒç”¨ã€‚ 123456789// package.json&#123; \"scripts\": &#123; \"serve\": \"vue-cli-service serve\", \"build\": \"vue-cli-service build\", \"lint\": \"vue-cli-service lint\", \"test:unit\": \"vue-cli-service test:unit\" &#125;&#125; 1npm run serve package.jsonæ–‡ä»¶ æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹é¢ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œå®šä¹‰äº†è¿™ä¸ªé¡¹ç›®æ‰€éœ€è¦çš„å„ç§æ¨¡å—ï¼Œä»¥åŠé¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼ˆæ¯”å¦‚åç§°ã€ç‰ˆæœ¬ã€è®¸å¯è¯ç­‰å…ƒæ•°æ®ï¼‰ã€‚npm installå‘½ä»¤æ ¹æ®è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè‡ªåŠ¨ä¸‹è½½æ‰€éœ€çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯é…ç½®é¡¹ç›®æ‰€éœ€çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚ nameï¼šæè¿°çš„æ˜¯æ¨¡å—çš„åç§° version: æè¿°æ¨¡å—çš„ç‰ˆæœ¬å·ï¼ˆéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰ main: æŒ‡å®šå…¥å£æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºindex.js dependencies:å­—æ®µæŒ‡å®šäº†é¡¹ç›®è¿è¡Œæ‰€ä¾èµ–çš„æ¨¡å— devDependencies:æŒ‡å®šé¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—ã€‚ scripts: npm run æ‰§è¡Œçš„å‘½ä»¤å°±æ˜¯è¿™é‡ŒæŒ‡å®šçš„ã€‚ CommonJSè§„èŒƒ Node åº”ç”¨ç”±æ¨¡å—ç»„æˆï¼Œé‡‡ç”¨ CommonJS æ¨¡å—è§„èŒƒã€‚ æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»ï¼Œéƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å…¶ä»–æ–‡ä»¶ä¸å¯è§ã€‚ 123456789// example.jsvar x = 5;var addX = function (value) &#123; return value + x;&#125;;// å¯¼å‡ºä¹‹åæ‰å¯è§module.exports.x = x;module.exports.addX = addX; 12345// ä½¿ç”¨exampleæ¨¡å—var example = require('./example.js');console.log(example.x); // 5console.log(example.addX(1)); // 6 TypeScript TypeScriptå…·æœ‰ç±»å‹ç³»ç»Ÿï¼Œä¸”æ˜¯JavaScriptçš„è¶…é›†ã€‚ å®ƒå¯ä»¥ç¼–è¯‘æˆæ™®é€šçš„JavaScriptä»£ç ã€‚ TypeScriptæ”¯æŒä»»æ„æµè§ˆå™¨ï¼Œä»»æ„ç¯å¢ƒï¼Œä»»æ„ç³»ç»Ÿå¹¶ä¸”æ˜¯å¼€æºçš„ã€‚ åŸºç¡€ç±»å‹12345678910111213141516171819202122232425262728// booleanlet isDone: boolean = false;// æ•°å­—let decLiteral: number = 6;let hexLiteral: number = 0xf00d;let binaryLiteral: number = 0b1010;let octalLiteral: number = 0o744;// å­—ç¬¦ä¸²let name: string = \"bob\";// æ•°ç»„let list: number[] = [1, 2, 3];let list: Array&lt;number&gt; = [1, 2, 3];// å…ƒç»„let x: [string, number] = ['hello', 10]; // OKx[3] = 'world'; // OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹// æšä¸¾enum Color &#123; Red, Green, Blue&#125;let c: Color = Color.Green; ä»»æ„å€¼any ä½†æ˜¯ Object ç±»å‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™å®ƒèµ‹ä»»æ„å€¼ - ä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³• . 12345678let notSure: any = 4;notSure.ifItExists(); // okay, ifItExists might exist at runtimenotSure.toFixed(); // okay, toFixed exists (but the compiler doe// sn't check)let prettySure: Object = 4;prettySure.toFixed(); // Error: Property 'toFixed' doesn't exist// on type 'Object'. ç©ºå€¼void void ç±»å‹åƒæ˜¯ä¸ any ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ 123456function warnUser(): void &#123; alert(\"This is my warning message\");&#125;// å£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ undefined å’Œ nulllet unusable: void = undefined; nullå’Œundefined é»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚ 12let u: undefined = undefined;let n: null = null; æ³¨æ„ï¼šå½“ä½ æŒ‡å®šäº† â€“strictNullChecks æ ‡è®°ï¼Œ null å’Œ undefined åªèƒ½èµ‹å€¼ç»™ void å’Œå®ƒä»¬å„è‡ªã€‚ Object object è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ number ï¼Œ string ï¼Œ boolean ï¼Œ symbol ï¼Œ null æˆ– undefined ä¹‹å¤–çš„ç±»å‹ã€‚ å¼ºåˆ¶ç±»å‹è½¬æ¢1234let someValue: any = \"this is a string\";let strLength: number = (&lt;string&gt;someValue).length;// as è¯­æ³•let strLength: number = (someValue as string).length; å¯é€‰å±æ€§ å¯é€‰å±æ€§ä½¿ç”¨?æ ‡è¯† 12345678910111213141516// Vueçš„ComponentOptionså£°æ˜çš„ä¸€éƒ¨åˆ†export interface ComponentOptions&lt; V extends Vue, Data=DefaultData&lt;V&gt;, Methods=DefaultMethods&lt;V&gt;, Computed=DefaultComputed, PropsDef=PropsDefinition&lt;DefaultProps&gt;, Props=DefaultProps&gt; &#123; data?: Data; props?: PropsDef; propsData?: object; computed?: Accessors&lt;Computed&gt;; methods?: Methods; watch?: Record&lt;string, WatchOptionsWithHandler&lt;any&gt; | WatchHandler&lt;any&gt; | string&gt;; // ...&#125; å»é™¤nullå’Œundefinedç±»å‹æ–­è¨€ä½¿ç”¨!æ ‡è¯† æœ‰çš„æ—¶å€™TypeScriptæ— æ³•æ­£ç¡®æ¨å¯¼å‡ºç±»å‹æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨å»é™¤nullå’Œundefined 12345export default class Login extends Vue &#123; @Mutation(UserMutationTypes.SET_USER_NAME) private changeUserName!: (name: string) =&gt; void; &#125; æ¥å£ åœ¨TypeScripté‡Œï¼Œæ¥å£çš„ä½œç”¨å°±æ˜¯ä¸ºè¿™äº›ç±»å‹å‘½åå’Œä¸ºä½ çš„ä»£ç æˆ–ç¬¬ä¸‰æ–¹ä»£ç å®šä¹‰å¥‘çº¦ã€‚ 123456789interface LabelledValue &#123; label: string;&#125;function printLabel(labelledObj: LabelledValue) &#123; console.log(labelledObj.label);&#125;// let myObj = &#123;size: 10, label: \"Size 10 Object\"&#125;;let myObj = &#123;size: 10, label: \"Size 10 Object\"&#125;;printLabel(myObj); ç±»1234567891011121314class Animal &#123; move(distanceInMeters: number = 0) &#123; console.log(`Animal moved $&#123;distanceInMeters&#125;m.`); &#125;&#125; class Dog extends Animal &#123; bark() &#123; console.log('Woof! Woof!'); &#125;&#125; const dog = new Dog();dog.bark();dog.move(10);dog.bark(); å‡½æ•°12345678910111213141516// Named functionfunction add(x, y) &#123; return x + y;&#125;// Anonymous functionlet myAdd = function(x, y) &#123; return x + y; &#125;;function tsAdd(x: number, y: number): number &#123; return x + y;&#125; let tsMyAdd = function(x: number, y: number): number &#123; return x +y; &#125;; å£°æ˜åˆå¹¶ æ³¨æ„æ¯ç»„æ¥å£é‡Œçš„å£°æ˜é¡ºåºä¿æŒä¸å˜ï¼Œä½†å„ç»„æ¥å£ä¹‹é—´çš„é¡ºåºæ˜¯åæ¥çš„æ¥å£é‡è½½å‡ºç°åœ¨é å‰ä½ç½®ã€‚ 123456789101112131415161718interface Cloner &#123; clone(animal: Animal): Animal;&#125;interface Cloner &#123; clone(animal: Sheep): Sheep;&#125;interface Cloner &#123; clone(animal: Dog): Dog; clone(animal: Cat): Cat;&#125;// è¿™ä¸‰ä¸ªæ¥å£åˆå¹¶æˆä¸€ä¸ªå£°æ˜ï¼šinterface Cloner &#123; clone(animal: Dog): Dog; clone(animal: Cat): Cat; clone(animal: Sheep): Sheep; clone(animal: Animal): Animal;&#125; æ‰©å……å…¨å±€æˆ–è€…æ¨¡å—ä½œç”¨åŸŸ ä¸è®ºæ˜¯æ¨¡å—æ‰©å……è¿˜æ˜¯å…¨å±€å£°æ˜æ‰©å……éƒ½ä¸èƒ½å‘é¡¶çº§ä½œç”¨åŸŸæ·»åŠ æ–°çš„é¡¹ç›® - å®ƒä»¬åªèƒ½ä¸ºå·²ç»å­˜åœ¨çš„å£°æ˜æ·»åŠ  â€œè¡¥ä¸â€. 123456789101112131415161718// map.tsimport &#123; Observable &#125; from \"./observable\";// æ‰©å…… \"./observable\"declare module \"./observable\" &#123; // ä½¿ç”¨æ¥å£åˆå¹¶æ‰©å…… 'Observable' ç±»çš„å®šä¹‰ interface Observable&lt;T&gt; &#123; map&lt;U&gt;(proj: (el: T) =&gt; U): Observable&lt;U&gt;; &#125;&#125;Observable.prototype.map = /*...*/;// declare global å£°æ˜è¢«å¢å¼º:declare global &#123; interface Array&lt;T&gt; &#123; mapToNumbers(): number[]; &#125;&#125;Array.prototype.mapToNumbers = function () &#123; /* ... */ &#125; Vueå¯¹TypeScriptçš„æ”¯æŒ Vueçš„TypeScript æ”¯æŒ TypeScriptè¯†åˆ«Vueç»„ä»¶12345// vue-shim.d.tsdeclare module \"*.vue\" &#123; import Vue from \"vue\"; export default Vue;&#125; TypeScriptè¯†åˆ«JSX12345678910111213141516171819202122232425262728// æ¸²æŸ“å‡½æ•° &amp; JSXVue.component('anchored-heading', &#123; render: function (createElement) &#123; return createElement( 'h' + this.level, // æ ‡ç­¾åç§° this.$slots.default // å­å…ƒç´ æ•°ç»„ ) &#125;, props: &#123; level: &#123; type: Number, required: true &#125; &#125;&#125;);// shims-tsx.d.tsdeclare global &#123; namespace JSX &#123; // tslint:disable no-empty-interface interface Element extends VNode &#123;&#125; // tslint:disable no-empty-interface interface ElementClass extends Vue &#123;&#125; interface IntrinsicElements &#123; [elem: string]: any; &#125; &#125;&#125; æ‰©å±•Vueç±»å’ŒåŸå‹å£°æ˜ä¹¦å†™123456789// ä¾‹å­ï¼šdeclare module 'vue/types/vue' &#123; interface Vue &#123; $axios: AxiosInstance &#125; interface VueConstructor &#123; $axios: AxiosInstance &#125;&#125; Vueç»„ä»¶å£°æ˜æ–¹å¼11234567&lt;template&gt; &lt;div&gt; &lt;div class=\"greeting\"&gt;Hello &#123;&#123;name&#125;&#125;&#123;&#123;exclamationMarks&#125;&#125;&lt;/div&gt; &lt;button @click=\"decrement\"&gt;-&lt;/button&gt; &lt;button @click=\"increment\"&gt;+&lt;/button&gt; &lt;/div&gt;&lt;/template&gt; 1234567891011121314151617181920212223242526&lt;/script&gt;&lt;script lang=\"ts\"&gt;import Vue from \"vue\";export default Vue.extend(&#123; props: ['name', 'initialEnthusiasm'], data() &#123; return &#123; enthusiasm: this.initialEnthusiasm, &#125; &#125;, methods: &#123; increment() &#123; this.enthusiasm++; &#125;, decrement() &#123; if (this.enthusiasm &gt; 1) &#123; this.enthusiasm--; &#125; &#125;, &#125;, computed: &#123; exclamationMarks(): string &#123; return Array(this.enthusiasm + 1).join('!'); &#125; &#125;&#125;);&lt;/script&gt; 12345&lt;style&gt;.greeting &#123; font-size: 20px;&#125;&lt;/style&gt; Vueç»„ä»¶å£°æ˜æ–¹å¼21234567891011121314151617import Vue from 'vue'import Component from 'vue-class-component'// @Component ä¿®é¥°ç¬¦æ³¨æ˜äº†æ­¤ç±»ä¸ºä¸€ä¸ª Vue ç»„ä»¶@Component(&#123; // æ‰€æœ‰çš„ç»„ä»¶é€‰é¡¹éƒ½å¯ä»¥æ”¾åœ¨è¿™é‡Œ template: '&lt;button @click=\"onClick\"&gt;Click!&lt;/button&gt;'&#125;)export default class MyComponent extends Vue &#123; // åˆå§‹æ•°æ®å¯ä»¥ç›´æ¥å£°æ˜ä¸ºå®ä¾‹çš„å±æ€§ message: string = 'Hello!' // ç»„ä»¶æ–¹æ³•ä¹Ÿå¯ä»¥ç›´æ¥å£°æ˜ä¸ºå®ä¾‹çš„æ–¹æ³• onClick (): void &#123; window.alert(this.message) &#125;&#125; Vueç»„ä»¶ä½¿ç”¨æ³¨æ„äº‹é¡¹ Vueç»„ä»¶æˆ–è€…tsæ–‡ä»¶ä¸­å¯¼å…¥*.vueæ–‡ä»¶æ—¶ï¼Œéœ€è¦å®Œæ•´æ–‡ä»¶å 1import Toolbar from '@/components/toolbar.vue'; &lt;script lang=&quot;ts&quot;&gt;æ ‡ç­¾å¿…é¡»å¸¦lang=â€œtsâ€ &lt;script&gt;å¯¼å‡ºçš„å¯¹è±¡å¿…é¡»æ˜¯Vueçš„å®ä¾‹ 1234567@Componentexport default class HelloDecorator extends Vue &#123;&#125;// æˆ–è€…export default Vue.extend(&#123; // ComponentOptions&#125;) vue-class-componentæ³¨è§£çš„é™åˆ¶ methodsç›´æ¥å£°æ˜ä¸ºç±»æ–¹æ³•æˆå‘˜. è®¡ç®—å±æ€§å£°æ˜ä¸ºç±»å±æ€§è®¿é—®å™¨. dataå£°æ˜ä¸ºç±»çš„å­—æ®µã€‚ data ï¼Œ renderå’Œæ‰€æœ‰çš„Vueç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°éƒ½èƒ½å¯ä»¥ç›´æ¥å£°æ˜ä¸ºç±»æˆå‘˜æ–¹æ³•ã€‚ä½†æ˜¯ä½ ä¸èƒ½åœ¨Vueå®ä¾‹ä¸Šç›´æ¥è°ƒç”¨ã€‚å½“ä½ å£°æ˜è‡ªå®šä¹‰æ–¹æ³•æ—¶ï¼Œåº”è¯¥é¿å…å£°æ˜å‘¨æœŸé’©å­å‡½æ•°ä¿ç•™çš„åå­— å…¶å®ƒçš„optionså±æ€§ï¼Œä½¿ç”¨ä¼ é€’ç»™@Componentè£…é¥°å™¨å‡½æ•°ã€‚ä¾‹å¦‚ï¼šcomponentså±æ€§ dataå±æ€§å£°æ˜æ³¨æ„äº‹é¡¹1234567891011121314151617@Componentexport default class Login extends Vue &#123; public name: string = 'login'; // ç›´æ¥å£°æ˜ä¸ºç±»çš„å­—æ®µ private userName: string = ''; private userPass: string = ''; @Mutation(UserMutationTypes.SET_USER_NAME) private changeUserName!: (name: string) =&gt; void; // Vueé»˜è®¤çš„dataå‡½æ•°è¿”å›å±æ€§ data() &#123; return &#123; labelPosition: 'right', &#125;; &#125;&#125; å¦‚æœdataå±æ€§éœ€è¦åœ¨classçš„methodä¸­ä¿®æ”¹æ—¶ï¼Œå£°æ˜ä¸ºç±»çš„å­—æ®µã€‚ å¦‚æœdataå±æ€§åªåœ¨templateä¸­ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨dataå‡½æ•°è¿”å›. TypeScriptå®˜æ–¹å£°æ˜æ–‡ä»¶ä»“åº“ https://github.com/DefinitelyTyped/DefinitelyTyped npmä»“åº“ä¸ºï¼š @types/mockjs https://microsoft.github.io/TypeSearch/ å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼ˆæ²¡æœ‰å£°æ˜æ–‡ä»¶ï¼‰ æ¯”å¦‚è¯´æˆ‘æƒ³å¼•å…¥async-validator,è™½ç„¶å·²ç»åœ¨æœ¬åœ°å®‰è£…ï¼Œä½†æ˜¯typescriptè¿˜æ˜¯æç¤ºæ‰¾ä¸åˆ°æ¨¡å—ã€‚åŸå› æ˜¯typescriptæ˜¯ä»node_modules/@typesç›®å½•ä¸‹å»æ‰¾æ¨¡å—å£°æ˜ï¼Œæœ‰äº›åº“å¹¶æ²¡æœ‰æä¾›typescriptçš„å£°æ˜æ–‡ä»¶ï¼Œæ‰€ä»¥å°±éœ€è¦è‡ªå·±å»æ·»åŠ  è§£å†³åŠæ³•ï¼šåœ¨src/typesç›®å‰ä¸‹å»ºä¸€ä¸ªasync-validation.d.tsæ–‡ä»¶ï¼Œå£°æ˜è¿™ä¸ªæ¨¡å—å³å¯ 1234567891011121314151617declare module 'async-validator' &#123; export type AsyncValidator&lt;T = object&gt; = ( rule: RuleConfig, value: any, callback: ValidatorCallback, source: T, options: &#123; messages: object; &#125;, ) =&gt; void;&#125;// çœ‹çœ‹*.vueæ¨¡å—æ€ä¹ˆå£°æ˜çš„declare module '*.vue' &#123; import Vue from 'vue'; export default Vue;&#125; å‰ç«¯æ¶‰åŠçš„çŸ¥è¯†å‰ç«¯åŸºç¡€ JavaScript / HTML / CSS ES6 çš„ä½¿ç”¨ Vueéƒ¨åˆ† Vueçš„åŸºç¡€çŸ¥è¯† Vuexå’ŒVue-Routerä½¿ç”¨ Vueå·¥å…·é“¾çš„ç›¸å…³çŸ¥è¯† vue-loader vue-cli vetur(vs code æ’ä»¶) vue.config.js vue-property-decorator vuex-class Vueç”Ÿæ€é“¾çš„ç»„ä»¶åº“ï¼ˆä¾‹å¦‚ï¼š Element UIï¼‰ Nodeéƒ¨åˆ† Node.jsæ¨¡å—çŸ¥è¯† CommonJsè§„èŒƒ(require, module, export) npmåŸºæœ¬ä½¿ç”¨ Node.jsçš„package.jsonå’Œæ¨¡å—çŸ¥è¯† Webpack äº†è§£Webpacké…ç½® Webpackæ’ä»¶ css-loader, style-loader, sass-nodeâ€¦ TypeScript TypeScriptåŸºæœ¬è¯­æ³• TypeScriptç±»å‹å£°æ˜æ–‡ä»¶*.d.tså†™æ³• tsconfig.jsonæ–‡ä»¶é…ç½® äº†è§£tslint.json å…¶å®ƒç±»åº“ Axios.jsåº“çš„ä½¿ç”¨ Eslint é“¾æ¥npmæ¨¡å—ç®¡ç†å™¨ npm æ¨¡å—å®‰è£…æœºåˆ¶ç®€ä»‹ vue-cli: https://cli.vuejs.org/zh/ vue-router: https://router.vuejs.org/zh/ vuex: https://vuex.vuejs.org/zh/guide/ vue-loader: https://vue-loader.vuejs.org/zh/spec.html vue-class-component https://github.com/vuejs/vue-class-component vue-property-decorator https://github.com/kaorun343/vue-property-decorator vuex-class https://github.com/ktsn/vuex-class/ Axios.js https://github.com/axios/axios Vueçš„TypeScriptæ”¯æŒ https://cn.vuejs.org/v2/guide/typescript.html è¯­ä¹‰åŒ–ç‰ˆæœ¬ https://semver.org/lang/zh-CN/ TypeScript+ Vueèµ·æ­¥ https://github.com/Microsoft/TypeScript-Vue-Starter#typescript-vue-starter https://github.com/SimonZhangITer/vue-typescript-dpapp-demo vue + typescript é¡¹ç›®èµ·æ‰‹å¼ https://segmentfault.com/a/1190000011744210 https://segmentfault.com/a/1190000011878086 https://github.com/ws456999/vue-typescript-starter https://www.zhihu.com/question/310485097","tags":[{"name":"Vue","slug":"Vue","permalink":"https://betgar.github.io/tags/Vue/"},{"name":"TypeScript","slug":"TypeScript","permalink":"https://betgar.github.io/tags/TypeScript/"}]},{"title":"Backbone.marionetteæ–°æ‰‹å…¥é—¨ç³»åˆ—","date":"2018-10-24T10:00:00.000Z","path":"2018/10/24/the-beginner-of-backbone-marionette/","text":"Backbone.marionetteæ–°æ‰‹å…¥é—¨ç³»åˆ— å·²ç»ä¸ç”¨äº†ï¼Œæ‰€ä»¥å¼ƒå‘ã€‚ initialize(options, args...)1234567const MyObject = MnObject.extend(&#123; initialize(options, arg2) &#123; console.log(options.foo, this.getOption('foo'), arg2); &#125;&#125;);const myObject = new MyObject(&#123; foo: 'bar' &#125;, 'baz'); // logs \"bar\" \"bar\" \"baz\" extend12// Backbone.extend === _.extendconst view = new MyView(); triggerMethod(methodName, args...)123456789101112const MyObject = MnObject.extend(&#123; initialize()&#123; this.triggerMethod('foo', 'baz'); &#125;, onFoo(bar)&#123; console.log(bar); &#125;&#125;);const myObj = new MyObject(); // console.log \"baz\"myObj.triggerMethod('foo', 'qux'); // console.log \"qux\" bindEvents(entity, events)12345678910111213141516import Radio from 'backbone.radio';import &#123; View &#125; from 'backbone.marionette';const MyView = View.extend(&#123; fooEvents: &#123; 'change:foo': 'doSomething' &#125;, initialize()&#123; this.fooChannel = Radio.channel('foo'); this.bindEvents(this.fooChannel, this.fooEvents); &#125;, doSomething()&#123; // the \"change:foo\" event was fired from the radio channel // respond to it appropriately, here. &#125;&#125;); unbindEvents(entity, [hashMap])bindRequests(entity, hashMap) bindRequests:åº”è¯¥å«bindReplyæ›´è´´åˆ‡ï¼Œç»‘å®šçš„æ˜¯å“åº”å¤„ç†å‡½æ•° hashMap =&gt; { &#39;request:name&#39;: &#39;replyHandler&#39; } unbindRequests(channel, [hashMap]) { &#39;request:name&#39;: &#39;replyHandler&#39; } normalizeMethods(hashMap)123456const hash = &#123; 'action:one': 'handleActionOne', // This will become a reference to `this.handleActionOne` 'action:two': this.handleActionTwo &#125;;this.normalizedHash = this.normalizeMethods(hash); getOption(optionName) è·å–å®šä¹‰åœ¨instanceä¸Šçš„optionï¼Œå¦‚æœinstanceæ²¡æœ‰ï¼Œåˆ™ä¼˜é›…é™çº§ä»optionä¸ŠæŸ¥æ‰¾ã€‚ 123456789101112131415161718const View = View.extend(&#123; classVal: 'class value', initialize()&#123; this.instanceVal = 'instance value' &#125;&#125;);const view = new View(&#123; optVal: 'option value' &#125;);view.getOption('instanceVal'); // instance valueview.getOption('classVal'); // class valueview.getOption('optVal'); // option valueconst view2 = new View(&#123; instanceVal: 'foo', classVal: 'bar', optVal: 'baz' &#125;);view.getOption('instanceVal'); // fooview.getOption('classVal'); // barview.getOption('optVal'); // baz Falsey values getOptionå°†è¿”å›ä»»ä½•falsey valuesè€Œä¸æ˜¯undefinedï¼Œå¦‚æœgetOptionåœ¨optionsä¸­æ— æ³•è·å–å±æ€§ï¼Œå°†ä¼šç›´æ¥ä»instanceå®ä¾‹ä¸­è¯»å–ã€‚ mergeOptions(options, props) æŠŠoptionsä¸­çš„propsä¸­çš„å±æ€§åˆå¹¶åˆ°instanceså®ä¾‹ä¸Š 1234567891011121314151617const MyObject = MnObject.extend(&#123; initialize(options) &#123; // this.mergeOptions(options, ['model', 'something']); // this.model and this.something will now be available &#125;&#125;);const myObject = new MyObject(&#123; model: new Backbone.Model(), something: 'test', another: 'value'&#125;);console.log(myObject.model);console.log(myObject.something);console.log(myObject.getOption('another')); options initializeä¸­çš„optionså’Œå¯¹è±¡instanceå®ä¾‹åŒ–çš„optionsä¸€æ ·ï¼Œæ‰€ä»¥åœ¨initializeä¸­ä½¿ç”¨optionsï¼Œæœ‰å¿…è¦ä½¿ç”¨getOptionè·å–. 12345678910111213141516const MyObject = MnObject.extend(&#123; options: &#123; foo: 'bar', another: 'thing' &#125;, initialize(options) &#123; console.log(options.foo) // undefined console.log(this.getOption('foo')) // 'bar' console.log(this.getOption('another')) // 'value' &#125;&#125;);const myObject = new MyObject(&#123; another: 'value'&#125;); Marionette.View å±æ€§ï¼š el, id, tagName,attributes,className model, modelEvents, collection, collectionEvents events, triggers template, templateContext childViewEventPrefix,childViewEvents, childViewTriggers behaviors, ui regionClass, regions æ³¨æ„ï¼š å› ä¸ºæ‰€æœ‰çš„eventséƒ½åœ¨elä¸Šä»£ç†ï¼Œæ‰€ä»¥å¦‚æœeventsä¸­çš„selectorå’ŒchildViewEventsä¸­çš„selectorç›¸åŒæ—¶ï¼Œeventsä¸­çš„handleèƒ½å¤ŸåŒæ—¶å“åº”eventså’ŒchildViewEventsä¸­è§¦å‘çš„äº‹ä»¶ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œåœ¨childViewEventsçš„handlerä¸­é˜»æ­¢äº‹ä»¶å†’æ³¡ä¼ æ’­ render Marionette.View.renderä¸èƒ½è¢«overrideé‡å†™ï¼Œåªèƒ½é€šè¿‡before:render events Backboneç”¨æ¥ç»‘å®šDOMäº‹ä»¶ triggers è½¬æ¢DOMäº‹ä»¶=&gt;Marionette Eventï¼Œå°±æ˜¯æŠŠDOM Eventå˜ä¸ºé€šç”¨çš„å‘å¸ƒè®¢é˜…äº‹ä»¶ï¼Œè¿™æ ·å¤–éƒ¨å¯¹è±¡å°±å’Œå…·ä½“çš„DOMç»“æ„è§£è€¦ åœºæ™¯é€‚ç”¨ï¼šchildViewEvents =&gt; parentViewä¸»è¦æ˜¯è§£å†³çˆ¶å­viewä¹‹é—´çš„äº‹ä»¶ä¼ é€’. ä½œç”¨ï¼šç±»ä¼¼Backbone.Modelå¯¹è±¡ï¼Œè‡ªèº«å®šä¹‰äº†å¾ˆå¤šEntity Eventï¼Œentity eventä¼šåœ¨modelçš„å±æ€§å˜åŒ–æ—¶è§¦å‘ï¼›è€Œtriggersä¸­å®šä¹‰çš„å°±æ˜¯DOMäº‹ä»¶åˆ°Class Eventçš„ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œæ‰€ä»¥handlerï¼Œå¯ä»¥æ˜¯viewå†…éƒ¨ï¼ˆå’Œeventsæ•ˆæœä¸€æ ·ï¼‰ï¼Œæˆ–è€…å¤–éƒ¨å…¶å®ƒçš„Marionetteå¯¹è±¡ä¹Ÿå¯ä»¥å¤„ç†ã€‚ 123456789101112const MyView = View.extend(&#123; triggers: &#123; 'click a': 'click:link' &#125;, onClickLink(view, event) &#123; console.log('Show the modal'); &#125;&#125;);// ä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘MyView.triggerMethod('click a'); // onClickLink childViewEvents ui å°±æ˜¯queryå‡ºview contextæ¸²æŸ“ä¹‹åçš„èŒƒå›´å†…DOM Elementï¼ˆthis.$(selector)ï¼‰","tags":[{"name":"backbone","slug":"backbone","permalink":"https://betgar.github.io/tags/backbone/"},{"name":"marionette","slug":"marionette","permalink":"https://betgar.github.io/tags/marionette/"}]},{"title":"jQuery Validationä½¿ç”¨æ€»ç»“","date":"2018-10-09T08:00:00.000Z","path":"2018/10/09/how-to-use-jquery-validation/","text":"jQuery Validationä½¿ç”¨æ€»ç»“ æ³¨æ„ï¼šè¡¨å•å…ƒç´ å¿…é¡»å«æœ‰nameå±æ€§ï¼Œä¸ç„¶jQuery validationä¸å·¥ä½œã€‚ optionsé…ç½® jQuery.validator.defaults 1234567891011121314151617181920212223242526272829&#123; debug : false, messages: &#123;&#125;, groups: &#123;&#125;, rules: &#123;&#125;, errorClass: \"error\", pendingClass: \"pending\", validClass: \"valid\", errorElement: \"label\", focusCleanup: false, focusInvalid: true, errorContainer: $( [] ), errorLabelContainer: $( [] ), onsubmit: true, // æäº¤è¡¨å•æ—¶éªŒè¯ ignore: \":hidden\", // éœ€è¦å¿½ç•¥ä¸éªŒè¯çš„å­—æ®µï¼Œå¯ä»¥è‡ªå·±å†™selector ignoreTitle: false, // ä¸ä½¿ç”¨è¡¨å•å…ƒç´ çš„titleå½“æç¤ºä¿¡æ¯ onfocusin: function( element ) &#123; &#125;, onfocusout: function( element ) &#123; &#125;, onkeyup: function( element, event ) &#123; &#125;, onclick: function( element ) &#123; &#125;, highlight: function( element, errorClass, validClass ) &#123; &#125;, unhighlight: function( element, errorClass, validClass ) &#123; &#125;&#125; æ–¹æ³• jQuery.validatoræœ‰ä¸‰ç±»æ–¹æ³•ï¼š $.validatorçš„é™æ€æ–¹æ³• 12&gt; $.validator.format('è¯·è¾“å…¥è‡³å°‘&#123;0&#125;ä¸ªå­—ç¬¦');&gt; $(&#39;é€‰æ‹©å™¨&#39;).validate()è¿”å›çš„$.validatorå®ä¾‹æ–¹æ³• 123&gt; var validator = $('form').validate();&gt; validator.form();&gt; æ’ä»¶çš„æ–¹æ³• 1234&gt; $().validate();&gt; $().valid();&gt; $().rules();&gt; è‡ªå®šä¹‰çš„é€‰æ‹©å™¨ æ’ä»¶æ‰©å±•äº†selectoré€‰æ‹©å™¨ã€‚ :blink :filled :unchecked Validatorå®ä¾‹çš„æ–¹æ³• Validatorå®ä¾‹çš„å…¬å…±æ–¹æ³•ã€‚ form() è§¦å‘æ ¡éªŒ. 12345var formValidator = $('form').validate();if (formValidator.form()) &#123; console.log('valid form'); &#125; element(element) æ ¡éªŒå•ä¸ªè¡¨å•å…ƒç´  1234var formValidator = $('form').validate();if (formValidator.element('#startDate'))&#123; console.log('valid element'); &#125; resetForm()12var formValidator = $('form').validate();formValidator.resetForm(); showErrors(errors) errorsæ˜¯Objectç±»å‹ï¼Œ keyæ˜¯è¡¨å•å…ƒç´ çš„nameå±æ€§ï¼Œvalueæ˜¯è¦æ˜¾ç¤ºçš„æ¶ˆæ¯ 1234var formValidator = $('form').validate();formValidator.showErrors(&#123; firstName: 'è¯·è¾“å…¥åå­—'&#125;); numberOfInvalids([errors]) è¿”å›æ ¡éªŒä¸é€šè¿‡çš„å…ƒç´ ä¸ªæ•° 12345var validator = $( \"#myform\" ).validate(&#123; invalidHandler: function() &#123; $( \"#summary\" ).text( validator.numberOfInvalids() + \" field(s) are invalid\" ); &#125;&#125;); destory() é”€æ¯Validatorå®ä¾‹ 12var validator = $( \"#myform\" ).validate();validator.destroy(); Validatorçš„é™æ€æ–¹æ³•$.validator.addMethod( name, method [, message ] )123456// value: å…ƒç´ å€¼// elementï¼šå…ƒç´ æœ¬èº«// paramsï¼šå…ƒç´ è§„åˆ™jQuery.validator.addMethod(\"math\", function(value, element, params) &#123; return this.optional(element) || value == params[0] + params[1];&#125;, jQuery.validator.format(\"Please enter the correct value for &#123;0&#125; + &#123;1&#125;\")); $.validator.format( template, argument, argumentNâ€¦ )123var template = jQuery.validator.format(\"&#123;0&#125; is not a valid value\");// later, results in 'abc is not a valid value'alert(template(\"abc\")); $.validator.setDefaults(options) optionså‚è€ƒvalidate(options) é‡ç½®å…¨å±€validatoré…ç½® 123jQuery.validator.setDefaults(&#123; debug: true&#125;); $.validator.addClassRules() æ·»åŠ æ ¡éªŒè§„åˆ™ã€‚ 1234567891011121314151617jQuery.validator.addClassRules(\"name\", &#123; required: true, minlength: 2&#125;);jQuery.validator.addClassRules(&#123; name: &#123; required: true, minlength: 2 &#125;, zip: &#123; required: true, digits: true, minlength: 5, maxlength: 5 &#125;&#125;); Validatorå†…ç½®çš„æ–¹æ³•required é€‚ç”¨: input, select, checkbox, radio 1234// å†…éƒ¨æ–¹æ³•ç­¾årequired();required(selector);required(callback); input 123456&lt;form id=\"myform\"&gt; &lt;label for=\"field\"&gt;Required: &lt;/label&gt; &lt;input type=\"text\" class=\"left\" id=\"field\" name=\"field\"&gt; &lt;br/&gt; &lt;input type=\"submit\" value=\"Validate!\"&gt;&lt;/form&gt; 12345678// boolean$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true &#125; &#125;&#125;); Select 1234567891011&lt;form id=\"myform\"&gt; &lt;label for=\"fruit\"&gt;Please select a fruit&lt;/label&gt; &lt;select id=\"fruit\" name=\"fruit\" title=\"Please select something!\"&gt; &lt;option value=\"\"&gt;Select...&lt;/option&gt; &lt;option value=\"1\"&gt;Banana&lt;/option&gt; &lt;option value=\"2\"&gt;Apple&lt;/option&gt; &lt;option value=\"3\"&gt;Peach&lt;/option&gt; &lt;/select&gt; &lt;br/&gt; &lt;input type=\"submit\" value=\"Validate!\"&gt;&lt;/form&gt; 1234567$( \"#myform\" ).validate(&#123; rules: &#123; fruit: &#123; required: true &#125; &#125;&#125;); radio 12345678910111213&lt;form id=\"myform\"&gt; &lt;label for=\"gender_male\"&gt; &lt;input type=\"radio\" id=\"gender_male\" value=\"m\" name=\"gender\" /&gt; Male &lt;/label&gt; &lt;label for=\"gender_female\"&gt; &lt;input type=\"radio\" id=\"gender_female\" value=\"f\" name=\"gender\"/&gt; Female &lt;/label&gt; &lt;label for=\"gender\" class=\"error\"&gt;Please select your gender&lt;/label&gt; &lt;br/&gt; &lt;input type=\"submit\" value=\"Validate!\"&gt;&lt;/form&gt; 1234567$( \"#myform\" ).validate(&#123; rules: &#123; gender: &#123; required: true &#125; &#125;&#125;); checkbox 123456&lt;form id=\"myform\"&gt; &lt;label for=\"agree\"&gt;Please agree to our policy&lt;/label&gt; &lt;input type=\"checkbox\" id=\"agree\" title=\"Please agree to our policy!\" name=\"agree\" /&gt; &lt;br/&gt; &lt;input type=\"submit\" value=\"Validate!\"&gt;&lt;/form&gt; 1234567$( \"#myform\" ).validate(&#123; rules: &#123; agree: &#123; required: true &#125; &#125;&#125;); ä¾èµ–å…¶å®ƒå…ƒç´ (dependence-expression) 12345678&lt;form id=\"myform\"&gt; &lt;label for=\"other\"&gt;Check to make next field required&lt;/label&gt; &lt;input id=\"other\" type=\"checkbox\"&gt; &lt;br&gt; &lt;input id=\"details\" name=\"details\"&gt; &lt;br&gt; &lt;input type=\"submit\" value=\"Validate!\"&gt;&lt;/form&gt; 1234567$( \"#myform\" ).validate(&#123; rules: &#123; details: &#123; required: \"#other:checked\" &#125; &#125;&#125;); function 123456789&lt;form id=\"myform\"&gt; &lt;label&gt;Age &lt;/label&gt; &lt;input id=\"age\" name=\"age\"&gt; &lt;br&gt; &lt;label&gt;Parent &lt;/label&gt; &lt;input id=\"parent\" name=\"parent\"&gt; &lt;br&gt; &lt;input type=\"submit\" value=\"Validate!\"&gt;&lt;/form&gt; 12345678910111213$( \"#myform\" ).validate(&#123; rules: &#123; age: &#123; required: true, min: 3 &#125;, parent: &#123; required: function(element) &#123; return $(\"#age\").val() &lt; 13; &#125; &#125; &#125;&#125;); minlength(length)12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, minlength: 3 &#125; &#125;&#125;); maxlength(length)12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, maxlength: 4 &#125; &#125;&#125;); ranglength(Array)12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, rangelength: [2, 6] &#125; &#125;&#125;); min(value)12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, min: 13 &#125; &#125;&#125;); max(value)12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, max: 13 &#125; &#125;&#125;); range( range )12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, range: [13, 23] &#125; &#125;&#125;); step( value ) è¾“å…¥çš„æ•°å­—æ˜¯stepçš„å€æ•° 12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, step: 10 &#125; &#125;&#125;); email12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, email: true &#125; &#125;&#125;); url12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, url: true &#125; &#125;&#125;); number12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, number: true &#125; &#125;&#125;); digits12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, digits: true &#125; &#125;&#125;); equalTo(Selector)12345678$( \"#myform\" ).validate(&#123; rules: &#123; password: \"required\", password_again: &#123; equalTo: \"#password\" &#125; &#125;&#125;); dateISO å­—æ®µæ˜¯åˆæ³•æ—¶é—´ï¼Œéæ ¼å¼ã€‚ é€‚ç”¨ï¼šinput 12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, dateISO: true &#125; &#125;&#125;); additional-methods åŒ…å«åœ¨additional-methods.js accept(mimetype) æ ¡éªŒæ–‡ä»¶åç¼€ é€‚ç”¨ï¼š&lt;input type=&quot;file&quot;&gt; 12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, accept: \"audio/*\" &#125; &#125;&#125;); creditcard() æ ¡éªŒä¿¡ç”¨å¡å· 12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, creditcard: true &#125; &#125;&#125;); phoneUS å¯ä»¥å‚è€ƒå®ç°ç”µè¯æ ¡éªŒ 12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, phoneUS: true &#125; &#125;&#125;); require_from_group ä¸€ç»„è‡³å°‘å¡«å†™å‡ ä¸ªã€‚ 123456789101112&lt;form id=\"myform\"&gt; &lt;label for=\"mobile_phone\"&gt;Mobile phone: &lt;/label&gt; &lt;input class=\"left phone-group\" id=\"mobile_phone\" name=\"mobile_phone\"&gt; &lt;br/&gt; &lt;label for=\"home_phone\"&gt;Home phone: &lt;/label&gt; &lt;input class=\"left phone-group\" id=\"home_phone\" name=\"home_phone\"&gt; &lt;br/&gt; &lt;label for=\"work_phone\"&gt;Work phone: &lt;/label&gt; &lt;input class=\"left phone-group\" id=\"work_phone\" name=\"work_phone\"&gt; &lt;br/&gt; &lt;input type=\"submit\" value=\"Validate!\"&gt;&lt;/form&gt; 12345678910111213$( \"#myform\" ).validate(&#123; rules: &#123; mobile_phone: &#123; require_from_group: [1, \".phone-group\"] &#125;, home_phone: &#123; require_from_group: [1, \".phone-group\"] &#125;, work_phone: &#123; require_from_group: [1, \".phone-group\"] &#125; &#125;&#125;); extension( [extension ] ) å‚æ•°ï¼šstring é»˜è®¤å€¼ï¼š png|jpe?g|gif é€‚ç”¨ï¼š&lt;input&gt; 12345678$( \"#myform\" ).validate(&#123; rules: &#123; field: &#123; required: true, extension: \"xls|csv\" &#125; &#125;&#125;); é‡æ„è§„åˆ™(ç»„åˆè§„åˆ™) é‡æ„è§„åˆ™ï¼Œå¯ä»¥æŠŠå¤šä¸ªè§„åˆ™ç»„åˆèµ·æ¥ï¼Œä¸€èµ·ä½¿ç”¨ã€‚ 123456789// alias required to cRequired with new message$.validator.addMethod(\"cRequired\", $.validator.methods.required, \"Customer name required\");// alias minlength, too$.validator.addMethod(\"cMinlength\", $.validator.methods.minlength, // leverage parameter replacement for minlength, &#123;0&#125; gets replaced with 2 $.validator.format(\"Customer name must have at least &#123;0&#125; characters\"));// combine them both, including the parameter for minlength$.validator.addClassRules(\"customer\", &#123; cRequired: true, cMinlength: 2 &#125;); é”™è¯¯æ¶ˆæ¯ é”™è¯¯æ¶ˆæ¯æœ‰å››ç§æä¾›æ–¹å¼: options, data-*, element title, default messages é”™è¯¯æ¶ˆæ¯çš„ä¼˜å…ˆçº§ï¼šoptions &gt; element titleå±æ€§ &gt; default messages å¯ä»¥ä½¿ç”¨ç»Ÿä¸€æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“çš„è§„åˆ™æ¶ˆæ¯ 12&lt;input required data-msg=\"Please fill this field\"&gt;&lt;input data-rule-minlength=\"2\" data-rule-maxlength=\"4\" data-msg-minlength=\"At least two chars\" data-msg-maxlength=\"At most fours chars\"&gt; è·³è¿‡éªŒè¯æäº¤ æ·»åŠ formnovalidateå±æ€§ã€‚ 1&lt;input type=\"submit\" formnovalidate name=\"cancel\" value=\"Cancel\"&gt; éªŒè¯äº‹ä»¶ é»˜è®¤æƒ…å†µä¸‹ï¼Œformåœ¨ç”¨æˆ·ç‚¹å‡»submitæŒ‰é’®ï¼Œæˆ–è€…inputè·å¾—ç„¦ç‚¹æ—¶ï¼ŒæŒ‰ä¸‹enteré”®ã€‚ å¦å¤–ï¼Œå¦‚æœä¸€ä¸ªfieldå·²ç»é«˜äº®å¹¶ä¸”invalidï¼Œå½“ç”¨æˆ·è¾“å…¥ä»»ä½•ä¸œè¥¿ï¼Œå®ƒéƒ½ä¼šè¢«éªŒè¯ï¼ˆä½¿ç”¨onkeyupï¼‰. å½“ç”¨æˆ·åœ¨ä¸€ä¸ªå·²ç»éªŒè¯ä¸ºvalidçš„fieldä¸­è¾“å…¥ä»»ä½•ä¸œè¥¿ï¼Œåœ¨fieldå¤±å»ç„¦ç‚¹æ—¶è¢«éªŒè¯ï¼ˆonfoucsoutï¼‰ã€‚ normalizer normalizer: æ˜¯éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå› ä¸ºformä¸­çš„ç»„ä»¶ï¼Œä¸å¯èƒ½å…¨æ˜¯åŸç”Ÿçš„ç»„ä»¶ï¼Œæ‰€ä»¥æä¾›è¿™ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è¿”å›ç»„ä»¶çš„å€¼ã€‚ æ³¨æ„ï¼š normalizerï¼šä¸èƒ½æ”¹å˜ç»„ä»¶çš„å€¼ï¼Œåªèƒ½æŠŠæ”¹å˜åçš„å€¼ï¼Œç»™validatorè¿›è¡Œæ ¡éªŒã€‚ å‚æ•°valueï¼Œæ˜¯validatorå†…éƒ¨è·å–elementçš„å€¼ï¼Œåœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œå¾ˆå¯èƒ½ä¸æ­£ç¡® thisæ—¶å½“å‰è¢«æ ¡éªŒçš„DOMelement è¿”å›å€¼å¿…é¡»æ—¶ä¸€ä¸ªstringç±»å‹ 12345678910$( \"#myform\" ).validate( &#123; rules: &#123; field: &#123; required: true, normalizer: function( value ) &#123; return dayjs($(this).datepicker('getDate')).format('YYYY-MM-DD'); &#125; &#125; &#125;&#125; ); 1234567891011121314151617181920// å…¨å±€çš„normalizerå’Œlocalçš„normalizeråŒæ—¶ä½¿ç”¨$( \"#myform\" ).validate( &#123; normalizer: function( value ) &#123; return $.trim( value ); &#125;, rules: &#123; username: &#123; required: true &#125;, url_input: &#123; required: true, url: true, normalizer: function( value ) &#123; var url = value; // å¯ä»¥ä¿®æ”¹ return 'https://' + url; &#125; &#125; &#125;&#125; );","tags":[{"name":"Validation","slug":"Validation","permalink":"https://betgar.github.io/tags/Validation/"}]},{"title":"requirejsçš„å¿«é€Ÿå…¥é—¨","date":"2018-09-11T16:00:00.000Z","path":"2018/09/12/the-quick-start-of-requirejs/","text":"requirejsçš„å¿«é€Ÿå…¥é—¨ é˜®ä¸€å³°è€å¸ˆçš„å…¥é—¨ç³»åˆ—ã€‚ RequireJSå’ŒAMDè§„èŒƒ Javascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šæ¨¡å—çš„å†™æ³• Javascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼šAMDè§„èŒƒ Javascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šrequire.jsçš„ç”¨æ³• AMDè§„èŒƒ AMDè§„èŒƒå¯¹loaderï¼Œloader pluginsï¼Œ requireæœ‰è¯¦ç»†çš„è§„å®šã€‚è¯¦æƒ…è§ AMD è§„èŒƒwikiï¼Œè¿™é‡Œè¿˜æœ‰ä¸­æ–‡ç‰ˆã€‚ defineå‡½æ•°define(id?, dependencies?, factory) require, exports, module ä¸‰ä¸ªæ¨¡å—æ˜¯é¡¶çº§æ¨¡å—ã€‚ ä¾‹å­ï¼š åˆ›å»ºä¸€ä¸ªåä¸ºâ€alphaâ€çš„æ¨¡å—ï¼Œä½¿ç”¨äº†requireï¼Œexportsï¼Œå’Œåä¸ºâ€betaâ€çš„æ¨¡å—: 1234567define(\"alpha\", [\"require\", \"exports\", \"beta\"], function (require, exports, beta) &#123; exports.verb = function() &#123; return beta.verb(); //Or: return require(\"beta\").verb(); &#125;&#125;); ä¸€ä¸ªè¿”å›å¯¹è±¡çš„åŒ¿åæ¨¡å—ï¼š 1234567define([\"alpha\"], function (alpha) &#123; return &#123; verb: function()&#123; return alpha.verb() + 2; &#125; &#125;;&#125;); ä¸€ä¸ªæ²¡æœ‰ä¾èµ–æ€§çš„æ¨¡å—å¯ä»¥ç›´æ¥å®šä¹‰å¯¹è±¡ï¼š 12345define(&#123; add: function(x, y)&#123; return x + y; &#125;&#125;); ä¸€ä¸ªä½¿ç”¨äº†ç®€å•CommonJSè½¬æ¢çš„æ¨¡å—å®šä¹‰ï¼š 123456define(function (require, exports, module) &#123; var a = require('a'), b = require('b'); exports.action = function () &#123;&#125;;&#125;); requireå‡½æ•°1234567891011define(['require'], function (require) &#123; //the require in here is a local require.&#125;);define(function (require, exports, module) &#123; //the require in here is a local require.&#125;);define(function () &#123; var $ = require('jquery'); // å…¨å±€require&#125;); å…¨å±€requireå‡½æ•°ä½œç”¨äºå…¨å±€ï¼Œå’Œdefine()ç±»ä¼¼ã€‚ å…¨å±€requireå’Œå±€éƒ¨requireæœ‰ç€ç›¸åŒçš„è¡Œä¸ºï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹å¾ï¼š æ¨¡å—IDåº”è¯¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç»å¯¹çš„æ¨¡å—åç§°ï¼Œè€Œä¸æ˜¯ç›¸å¯¹å¦ä¸€ä¸ªæ¨¡å—çš„IDã€‚ åªæœ‰åœ¨å¼‚æ­¥çš„æ—¶å€™ï¼Œæ‰å¯ä»¥ä½¿ç”¨require(id, callback?)çš„å›è°ƒå½¢å¼ã€‚å› ä¸ºå¼‚æ­¥åŠ è½½æ¨¡å—çš„æ–¹å¼æ˜¯å…ˆå‘å‡ºä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œç„¶åç­‰ä¸»çº¿ç¨‹ä»£ç æ®µæ‰§è¡Œå®Œæ¯•æ‰èƒ½è¿›è¡Œå¼‚æ­¥å›è°ƒæ¥å¤„ç†åŠ è½½å¥½çš„æ¨¡å—ã€‚ require(String) å¦‚æœæ¨¡å—æ²¡æœ‰åŠ è½½æˆ–è€…æ‰§è¡Œå®Œæˆï¼Œå°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚ç‰¹åˆ«éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œåœ¨åŒæ­¥åŠ è½½çš„å›è°ƒä¸­ï¼Œå¦‚æœæ¨¡å—æ²¡æœ‰åŠ è½½å®Œæˆï¼Œç¦æ­¢åŠ¨æ€çš„è·å–æ¨¡å—ï¼Œå¦åˆ™ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ ä½¿ç”¨define()å®šä¹‰æ¨¡å—æ—¶ï¼Œä¾èµ–é¡¹ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªAMDæ¨¡å—ï¼š 123define(function (require) &#123; var a = require('a'); &#125;); require(Array, Function) æ ¹æ®å‚æ•°ï¼ŒåŒæ­¥åœ°è¿”å›æ¨¡å—IDæ‰€ä»£è¡¨çš„æ¨¡å—ã€‚ å‚æ•°Arrayæ˜¯ä¸€ä¸ªç”±æ¨¡å—IDç»„æˆçš„æ•°ç»„ã€‚å½“æ¨¡å—IDæ‰€ä»¥ä»£è¡¨çš„æ¨¡å—åŠ è½½å®Œæˆä¸”å¯ç”¨æ—¶ï¼Œå›è°ƒå‡½æ•°Functionæ‰å¼€å§‹æ‰§è¡Œï¼Œå¹¶ä¸”åªè¢«æ‰§è¡Œä¸€æ¬¡ã€‚å„ä¸ªæ¨¡å—æŒ‰ç…§ä¾èµ–æ•°ç»„ä¸­çš„ä½ç½®é¡ºåºä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥åˆ°Functioné‡Œã€‚ 12345define(function (require) &#123; require(['a', 'b'], function (a, b) &#123; //modules a and b are now available for use. &#125;); &#125;); require.toUrl(String) å°†å½¢å¦‚[module ID] + â€˜.extensionâ€™è¿™ç§å­—ç¬¦å½¢å¼è½¬åŒ–æˆURLè·¯å¾„ã€‚ require.toUrl()æ–¹æ³•é‡‡ç”¨é€šç”¨çš„æ¨¡å—IDè·¯å¾„è½¬åŒ–è§„åˆ™,å°†æ¨¡å—IDå­—ç¬¦è§£ææˆURLè·¯å¾„.ä½†å®ƒä¸æ”¯æŒä»¥â€.jsâ€è¿™ç§æ‰©å±•å½¢å¼ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»å°†â€™.extensionâ€™æ·»åŠ åˆ°äº†è§£æè·¯å¾„é‡Œã€‚ 1234567//cart.js contents: define (function(require) &#123; // æ¨¡å—IDå './templates/a' // æ‰©å±•å '.html' // æ¨¡æ¿è·¯å¾„å¤§è‡´ä»¥è¿™æ ·çš„å½¢å¼ç»“å°¾ 'modules/cart/templates/a.html' var templatePath = require.toUrl('./templates/a.html'); &#125;); configé…ç½®å…¬å…±é¡¹: æ¨¡å—idå‰ç¼€ï¼š 1some/very/long/name ä¾‹å¦‚ï¼šä»¥ä¸‹éƒ½æ˜¯æ¨¡å—idå‰ç¼€: some some/very some/very/long some/very/long/name æ¨¡å—idå‰ç¼€çš„ç¬¬ä¸€ä¸ªæ®µ: æ¨¡å—idï¼Œä»ç¬¬ä¸€ä¸ª /ä½œä¸ºåˆ†å‰²ï¼Œä¹‹å‰çš„å­—ç¬¦ä¸²éƒ¨åˆ†å…¨æ˜¯ã€‚ baseUrl å­—ç¬¦ä¸²ç±»å‹ã€‚ç»™idåˆ°pathè½¬æ¢æŒ‡å®šä¸€ä¸ªæ ¹ç›®å½• ã€‚ 123&#123; baseUrl: './js'&#125; paths å¯¹è±¡ç±»å‹ã€‚ç»™æ¨¡å—idå‰ç¼€(module ID prefix)æ˜¾å¼æŒ‡å®šä¸€ä¸ªè·¯å¾„(path)ã€‚ pathså¯¹è±¡çš„å±æ€§æ˜¯ä¸€ä¸ªç»å¯¹çš„æ¨¡å—IDå‰ç¼€(module ID prefix)ï¼Œå±æ€§å€¼å¯ä»¥æ˜¯ï¼š å­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸²å€¼æ˜¯ä¸€ä¸ªç›¸å¯¹äºbaseUrlçš„è·¯å¾„ã€‚ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œåªè¦ä»¥ /æˆ–è€…//æˆ–è€…httpå¼€å¤´ã€‚ æ•°ç»„ï¼šå¯é€‰ã€‚æä¾›ä¸€ä¸ªå¯é€‰çš„å®¹é”™åŠŸèƒ½ã€‚å¦‚æœæ•°ç»„ç¬¬ä¸€ä¸ªè·¯å¾„åŠ è½½å¤±è´¥ï¼Œåˆ™å¯ä»¥å°è¯•ä»ä¸‹ä¸€ä¸ªè·¯å¾„åŠ è½½ï¼Œä»¥æ­¤ç±»æ¨ã€‚ 12345678910// è·¯å¾„ï¼š js/lib/jquery.js&#123; paths: &#123; jquery: './lib/jquery' bootstrap: [ 'https://cdn/bootstrap', './lib/bootstrap' ] &#125;&#125; packagespackage é…ç½®å¯¹è±¡çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚å› ä¸ºCommonJSè§„èŒƒå’ŒAMDè§„èŒƒçš„loaderæŸ¥æ‰¾è·¯å¾„æ–¹å¼çš„å·®å¼‚ï¼Œæ‰€ä»¥packageé…ç½®å¯¹è±¡æ˜¯ä¸ºäº†ä½¿ç”¨å®ç°äº†CommonJSè§„èŒƒçš„åŒ…ã€‚ é»˜è®¤çš„æŸ¥æ‰¾è§„åˆ™ï¼šbaseUrl + &#39;module/id&#39; + .jsï¼Œå…¶ä¸­pathsé…ç½®å¯ä»¥ç”¨æ¥æ˜ å°„module/idåˆ°å¦ä¸€ä¸ªè·¯å¾„ã€‚ åŒ…çš„æŸ¥æ‰¾è§„åˆ™ï¼šä½¿ç”¨äº†ä¸€ä¸ªpackageNameã€‚æ‰€ä»¥ä¸€ä¸ªåŒ…çš„ä¸»æ¨¡å—å°±æ˜¯baseUrl + &#39;packageName&#39; + .js main.jsé»˜è®¤ä½œä¸ºä¸€ä¸ªpackageçš„å…¥å£. 1baseUrl + (packageConfig.location || &apos;packageName&apos;) + &apos;/&apos; + (packageConfig.main || &apos;main&apos;) + &apos;.js&apos; å¯¹äºpackageName/otherIdï¼Œè§„åˆ™å’Œpathsç›¸ä¼¼ï¼Œä½†æ˜¯packageConfigæ˜¯è¿™æ ·å®ç°çš„ï¼š 1baseUrl + (packageConfig.location || &apos;packageName&apos;) + &apos;/&apos; + &apos;otherId&apos; + &apos;.js&apos; package é…ç½®å¯¹è±¡å¯ä»¥æ˜¯ï¼š å­—ç¬¦ä¸²ï¼šä¾‹å¦‚ï¼šbootstrap/modalï¼šå…¶ä¸­bootstrapæ˜¯packageNameåç§°ï¼Œboostrap/modalä¹Ÿæ˜¯ä¸€ä¸ªpackageNameã€‚ä¾èµ–bootstrap/modalæ—¶ï¼ŒæŸ¥æ‰¾è§„åˆ™å¦‚ä¸‹ï¼š 1baseUrl + `bootstrap/modal` + main.js` å¯¹è±¡: a configuration object that can have the following properties: name: å­—ç¬¦ä¸². è§£æè§„åˆ™åŒä¸Šè¿°å­—ç¬¦ä¸²è§£æè§„åˆ™ä¸€æ ·. location: å­—ç¬¦ä¸²ï¼Œå¯é€‰.ç›¸å¯¹äºbaseUrlçš„è·¯å¾„ã€‚ main: å­—ç¬¦ä¸². å¯é€‰.æŒ‡å®šåŒ…å…¥å£ã€‚ é»˜è®¤ä¸ºmain 12345678910&#123; packages: [ 'main', &#123; name: 'dojo', location: 'dojo/1.7.1', main:'main' &#125; ]&#125; config ç”¨æ¥æ¨¡å—é—´ä¼ é€’ä¸€äº›ä¿¡æ¯ä½¿ç”¨çš„ã€‚ 1234567&#123; config: &#123; 'some/module/id': &#123; limit: 40 &#125; &#125;&#125; 123define(['some/module/id'], function (someModule) &#123; someModule.config().limit === 40 // true&#125;); shim è§£å†³é‚£äº›éAMDæ¨¡å—ä¹‹é—´çš„ä¾èµ–ã€‚ 123456789101112131415161718192021&#123; shim: &#123; //This version just specifies the //dependency for the jQuery plugin. //Some implementations may be able to do //better error correction in older IE if //you specify the exports string value, //which in this case would be //exports: 'jQuery.fn.rotator' 'jquery.rotator': ['jquery'], underscore: &#123; exports: '_' &#125;, backbone: &#123; deps: ['jquery', 'underscore'], exports: 'Backbone' &#125; &#125;&#125; map è§£å†³æ¨¡å—é—´åŒæ—¶ä¾èµ–ä¸åŒç‰ˆæœ¬çš„é—®é¢˜ã€‚ é™åˆ¶ï¼š è¿™ä¸ªåŠŸèƒ½åªèƒ½ç”¨äºé‚£äº›ï¼ŒçœŸæ­£ä½¿ç”¨define()å®šä¹‰çš„AMD æ¨¡å—å¹¶ä¸”æ˜¯åŒ¿åæ¨¡å—. 12345678910&#123; map: &#123; '*': &#123; 'foo': 'foo1.2' &#125;, 'some/oldmodule': &#123; 'foo': 'foo1.0' &#125; &#125;&#125; 12345678910&#123; map: &#123; 'some/newmodule': &#123; 'foo': 'foo1.2' &#125;, 'some/oldmodule': &#123; 'foo': 'foo1.0' &#125; &#125;&#125; requirejs è·¯å¾„è§£æï¼šbaseUrl+pathsï¼› / , http:æˆ–è€…https:ï¼Œ.jsç»“å°¾çš„é™¤å¤–ã€‚ requirejsåŠ è½½è„šæœ¬éä¾èµ–é¡ºåºåŠ è½½ï¼Œæ‰§è¡Œæ—¶æ˜¯é¡ºåºæ‰§è¡Œã€‚ data-mainå…¥å£defineå‡½æ•°å®šä¹‰ä¸€ä¸ªå¯¹è±¡123define(&#123; name: 'test'&#125;); å®šä¹‰ä¸€ä¸ªå‡½æ•°1234567define(function () &#123; // åˆå§‹åŒ–å·¥ä½œ return &#123; name: 'test' &#125;;&#125;); requirejs.undef ä½¿ç”¨çš„åœºæ™¯æ¯”è¾ƒå°‘ï¼Œä¸»è¦åœ¨æ¨¡å—åŠ è½½å¤±è´¥æ—¶ä½¿ç”¨è¾ƒå¤š 1234567891011121314151617181920212223242526272829303132333435363738// å®˜æ–¹çš„demorequirejs.config(&#123; enforceDefine: true, paths: &#123; jquery: 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min' &#125;&#125;);//Laterrequire(['jquery'], function ($) &#123; //Do something with $ here&#125;, function (err) &#123; //The errback, error callback //The error has a list of modules that failed var failedId = err.requireModules &amp;&amp; err.requireModules[0]; if (failedId === 'jquery') &#123; //undef is function only on the global requirejs object. //Use it to clear internal knowledge of jQuery. Any modules //that were dependent on jQuery and in the middle of loading //will not be loaded yet, they will wait until a valid jQuery //does load. requirejs.undef(failedId); //Set the path to jQuery to local path requirejs.config(&#123; paths: &#123; jquery: 'local/jquery' &#125; &#125;); //Try again. Note that the above require callback //with the \"Do something with $ here\" comment will //be called if this new attempt to load jQuery succeeds. require(['jquery'], function () &#123;&#125;); &#125; else &#123; //Some other error. Maybe show message to the user. &#125;&#125;); requirejs.config requirejsçš„é…ç½®é¡¹ï¼Œå†…å®¹è¾ƒå¤šï¼Œå‚è€ƒreqquirejs.org require.toUrl è·å–æ¨¡å—çš„è·¯å¾„ã€‚ 1234// å®˜æ–¹demodefine([\"require\"], function(require) &#123; var cssUrl = require.toUrl(\"./style.css\");&#125;);","tags":[{"name":"AMD","slug":"AMD","permalink":"https://betgar.github.io/tags/AMD/"},{"name":"requirejs","slug":"requirejs","permalink":"https://betgar.github.io/tags/requirejs/"}]},{"title":"adminlte-theme-zh-cn-docs","date":"2018-09-09T08:52:00.000Z","path":"2018/09/09/adminlte-theme-zh-cn-docs/","text":"adminlteä¸»é¢˜ä¸­æ–‡æ–‡æ¡£ æ–‡ä»¶ç»“æ„ 12345678910111213141516File Hierarchy of the Source Code Package AdminLTE/ â”œâ”€â”€ dist/ â”‚ â”œâ”€â”€ CSS/ â”‚ â”œâ”€â”€ JS â”‚ â”œâ”€â”€ img â”œâ”€â”€ build/ â”‚ â”œâ”€â”€ less/ â”‚ â”‚ â”œâ”€â”€ AdminLTE&apos;s Less files â”‚ â””â”€â”€ Bootstrap-less/ (Only for reference. No modifications have been made) â”‚ â”œâ”€â”€ mixins/ â”‚ â”œâ”€â”€ variables.less â”‚ â”œâ”€â”€ mixins.less â””â”€â”€ plugins/ â”œâ”€â”€ All the customized plugins CSS and JS files å¸ƒå±€ .wrapper.ä¸€ä¸ªdivåŒ…è£¹ç€æ•´ä¸ªç½‘ç«™ã€‚ .main-header. åŒ…å«å¯¼èˆªå’Œlogoã€‚ .sidebar-wrapper. åŒ…å«ç”¨æˆ·é¢æ¿å’Œä¾§è¾¹æ ã€‚ .content-wrapper. åŒ…å«é¡µé¢çš„å¤´éƒ¨å’Œå†…å®¹ã€‚ å¸ƒå±€options AdminLTE 2.0æä¾›äº†ä¸€ç»„åº”ç”¨äºä¸»å¸ƒå±€çš„é€‰é¡¹ã€‚å¯ä»¥å°†è¿™äº›ç±»ä¸­çš„æ¯ä¸€ä¸ªæ·»åŠ åˆ°bodyæ ‡è®°ä¸­ä»¥è·å¾—æ‰€éœ€çš„ç›®æ ‡ã€‚ ä¿®å¤ï¼šä½¿ç”¨è¯¥ç±».fixedè·å–å›ºå®šæ ‡é¢˜å’Œä¾§è¾¹æ ã€‚ æŠ˜å è¾¹æ ï¼šä½¿ç”¨è¯¥ç±».sidebar-collapseåœ¨åŠ è½½æ—¶æŠ˜å ä¾§è¾¹æ ã€‚ ç›’è£…å¸ƒå±€ï¼šä½¿ç”¨è¯¥ç±».layout-boxedè·å¾—ä»…å»¶ä¼¸è‡³1250åƒç´ çš„ç›’è£…å¸ƒå±€ã€‚ é¡¶éƒ¨å¯¼èˆªä½¿ç”¨è¯¥ç±».layout-top-navåˆ é™¤ä¾§è¾¹æ å¹¶åœ¨é¡¶éƒ¨å¯¼èˆªæ ä¸­æ˜¾ç¤ºæ‚¨çš„é“¾æ¥ã€‚ çš®è‚¤çš®è‚¤å¯ä»¥åœ¨dist / css / skinsæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ã€‚é€‰æ‹©æ‰€éœ€çš„å¤–è§‚æ–‡ä»¶ï¼Œç„¶åå°†ç›¸åº”çš„ç±»æ·»åŠ åˆ°bodyæ ‡ç­¾ä»¥æ›´æ”¹æ¨¡æ¿çš„å¤–è§‚ã€‚ä»¥ä¸‹æ˜¯å¯ç”¨çš®è‚¤çš„åˆ—è¡¨ï¼š çš®è‚¤ skin-blue skin-blue-light skin-yellow skin-yellow-light skin-green skin-green-light skin-purple skin-purple-light skin-red skin-red-light skin-black skin-black-light adminlte JavaScirpté€‰é¡¹å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€ä¿®æ”¹AdminLTE app.jsçš„é€‰é¡¹ã€‚ ç¼–è¾‘app.jsåœ¨ä¸»Javascriptæ–‡ä»¶ä¸­ï¼Œä¿®æ”¹$.AdminLTE.optionså¯¹è±¡ä»¥é€‚åˆæ‚¨çš„ç”¨ä¾‹ã€‚ å®šä¹‰AdminlteOptionsåœ¨åˆå§‹åŒ–app.jsä¹‹å‰åˆå§‹åŒ–ï¼Œä¾‹å¦‚ 12345678910111213&lt;script&gt; var AdminLTEOptions = &#123; //Enable sidebar expand on hover effect for sidebar mini //This option is forced to true if both the fixed layout and sidebar mini //are used together sidebarExpandOnHover: true, //BoxRefresh Plugin enableBoxRefresh: true, //Bootstrap.js tooltip enableBSToppltip: true &#125;;&lt;/script&gt;&lt;script src=\"dist/js/app.js\" type=\"text/javascript\"&gt;&lt;/script&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899&#123; // æ·»åŠ slimscroll.jsåˆ°å¯¼èˆªèœå•ï¼Œåœ¨æ¯ä¸ªé¡µé¢çš„app.jsåŠ è½½ä¹‹å‰ navbarMenuSlimscroll: true, // scroll barçš„width navbarMenuSlimscrollWidth: \"3px\", // inner menuçš„height navbarMenuHeight: \"200px\", // é€šç”¨çš„åŠ¨ç”»é€Ÿåº¦ï¼Œä¾‹å¦‚boxçš„collapse/expendå’Œsidebar treeviewçš„slid up/down // è¿™ä¸ªé€‰é¡¹æ¥å—æ¯«ç§’æ•´æ•°æˆ–è€… fast, normal, slow animationSpeed: 500, // sidebarä¸­çš„push menu è§¦å‘å™¨çš„é€‰æ‹©å™¨ sidebarToggleSelector: \"[data-toggle='offcanvas']\", // æ¿€æ´»çŠ¶æ€çš„sidebarçš„push menu sidebarPushMenu: true, // å¦‚æœè®¾ç½®fixed layoutï¼Œæ¿€æ´»sidebarçš„slimscroll sidebarSlimScroll: true, // å¼€å¯ sidebar miniçš„expandæ‚¬æµ®ç‰¹æ•ˆ // è¿™ä¸ªé€‰é¡¹åœ¨fixed layoutå’Œsidebar miniåŒæ—¶ä½¿ç”¨çš„æ—¶å€™å¼ºåˆ¶è®¾ç½®ä¸ºtrue sidebarExpandOnHover: false, // å¼€å¯ BoxRefresh æ’ä»¶ enableBoxRefresh: true, // å¼€å¯bootstrap.jsçš„tooltipæ’ä»¶ enableBSToppltip: true, // bootstrap tooltipçš„é€‰æ‹©å™¨ BSTooltipSelector: \"[data-toggle='tooltip']\", // å¼€å¯fast click, fastclick.js åœ¨è§¦æ§è®¾å¤‡ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ›´åŸç”Ÿçš„è§¦æ§ä½“éªŒ // å¦‚æœä½ å¼€å¯äº†ï¼Œç¡®ä¿åœ¨app.jsåŠ è½½ä¹‹å‰åŠ è½½fastclick.js enableFastclick: true, //Control Sidebar Tree Views // å¼€å¯æ§åˆ¶ sidebar tree views enableControlTreeView: true, // å¼€å¯ æ§åˆ¶sidebar enableControlSidebar: true, // control sidebar options controlSidebarOptions: &#123; // è§¦å‘sidebar open/closeäº‹ä»¶çš„buttoné€‰æ‹©å™¨ toggleBtnSelector: \"[data-toggle='control-sidebar']\", // sidebar é€‰æ‹©å™¨ selector: \".control-sidebar\", // å¼€å¯slide over content slide: true &#125;, // å¼€å¯è¿™ä¸ªé€‰é¡¹å…è®¸boxçš„collapsed å’Œ removedæ•ˆæœ enableBoxWidget: true, //Box Widget plugin options boxWidgetOptions: &#123; boxWidgetIcons: &#123; // æŠ˜å çš„å›¾æ ‡ collapse: 'fa-minus', // å±•å¼€å›¾æ ‡ open: 'fa-plus', // ç§»é™¤å›¾æ ‡ remove: 'fa-times' &#125;, boxWidgetSelectors: &#123; // ç§»é™¤æŒ‰é’®çš„é€‰æ‹©å™¨ remove: '[data-widget=\"remove\"]', // æŠ˜å æŒ‰é’®çš„é€‰æ‹©å™¨ collapse: '[data-widget=\"collapse\"]' &#125; &#125;, // Direct Chat plugin options directChat: &#123; // å¼€å¯direct chatæ’ä»¶ enable: true, // å¼€å¯æˆ–å…³é—­èŠå¤©è”ç³»äººçª—å£çš„buttoné€‰æ‹©å™¨ contactToggleSelector: '[data-widget=\"chat-pane-toggle\"]' &#125;, //Define the set of colors to use globally around the website // å®šä¸€ä¸ªç«™ç‚¹çš„å…¨å±€ä¸€ä¸ªé¢œè‰²é›†åˆ colors: &#123; lightBlue: \"#3c8dbc\", red: \"#f56954\", green: \"#00a65a\", aqua: \"#00c0ef\", yellow: \"#f39c12\", blue: \"#0073b7\", navy: \"#001F3F\", teal: \"#39CCCC\", olive: \"#3D9970\", lime: \"#01FF70\", orange: \"#FF851B\", fuchsia: \"#F012BE\", purple: \"#8E24AA\", maroon: \"#D81B60\", black: \"#222222\", gray: \"#d2d6de\" &#125;, //The standard screen sizes that bootstrap uses. //If you change these in the variables.less file, change //them here too. screenSizes: &#123; xs: 480, sm: 768, md: 992, lg: 1200 &#125; &#125; ä¸»æ ‡é¢˜ä¸»æ ‡é¢˜åŒ…å«å¾½æ ‡å’Œå¯¼èˆªæ ã€‚å¯¼èˆªæ çš„æ„é€ ä¸Bootstrapç•¥æœ‰ä¸åŒï¼Œå› ä¸ºå®ƒå…·æœ‰Bootstrapä¸æä¾›çš„ç»„ä»¶ã€‚å¯¼èˆªæ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ„å»ºã€‚è¿™æ˜¯æ™®é€šå¯¼èˆªæ çš„ç¤ºä¾‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†æä¾›é¡¶éƒ¨å¯¼èˆªå¸ƒå±€çš„ç¤ºä¾‹ã€‚ ä¾§è¾¹èˆªæ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140&lt;header class=\"main-header\"&gt; &lt;a href=\"../../index2.html\" class=\"logo\"&gt; &lt;!-- LOGO --&gt; AdminLTE &lt;/a&gt; &lt;!-- Header Navbar: style can be found in header.less --&gt; &lt;nav class=\"navbar navbar-static-top\" role=\"navigation\"&gt; &lt;!-- Navbar Right Menu --&gt; &lt;div class=\"navbar-custom-menu\"&gt; &lt;ul class=\"nav navbar-nav\"&gt; &lt;!-- Messages: style can be found in dropdown.less--&gt; &lt;li class=\"dropdown messages-menu\"&gt; &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt; &lt;i class=\"fa fa-envelope-o\"&gt;&lt;/i&gt; &lt;span class=\"label label-success\"&gt;4&lt;/span&gt; &lt;/a&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li class=\"header\"&gt;You have 4 messages&lt;/li&gt; &lt;li&gt; &lt;!-- inner menu: contains the actual data --&gt; &lt;ul class=\"menu\"&gt; &lt;li&gt;&lt;!-- start message --&gt; &lt;a href=\"#\"&gt; &lt;div class=\"pull-left\"&gt; &lt;img src=\"dist/img/user2-160x160.jpg\" class=\"img-circle\" alt=\"User Image\"&gt; &lt;/div&gt; &lt;h4&gt; Sender Name &lt;small&gt;&lt;i class=\"fa fa-clock-o\"&gt;&lt;/i&gt; 5 mins&lt;/small&gt; &lt;/h4&gt; &lt;p&gt;Message Excerpt&lt;/p&gt; &lt;/a&gt; &lt;/li&gt;&lt;!-- end message --&gt; ... &lt;/ul&gt; &lt;/li&gt; &lt;li class=\"footer\"&gt;&lt;a href=\"#\"&gt;See All Messages&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;!-- Notifications: style can be found in dropdown.less --&gt; &lt;li class=\"dropdown notifications-menu\"&gt; &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt; &lt;i class=\"fa fa-bell-o\"&gt;&lt;/i&gt; &lt;span class=\"label label-warning\"&gt;10&lt;/span&gt; &lt;/a&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li class=\"header\"&gt;You have 10 notifications&lt;/li&gt; &lt;li&gt; &lt;!-- inner menu: contains the actual data --&gt; &lt;ul class=\"menu\"&gt; &lt;li&gt; &lt;a href=\"#\"&gt; &lt;i class=\"ion ion-ios-people info\"&gt;&lt;/i&gt; Notification title &lt;/a&gt; &lt;/li&gt; ... &lt;/ul&gt; &lt;/li&gt; &lt;li class=\"footer\"&gt;&lt;a href=\"#\"&gt;View all&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;!-- Tasks: style can be found in dropdown.less --&gt; &lt;li class=\"dropdown tasks-menu\"&gt; &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt; &lt;i class=\"fa fa-flag-o\"&gt;&lt;/i&gt; &lt;span class=\"label label-danger\"&gt;9&lt;/span&gt; &lt;/a&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;li class=\"header\"&gt;You have 9 tasks&lt;/li&gt; &lt;li&gt; &lt;!-- inner menu: contains the actual data --&gt; &lt;ul class=\"menu\"&gt; &lt;li&gt;&lt;!-- Task item --&gt; &lt;a href=\"#\"&gt; &lt;h3&gt; Design some buttons &lt;small class=\"pull-right\"&gt;20%&lt;/small&gt; &lt;/h3&gt; &lt;div class=\"progress xs\"&gt; &lt;div class=\"progress-bar progress-bar-aqua\" style=\"width: 20%\" role=\"progressbar\" aria-valuenow=\"20\" aria-valuemin=\"0\" aria- valuemax=\"100\"&gt; &lt;span class=\"sr-only\"&gt;20% Complete&lt;/span&gt; &lt;/div&gt; &lt;/div&gt; &lt;/a&gt; &lt;/li&gt;&lt;!-- end task item --&gt; ... &lt;/ul&gt; &lt;/li&gt; &lt;li class=\"footer\"&gt; &lt;a href=\"#\"&gt;View all tasks&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;!-- User Account: style can be found in dropdown.less --&gt; &lt;li class=\"dropdown user user-menu\"&gt; &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt; &lt;img src=\"dist/img/user2-160x160.jpg\" class=\"user-image\" alt=\"User Image\"&gt; &lt;span class=\"hidden-xs\"&gt;Alexander Pierce&lt;/span&gt; &lt;/a&gt; &lt;ul class=\"dropdown-menu\"&gt; &lt;!-- User image --&gt; &lt;li class=\"user-header\"&gt; &lt;img src=\"dist/img/user2-160x160.jpg\" class=\"img-circle\" alt=\"User Image\"&gt; &lt;p&gt; Alexander Pierce - Web Developer &lt;small&gt;Member since Nov. 2012&lt;/small&gt; &lt;/p&gt; &lt;/li&gt; &lt;!-- Menu Body --&gt; &lt;li class=\"user-body\"&gt; &lt;div class=\"col-xs-4 text-center\"&gt; &lt;a href=\"#\"&gt;Followers&lt;/a&gt; &lt;/div&gt; &lt;div class=\"col-xs-4 text-center\"&gt; &lt;a href=\"#\"&gt;Sales&lt;/a&gt; &lt;/div&gt; &lt;div class=\"col-xs-4 text-center\"&gt; &lt;a href=\"#\"&gt;Friends&lt;/a&gt; &lt;/div&gt; &lt;/li&gt; &lt;!-- Menu Footer--&gt; &lt;li class=\"user-footer\"&gt; &lt;div class=\"pull-left\"&gt; &lt;a href=\"#\" class=\"btn btn-default btn-flat\"&gt;Profile&lt;/a&gt; &lt;/div&gt; &lt;div class=\"pull-right\"&gt; &lt;a href=\"#\" class=\"btn btn-default btn-flat\"&gt;Sign out&lt;/a&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/nav&gt;&lt;/header&gt; é¡¶éƒ¨å¯¼èˆªå¸ƒå±€ è¦ä½¿ç”¨æ­¤ä¸»æ ‡é¢˜è€Œä¸æ˜¯å¸¸è§„æ ‡é¢˜ï¼Œå¿…é¡»å°†è¯¥layout-top-navç±»æ·»åŠ åˆ°bodyæ ‡è®°ä¸­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;header class=\"main-header\"&gt; &lt;nav class=\"navbar navbar-static-top\"&gt; &lt;div class=\"container-fluid\"&gt; &lt;div class=\"navbar-header\"&gt; &lt;a href=\"../../index2.html\" class=\"navbar-brand\"&gt;&lt;b&gt;Admin&lt;/b&gt;LTE&lt;/a&gt; &lt;button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar-collapse\"&gt; &lt;i class=\"fa fa-bars\"&gt;&lt;/i&gt; &lt;/button&gt; &lt;/div&gt; &lt;!-- Collect the nav links, forms, and other content for toggling --&gt; &lt;div class=\"collapse navbar-collapse\" id=\"navbar-collapse\"&gt; &lt;ul class=\"nav navbar-nav\"&gt; &lt;li class=\"active\"&gt; &lt;a href=\"#\"&gt;Link &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt; &lt;li class=\"dropdown\"&gt; &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;Dropdown &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt; &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;One more separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;form class=\"navbar-form navbar-left\" role=\"search\"&gt; &lt;div class=\"form-group\"&gt; &lt;input type=\"text\" class=\"form-control\" id=\"navbar-search-input\" placeholder=\"Search\"&gt; &lt;/div&gt; &lt;/form&gt; &lt;ul class=\"nav navbar-nav navbar-right\"&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt; &lt;li class=\"dropdown\"&gt; &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;Dropdown &lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt; &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt; &lt;/div&gt;&lt;!-- /.container-fluid --&gt; &lt;/nav&gt; &lt;/header&gt; sidebar12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;div class=\"main-sidebar\"&gt; &lt;!-- Inner sidebar --&gt; &lt;div class=\"sidebar\"&gt; &lt;!-- user panel (Optional) --&gt; &lt;div class=\"user-panel\"&gt; &lt;div class=\"pull-left image\"&gt; &lt;img src=\"dist/img/user2-160x160.jpg\" class=\"img-circle\" alt=\"User Image\"&gt; &lt;/div&gt; &lt;div class=\"pull-left info\"&gt; &lt;p&gt;User Name&lt;/p&gt; &lt;a href=\"#\"&gt;&lt;i class=\"fa fa-circle text-success\"&gt;&lt;/i&gt; Online&lt;/a&gt; &lt;/div&gt; &lt;/div&gt;&lt;!-- /.user-panel --&gt; &lt;!-- Search Form (Optional) --&gt; &lt;form action=\"#\" method=\"get\" class=\"sidebar-form\"&gt; &lt;div class=\"input-group\"&gt; &lt;input type=\"text\" name=\"q\" class=\"form-control\" placeholder=\"Search...\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button type=\"submit\" name=\"search\" id=\"search-btn\" class=\"btn btn-flat\"&gt; &lt;i class=\"fa fa-search\"&gt;&lt;/i&gt; &lt;/button&gt; &lt;/span&gt; &lt;/div&gt; &lt;/form&gt;&lt;!-- /.sidebar-form --&gt; &lt;!-- Sidebar Menu --&gt; &lt;ul class=\"sidebar-menu\"&gt; &lt;li class=\"header\"&gt;HEADER&lt;/li&gt; &lt;!-- Optionally, you can add icons to the links --&gt; &lt;li class=\"active\"&gt;&lt;a href=\"#\"&gt;&lt;span&gt;Link&lt;/span&gt;&lt;/a&gt;&lt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;&lt;span&gt;Another Link&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; &lt;li class=\"treeview\"&gt; &lt;a href=\"#\"&gt;&lt;span&gt;Multilevel&lt;/span&gt; &lt;i class=\"fa fa-angle-left pull-right\"&gt;&lt;/i&gt;&lt;/a&gt; &lt;ul class=\"treeview-menu\"&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Link in level 2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Link in level 2&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt;&lt;!-- /.sidebar-menu --&gt; &lt;/div&gt;&lt;!-- /.sidebar --&gt;&lt;/div&gt;&lt;!-- /.main-sidebar --&gt; æ§åˆ¶è¾¹æ æ§åˆ¶ä¾§æ æ˜¯å³ä¾§æ ã€‚å®ƒå¯ä»¥ç”¨äºå¤šç§ç”¨é€”ï¼Œå¹¶ä¸”éå¸¸å®¹æ˜“åˆ›å»ºã€‚ä¾§è¾¹æ æœ‰ä¸¤ç§ä¸åŒçš„æ˜¾ç¤º/éšè—æ ·å¼ã€‚ç¬¬ä¸€ä¸ªå…è®¸ä¾§è¾¹æ åœ¨å†…å®¹ä¸Šæ»‘åŠ¨ã€‚ç¬¬äºŒä¸ªæ¨é€å†…å®¹ä¸ºä¾§è¾¹æ è…¾å‡ºç©ºé—´ã€‚å¯ä»¥é€šè¿‡Javascripté€‰é¡¹è®¾ç½®è¿™äº›æ–¹æ³•ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚ ä»¥ä¸‹ä»£ç åº”æ”¾åœ¨.wrapperdivä¸­ã€‚æˆ‘æ›´å–œæ¬¢æŠŠå®ƒæ”¾åœ¨é¡µè„šä¹‹åã€‚ 1234567&lt;!-- The Right Sidebar --&gt;&lt;aside class=\"control-sidebar control-sidebar-dark\"&gt;&lt;!-- Content of the sidebar goes here --&gt;&lt;/aside&gt;&lt;!-- The sidebar's background --&gt;&lt;!-- This div must placed right after the sidebar for it to work--&gt;&lt;div class=\"control-sidebar-bg\"&gt;&lt;/div&gt; 1234567&lt;!-- The Right Sidebar --&gt;&lt;aside class=\"control-sidebar control-sidebar-light\"&gt;&lt;!-- Content of the sidebar goes here --&gt;&lt;/aside&gt;&lt;!-- The sidebar's background --&gt;&lt;!-- This div must placed right after the sidebar for it to work--&gt;&lt;div class=\"control-sidebar-bg\"&gt;&lt;/div&gt; åˆ›å»ºä¾§è¾¹æ åï¼Œæ‚¨éœ€è¦ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®æ¥æ‰“å¼€/å…³é—­å®ƒã€‚é€šè¿‡å°†å±æ€§æ·»åŠ data-toggle=&quot;control-sidebar&quot;åˆ°ä»»ä½•æŒ‰é’®ï¼Œå®ƒå°†è‡ªåŠ¨å……å½“åˆ‡æ¢æŒ‰é’®ã€‚ åˆ‡æ¢æŒ‰é’®ç¤ºä¾‹ 1&lt;button class=\"btn btn-default\" data-toggle=\"control-sidebar\"&gt;Toggle Right Sidebar&lt;/button&gt; ä¿¡æ¯æ¡†ä¿¡æ¯æ¡†ç”¨äºæ˜¾ç¤ºç»Ÿè®¡ä»£ç æ®µã€‚æœ‰ä¸¤ç§ç±»å‹çš„ä¿¡æ¯æ¡†ã€‚ ç¬¬ä¸€ç±»ä¿¡æ¯æ¡† infobox æ ‡è®° 12345678&lt;div class=\"info-box\"&gt; &lt;!-- Apply any bg-* class to to the icon to color it --&gt; &lt;span class=\"info-box-icon bg-red\"&gt;&lt;i class=\"fa fa-star-o\"&gt;&lt;/i&gt;&lt;/span&gt; &lt;div class=\"info-box-content\"&gt; &lt;span class=\"info-box-text\"&gt;Likes&lt;/span&gt; &lt;span class=\"info-box-number\"&gt;93,139&lt;/span&gt; &lt;/div&gt;&lt;!-- /.info-box-content --&gt; &lt;/div&gt;&lt;!-- /.info-box --&gt; ç¬¬äºŒç±»ä¿¡æ¯æ¡† 123456789101112131415&lt;!-- Apply any bg-* class to to the info-box to color it --&gt; &lt;div class=\"info-box bg-red\"&gt; &lt;span class=\"info-box-icon\"&gt;&lt;i class=\"fa fa-comments-o\"&gt;&lt;/i&gt;&lt;/span&gt; &lt;div class=\"info-box-content\"&gt; &lt;span class=\"info-box-text\"&gt;Likes&lt;/span&gt; &lt;span class=\"info-box-number\"&gt;41,410&lt;/span&gt; &lt;!-- The progress section is optional --&gt; &lt;div class=\"progress\"&gt; &lt;div class=\"progress-bar\" style=\"width: 70%\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;span class=\"progress-description\"&gt; 70% Increase in 30 Days &lt;/span&gt; &lt;/div&gt;&lt;!-- /.info-box-content --&gt; &lt;/div&gt;&lt;!-- /.info-box --&gt; æ‚¨éœ€è¦æ›´æ”¹ä¸ºåœ¨è¿™äº›æ ·å¼ä¹‹é—´åˆ‡æ¢çš„å”¯ä¸€æ–¹æ³•æ˜¯æ›´æ”¹bg- ç±»çš„ä½ç½®ã€‚å¯¹äºç¬¬ä¸€ä¸ªæ ·å¼ï¼Œå°†ä»»ä½•bg- ç±»åº”ç”¨äºå›¾æ ‡æœ¬èº«ã€‚å¯¹äºå…¶ä»–æ ·å¼ï¼Œå°†bg- *ç±»åº”ç”¨äºinfo-box divã€‚ æ¡†æ¡†ç»„ä»¶æ˜¯æ•´ä¸ªæ¨¡æ¿ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„ç»„ä»¶ã€‚æ‚¨å¯ä»¥å°†å®ƒç”¨äºä»æ˜¾ç¤ºå›¾è¡¨åˆ°æ–‡æœ¬å—çš„ä»»ä½•å†…å®¹ã€‚å®ƒæœ‰è®¸å¤šä¸åŒçš„é£æ ¼ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢æ¢è®¨ã€‚ é»˜è®¤Boxæ ‡è®°12345678910111213141516&lt;div class =â€œboxâ€&gt; &lt;div class =â€œbox-header with-borderâ€&gt; &lt;h3 class =â€œbox-titleâ€&gt;é»˜è®¤æ¡†ç¤ºä¾‹&lt;/ h3&gt; &lt;div class =â€œbox-tools pull-rightâ€&gt; &lt;ï¼ - æŒ‰é’®ï¼Œæ ‡ç­¾å’Œè®¸å¤šå…¶ä»–ä¸œè¥¿éƒ½å¯ä»¥æ”¾åœ¨è¿™é‡Œï¼ - &gt; &lt;ï¼ - è¿™æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œä¾‹å¦‚ - &gt; &lt;span class =â€œlabel label-primaryâ€&gt;æ ‡ç­¾&lt;/ span&gt; &lt;/ div&gt; &lt;ï¼ - /.box-tools - &gt; &lt;/ div&gt; &lt;ï¼ - /.box-header - &gt; &lt;div class =â€œbox-bodyâ€&gt; ç›’å­çš„ä¸»ä½“ &lt;/ div&gt; &lt;ï¼ - /.box-body - &gt; &lt;div class =â€œbox-footerâ€&gt; ç›’å­çš„é¡µè„š &lt;/ div&gt; &lt;ï¼ - box-footer - &gt; &lt;/ div&gt; &lt;ï¼ - / .box - &gt; 123456&lt;div class =â€œbox box-defaultâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-primaryâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-infoâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-warningâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-successâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-dangerâ€&gt; ... &lt;/ div&gt; å®å¿ƒç›’å­Solid Boxesæ˜¯å±•ç¤ºç›’å­çš„å¦ä¸€ç§æ–¹å¼ã€‚åªéœ€å°†box-solidç±»æ·»åŠ åˆ°boxç»„ä»¶å³å¯åˆ›å»ºå®ƒä»¬ã€‚æ‚¨ä¹Ÿå¯ä»¥å°†å›ºå®šæ¡†ä¸ä¸Šä¸‹æ–‡ç±»ä¸€èµ·ä½¿ç”¨ã€‚ 123456&lt;div class =â€œbox box-solid box-defaultâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-solid box-primaryâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-solid box-infoâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-solid box-warningâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-solid box-successâ€&gt; ... &lt;/ div&gt; &lt;div class =â€œbox box-solid box-dangerâ€&gt; ... &lt;/ div&gt; ç›’å­å·¥å…·æ¡†å¯ä»¥åŒ…å«ç”¨äºéƒ¨ç½²ç‰¹å®šäº‹ä»¶æˆ–æä¾›ç®€å•ä¿¡æ¯çš„å·¥å…·ã€‚ä»¥ä¸‹ç¤ºä¾‹åœ¨æ¡†çš„æ ‡é¢˜ä¸­ä½¿ç”¨äº†å¤šä¸ªAdminLTEç»„ä»¶ã€‚ AdminLTE data-widgetå±æ€§æä¾›äº†å¯ä»¥æŠ˜å æˆ–åˆ é™¤çš„æ¡†ã€‚æŒ‰é’®æ”¾ç½®åœ¨ç›’å­å·¥å…·ä¸­ï¼Œç›’å­å·¥å…·æ”¾ç½®åœ¨ç›’å­æ ‡é¢˜ä¸­ã€‚ 1234&lt;ï¼ - è¿™å°†å¯¼è‡´å•å‡»æ—¶åˆ é™¤æ¡† - &gt;&lt;button class =â€œbtn btn-box-toolâ€data-widget =â€œremoveâ€data-toggle =â€œtooltipâ€title =â€œRemoveâ€&gt; &lt;i class =â€œfa fa-timesâ€&gt; &lt;/ i&gt; &lt;/ button &gt;&lt;ï¼ - è¿™å°†å¯¼è‡´å•å‡»æ¡†æ—¶æŠ˜å  - &gt;&lt;button class =â€œbtn btn-box-toolâ€data-widget =â€œcollapseâ€data-toggle =â€œtooltipâ€title =â€œCollapseâ€&gt; &lt;i class =â€œfa fa-minusâ€&gt; &lt;/ i&gt; &lt;/ button &gt; å¦‚æœåœ¨app.jsåŠ è½½ååœ¨æ–‡æ¡£ä¸­æ’å…¥äº†ä¸€ä¸ªæ¡†ï¼Œåˆ™å¿…é¡»é€šè¿‡è°ƒç”¨.activateBox()ä»¥ä¸‹æ–¹æ³•æ˜¾å¼æ¿€æ´»æŠ˜å /åˆ é™¤æŒ‰é’®ï¼š 123&lt;script&gt; $(\"#box-widget\").activateBox();&lt;/script&gt; Loading Statesè¦æ¨¡æ‹ŸåŠ è½½çŠ¶æ€ï¼Œåªéœ€å°†æ­¤ä»£ç æ”¾åœ¨.boxç»“æŸæ ‡è®°ä¹‹å‰ã€‚ 123&lt;div class=\"overlay\"&gt;&lt;i class=\"fa fa-refresh fa-spin\"&gt;&lt;/i&gt;&lt;/div&gt;","tags":[{"name":"adminlte","slug":"adminlte","permalink":"https://betgar.github.io/tags/adminlte/"}]},{"title":"AMDæœ€ä½³å®è·µ(requirejs)","date":"2018-08-03T09:00:00.000Z","path":"2018/08/03/AMD-best-practice/","text":"AMDæœ€ä½³å®è·µ(requirejs) ä¸€ä¸‹å†…å®¹å…¨éƒ¨æ¥è‡ªç½‘ç»œã€‚ AMDéƒ¨åˆ† é˜…è¯»è¿™éƒ¨åˆ†æ–‡ç« çš„å‰ææ˜¯ä½ å·²ç»ä½¿ç”¨è¿‡AMDï¼ˆrequirejsï¼‰ç­‰å¼‚æ­¥åŠ è½½åº“ã€‚ ç©è½¬AMDç³»åˆ— å†™åœ¨å‰é¢ è®¾è®¡æ€è·¯ åº”ç”¨å®è·µ AMD - Loader æ¨¡å—è§„åˆ’ æ¨¡å—åŒ–ç›®å½•è§„èŒƒ åŒ…ç»“æ„è§„èŒƒ æ¨¡å—å’ŒåŠ è½½å™¨è§„èŒƒ é¡¹ç›®ç›®å½•ç»“æ„è§„èŒƒ","tags":[{"name":"AMD","slug":"AMD","permalink":"https://betgar.github.io/tags/AMD/"},{"name":"requirejs","slug":"requirejs","permalink":"https://betgar.github.io/tags/requirejs/"}]},{"title":"egg.jså’Œnestjsä½¿ç”¨åœºæ™¯å¯¹æ¯”","date":"2018-08-02T10:00:00.000Z","path":"2018/08/02/eggjs-nestjs-usage-scenario-compare/","text":"egg.jså’Œnestjsä½¿ç”¨åœºæ™¯å¯¹æ¯”æé†’å¤§å®¶ï¼šæ³¨æ„æ–‡ç« çš„æ—¶æ•ˆæ€§ï¼Œæ¯•ç«Ÿä¸åŒçš„äº‹ä»¶èŠ‚ç‚¹ï¼Œæ¡†æ¶æˆç†Ÿåº¦ä¸åŒã€‚åˆ†äº«è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å¸Œæœ›èƒ½å¤Ÿè®©å¤§å®¶è®¤æ¸…æ¡†æ¶çš„å®šä½å’Œåº”å¯¹çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¡†æ¶æ²¡æœ‰å¥½åä¹‹åˆ†ï¼Œåªæœ‰æ˜¯å¦é€‚åˆè‡ªå·±ã€‚ åŸæ ‡é¢˜ï¼šå…³äºnodejs-webæ¡†æ¶çš„è°ƒç ” ä½œè€…ï¼šxingyuzhe æ—¥æœŸï¼š Feb 25, 2018 åŸæ–‡ï¼š https://github.com/xingyuzhe/blog/issues/1 ä»¥ä¸‹å†…å®¹å…¶å®æ˜¯è¡¥æ¼, ç®—æ˜¯å¯¹1æœˆä»½ä¸€ç‚¹å·¥ä½œçš„æ€»ç»“ã€‚ åŠ å…¥äº†æ–°å›¢é˜Ÿ, åˆæ¬¡æ¥è§¦, ç²—ç•¥çš„æŸ¥çœ‹äº†ä¸€äº›é¡¹ç›®(nodejs serverç«¯), å‘ç°å­˜åœ¨å‡ ä¸ªé—®é¢˜: å¯¹äºæ–°æˆç«‹çš„å›¢é˜Ÿï¼Œå­˜åœ¨ä»¥ä¸Šé—®é¢˜å¯ä»¥ç†è§£ï¼Œ æœ¬æ¬¡æ˜¯è®¨è®ºå’Œè§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ å¯¹äºé›†å›¢èŒƒå›´å†…è€Œè¨€ï¼ŒåŒç§æŠ€æœ¯å­˜åœ¨å¤šç§ä¸åŒè§„èŒƒå’Œæ¡†æ¶å¾ˆæ­£å¸¸, ä½†æ˜¯å¯¹äºä¸€ä¸ªå‡ åäººçš„å›¢é˜Ÿè€Œè¨€, èµ„æºæœ‰é™ï¼Œè¿˜æ˜¯é›†ä¸­åŠ›é‡ç»Ÿä¸€ä¸€ä¸‹æ•ˆç‡é«˜äº›, æœ‰é‰´äºæ­¤ï¼Œ è§‰å¾—åšä¸€ä¸ªç§å­é¡¹ç›®æ¯”è¾ƒåˆé€‚: ä¸€ä¸ªä¼ä¸šå®šåˆ¶æ¡†æ¶, å…±åŒç»´æŠ¤, åŒæ­¥æ›´æ–°, ä¿¡æ¯å…±äº«å’Œæ²‰æ·€æœ€ä½³å®è·µã€‚ è·Ÿé¢†å¯¼èŠäº†ä¸€ä¸‹ï¼Œ æ€»ç»“äº†ä¸€ä¸‹å½“å‰çŠ¶æ€å›¢é˜Ÿå¯¹äºè¿™å—å†…å®¹çš„ä¸€äº›ä¸»è§‚è¯‰æ±‚: æ¡†æ¶å®ç°å¤Ÿç®€å•, å›¢é˜Ÿèƒ½å…¨é¢æŒæ§, ä½é£é™©ã€‚ ç»™æ–°æ‰‹ä»åŸºç¡€å¼€å§‹å­¦ä¹ çš„æœºä¼š, å°±æ˜¯å¸Œæœ›é™¤äº†æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ä¹‹å¤–, å›¢é˜Ÿä¹Ÿèƒ½å¾—åˆ°æˆé•¿ã€‚ ä¸€ä¸ªä¼ä¸šåŸºç¡€æ¡†æ¶åº”æ»¡è¶³çš„åŸºæœ¬è¦æ±‚: çº¦æŸè§„èŒƒã€æ‰©å±•æœºåˆ¶ã€å®‰å…¨ã€é«˜æ•ˆä¸šåŠ¡å¼€å‘ æœ€ç»ˆè¿˜æ˜¯å¸Œæœ›èƒ½æ²‰æ·€å‡ºä¸€å¥—è‡ªå·±çš„è½®å­ æ ¹æ®ä¸Šé¢çš„è¦æ±‚, ç­›é€‰å‡ºäº†eggjså’Œnestjs2ä¸ªwebæ¡†æ¶, å…¶ä¸­nestjsæ˜¯å›¢é˜Ÿä¸€éƒ¨åˆ†åŒå­¦æ¯”è¾ƒå–œæ¬¢å’Œå°è¯•ä½¿ç”¨äº†çš„ã€‚ é¦–å…ˆä»å¤–å±‚ä¿¡æ¯åšäº›è°ƒæŸ¥ã€‚ æˆ‘é€šè¯»äº†eggjså’Œnestjsçš„æ–‡æ¡£ï¼ŒæŸ¥é˜…äº†ä¸€äº›èµ„æ–™, ç®€å•å¯¹æ¯”å¦‚ä¸‹: â€“ eggjs nestjs github stars 7014 4291 github forks 720 250 gitHub dependents 1591/305 0/0 npm search results 565 53+ github contributors 101 31 github core contributors 4(10+) 1(2+) github releases 49 19 github issues 86/1416 20/347 åŸºç¡€æ¡†æ¶ä¾èµ– koa2 express æ–‡æ¡£ ä¸šç•Œè‰¯å¿ƒ ä¸€èˆ¬ æ ¸å¿ƒåŸç† è½½å…¥-æŒ‚è½½ æ¨¡å—å®¹å™¨-ä¾èµ–æ³¨å…¥(é€šè¿‡è£…é¥°å™¨å’Œå…ƒæ•°æ®å®ç°) æ ¸å¿ƒç†å¿µ å¾®å†…æ ¸-æ’ä»¶æœºåˆ¶ ç»„ä»¶æ ‘-è£…é¥°å™¨-æµç¨‹æ§åˆ¶ eggjsçš„ç‰¹ç‚¹å’Œè§£å†³çš„ä¸»è¦é—®é¢˜: é€šè¿‡è½½å…¥ä»£ç -è‡ªåŠ¨æŒ‚è½½ä»£ç åˆ°å¯¹è±¡çš„æ–¹å¼è§£å†³äº†åˆ°å¤„å†™import/requireçš„é—®é¢˜, ä¸å†éœ€è¦æ‰‹åŠ¨ç»´æŠ¤æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³», æ ¸å¿ƒå°±æ˜¯ä¸€ä¸ªloader, è™½ç„¶å®˜æ–¹æ²¡æœ‰æåŠ, ä½†æ˜¯æœ¬äººå¼€ä¸‹è„‘æ´çŒœæµ‹, è¿™ä¸ªæ¨¡å—çš„å®ç°çµæ„Ÿæœ‰å¯èƒ½æ¥è‡ªäºåŸå¤´è‰å·²ç»ä¸€äººé«˜äº†çš„seajs, -_-, è¿™ç§æŒ‚è½½æ¨¡å¼å®ç°èµ·æ¥ç®€å•ç²—æš´ç›´æ¥é«˜æ•ˆ, ä½†æ˜¯ä¸€ä¸ªå°é—®é¢˜å°±æ˜¯åœ¨ä½¿ç”¨TSç¼–å†™ä»£ç çš„æ—¶å€™, ä¼šå½±å“ä¹¦å†™ä½“éªŒçš„æµç•…åº¦, æ¯•ç«Ÿä¸å¾ˆOOPã€‚ å¾®æ ¸å¿ƒ + æ’ä»¶æœºåˆ¶(è¿™ä¸ªç†å¿µå…¶å®ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä»£ç ç»„ç»‡çš„æ ¸å¿ƒæ‰‹æ®µ, æœ¬äººåœ¨ä»¥å‰å¼€å‘æ’­æ”¾å™¨å’ŒIMå®¢æˆ·ç«¯è¿™å—æ—¶æ„ŸåŒèº«å—), å¤§éƒ¨åˆ†åŠŸèƒ½é€šè¿‡æ’ä»¶å®ç°, ä»è€Œå‰¥ç¦»éæ ¸å¿ƒç”Ÿå‘½å‘¨æœŸåŠŸèƒ½ä»£ç , è¾¾åˆ°è§£è€¦/é™ä½æ€ç»´è´Ÿæ‹…çš„ç›®çš„; å¦å¤–ä¸€ç‚¹å°±æ˜¯è·¨æ¨¡å—APIè°ƒç”¨æ¯”è¾ƒè‡ªç”±æ²¡æœ‰é™åˆ¶, è¿™ä¸ªåœ°æ–¹å¸¦æ¥ä¾¿æ·çš„åŒæ—¶ä¹Ÿæœ‰å¯èƒ½éœ€è¦ä¸€å®šçº¦æŸã€‚ ç»Ÿä¸€çº¦æŸå’Œè§„èŒƒ, å¯¹å¼€å‘äººå‘˜å¼ºçº¦æŸ, ä¿è¯ä¸ä¼šå‡ºç°åƒäººåƒé¢çš„ä»£ç é£æ ¼å’Œè®¾è®¡ã€‚ ç§å­é¡¹ç›® + æ¸è¿›å¼å¼€å‘, å¯ä»¥æ²‰æ·€å‡ºè‡ªå·±çš„æ’ä»¶å’Œä¸šåŠ¡æ¡†æ¶ã€æœ€ä½³å®è·µ é’ˆå¯¹ä¸šåŠ¡ä¸­é‡åˆ°çš„å¸¸è§é—®é¢˜åŸºæœ¬éƒ½ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆ, æ’ä»¶ä¸°å¯Œ, é…å¥—é½å…¨ å†…éƒ¨å®ç°äº†è¿›ç¨‹é—´ç®¡ç†å’Œé€šä¿¡åŠŸèƒ½ æ–‡æ¡£å¯æ˜¯è¯´æ˜¯æ¯”è¾ƒç»†è‡´äº†, åŸºæœ¬æŠŠwebè¿™å—æ¶‰åŠåˆ°çš„ç‚¹éƒ½æ¶µç›–äº†, ä»…ä»…é€šè¯»æ–‡æ¡£å¯¹æ–°æ‰‹è€Œè¨€éƒ½ä¼šæœ‰ä¸å°‘æ”¶è· æ ¸å¿ƒå¼€å‘è€…è¾ƒå¤š, å±äºå›¢é˜Ÿé¡¹ç›®, æ•´ä½“çœ‹æ¥æ¯”è¾ƒä¸¥è°¨ æ²‰æ·€æ—¶é—´è¾ƒé•¿, æ­£å¼å‘ç‰ˆ2å¹´, å®é™…å‘å±•äº†4å¹´ æ˜ç¡®å®šä¹‰äº†agentå’Œappæ¨¡å¼, ä¹Ÿå®ç°äº†scheduleåŠŸèƒ½ nestjsçš„ç‰¹ç‚¹å’Œè§£å†³çš„ä¸»è¦é—®é¢˜: é€šè¿‡æ¨¡å—å®¹å™¨-ä¾èµ–æ³¨å…¥ç»´æŠ¤ç»„ä»¶æ ‘çš„æ¨¡å¼è§£å†³äº†åˆ°å¤„å†™import/requireçš„é—®é¢˜, ä¸å†éœ€è¦æ‰‹åŠ¨ç»´æŠ¤æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³», å¦å¤–ç¼–ç æ–¹å¼ä¸javaååˆ†ç›¸ä¼¼ã€‚ ç»„ä»¶æ ‘å®¹å™¨æ¨¡å¼ä¹Ÿè¾¾åˆ°äº†è§£è€¦æ•ˆæœ, å®ç°æ–¹å¼ä¸Šå¾ˆå¤§ç¨‹åº¦ä¸Šå—angular-moduleå½±å“, ä½†æ˜¯éœ€è¦æŒ‡å®šèŠ‚ç‚¹componentçš„ä¾èµ–å…³ç³», è·¨æ¨¡å—è°ƒç”¨ä¸¥æ ¼ä¾èµ–äºå£°æ˜. å…¶å®è¿™å—åŠŸèƒ½githubæœ‰ç‹¬ç«‹çš„é¡¹ç›®ä¸“åšè¿™ä¸ªä¸œè¥¿, ä¾‹å¦‚: InversifyJS | bottlejs, nestjs è‡ªå·±å®ç°äº†è¿™ä¸ªæ¨¡å—ã€‚ ç»Ÿä¸€çº¦æŸå’Œè§„èŒƒ, å¯¹å¼€å‘äººå‘˜å¼ºçº¦æŸ å¤§é‡ä½¿ç”¨è£…é¥°å™¨, è¿™ä¸ªæœªæ”¯æŒçš„ç‰¹æ€§éœ€è¦ç¼–è¯‘, å¯¹ä»£ç é˜…è¯»ä¸Šå¯èƒ½ä¼šæé«˜ä¸€äº›éš¾åº¦ æµç¨‹æ§åˆ¶ä¸Šæ¯”è¾ƒç»†è‡´, æå‡ºäº†filterã€pipeã€guardã€interceptorè¿™äº›æ˜ç¡®çš„æ¦‚å¿µ, è™½ç„¶è¿™äº›å·¥ä½œåœ¨æ­£å¸¸å¼€å‘æ—¶ä¹Ÿä¼šåš, ä½†æ˜¯æ˜ç¡®æå‡ºæ¥å¹¶åˆ¶å®šè§„èŒƒè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ æ˜ç¡®äº†Exception Layerçš„æ¦‚å¿µ é»˜è®¤ä½¿ç”¨/æ¨èTSå¼€å‘ è‡ªå¸¦å¾®æœåŠ¡å®ç° è‡ªå¸¦swaggeræ¥å£æ–‡æ¡£ç”ŸæˆåŠŸèƒ½ æ ¸å¿ƒå¼€å‘åŸºæœ¬å°±ä½œè€…ä¸€äºº, å±äºä¸ªäººé¡¹ç›®, æäº¤è®°å½•æ¯”è¾ƒéš¾çœ‹, å‰æœŸçš„æäº¤éå¸¸éšä¾¿, åˆ°åæœŸæ‰æ…¢æ…¢æ”¹å–„ 2017å¹´1æœˆç«‹é¡¹, 2017å¹´5æœˆå‘å¸ƒç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬, å°šéœ€æ—¶æ—¥å°è¯ ä»ä¸Šè¿°æƒ…å†µæ¥çœ‹, 2ä¸ªæ¡†æ¶éƒ½åœ¨123è¿™å‡ é¡¹åšäº†å·¥ä½œ, å®Œæˆäº†ä¸€ä¸ªæ¡†æ¶æ‰€åº”å…·å¤‡çš„åŸºæœ¬è¯‰æ±‚; æ€»ä½“ä¸Šçœ‹eggjsæ›´åŠ æˆç†Ÿå’Œå…¨é¢, é…å¥—/ç”Ÿæ€ç›¸å¯¹å®Œå–„çš„å¤š, ä½é£é™©; nestjsåˆ™æ¯”è¾ƒé’æ¶©å’Œå•ä¸€, ä½†æ˜¯åœ¨ç»„ä»¶æ ‘ã€æµç¨‹æ§åˆ¶ã€é”™è¯¯å±‚çº§å¤„ç†ä¸Šæœ‰è‡ªå·±çš„ç‰¹è‰², ç†å¿µä¸Šæ›´åŠ OOP,å­¦ä¹ å¹¶å¸æ”¶è¿™äº›ç†å¿µæ˜¯å¾ˆå¯å–çš„, ä½†æš‚æ—¶ä¸å»ºè®®åœ¨æ ¸å¿ƒäº§å“çº¿ä¸ŠæŠ•å…¥ä½¿ç”¨ã€‚ eggjsè¯¦ç»†é˜…è¯»äº†æ ¸å¿ƒç›¸å…³ä»£ç , ç²—ç•¥é˜…è¯»äº†clusterç­‰ä¸€äº›æ¨¡å—å’Œæ’ä»¶çš„ä»£ç , ä»£ç è¯»èµ·æ¥æ€»ä½“æ¯”è¾ƒæµç•…, å‘ç°æ¡†æ¶çš„æ ¸å¿ƒå®ç°éå¸¸ç®€å•æ˜äº†: æ¡†æ¶åŸºç¡€ä¾èµ–ä¸€ä¸ªéå¸¸ç‹¬ç«‹çš„loaderæ¨¡å—, åŠŸèƒ½å°±æ˜¯åŠ è½½ä»£ç æ–‡ä»¶å’ŒæŒ‚è½½å‡½æ•°åˆ°æŒ‡å®šå¯¹è±¡ã€‚ æ¡†æ¶æœ¬èº«æ ¸å¿ƒç±»åªæœ‰6ä¸ª: koaæœ¬èº«çš„application, context, response, request, eggè‡ªèº«æ–°å¢çš„controller, service è¿™2ä¸ªç±», åç»­æ‰€æœ‰çš„æŒ‚è½½åŠ¨ä½œéƒ½åœ¨è¿™å‡ ä¸ªç±»ä¸Šé¢è¿›è¡Œ æ¡†æ¶æ˜ç¡®äº†app, framework, plugin3ä¸ªæ¦‚å¿µ, ä¾èµ–æ–¹å¼å¤§æ¦‚æ˜¯è¿™æ ·: æ¡†æ¶å¯åŠ¨çš„æ ¸å¿ƒæµç¨‹ä¸»è¦æ˜¯è¿™æ ·: ç”±äºeggjsè‡ªå·±å®ç°äº†cluster, è‡ªå¸¦è¿›ç¨‹ç®¡ç†å’Œè¿›ç¨‹é—´é€šä¿¡åŠŸèƒ½, æ‰€ä»¥eggè‡ªèº«éƒ¨ç½²æ—¶å¹¶ä¸éœ€è¦pm2è¿™ä¸ªå·¥å…·, å®˜æ–¹æ–‡æ¡£ä¸Šä¹Ÿå¯¹æ­¤åšäº†è§£é‡Šã€‚ä¸è¿‡ç”±äºè¿™å—å†…å®¹çš„å¼•å…¥(clusterè¿˜æ¶‰åŠåˆ°scheduleã€socketç­‰åŠŸèƒ½)ï¼Œç»™æ¡†æ¶æœ¬èº«å¸¦æ¥äº†å¤§é‡é¢å¤–çš„ä»£ç å’Œé€»è¾‘, æ€»ä½“æå‡äº†æ¡†æ¶çš„å¤æ‚åº¦ã€‚ ä½†æ˜¯æœ‰äº›æ—¶å€™ç”±äºæŸäº›åŸå› å¹¶ä¸å¸Œæœ›ç›´æ¥ä½¿ç”¨æ¡†æ¶æä¾›çš„clusterè§£å†³æ–¹æ¡ˆ, å¦å¤–æˆ‘æŸ¥çœ‹äº†ä¸‹pm2çš„API, ä¹Ÿæ˜¯æœ‰è¿›ç¨‹é—´é€šä¿¡çš„APIçš„, å½“ç„¶ç”¨èµ·æ¥å¯èƒ½æ²¡æœ‰è‡ªå®šä¹‰å®ç°æ—¶é‚£æ ·è‡ªç”±, ä¹Ÿå°šæœªå¬è¯´è¯¥APIæœ‰è¢«å¹¿æ³›ä½¿ç”¨è¿‡, ä¸è¿‡, clusterç›¸å…³çš„å†…å®¹èƒ½å¦ä½œä¸ºä¸€ä¸ªæ‰©å±•åŒ…, è€Œä¸æ˜¯å¼ºè€¦åˆè¿›æ¡†æ¶æ ¸å¿ƒæµç¨‹ä¸­? è¿™æ ·æ¡†æ¶æœ¬èº«æ›´åŠ ç®€å•çº¯æ´, æˆ–è€…æ›´å®¹æ˜“è¢«æ¥å—ä¸€äº›? ä¸ºæ­¤å°è¯•æŠ½ç¦»äº†eggjsçš„æ ¸å¿ƒä»£ç , ç›®æ ‡æ˜¯ä»…ä¿ç•™æœ€æœ€æ ¸å¿ƒçš„ä»£ç (ç§»é™¤clusterç­‰å‘¨è¾¹ä»£ç ), å…·å¤‡eggçš„æ‰©å±•æœºåˆ¶å’Œèƒ½æ­£å¸¸ç›´æ¥ä½¿ç”¨eggjsçš„å‘¨è¾¹æ’ä»¶, ç»“æœæœ€ååªéœ€è¦å‡ ç™¾è¡Œä»£ç , å¾ˆå°‘å‡ ä¸ªæ–‡ä»¶å³å¯å®Œæˆã€‚åç»­åœ¨æ­¤åŸºç¡€ä¸Šæ•´ç†äº†ä¸€ä¸ªä¸Šå±‚æ¡†æ¶, é¢„æƒ³ä½œä¸ºä¸šåŠ¡é¡¹ç›®çš„åŸºç¡€æ¡†æ¶ä½¿ç”¨ï¼Œä¸»è¦æ¶‰åŠä»¥ä¸‹ä¸€äº›æ–¹é¢: æŠ½ç¦»eggjsçš„æ ¸å¿ƒä»£ç , ä»…ä¿ç•™å…¶æ’ä»¶æœºåˆ¶å’Œå¯¹åº”çš„çº¦æŸè§„èŒƒ é›†æˆå¸¸ç”¨æ‰©å±•å‡½æ•°ã€ä¸­é—´ä»¶ã€æ’ä»¶ é›†æˆå¤šèŠ‚ç‚¹/è¿›ç¨‹ä¸‹æ¶ˆæ¯æ¨é€è§£å†³æ–¹æ¡ˆç¤ºä¾‹ é›†æˆscheduleå®šæ—¶ä»»åŠ¡æ¨¡å— ä¹‹åèŠ±äº†ç‚¹æ—¶é—´ç”¨è¿™ä¸ªä¸Šå±‚æ¡†æ¶å¼€å‘äº†ä¸€ä¸ªæŠ½å¥–å°é¡¹ç›®, å¼€å‘ä½“éªŒè¿˜ç®—æµç•…, è™½è¯´æ˜¯è‰é‡çº§é¡¹ç›®, ä¸è¿‡ä¹Ÿæ˜¯äº”è„ä¿±å…¨, ä½œä¸ºexampleè¿˜æŒºé€‚åˆã€‚ nestjs ç²—ç•¥æŸ¥çœ‹äº†ä¸‹nestjsçš„æºç , nestjsçš„æ ¸å¿ƒå…¶å®å°±æ˜¯ä¸€ä¸ªIoCæ¨¡å—ç®¡ç†å®¹å™¨çš„å®ç°, è¿™å—å†…å®¹çš„é€»è¾‘å®ç°ä½œè€…å¤„ç†çš„è¿˜æ˜¯ç›¸å¯¹å¤æ‚çš„å¤š, è¿™é‡Œåæ§½ä¸‹ä½œè€…çš„ä»£ç ç»„ç»‡æ–¹å¼å’Œç•¥æ˜¾éšæ„çš„æ³¨é‡Šå¤§é‡çš„æ¥å£å¼•ç”¨å’Œç³Ÿç³•çš„å†å²æäº¤è®°å½•â€¦ï¼ŒçœŸæ˜¯é¢å¤–æé«˜äº†é˜…è¯»çš„éš¾åº¦. TypeScriptçš„åŠ æŒå’Œä½œè€…æœ¬äººçš„å…‰ç¯ä¹Ÿä¸èƒ½é˜»æŒ¡è¿™ä¸€ç‚¹ã€‚è¨€å½’æ­£ä¼ , è¿™é‡Œè¯´ä¸‹å®ƒçš„æ ¸å¿ƒåŸç†å’Œæµç¨‹ã€‚ è¦æƒ³ç†è§£nestjsçš„æºç å…ˆè¦ç†è§£å’ŒæŒæ¡ä»¥ä¸‹çŸ¥è¯†: ES6çš„proxyï¼Œreflect TypeScriptçš„decorator inversion of control (IoC)çš„åŸºæœ¬æ¦‚å¿µ ä¸€å®šTypeScriptåŸºç¡€. å¦‚ä½•é€šè¿‡decoratorå’Œå…ƒæ•°æ®å®ç°ä¾èµ–æ³¨å…¥ containerç±»: ç”¨äºå­˜å‚¨æ‰€æœ‰æ¨¡å— scannerç±»: é€’å½’æå–å‡ºæ‰€æœ‰æ¨¡å—å¹¶å­˜å‚¨åˆ°å®¹å™¨ä¸­; æå–å‡ºæ¨¡å—é—´çš„å…³è”å…³ç³»å’Œæ¨¡å—è‡ªèº«çš„å„ç§ç±»ä»¥åŠå†…éƒ¨è”ç³»ï¼Œå¹¶å­˜å‚¨åˆ°æ¨¡å—ä¸­; moduleç±»: å­˜å‚¨è‡ªèº«çš„å…³è”æ¨¡å—ã€ç»„ä»¶ã€å¯æ³¨å…¥ç±»ã€æ§åˆ¶å™¨ç±» injectorç±»: ä¾èµ–æ³¨å…¥çš„æ ¸å¿ƒç¯èŠ‚, åœ¨æ‰€æœ‰æ¨¡å—çš„å†…å®¹å’Œå…³ç³»éƒ½è¢«æ‰«æå‡ºå, æ¥åˆ›å»ºå®ä¾‹, instanceLoaderç±»: ä½¿ç”¨Injectoræ¥åŠ è½½æ¨¡å—çš„å„ç§å®ä¾‹, è¿™ä¸ªè¿‡ç¨‹å¾ˆå¤æ‚, ä¼´éšé€’å½’å’Œå„ç§åˆ¤æ–­ è¿™ä¸ªIoCå®¹å™¨å®ç°çš„æ ¸å¿ƒæµç¨‹æ˜¯è¿™æ ·:scanneræ‰«ææ‰€æœ‰moduleå¹¶æå–å…³ç³»å­˜å…¥module-&gt;moduleå­˜å…¥ container-&gt; injectoråˆ›å»ºå®ä¾‹(ä¾èµ–æ³¨å…¥)-&gt; instanceLoaderåŠ è½½å®ä¾‹ æˆ‘ä»¬å†æ‹¿nestjså®ç°ä¸Šé¢eggjsç‰ˆæœ¬lotteryçš„ä¾‹å­, å¤§æ¦‚æ˜¯è¿™æ ·: ç»“åˆæºç å’Œå®é™…å¼€å‘ä½“éªŒæ¥è¯´: eggjsæ¡†æ¶æœ¬èº«çš„æ¨¡å—ç®¡ç†(æ‰©å±•æœºåˆ¶)éå¸¸ç®€å•, å¤æ‚åº¦ä¸»è¦åœ¨äºclusterè¿™å—å†…å®¹å’Œä¸ºæ­¤é…å¥—çš„å‘¨è¾¹è®¾æ–½(å‘½ä»¤è¡Œå·¥å…·ã€è°ƒè¯•å·¥å…·)ï¼Œä½†æ˜¯è¿™ä¸ªå¤æ‚åº¦æ˜¯è„±ç¦»äºæ ¸å¿ƒä¹‹å¤–çš„ä¸œè¥¿ã€‚ nestjsçš„å¤æ‚åº¦ä¸»è¦åœ¨äºIoCæ¨¡å—ç®¡ç†å™¨è¿™å—çš„å®ç°ä¸Š, å®é™…ä¸Šè¿™ä¸ªä¸œè¥¿ç†è®ºä¸Šå¯ä»¥ç‹¬ç«‹å‡ºæ¥, ä»¥æ­¤é™ä½æ¡†æ¶æœ¬èº«é€»è¾‘çš„å¤æ‚åº¦ã€‚ ä»æ€»ä½“ä¸Šè®², eggjsç›¸å¯¹æˆç†Ÿ, æ›´è´´åˆå®é™…å¼€å‘éœ€æ±‚ã€‚ nestjsçš„ä¼˜åŠ¿å°±æ˜¯åœ¨ä¸€äº›ç»†èŠ‚ä¸Šçš„çº¦æŸå’Œæ§åˆ¶ä»¥åŠç†å¿µä¸Šçš„æ–°é¢–(ä»…ç›¸å¯¹node-webæ¡†æ¶è€Œè¨€), ä½†æ˜¯è¿™äº›å¹¶ä¸æ˜¯æ ¸å¿ƒè¯‰æ±‚ã€‚ å¦å¤–eggjså›¢é˜Ÿåšçš„å·¥ä½œå†…å®¹ç›¸å¯¹äºnestjsè€Œè¨€ç›¸å½“çš„å¤š, è¿™äº›ä¸äººåŠ›ã€æ—¶é—´èµ„æºçš„æŠ•å…¥æ˜¯åˆ†ä¸å¼€çš„ã€‚ æœ€å, å¯¹äºæƒ³è¦çš„æ–°æ¡†æ¶çš„å¤„ç†ç»“è®ºå·²ç»æœ‰äº†: 1 ç¤¾åŒºæ¨¡å¼(èŠ‚çœèµ„æº) ç›´æ¥åœ¨eggjsåŸºç¡€ä¸Šåšä¸€ä¸ªä¸Šå±‚æ¡†æ¶, å¸æ”¶nestjsçš„ä¸€äº›ä¼˜ç‚¹, ä½œä¸ºæ’ä»¶/æ‰©å±•å†…å®¹å»å®Œå–„æ¡†æ¶æœ¬èº«. 2 é€ è½®å­æ¨¡å¼ eggjsæ’ä»¶æœºåˆ¶ + nestjsæµç¨‹æ§åˆ¶ + componentæ¨¡å¼(å¯é€‰) =&gt; æ–°è½®å­ 3 æ‰€åº”å…·å¤‡çš„ç‰¹æ€§ çº¦æŸè§„èŒƒ æ²‰æ·€/æ‰©å±•æ¨¡å¼ æ¨¡å—ä¾èµ–ç®¡ç† é›†æˆtypescriptå¼€å‘ç¯å¢ƒ é›†æˆAPIæ–‡æ¡£è¾“å‡ºæ–¹æ¡ˆ ç¯å¢ƒé…ç½® å¤šèŠ‚ç‚¹/clusterè§£å†³æ–¹æ¡ˆ socket.io schedule é›†æˆå¸¸ç”¨æ’ä»¶åŠŸèƒ½ logger cookie session security i18n redis sequelize multipart oauth onerror passport view role crypto å®šä¹‰æ§åˆ¶æµ/æ•°æ®æµçº¦æŸè§„èŒƒ schema pipe interceptor guard migration å¾®æœåŠ¡ é”™è¯¯åˆ†çº§ ç›‘æ§ æµ‹è¯•ç”¨ä¾‹/ä»£ç è¦†ç›–ç‡ è°ƒè¯• å‹åŠ›æµ‹è¯• è¡¥å……:éšç€å„ç§å·¥å…·çš„å‘å±•, åŠ ä¸Šeggjsä½¿ç”¨ä¹Ÿæœ‰ä¸€æ®µæ—¶æ—¥ï¼Œæœ€åˆä¸€äº›æ¨¡ç³Šçš„é¢„æ„Ÿå˜å¾—æ¸…æ™°ï¼š1 eggå†…ç½®clusteræ¨¡å¼å¸¦æ¥çš„é¢å¤–éº»çƒ¦å¤ªå¤š, ç°åœ¨å„ç§é…å¥—å·¥å…·é€æ¸å®Œå–„ï¼Œ è¿™ä¸ªåŠŸèƒ½å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ 2 eggæ¨¡å—éš”ç¦»åº¦ä¸å¤Ÿä½†çŸ›ç›¾çš„æ˜¯æœ‰æ—¶å€™åˆæœ‰é™åˆ¶, ç®€å•çš„è¯´å°±æ˜¯ä»£ç ç»„ç»‡æ¨¡å¼ä¸Šä½œä¸ºæ¡†æ¶ä¸å¤Ÿå¥½, éœ€è¦è‡ªè¡Œå®šåˆ¶ä¸Šå±‚è§„èŒƒ; eggçš„æ˜¯pluginæ¨¡å¼, ç›¸å¯¹äºnestçš„componentæ¨¡å¼è¿˜æ˜¯ä¸å¤Ÿç”¨ï¼› 3 eggçš„tså¼€å‘çš„æµç•…åº¦å·®é‚£ä¹ˆä¸€ç‚¹ 4 å®é™…çš„é¡¹ç›®, éœ€è¦å„ç§é…å¥—è®¾æ–½ã€å·¥å…·ã€ç³»ç»Ÿçš„åä½œè”åˆï¼Œæ¡†æ¶åªæ˜¯ä¸€ä¸ªç»„æˆéƒ¨åˆ†, å°±åº”è¯¥åªåšå®ƒåº”è¯¥åšçš„äº‹å°±å¯ä»¥äº† å„æœ‰ä¼˜åŠ£, è¯‰æ±‚ä¸ä¸€æ ·, é€‰æ‹©å°±ä¸ä¸€æ ·:1 eggjs: çŸ­å¹³å¿«ç¨³ï¼Œä¸Šæ‰‹æå¿«, æ–‡æ¡£å®Œå–„ï¼Œé…å¥—é½å…¨, èƒ½æå¤§ç¼©çŸ­å·¥æœŸã€‚2 nestjs: æœ‰ç‚¹è¿½æ±‚, å¤æ‚åº¦é«˜çš„åä½œé¡¹ç›®, æ ¸å¿ƒè¯‰æ±‚æ˜¯ä»£ç ç»„ç»‡æ¨¡å¼çš„ ä¹‹å‰eggå¾ˆå¥½çš„æ»¡è¶³äº†æˆ‘ä»¬çš„è¯‰æ±‚, ä½†æ˜¯ä¸‹ä¸€ä¸ªé¡¹ç›®, ä¼šè€ƒè™‘ä½¿ç”¨nestjsæˆ–è€…è‡ªè¡Œå¼€å‘æ¡†æ¶(è¶³å¤Ÿé—²çš„è¯)ã€‚ eggå®˜æ–¹ç»´æŠ¤è€…atian25çš„è¯„è®ºï¼šç‚¹å‡»è¯¦è§ è¡¥å……ä¸‹å‡ ç‚¹ï¼š Cluster é‡Œé¢å¹¶æ²¡æœ‰ schedule Socket é‚£ä¸ªæ˜¯ä¸ºäº†å®ç°é«˜çº§çš„ IPC Cluster è¿˜æ˜¯å¾ˆå»ºè®®ä½¿ç”¨çš„ï¼Œå¦‚æœæœ‰ä»€ä¹ˆç‰¹æ®Šçš„å®šåˆ¶éœ€æ±‚ï¼Œä½•ä¸å¦‚æä¸‹ RFC/ISSUE å¤§å®¶è®¨è®ºä¸‹ egg-core + egg-cluster æ‰æˆä¸º eggï¼Œä½ è¦æ˜¯æƒ³å®šåˆ¶ï¼Œå¯ä»¥ç±»ä¼¼ egg-core + my-cluster(è™½ç„¶ä¸å»ºè®®) æ¡†æ¶å¤æ‚åº¦å…¶å®åè€Œæ˜¯é™ä½äº†ï¼Œå› ä¸º PM2 çš„ä»£ç æ¯” egg-cluster å¤æ‚å¤šäº† Egg çš„å®šä½æ˜¯æ¡†æ¶çš„æ¡†æ¶ï¼Œè·Ÿ thinkjs/sails/nest è¿™äº›æ˜¯æ²¡æ³•ç›´æ¥å¯¹æ¯”çš„ï¼Œå› ä¸ºä¸æ˜¯ä¸€ä¸ªå±‚é¢çš„æ¦‚å¿µã€‚å°±åƒä½ åªèƒ½å¯¹æ¯” Express å’Œ Koaï¼Œè€Œä¸èƒ½å¯¹æ¯” nest å’Œ Koaï¼Œå› ä¸º nest æ˜¯åœ¨ Express ä¹‹ä¸Šçš„å°è£…ã€‚ åŸºäº Egg å°è£…çš„é’ˆå¯¹æŸä¸ªé¢†åŸŸçš„ä¸Šå±‚æ¡†æ¶ï¼Œæ‰èƒ½å¯¹æ¯”ã€‚è­¬å¦‚å®Œå…¨å¯ä»¥ç”¨å®˜æ–¹çš„ TS æ–¹æ¡ˆï¼Œå†å°è£…é›†æˆå‡ ä¸ªè£…é¥°å™¨ï¼Œæˆä¸ºä¸€ä¸ªä¸Šå±‚æ¡†æ¶ã€‚å°±å¯ä»¥æ‹¿æ¥å¯¹æ¯”äº†ã€‚ ç›¸å…³èµ„æ–™Egg &amp; Node.js ä»å°å·¥åŠèµ°å‘ä¼ä¸šçº§å¼€å‘ é€‰æ‹©JavaScriptå¼€æºåº“æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘è¿™äº›é—®é¢˜ 12ä¸ªå› ç´ ","tags":[{"name":"fe","slug":"fe","permalink":"https://betgar.github.io/tags/fe/"}]},{"title":"è‡ªé€‚åº”å…¨èƒŒæ™¯å›¾ç‰‡å¸ƒå±€","date":"2018-07-26T13:30:00.000Z","path":"2018/07/26/perfect-full-page-background-image/","text":"è‡ªé€‚åº”å…¨èƒŒæ™¯å›¾ç‰‡å¸ƒå±€ åŸæ–‡åœ¨è¿™é‡Œ å®ä¾‹1234567891011html &#123; height: auto; min-height: 100%; margin: 0; padding: 0; background: url(http://desk.fd.zol-img.com.cn/t_s1366x768c5/g5/M00/01/03/ChMkJ1or0MGIGULYABCo5rcHl4AAAi_rgHdSLYAEKj-970.jpg?downfile=1532612079420.jpg) no-repeat center center fixed; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover;&#125; 123","tags":[{"name":"layout","slug":"layout","permalink":"https://betgar.github.io/tags/layout/"}]},{"title":"Bootstrap-validatorçš„ä½¿ç”¨","date":"2018-07-25T12:00:00.000Z","path":"2018/07/25/the-docs-of-bootstrap-validator/","text":"Bootstrap-validatorçš„ä½¿ç”¨ ç¿»è¯‘å®˜æ–¹çš„æ–‡æ¡£ã€‚ è¿™ä¸ªæ’ä»¶éµå¾ªBootstrapæ ¸å¿ƒjQueryæ’ä»¶æå‡ºçš„çº¦å®šï¼Œæ‰€ä»¥ä¸€å®šè¦æ£€æŸ¥è¿™äº›æ’ä»¶ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£è¿™ä¸ªæ’ä»¶çš„ç›®æ ‡å’Œè®¾è®¡ã€‚ ä¾‹å­ ä½¿ç”¨è¿™ä¸ªç®€å•çš„æ’ä»¶ä¸ºè¡¨å•æ·»åŠ éªŒè¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&lt;form data-toggle=\"validator\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputName\" class=\"control-label\"&gt;Name&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputName\" placeholder=\"Cina Saffary\" required&gt; &lt;/div&gt; &lt;div class=\"form-group has-feedback\"&gt; &lt;label for=\"inputTwitter\" class=\"control-label\"&gt;Twitter&lt;/label&gt; &lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;@&lt;/span&gt; &lt;input type=\"text\" pattern=\"^[_A-z0-9]&#123;1,&#125;$\" maxlength=\"15\" class=\"form-control\" id=\"inputTwitter\" placeholder=\"1000hz\" required&gt; &lt;/div&gt; &lt;span class=\"glyphicon form-control-feedback\" aria-hidden=\"true\"&gt;&lt;/span&gt; &lt;div class=\"help-block with-errors\"&gt;Hey look, this one has feedback icons!&lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputEmail\" class=\"control-label\"&gt;Email&lt;/label&gt; &lt;input type=\"email\" class=\"form-control\" id=\"inputEmail\" placeholder=\"Email\" data-error=\"Bruh, that email address is invalid\" required&gt; &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputPassword\" class=\"control-label\"&gt;Password&lt;/label&gt; &lt;div class=\"form-inline row\"&gt; &lt;div class=\"form-group col-sm-6\"&gt; &lt;input type=\"password\" data-minlength=\"6\" class=\"form-control\" id=\"inputPassword\" placeholder=\"Password\" required&gt; &lt;div class=\"help-block\"&gt;Minimum of 6 characters&lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group col-sm-6\"&gt; &lt;input type=\"password\" class=\"form-control\" id=\"inputPasswordConfirm\" data-match=\"#inputPassword\" data-match-error=\"Whoops, these don't match\" placeholder=\"Confirm\" required&gt; &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"underwear\" required&gt; Boxers &lt;/label&gt; &lt;/div&gt; &lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"underwear\" required&gt; Briefs &lt;/label&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" id=\"terms\" data-error=\"Before you wreck yourself\" required&gt; Check yourself &lt;/label&gt; &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Submit&lt;/button&gt; &lt;/div&gt;&lt;/form&gt; ç”¨æ³• å¯ä»¥é€šè¿‡data-apiæˆ–JavaScriptåœ¨æ ‡è®°ä¸­å¯ç”¨è¡¨å•éªŒè¯ã€‚é€šè¿‡æ·»åŠ data-toggle=&quot;validator&quot;åˆ°è¡¨å•å…ƒç´ è‡ªåŠ¨å¯ç”¨è¡¨å•éªŒè¯ã€‚ 123&lt;form role=\"form\" data-toggle=\"validator\"&gt; ...&lt;/form&gt; æˆ–è€…é€šè¿‡JavaScriptæ¿€æ´»éªŒè¯ï¼š 1$('#myForm').validator() æ ‡è®°æŒ‰ç…§Bootstrapçš„ç¤ºä¾‹è¿›è¡Œé€‚å½“çš„è¡¨å•æ ‡è®°ã€‚é‡è¦çš„æ˜¯æ¯ä¸ªè¾“å…¥å­—æ®µéƒ½åœ¨å…¶è‡ªå·±çš„å•ç‹¬.form-groupå®¹å™¨ä¸­ï¼Œä»¥ä¾¿æ­£ç¡®æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚ éªŒè¯è§„åˆ™é€šè¿‡ä»¥ä¸‹æ ‡å‡†HTML5å±æ€§åœ¨è¡¨å•è¾“å…¥ä¸ŠæŒ‡å®šï¼š type=&quot;email&quot; type=&quot;url&quot; type=&quot;number&quot;ï¼Œé€šè¿‡é™„åŠ çº¦æŸmaxï¼Œminå’Œstepå±æ€§ pattern=&quot;Reg(ular )?Exp(ression)?&quot;ï¼ˆç”¨äºè¾“å…¥ç±»å‹çš„textï¼Œsearchï¼Œtelï¼Œurlæˆ–emailï¼‰ required ä»¥åŠä»¥ä¸‹éæ ‡å‡†å±æ€§ï¼š data-match=&quot;#inputToMatch&quot; ç¡®ä¿ä¸¤ä¸ªå­—æ®µåŒ¹é…ï¼Œä¾‹å¦‚å¯†ç ç¡®è®¤ data-minlength=&quot;5&quot; å¼ºåˆ¶æ‰§è¡Œæœ€å°‘é‡çš„å­—ç¬¦ data-remote=&quot;/path/to/remote/validator&quot;å‘å‡ºAJAXè¯·æ±‚ä»¥ç¡®å®šè¯¥å­—æ®µæ˜¯å¦æœ‰æ•ˆã€‚è¯·åŠ¡å¿…ä¸ºè¾“å…¥æä¾›nameå±æ€§ï¼Œå› ä¸ºè¯·æ±‚å°†è¢«å‘é€åˆ°/path/to/remote/validator?&lt;name&gt;=&lt;value&gt;ã€‚200 OKå¦‚æœå­—æ®µæœ‰æ•ˆï¼Œåˆ™è¿œç¨‹ç«¯ç‚¹åº”è¿”å›a ï¼Œ4xxå¦åˆ™è¿”å›ã€‚è¿™æ˜¯ä½¿ç”¨Express çš„å‚è€ƒæœåŠ¡å™¨å®ç°ã€‚ æ ‡å‡†å±æ€§éªŒè¯å™¨æ ‡å‡†HTML5å±æ€§çš„éªŒè¯è§„åˆ™ç”±æµè§ˆå™¨ä½¿ç”¨HTML5çº¦æŸéªŒè¯APIå®Œå…¨å¤„ç†ã€‚å› æ­¤ï¼Œæ­¤æ’ä»¶æ— æ³•æ§åˆ¶æœ‰èµ„æ ¼ä½œä¸ºæœ‰æ•ˆç”µå­é‚®ä»¶åœ°å€æˆ–URLçš„å†…å®¹ã€‚å¦‚æœæ‚¨å‘ç°éœ€è¦å¯¹è¿™äº›å­—æ®µè¿›è¡Œæ›´ä¸¥æ ¼çš„éªŒè¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¯¥patternå±æ€§è¿›ä¸€æ­¥é™åˆ¶å¯æ¥å—çš„èŒƒå›´ã€‚ ä½†è¯·æ³¨æ„ï¼Œæ‚¨ä¸è¦è¿‡äºä¸¥æ ¼ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ¼æŠ¥å’Œç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒã€‚ä¾‹å¦‚ï¼Œæ ¹æ®æ ‡å‡†ï¼Œæ‚¨ä¼šå¯¹å“ªç§ç”µå­é‚®ä»¶åœ°å€è¢«è§†ä¸ºæœ‰æ•ˆæ„Ÿåˆ°æƒŠè®¶ã€‚ è·¨æµè§ˆå™¨å…¼å®¹æ€§ç”±äºæ­¤æ’ä»¶ä¾èµ–äºHTML5çº¦æŸéªŒè¯APIï¼Œå› æ­¤ä¸æ”¯æŒInternet Explorer 9åŠæ›´æ—©ç‰ˆæœ¬ã€‚å¦‚æœæ‚¨éœ€è¦æ”¯æŒè¿™äº›æµè§ˆå™¨ï¼Œåˆ™å¿…é¡»æ·»åŠ åƒRyan Seddonçš„H5Fè¿™æ ·çš„polyfillã€‚ è¦æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼Œè¯·åœ¨è¾“å…¥å­—æ®µåé¢åŒ…å«å®¹å™¨help-blockå’Œwith-errorsç±»ã€‚ 1234567&lt;form role=\"form\" data-toggle=\"validator\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputEmail\"&gt;Email&lt;/label&gt; &lt;input type=\"email\" id=\"inputEmail\"&gt; &lt;div class=\"help-block with-errors\"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/form&gt; éªŒè¯å­—æ®µé»˜è®¤æƒ…å†µä¸‹ï¼ŒéªŒè¯ç¨‹åºä»…éªŒè¯æ’ä»¶åˆå§‹åŒ–æ—¶å­˜åœ¨çš„å­—æ®µã€‚å¦‚æœè¡¨å•å…·æœ‰åŠ¨æ€å­—æ®µé›†ï¼Œåˆ™éœ€è¦è°ƒç”¨$(...).validator(&#39;update&#39;)ä»¥é€šçŸ¥æ’ä»¶è¦éªŒè¯çš„å­—æ®µé›†å·²æ›´æ”¹ã€‚ ç”¨äºç¡®å®šéªŒè¯å“ªäº›å­—æ®µçš„é»˜è®¤é€‰æ‹©å™¨æ˜¯ï¼š 1$.fn.validator.Constructor.INPUT_SELECTOR = ':input:not([type=\"hidden\"], [type=\"submit\"], [type=\"reset\"], button)' å¦‚æœéœ€è¦æ›´æ”¹æ­¤é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¦†ç›–æ­¤å€¼ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥æ·»åŠ data-validate=&quot;true&quot;/ data-validate=&quot;false&quot;åˆ°ç‰¹å®šè¾“å…¥ä»¥å¼ºåˆ¶å°†å…¶åŒ…å«/æ’é™¤åœ¨å·²éªŒè¯å­—æ®µé›†ä¸­ã€‚ é€‰é¡¹é€‰é¡¹å¯ä»¥é€šè¿‡æ•°æ®å±æ€§æˆ–JavaScriptä¼ é€’ã€‚å¯¹äºæ•°æ®å±æ€§ï¼Œè¯·å°†é€‰é¡¹åç§°é™„åŠ åˆ°data-ï¼Œå¦‚data-delay=&quot;&quot;ã€‚ åç§° ç±»å‹ é»˜è®¤ æè¿° delay number 500 åœ¨è¡¨å•å­—æ®µä¸Šæ˜¾ç¤ºé”™è¯¯ä¹‹å‰è¦ç­‰å¾…çš„æ¯«ç§’æ•°ã€‚ html boolean false å°†HTMLæ’å…¥é”™è¯¯æ¶ˆæ¯ä¸­ã€‚å¦‚æœä¸ºfalseï¼Œåˆ™ä½¿ç”¨jQueryçš„æ–‡æœ¬æ–¹æ³•å°†å†…å®¹æ’å…¥DOMã€‚å¦‚æœæ‚¨æ‹…å¿ƒXSSæ”»å‡»ï¼Œè¯·ä½¿ç”¨æ–‡æœ¬ã€‚ disable boolean true ç¦ç”¨æäº¤æŒ‰é’®ï¼Œç›´åˆ°è¡¨å•æœ‰æ•ˆå¹¶ä¸”æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½å·²å®Œæˆã€‚ focus boolean true åœ¨éªŒè¯è¡¨å•æ—¶ï¼Œæ»šåŠ¨å¹¶èšç„¦ç¬¬ä¸€ä¸ªå­—æ®µå¹¶æ˜¾ç¤ºé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé¡µé¢é¡¶éƒ¨æœ‰ä¸€ä¸ªå›ºå®šçš„å¯¼èˆªæ ï¼Œå¹¶ä¸”éœ€è¦è°ƒæ•´çª—å£é¡¶éƒ¨å’Œç„¦ç‚¹å­—æ®µä¹‹é—´çš„å¡«å……é‡ï¼Œåˆ™å¯ä»¥è¦†ç›–ä»¥ä¸‹å˜é‡ï¼š$.fn.validator.Constructor.FOCUS_OFFSETé»˜è®¤ä¸º20ï¼ˆpxï¼‰ã€‚ feedback object glyphicon classes è¦†ç›–ç”¨äºè¡¨å•åé¦ˆå›¾æ ‡çš„ç±»ã€‚é»˜è®¤ä¸ºBootstrapçš„glyphiconsï¼šfeedback: { success: &#39;glyphicon-ok&#39;, error: &#39;glyphicon-remove&#39; } custom object {} æ·»åŠ è¦è¿è¡Œçš„è‡ªå®šä¹‰éªŒè¯ç¨‹åºã€‚éªŒè¯å™¨åº”è¯¥æ˜¯æ¥æ”¶jQueryå…ƒç´ ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå¦‚æœå­—æ®µæ— æ•ˆåˆ™è¿”å›é”™è¯¯æ¶ˆæ¯ã€‚è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰éªŒè¯å™¨çš„ç¤ºä¾‹ï¼Œå®ƒæ£€æŸ¥è¾“å…¥æ˜¯å¦ç­‰äºæŸä¸ªæŒ‡å®šå€¼ï¼šcustom: { equals: function($el) { var matchValue = $el.data(&quot;equals&quot;) // foo if ($el.val() !== matchValue) { return &quot;Hey, that&#39;s not valid! It&#39;s gotta be &quot; + matchValue } } }é€šè¿‡å°†å…¶åç§°ä½œä¸ºæ•°æ®å±æ€§å¼•ç”¨ï¼Œå°†éªŒè¯å™¨æ·»åŠ åˆ°è¾“å…¥ä¸­å°±åƒå®Œæˆå…¶ä»–æ“ä½œä¸€æ ·ï¼š&lt;input data-equals=&quot;foo&quot;&gt;ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥é™¤ä»¥å¤–çš„ä»»ä½•å†…å®¹ï¼Œè¯¥å­—æ®µå°†æ˜¾ç¤ºé”™è¯¯fooã€‚ 1234567891011121314151617181920// feedback&#123; feedback: &#123; success: 'glyphicon-ok', error: 'glyphicon-remove' &#125;&#125;// custom&#123; custom: &#123; equals: function($el) &#123; var matchValue = $el.data(\"equals\") // foo if ($el.val() !== matchValue) &#123; return \"Hey, that's not valid! It's gotta be \" + matchValue &#125; &#125; &#125;&#125; å„ä¸ªè¡¨å•å­—æ®µçš„é”™è¯¯æ¶ˆæ¯å¯ä»¥é€šè¿‡ä½¿ç”¨æ•°æ®å±æ€§æ¥æŒ‡å®šå•ä¸ªè¡¨å•å­—æ®µçš„é”™è¯¯æ¶ˆæ¯ã€‚æ‚¨å¯ä»¥åœ¨å­—æ®µä¸­çš„æ¯ä¸ªç±»å‹çš„éªŒè¯ï¼Œå³æŒ‡å®šä¸€ä¸ªé”™è¯¯ä¿¡æ¯data-pattern-error=&quot;&quot;ï¼Œdata-required-error=&quot;&quot;ï¼Œdata-match-error=&quot;&quot;ï¼Œç­‰â€¦æˆ–è€…ä½¿ç”¨data-error=&quot;&quot;ç”¨äºè¡¬å«çš„é”™è¯¯æ¶ˆæ¯ï¼Œä»¥æ˜¾ç¤ºè¯¥å­—æ®µçš„ä»»ä½•é”™è¯¯ã€‚ æ–¹æ³•.validator(options)å°†éªŒè¯å™¨é™„åŠ åˆ°è¡¨å•é›†åˆã€‚ .validator(&#39;update&#39;)æ›´æ–°å°†éªŒè¯çš„è¾“å…¥é›†åˆã€‚å¦‚æœéœ€è¦éªŒè¯çš„å­—æ®µé›†å·²æ›´æ”¹ï¼Œè¯·è°ƒç”¨æ­¤æ–¹æ³•ã€‚ .validator(&#39;validate&#39;)ç«‹å³éªŒè¯æ•´ä¸ªè¡¨æ ¼ã€‚ .validator(&#39;destroy&#39;)é”€æ¯å½¢å¼éªŒè¯å™¨å¹¶æ¸…ç†ç•™ä¸‹çš„æ•°æ®ã€‚ äº‹ä»¶æ‰€æœ‰äº‹ä»¶éƒ½åœ¨è¡¨å•å…ƒç´ ä¸Šè§¦å‘ï¼Œå¹¶æä¾›å¯¹äº‹ä»¶æ‰€å±çš„è¡¨å•å­—æ®µçš„å¼•ç”¨event.relatedTargetã€‚ äº‹ä»¶ç±»å‹ æè¿° validate.bs.validator éªŒè¯è¡¨å•å­—æ®µæ—¶ï¼Œæ­¤äº‹ä»¶ç«‹å³è§¦å‘ã€‚ invalid.bs.validator å½“è¡¨å•å­—æ®µå˜ä¸ºæ— æ•ˆæ—¶ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚é€šè¿‡æä¾›å­—æ®µé”™è¯¯event.detailã€‚ valid.bs.validator å½“è¡¨å•å­—æ®µå˜ä¸ºæœ‰æ•ˆæ—¶ï¼Œå°†è§¦å‘æ­¤äº‹ä»¶ã€‚ä¹‹å‰çš„å­—æ®µé”™è¯¯é€šè¿‡æä¾›event.detailã€‚ validated.bs.validator åœ¨éªŒè¯è¡¨å•å­—æ®µåè§¦å‘æ­¤äº‹ä»¶ã€‚ æœ‰æ¡ä»¶åœ°å¤„ç†æäº¤äº‹ä»¶å½“è¡¨å•æ— æ•ˆæ—¶ï¼Œ.preventDefault()å°†åœ¨æäº¤äº‹ä»¶ä¸Šè°ƒç”¨ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æƒ³è¦æŒ‚é’©æäº¤äº‹ä»¶å¹¶æ ¹æ®è¡¨å•æ˜¯å¦æœ‰æ•ˆè€Œæœ‰æ¡ä»¶åœ°æ‰§è¡ŒæŸäº›æ“ä½œï¼Œåˆ™å¯ä»¥æ£€æŸ¥äº‹ä»¶æ˜¯å¦æœ‰æ•ˆ.isDefaultPrevented()ã€‚åœ¨è¡¨å•ä¸Šåˆå§‹åŒ–æ’ä»¶åï¼Œè¯·ç¡®ä¿æ‚¨çš„æäº¤å¤„ç†ç¨‹åºå·²ç»‘å®šã€‚ 1234567$('#form').validator().on('submit', function (e) &#123; if (e.isDefaultPrevented()) &#123; // handle the invalid form... &#125; else &#123; // everything looks good! &#125;&#125;)","tags":[{"name":"Bootstrap","slug":"Bootstrap","permalink":"https://betgar.github.io/tags/Bootstrap/"},{"name":"Validation","slug":"Validation","permalink":"https://betgar.github.io/tags/Validation/"}]},{"title":"Bootstrap è¡¨å•å¸ƒå±€","date":"2018-07-23T11:00:00.000Z","path":"2018/07/23/bootstrap-form-layout/","text":"Bootstrap è¡¨å•å¸ƒå±€ bootstrapå·²ç»ä½¿ç”¨å¾ˆä¹…äº†ï¼Œä½†æ˜¯å¯¹äºè¡¨å•å¸ƒå±€ï¼Œå°¤å…¶æ˜¯HTMLç»“æ„åµŒå¥—å±‚æ¬¡è¿˜æœ‰å¾ˆå¤šç–‘é—®ã€‚ æ‰€ä»¥åˆç¿»äº†ä¸€éå®˜ç½‘å’Œèµ„æ–™ï¼Œæ€»ç»“ä¸€ä¸‹ã€‚ æœ¬æ–‡éƒ¨åˆ†å†…å®¹ç¿»è¯‘è‡ªè¿™é‡Œ. åŸºæœ¬åŸåˆ™Bootstrapè¡¨å•æ§ä»¶è‡ªåŠ¨è·å¾—ä¸€äº›å…¨å±€æ ·å¼ï¼Œå¦‚æ‰€æœ‰textual &lt;input&gt;ï¼Œ&lt;textarea&gt;ä»¥åŠ&lt;select&gt;å¸¦ç±»çš„å…ƒç´ .form-controlçš„å®½åº¦ä¸º100ï¼…ã€‚è¡¨å•å¸ƒå±€çš„åŸºæœ¬è§„åˆ™å¦‚ä¸‹; å§‹ç»ˆä½¿ç”¨&lt;form role=&quot;form&quot;&gt;ï¼Œæœ‰åŠ©äºæ”¹å–„ä½¿ç”¨å±å¹•é˜…è¯»å™¨çš„äººçš„å¯è®¿é—®æ€§ ç”¨äºæœ€ä½³é—´è·åŒ…è£…æ ‡ç­¾å’Œè¡¨æ ¼æ§ä»¶ &lt;div class=&quot;form-group&quot;&gt; å°†ç±».form-controlæ·»åŠ åˆ°æ‰€æœ‰æ–‡æœ¬&lt;input&gt;,&lt;textarea&gt;å’Œ&lt;select&gt;å…ƒç´  è¡¨å•å‚ç›´å¸ƒå±€(vertical form) å‚ç›´å¸ƒå±€ä¹Ÿæ˜¯Bootstrapçš„é»˜è®¤å¸ƒå±€ï¼Œå› ä¸ºæˆ‘ä»¬çš„æµè§ˆå™¨é»˜è®¤çš„æ™®é€šæµå°±æ˜¯ä»å·¦åˆ°å³(LTR)ï¼Œä»ä¸Šåˆ°ä¸‹ã€‚ 12345678910111213141516&lt;!DOCTYPE html&gt; &lt;html lang=\"en\"&gt; &lt;head&gt; &lt;title&gt;My first Bootstrap page &lt;/title&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initialscale=1\"&gt; &lt;link href=\"CSS/bootstrap.min.css\" rel=\"stylesheet\"&gt; &lt;link href=\"CSS/bootstrap-theme.min.css\" rel=\"stylesheet\"&gt; &lt;script type=\"text/javascript\" src=\"JS/bootstrap.min.js\"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt;&lt;div class=\"container\" style=\"max-width:600px;margin:60px auto;\"&gt; &lt;form role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"name\"&gt;First name&lt;/label&gt; &lt;input type=\"name\" class=\"form-control\" id=\"fname\" placeholder=\"Enter name\"&gt; &lt;div class=\"form-group\"&gt; è¡¨å•æ°´å¹³å¸ƒå±€(horizontal form) æ°´å¹³å½¢å¼ä¸å‚ç›´å½¢å¼å¸ƒå±€çš„ä¸åŒä¹‹å¤„åœ¨äºæ ‡è®°é‡å’Œè¡¨å•çš„è¡¨ç¤ºå½¢å¼ã€‚åœ¨æ­¤è¡¨å•ä¸­ï¼Œå¸ƒå±€æ ‡ç­¾æµ®åŠ¨åˆ°è¾“å…¥å­—æ®µçš„å·¦ä¾§ã€‚æ ‡ç­¾å’Œè¾“å…¥å­—æ®µéƒ½å‡ºç°åœ¨åŒä¸€è¡Œä¸Šã€‚é™¤é»˜è®¤è§„åˆ™å¤–ï¼Œæ°´å¹³è¡¨å•çš„è§„åˆ™ï¼Œ æ‰€æœ‰ä½ éœ€è¦åšçš„å°±æ˜¯æ·»åŠ .form-horizontalç±»çš„&lt;form&gt; å…ƒç´ ï¼Œ.control-labelç±»çš„æ‰€æœ‰&lt;label&gt;å…ƒç´ ã€‚ä½¿ç”¨Bootstrapçš„é¢„å®šä¹‰ç½‘æ ¼ç±»æ¥å¯¹é½æ ‡ç­¾å’Œè¡¨å•æ§ä»¶ã€‚ 12345678910111213141516171819202122232425262728293031&lt;div class=\"container\" style=\"max-width:600px;padding:40px 20px;background:#ebeff2\"&gt; &lt;h3&gt;Signup&lt;/h3&gt; &lt;form class=\"form-horizontal\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"name\" class =\"control-label col-sm-3\"&gt;First name&lt;/label&gt; &lt;div class=\"col-sm-8\"&gt; &lt;input type=\"name\" class=\"form-control\" id=\"name\" placeholder=\"Enter name\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"address\" class =\"control-label col-sm-3\"&gt;Second name&lt;/label&gt; &lt;div class=\"col-sm-8\"&gt; &lt;input type=\"address\" class=\"form-control\" id=\"address\" placeholder=\"Enter address\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"email\" class =\"control-label col-sm-3\"&gt;Email&lt;/label&gt; &lt;div class=\"col-sm-8\"&gt; &lt;input type=\"email\" class=\"form-control\" id=\"email\" placeholder=\"Enter email\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"pwd\" class =\"control-label col-sm-3\"&gt;Password&lt;/label&gt; &lt;div class=\"col-sm-8\"&gt; &lt;input type=\"password\" class=\"form-control\" id=\"pwd\" placeholder=\"Enter password\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"col-sm-offset-2 col-sm-8\"&gt; &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Register&lt;/button&gt; &lt;/div&gt; &lt;/form&gt;&lt;/div&gt; æ³¨æ„ï¼šlabelå…ƒç´ åœ¨æ°´å¹³å¸ƒå±€ä¸­å¿…é¡»æ·»åŠ .control-labelæ ·å¼ã€‚ å†…è”è¡¨å•(inline form ) Bootstrapçš„å†…è”è¡¨å•å¸ƒå±€å¯ç”¨äºå°†è¡¨å•æ§ä»¶å¹¶æ’æ”¾ç½®åœ¨ç´§å‡‘çš„å¸ƒå±€ä¸­ã€‚åœ¨å†…è”å½¢å¼ä¸­ï¼Œæ‰€æœ‰å…ƒç´ éƒ½æ˜¯ç›´çº¿ï¼Œå·¦å¯¹é½ï¼Œæ ‡ç­¾ä½äºæ—è¾¹ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦å°†.form-inlineç±»æ·»åŠ åˆ°&lt;form&gt;å…ƒç´ ã€‚ 123456789101112131415&lt;form class=\"form-inline\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"name\"&gt;Name&lt;/label&gt; &lt;input type=\"name\" class=\"form-control\" id=\"name\" placeholder=\"Enter name\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"email\"&gt;Email&lt;/label&gt; &lt;input type=\"email\" class=\"form-control\" id=\"email\" placeholder=\"Enter email\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"pwd\"&gt;Password&lt;/label&gt; &lt;input type=\"password\" class=\"form-control\" id=\"pwd\" placeholder=\"Enter password\"&gt; &lt;/div&gt; &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Register&lt;/button&gt;&lt;/form&gt; æ³¨æ„äº‹é¡¹ .form-groupç±»ç”¨äºå°è£…ç»„ä¸­çš„å¤šä¸ªæ§ä»¶ - å°±åƒæˆ‘ä»¬å¯¹æ ‡ç­¾å’Œç›¸åº”çš„æ–‡æœ¬æ¡†æ‰€åšçš„é‚£æ ·ã€‚ .control-labelå’Œ.form-controlç±»åˆ†åˆ«ç”¨äºè®¾ç½®æ ‡ç­¾å’Œè¡¨å•å…ƒç´ çš„æ ·å¼ã€‚ ä½¿ç”¨.input-groupç±»å¯ä»¥ç›¸é‚»åœ°å…³è”å¤šä¸ªæ§ä»¶ã€‚ ç¦ç”¨æˆ–åªè¯»çŠ¶æ€å¯ç”¨äºæ§ä»¶ - Bootstrapå°†è‡ªåŠ¨å…³è”å¿…è¦çš„æ ·å¼ï¼Œä½†æ˜¯ï¼Œæ‰€æœ‰æ§ä»¶éƒ½å¿…é¡»æ·»åŠ .form-controlç±»ã€‚ ä¸ºäº†æ§åˆ¶å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨.input-lgï¼Œ.input-smç±»ã€‚è¦æ§åˆ¶ç»„çš„å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨.form-group-lgæˆ–.form-group-smç±»ã€‚ è¦æ˜¾ç¤ºä»»ä½•å¸®åŠ©æ–‡æœ¬ï¼Œå¯ä»¥åœ¨å•ç‹¬çš„æ ‡ç­¾ä¸­ä½¿ç”¨.help-blockç±»ã€‚è¿™å°†ä»¥æ–°çš„ä¸€è¡Œæ˜¾ç¤ºæ–‡æœ¬ã€‚ é™æ€è¡¨å• ç»å¸¸éœ€è¦é™æ€å±•ç¤ºè¡¨å•ä¿¡æ¯ï¼Œæ‰€ä»¥é¡ºä¾¿æ€»ç»“ä¸€ä¸‹é™æ€è¡¨å•çš„å±•ç¤ºã€‚ 1234567891011121314&lt;form class=\"form-horizontal\"&gt; &lt;div class=\"form-group\"&gt; &lt;label class=\"col-sm-2 control-label\"&gt;Email&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;p class=\"form-control-static\"&gt;email@example.com&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputPassword\" class=\"col-sm-2 control-label\"&gt;Password&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;input type=\"password\" class=\"form-control\" id=\"inputPassword\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; å‚è€ƒè¿™é‡Œ è¡¨å•å…ƒç´ æ ¡éªŒçŠ¶æ€ æ¶‰åŠ.input-group-addon .has-feedback .form-control-feedback .has-success .help-blockç­‰ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªbootstrap-validationæ ¡éªŒåº“å°±æ˜¯ä½¿ç”¨è¿™äº›classæ ·å¼å®ç°çš„. 123456789101112131415161718192021&lt;form class=\"form-horizontal\"&gt; &lt;div class=\"form-group has-success has-feedback\"&gt; &lt;label class=\"control-label col-sm-3\" for=\"inputSuccess3\"&gt;Input with success&lt;/label&gt; &lt;div class=\"col-sm-9\"&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputSuccess3\" aria-describedby=\"inputSuccess3Status\"&gt; &lt;span class=\"glyphicon glyphicon-ok form-control-feedback\" aria-hidden=\"true\"&gt;&lt;/span&gt; &lt;span id=\"inputSuccess3Status\" class=\"sr-only\"&gt;(success)&lt;/span&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group has-success has-feedback\"&gt; &lt;label class=\"control-label col-sm-3\" for=\"inputGroupSuccess2\"&gt;Input group with success&lt;/label&gt; &lt;div class=\"col-sm-9\"&gt; &lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;@&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputGroupSuccess2\" aria-describedby=\"inputGroupSuccess2Status\"&gt; &lt;/div&gt; &lt;span class=\"glyphicon glyphicon-ok form-control-feedback\" aria-hidden=\"true\"&gt;&lt;/span&gt; &lt;span id=\"inputGroupSuccess2Status\" class=\"sr-only\"&gt;(success)&lt;/span&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; ä¾‹å­å‚è€ƒè¿™é‡Œ bootstrapè¡¨æ ¼æ ·å¼class æ€»ç»“ä¸€ä¸‹bootstrapè¡¨æ ¼æ ·å¼classçš„idï¼Œä»¥ä¸‹å†…å®¹æ¥è‡ªbootstrapçš„forms.lessæ–‡ä»¶ã€‚ è¡¨å•å…ƒç´ æ ‡ç­¾æ ·å¼ Bootstrapå†…éƒ¨å¯¹å¦‚ä¸‹çš„æ ‡ç­¾è¿›è¡Œè¿‡æ ·å¼çš„ä¿®é¥°ã€‚ fieldset legend label input[type=â€searchâ€] input[type=â€radioâ€] input[type=â€checkboxâ€] input[type=â€fileâ€] input[type=â€rangeâ€] select[multiple] select[size] output select textarea input[type=â€textâ€] input[type=â€passwordâ€] input[type=â€datetimeâ€] input[type=â€datetime-localâ€] input[type=â€dateâ€] input[type=â€monthâ€] input[type=â€timeâ€] input[type=â€weekâ€] input[type=â€numberâ€] input[type=â€emailâ€] input[type=â€urlâ€] input[type=â€searchâ€] input[type=â€telâ€] input[type=â€colorâ€] è¡¨å•æ ·å¼class.form-inline.form-horizontal.control-label.form-control focus disabled readonly .form-control-static é™æ€è¡¨å•å±•ç¤ºä½¿ç”¨ .form-group .form-group-sm .form-group-lg .input-group (input-groups.less) .input-group-addon .input-group-btn .input-sm .input-lg .input-group-lg .input-group-sm å‚è€ƒè¿™é‡Œ .radioå’Œ.checkbox .radio .radio-inline .checkbox .checkbox-inline å‚è€ƒè¿™é‡Œ form-controlçš„add-onç³»åˆ— .has-feedback .form-control-feedback 123456789&lt;div class=\"form-group has-success has-feedback\"&gt; &lt;label class=\"control-label\" for=\"inputGroupSuccess1\"&gt;Input group with success&lt;/label&gt; &lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;@&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputGroupSuccess1\" aria-describedby=\"inputGroupSuccess1Status\"&gt; &lt;/div&gt; &lt;span class=\"glyphicon glyphicon-ok form-control-feedback\" aria-hidden=\"true\"&gt;&lt;/span&gt; &lt;span id=\"inputGroupSuccess1Status\" class=\"sr-only\"&gt;(success)&lt;/span&gt;&lt;/div&gt; å‚è€ƒè¿™é‡Œ .help-block .help-blockä¸»è¦ç»™è¡¨å•åšä¸€äº›è¯´æ˜æ€§çš„æ–‡å­— &lt;legend&gt;å’Œ&lt;fieldset&gt;çš„ä½¿ç”¨&lt;legend&gt;çš„ä½¿ç”¨ &lt;legend&gt;ï¼šä¸»è¦ç”¨æ¥æ·»åŠ è¡¨å•æ ‡é¢˜è¯´æ˜çš„. &lt;fieldset&gt;ä½¿ç”¨ &lt;fieldset&gt;æ ‡ç­¾å¹³æ—¶ä½¿ç”¨æ¯”è¾ƒå°‘ï¼Œä¸»è¦ç”¨åœ¨ï¼Œå½“è¡¨å•å…ƒç´ æ¯”è¾ƒå¤šï¼Œä¸åŒçš„è¡¨å•å…ƒç´ éœ€è¦è¿›è¡Œåˆ†ç»„ï¼Œè¿™æ—¶æ¯”è¾ƒæ–¹ä¾¿ï¼Œè€Œä¸”å¯¹äºåˆ†ç»„è¡¨å•å…ƒç´ è¿›è¡Œç»Ÿä¸€çš„ç¦ç”¨æ—¶ã€‚ æ³¨æ„ï¼šæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ 12&gt; &lt;fieldset disabled=\"disabled\"&gt;å†…éƒ¨çš„è¡¨å•å…ƒç´ éƒ½è¢«ç¦ç”¨&lt;/fieldset&gt;&gt; ä¾‹å­å‚è€ƒè¿™é‡Œï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt;&lt;meta charset=\"utf-8\"&gt;&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;&lt;title&gt;Example of Bootstrap 3 Disabled Fieldsets&lt;/title&gt;&lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"&gt;&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"&gt;&lt;/script&gt;&lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"&gt;&lt;/script&gt; &lt;style type=\"text/css\"&gt; .bs-example&#123; margin: 20px; &#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=\"bs-example\"&gt; &lt;form class=\"form-horizontal\"&gt; &lt;legend&gt;ç™»å½•ä¿¡æ¯&lt;/legend&gt; &lt;fieldset disabled=\"disabled\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputEmail\" class=\"control-label col-xs-2\"&gt;Email&lt;/label&gt; &lt;div class=\"col-xs-10\"&gt; &lt;input type=\"email\" class=\"form-control\" id=\"inputEmail\" placeholder=\"Email\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputPassword\" class=\"control-label col-xs-2\"&gt;Password&lt;/label&gt; &lt;div class=\"col-xs-10\"&gt; &lt;input type=\"password\" class=\"form-control\" id=\"inputPassword\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"col-xs-offset-2 col-xs-10\"&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt;&lt;input type=\"checkbox\"&gt; Remember me&lt;/label&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"col-xs-offset-2 col-xs-10\"&gt; &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Login&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/fieldset&gt; &lt;/form&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å‚è€ƒèµ„æ–™http://stacktips.com/tutorials/bootstrap/vertical-horizontal-and-inline-form-example-in-bootstrap https://v3.bootcss.com/css/#forms https://www.tutorialrepublic.com/twitter-bootstrap-tutorial/ https://www.tutorialrepublic.com/twitter-bootstrap-tutorial/bootstrap-forms.php","tags":[{"name":"Bootstrap","slug":"Bootstrap","permalink":"https://betgar.github.io/tags/Bootstrap/"}]},{"title":"åˆ›å»ºåŸºäºES6çš„é¡¹ç›®","date":"2018-07-17T13:00:00.000Z","path":"2018/07/17/create-project-based-on-es6-with-babel/","text":"åˆ›å»ºåŸºäºES6çš„é¡¹ç›®(babel) é¦–å…ˆæ„Ÿè°¢ä¸šç•Œçš„å¾ˆå¤šå¤§ç¥ï¼Œåˆ›é€ äº†å¾ˆå¤šçš„æ¨¡ç‰ˆé¡¹ç›®ï¼ŒæˆåŠŸçš„æŠŠæˆ‘ç”¨æˆäº†å‚»é€¼ã€‚ä»Šå¤©æœ‰ä¸ªå°çš„åŠŸèƒ½ï¼Œä½¿ç”¨CRCè¿›è¡Œchecksumæ ¡éªŒï¼Œé€‰æ‹©ä½¿ç”¨node-crcåŒ…ï¼Œæœ¬æ¥æƒ³å†™ä¸ªå°demoæµ‹è¯•ä¸€ä¸‹ï¼Œç»“æœå‘ç°crcå…¨éƒ¨ä½¿ç”¨es6è¯­æ³•è¿›è¡Œæ„å»ºï¼Œé•¿æœŸä½¿ç”¨åˆ«äººæ¨¡ç‰ˆçš„æˆ‘ç¬é—´å‚»é€¼äº†ã€‚æ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ babel handbook ä¸­æ–‡ç‰ˆ åˆå§‹åŒ–é¡¹ç›®12cd crc-demo # crc-demoè‡ªå·±çš„é¡¹ç›®ç›®å½•npm init å®‰è£…ä¾èµ– babelå’Œç›®æ ‡è¿è¡Œç¯å¢ƒä¾èµ–ï¼ˆes5ï¼‰ ç›®æ ‡ç¯å¢ƒæ ¹æ®è‡ªå·±å®é™…çš„ç¯å¢ƒå®šä¹‰ï¼Œå…·ä½“å‚è€ƒpreset-env 12# rimraf ç”¨æ¥åˆ é™¤æ–‡ä»¶çš„npm install babel-cli babel-preset-es2015 rimraf --save-dev åˆ›å»º .babelrc é…ç½®æ–‡ä»¶ åœ¨crc-demoä¸‹æ·»åŠ .babelrcæ–‡ä»¶ï¼Œå‚è€ƒè¿™é‡Œ 12345&#123; \"presets\": [ \"es2015\" // ç¯å¢ƒå’Œå®‰è£…ä¾èµ–çš„ç¯å¢ƒç›¸å…³(babel-preset-es2015) ]&#125; package.jsonçš„scriptsä¸­æ·»åŠ babel srcç›®å½•çš„jsæ–‡ä»¶ä¼šç¼–è¯‘åˆ°distä¸­ï¼Œæ¯æ¬¡ç¼–è¯‘ä¹‹å‰éƒ½ä¼šå…ˆåˆ é™¤distæ–‡ä»¶ã€‚ 123456&#123; \"scripts\": &#123; \"build\": \"rimraf dist/ &amp;&amp; babel src --out-dir dist/ --copy-files\", \"start\": \"npm run build &amp;&amp; node dist/index.js\" &#125;&#125; æ‰§è¡Œindex.jså†…å®¹1npm run start å‚è€ƒhttps://www.cnblogs.com/weschen/p/7154284.html https://www.babeljs.cn/docs/plugins/preset-env/ https://www.babeljs.cn/docs/usage/cli/","tags":[{"name":"babel","slug":"babel","permalink":"https://betgar.github.io/tags/babel/"}]},{"title":"Bootstrapå“åº”å¼çš„HTMLæ ‡ç­¾åµŒå¥—è§„åˆ™","date":"2018-07-12T13:00:00.000Z","path":"2018/07/12/the-bootstrap-responsive-nested-rule-of-html/","text":"Bootstrapå“åº”å¼çš„HTMLåµŒå¥—è§„åˆ™ ä½¿ç”¨Bootstrapå·²ç»å¾ˆé•¿æ—¶é—´äº†ï¼Œæ€»ç»“ä¸€äº›HTMLåµŒå¥—è§„åˆ™å’ŒBootstrapçš„classä½¿ç”¨ã€‚æœ¬æ¥è¦è‡ªå·±æ€»ç»“çš„ï¼Œé‡æ–°çœ‹Bootstrapå®˜ç½‘æ—¶å‘ç°äº†bootlintï¼Œæ‰€ä»¥ç›´æ¥æŠŠå†…å®¹æ¬äº†è¿‡æ¥ï¼Œè¿›è¡Œäº†åˆ†ç±»æ±‡æ€»ã€‚ Bootlintä½¿ç”¨ Bootlintæ˜¯Bootstrapå®˜æ–¹æ¨å‡ºçš„ä¸€ä¸ªå·¥å…·ï¼Œç”¨æ¥æ£€æµ‹HTMLç»“æ„æ˜¯å¦ç¬¦åˆBootstrapå“åº”å¼çš„è§„åˆ™ã€‚å› ä¸ºä¸æ­£ç¡®çš„HTMLåµŒå¥—ï¼ŒBootstrapå“åº”å¼æ•ˆæœä¸ä¼šç”Ÿæ•ˆã€‚ bootlintï¼šé—®é¢˜ä»£ç å‚è€ƒåœ°å€https://github.com/twbs/bootlint/wiki æ‰‹åŠ¨å¼•å…¥bootlint.js åœ¨&lt;/body&gt;ä¹‹å‰å¼•å…¥bootlint.js ä½¿ç”¨bookmarkletåŠ¨æ€å¼•å…¥ æ·»åŠ ä¸€ä¸ªä¹¦ç­¾ï¼Œurlé…ç½®ä¸º: 12&gt; javascript:(function()&#123;var s=document.createElement(\"script\");s.onload=function()&#123;bootlint.showLintReportForCurrentDocument([]);&#125;;s.src=\"https://maxcdn.bootstrapcdn.com/bootlint/latest/bootlint.min.js\";document.body.appendChild(s)&#125;)();&gt; å½“ä½ ç‚¹å‡»ä¹¦ç­¾æ—¶ï¼Œè‡ªåŠ¨åœ¨å½“å‰é¡µé¢å¼•å…¥ã€‚ Bootstrapçš„HTMLåµŒå¥—è§„åˆ™ ä¸ºä»€ä¹ˆè¦äº†è§£Bootstrapæ¡†æ¶è§„å®šçš„HTMLåµŒå¥—è§„åˆ™å‘¢ï¼Ÿå› ä¸ºåªæœ‰äº†è§£äº†åµŒå¥—è§„åˆ™æ‰èƒ½æŠŠå“åº”å¼å¸ƒå±€ç”¨å¥½ã€‚ .container.containerå’Œ.container-fluidä¸èƒ½åµŒå¥—12345678910111213141516171819202122232425262728&lt;!-- wrong --&gt;&lt;div class=\"container\"&gt; &lt;div class=\"container\"&gt; ... &lt;/div&gt;&lt;/div&gt;&lt;div class=\"container-fluid\"&gt; &lt;div class=\"container-fluid\"&gt; ... &lt;/div&gt;&lt;/div&gt;&lt;div class=\"container\"&gt; &lt;div class=\"foobar\"&gt; ... &lt;div class=\"container\"&gt; ... &lt;/div&gt; ... &lt;/div&gt;&lt;/div&gt;&lt;div class=\"container-fluid\"&gt; &lt;div class=\"container\"&gt; ... &lt;/div&gt;&lt;/div&gt; .row.rowçš„å­èŠ‚ç‚¹åº”è¯¥åªæœ‰.col-*-*Bootlint found non-grid-column children of grid rows. Bootstrapâ€™s grid system requires that all children of grid rows must be grid columns. Wrong: 12345&lt;div class=\"row\"&gt; &lt;div class=\"my-awesome-thing\"&gt;...&lt;/div&gt; &lt;div class=\"other-thing\"&gt;...&lt;/div&gt; &lt;div class=\"row\"&gt;...&lt;/div&gt;&lt;/div&gt; Right: 1234567&lt;div class=\"row\"&gt; &lt;div class=\"col-sm-6\"&gt;...&lt;/div&gt; &lt;div class=\"col-lg-12\"&gt;...&lt;/div&gt; &lt;div class=\"col-xs-12\"&gt; &lt;div class=\"row\"&gt;...&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; .rowå¿…é¡»æ˜¯.containeræˆ–è€….container-fluidçš„åä»£èŠ‚ç‚¹12345&lt;div class=\"container\"&gt; &lt;div class=\"row\"&gt; &lt;/div&gt;&lt;/div&gt; .row and .col-*-* ä¸èƒ½åŒæ—¶ç”¨åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸ŠWrong: 1&lt;div class=\"row col-xs-6\"&gt;...&lt;/div&gt; Right (Note that the two options have different meanings): 123456789&lt;div class=\"row\"&gt; &lt;div class=\"col-xs-6\"&gt;...&lt;/div&gt;&lt;/div&gt;&lt;!-- Or, depending on the semantics you need: --&gt;&lt;div class=\"col-xs-6\"&gt; &lt;div class=\"row\"&gt;...&lt;/div&gt;&lt;/div&gt; column(.col-*-*).col-*-*ä¸èƒ½åº”ç”¨floatå±æ€§wrong 123&lt;div class=\"col-sm-7 pull-right\"&gt;&lt;div class=\"col-sm-7\" style=\"float: left;\"&gt; å¤šä½™çš„col-*-*1&lt;div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\"&gt;&lt;/div&gt; col-xs-6é€‚ç”¨äºç­‰äºå’Œå¤§äºå®ƒçš„å°ºå¯¸ï¼Œæ‰€ä»¥å…¶å®ƒcol-sm-6 col-md-6 col-lg-6éƒ½æ˜¯å¤šä½™çš„ã€‚ ä½†æ˜¯ä¸åŒçš„å°ºå¯¸ä¸‹ï¼Œå®½åº¦ä¸ä¸€æ ·æ—¶ï¼Œä¸èƒ½è¿™æ ·ä½¿ç”¨ã€‚ 1&lt;div class=\"col-xs-6\"&gt;è¿™æ ·å°±è¡Œäº†&lt;/div&gt; .col-*-*åªåº”è¯¥æ˜¯.rowå’Œ.form-groupsçš„å­èŠ‚ç‚¹Wrong: 1234567891011&lt;div class=\"my-random-thing\"&gt; &lt;div class=\"col-sm-6\"&gt;...&lt;/div&gt; &lt;div class=\"col-sm-6\"&gt;...&lt;/div&gt;&lt;/div&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-sm-12\"&gt; &lt;div class=\"col-sm-12\"&gt;...&lt;/div&gt; &lt;!-- You can't nest columns directly like this. This is missing a level of .row --&gt; &lt;/div&gt;&lt;/div&gt; Right: 12345678910111213141516171819&lt;div class=\"row\"&gt; &lt;div class=\"col-sm-6\"&gt;...&lt;/div&gt; &lt;div class=\"col-sm-6\"&gt;...&lt;/div&gt;&lt;/div&gt;&lt;div class=\"form-horizontal\"&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"col-sm-6\"&gt;...&lt;/div&gt; &lt;div class=\"col-sm-6\"&gt;...&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-sm-12\"&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col-sm-12\"&gt;...&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; .input-group.input-group ä¸èƒ½åŒ…å« &lt;select&gt;Wrong:123456789&lt;!-- select ä¸èƒ½è‡ªé€‚åº”å®½åº¦ åœ¨webkitæµè§ˆå™¨ä¸­ --&gt;&lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;$&lt;/span&gt; &lt;select class=\"form-control\"&gt; &lt;option value=\"5.00\"&gt;&lt;option&gt; &lt;option value=\"50.00\"&gt;&lt;option&gt; &lt;option value=\"500.00\"&gt;&lt;option&gt; &lt;/select&gt;&lt;/div&gt; .input-group ä¸èƒ½åŒ…å« &lt;textarea&gt;Wrong:12345&lt;!-- input-groupåªèƒ½åŒ…å«é‚£äº›åŸºäºinputçš„å…ƒç´  --&gt;&lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;âœ‰&lt;/span&gt; &lt;textarea class=\"form-control\" placeholder=\"To Whom It May Concern:\"&gt;&lt;/textarea&gt;&lt;/div&gt; .input-groupä¸èƒ½åŒ…å«å¤šä¸ª.form-controlå…ƒç´ Wrong (unsupported): 12345&lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;$&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Dollars\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Cents\"&gt;&lt;/div&gt; Right (supported): 1234&lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;$&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Amount\"&gt;&lt;/div&gt; Wrong (unsupported): 12345&lt;div class=\"input-group\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Username\"&gt; &lt;span class=\"input-group-addon\"&gt;@&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Domain\"&gt;&lt;/div&gt; Right (supported): 1234&lt;div class=\"input-group\"&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Username\"&gt; &lt;span class=\"input-group-addon\"&gt;@example.com&lt;/span&gt;&lt;/div&gt; .input-groupå’Œ.form-groupä¸èƒ½åŒæ—¶åº”ç”¨åŒä¸€å…ƒç´  åº”è¯¥åœ¨.from-groupä¸­åµŒå¥—.input-group Wrong: 1234&lt;div class=\"form-group input-group\"&gt; &lt;div class=\"input-group-addon\"&gt;@&lt;/div&gt; &lt;input class=\"form-control\" type=\"email\" placeholder=\"Enter nickname\"&gt;&lt;/div&gt; Right: 123456&lt;div class=\"form-group\"&gt; &lt;div class=\"input-group\"&gt; &lt;div class=\"input-group-addon\"&gt;@&lt;/div&gt; &lt;input class=\"form-control\" type=\"email\" placeholder=\"Enter nickname\"&gt; &lt;/div&gt;&lt;/div&gt; .input-group and .col-*-* ä¸èƒ½åŒæ—¶ç›´æ¥åº”ç”¨åœ¨åŒä¸€å…ƒç´ ä¸Š .col-*-*ä¸èƒ½ç”¨åœ¨ .input-groupå…ƒç´ ä¸Š. åº”è¯¥åœ¨ .col-*-*ä¸­åµŒå¥—.input-group Wrong: 1234&lt;div class=\"input-group col-sm-5\"&gt; &lt;span class=\"input-group-addon\"&gt;@&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Username\"&gt;&lt;/div&gt; Right: 123456&lt;div class=\"col-sm-5\"&gt; &lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;@&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" placeholder=\"Username\"&gt; &lt;/div&gt;&lt;/div&gt; .input-groupä¸æ”¯æŒåœ¨inputå•è¾¹(å·¦è¾¹æˆ–è€…å³è¾¹)åŒ…å«å¤šä¸ª.input-group-addonRight (two add-ons are fine so long as theyâ€™re on different sides): 12345&lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;$&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-addon\"&gt;.00&lt;/span&gt;&lt;/div&gt; Wrong: 12345&lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt;USD&lt;/span&gt; &lt;span class=\"input-group-addon\"&gt;$&lt;/span&gt; &lt;input type=\"text\" class=\"form-control\"&gt;&lt;/div&gt; Wrong: 12345&lt;div class=\"input-group\"&gt; &lt;input type=\"text\" class=\"form-control\"&gt; &lt;span class=\"input-group-addon\"&gt;.00&lt;/span&gt; &lt;span class=\"input-group-addon\"&gt;USD&lt;/span&gt;&lt;/div&gt; button.btn åªèƒ½ç”¨åœ¨&lt;a&gt; button &lt;label&gt; &lt;input&gt;å…ƒç´ ä¸Š1234&lt;a class=\"btn btn-primary\"&gt;Button&lt;/a&gt;&lt;button type=\"button\" class=\"btn btn-primary\"&gt;Button&lt;/button&gt;&lt;input type=\"button\" class=\"btn btn-primary\" value=\"Button\"&gt;&lt;label class=\"btn btn-primary\"&gt;Button&lt;/label&gt; buttonå’Œinputå¤§å°(åœ¨input-groupä¸­) åº”è¯¥ä½¿ç”¨input-group-lgä»£æ›¿btn-lg Wrong: 123456&lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button class=\"btn btn-default btn-lg\" type=\"button\"&gt;Go!&lt;/button&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control input-lg\" /&gt;&lt;/div&gt; Right: 123456&lt;div class=\"input-group input-group-lg\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button class=\"btn btn-default\" type=\"button\"&gt;Go!&lt;/button&gt; &lt;/span&gt; &lt;input type=\"text\" class=\"form-control\" /&gt;&lt;/div&gt; .btn.dropdown-toggle åªèƒ½æ˜¯button groupæœ€åä¸€ä¸ªå…ƒç´ .Due to current limitations, for proper rendering, the dropdown toggle button in a split button dropdown must be the last button in the .btn-group. Wrong:1234567891011121314&lt;div class=\"btn-group\"&gt; &lt;button type=\"button\" class=\"btn btn-danger dropdown-toggle\" data-toggle=\"dropdown\"&gt; &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;span class=\"sr-only\"&gt;Toggle Dropdown&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;button type=\"button\" class=\"btn btn-danger\"&gt;Action&lt;/button&gt;&lt;/div&gt; Right:1234567891011121314&lt;div class=\"btn-group\"&gt; &lt;button type=\"button\" class=\"btn btn-danger\"&gt;Action&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-danger dropdown-toggle\" data-toggle=\"dropdown\"&gt; &lt;span class=\"caret\"&gt;&lt;/span&gt; &lt;span class=\"sr-only\"&gt;Toggle Dropdown&lt;/span&gt; &lt;/button&gt; &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Something else here&lt;/a&gt;&lt;/li&gt; &lt;li class=\"divider\"&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;Separated link&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; checkbox.checkboxclassè¦æ±‚ç»“æ„å›ºå®š .checkbox&gt;label&gt;input[type=&quot;checkbox&quot;] 12345&lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" /&gt; Label text goes here &lt;/label&gt;&lt;/div&gt; .checkbox-inline åªèƒ½ç”¨åœ¨ &lt;label&gt;å…ƒç´ Wrong: 123&lt;span class=\"checkbox-inline\"&gt; &lt;input type=\"checkbox\" id=\"inlineCheckbox1\" value=\"option1\" /&gt; Option number one&lt;/span&gt; Right: 123&lt;label class=\"checkbox-inline\"&gt; &lt;input type=\"checkbox\" id=\"inlineCheckbox1\" value=\"option1\" /&gt; Option number one&lt;/label&gt; .checkbox-inline classæ­£ç¡®çš„æ ‡ç­¾ç»“æ„ æ­£ç¡®çš„ç»“æ„æ˜¯label.checkbox-inline&gt;input[type=&quot;checkbox&quot;] .checkbox-inline requires a specific DOM structure. There cannot be any intervening layers of elements. Wrong: 12345&lt;label class=\"checkbox-inline\"&gt; &lt;span class=\"my-awesome-wrapper\"&gt; &lt;input type=\"checkbox\" id=\"inlineCheckbox1\" value=\"option1\" /&gt; Option number one &lt;/span&gt;&lt;/label&gt; Right: 123&lt;label class=\"checkbox-inline\"&gt; &lt;input type=\"checkbox\" id=\"inlineCheckbox1\" value=\"option1\" /&gt; Option number one&lt;/label&gt; .radioclassè¦æ±‚å›ºå®šç»“æ„ .radio&gt;label&gt;input[type=&quot;radio&quot;] 123456&lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"someChoiceGroup\" value=\"option1\" /&gt; This is option number one &lt;/label&gt;&lt;/div&gt; .radio-inline åªåº”è¯¥ç”¨åœ¨ &lt;label&gt;å…ƒç´ Wrong: 123456&lt;span class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio1\" value=\"option1\" /&gt; Option one&lt;/span&gt;&lt;span class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\" /&gt; Option two&lt;/span&gt; Right: 123456&lt;label class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio1\" value=\"option1\" /&gt; Option one&lt;/label&gt;&lt;label class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\" /&gt; Option two&lt;/label&gt; .radio-inline classæ­£ç¡®ä½¿ç”¨æ–¹å¼ æ­£ç¡®æ ‡ç­¾ç»“æ„ï¼šlabel.radio-inline&gt;input[type=&quot;radio&quot;] .radio-inline requires a specific DOM structure. There cannot be any intervening layers of elements. Wrong: 12345678910&lt;label class=\"radio-inline\"&gt; &lt;span class=\"my-awesome-wrapper\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio1\" value=\"option1\" /&gt; Option one &lt;/span&gt;&lt;/label&gt;&lt;label class=\"radio-inline\"&gt; &lt;span class=\"my-awesome-wrapper\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\" /&gt; Option two &lt;/span&gt;&lt;/label&gt; Right: 123456&lt;label class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio1\" value=\"option1\" /&gt; Option one&lt;/label&gt;&lt;label class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"someInlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\" /&gt; Option two&lt;/label&gt; .active &amp; checked.checkboxå’Œ.radioçš„.activeçŠ¶æ€ .bt-groupä¸­ä½¿ç”¨.checkboxå’Œ.radioï¼Œå½“input[type=&quot;checkbox&quot;]å’Œinput[type=&quot;radio&quot;]å…ƒç´ æ˜¯checkedçŠ¶æ€ï¼Œå®ƒä»¬çš„&lt;label&gt;æ ‡ç­¾å¿…é¡»æ·»åŠ .activeæ ·å¼ã€‚ Wrong: 12345678&lt;div class=\"btn-group\" data-toggle=\"buttons\"&gt; &lt;label class=\"btn btn-primary\"&gt; &lt;input type=\"checkbox\" checked /&gt; Option 1 (pre-checked) &lt;/label&gt; &lt;label class=\"btn btn-primary active\"&gt; &lt;input type=\"checkbox\" /&gt; Option 2 (not pre-checked) &lt;/label&gt;&lt;/div&gt; Right: 12345678&lt;div class=\"btn-group\" data-toggle=\"buttons\"&gt; &lt;label class=\"btn btn-primary active\"&gt; &lt;input type=\"checkbox\" checked /&gt; Option 1 (pre-checked) &lt;/label&gt; &lt;label class=\"btn btn-primary\"&gt; &lt;input type=\"checkbox\" /&gt; Option 2 (not pre-checked) &lt;/label&gt;&lt;/div&gt; Wrong: 12345678&lt;div class=\"btn-group\" data-toggle=\"buttons\"&gt; &lt;label class=\"btn btn-primary\"&gt; &lt;input type=\"radio\" name=\"options\" id=\"option1\" checked /&gt; Option 1 (preselected) &lt;/label&gt; &lt;label class=\"btn btn-primary active\"&gt; &lt;input type=\"radio\" name=\"options\" id=\"option2\" /&gt; Option 2 (not preselected) &lt;/label&gt;&lt;/div&gt; Right: 12345678&lt;div class=\"btn-group\" data-toggle=\"buttons\"&gt; &lt;label class=\"btn btn-primary active\"&gt; &lt;input type=\"radio\" name=\"options\" id=\"option1\" checked /&gt; Option 1 (preselected) &lt;/label&gt; &lt;label class=\"btn btn-primary\"&gt; &lt;input type=\"radio\" name=\"options\" id=\"option2\" /&gt; Option 2 (not preselected) &lt;/label&gt;&lt;/div&gt; panel.panel-footerå’Œ.panel-heading çˆ¶å…ƒç´ å¿…é¡»æ˜¯ .panel.panel-footerã€ .panel-headingå¿…é¡»æ˜¯.panelçš„ç›´æ¥å­èŠ‚ç‚¹ã€‚.panel-footerã€.panel-heading å’Œ .panelä¹‹é—´ä¸èƒ½æœ‰ä»»ä½•çš„å…¶å®ƒèŠ‚ç‚¹å¹²æ‰°ã€‚ Wrong: 1234567891011&lt;div class=\"panel panel-default\"&gt; &lt;div class=\"my-super-special-wrapper\"&gt; &lt;div class=\"panel-heading\"&gt;Panel heading without title&lt;/div&gt; &lt;/div&gt; &lt;div class=\"panel-body\"&gt; Panel content &lt;/div&gt; &lt;div class=\"my-super-special-wrapper\"&gt; &lt;div class=\"panel-footer\"&gt;Panel footer&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; Right: 1234567&lt;div class=\"panel panel-default\"&gt; &lt;div class=\"panel-heading\"&gt;Panel heading without title&lt;/div&gt; &lt;div class=\"panel-body\"&gt; Panel content &lt;/div&gt; &lt;div class=\"panel-footer\"&gt;Panel footer&lt;/div&gt;&lt;/div&gt; .panel-titleçˆ¶å…ƒç´ å¿…é¡»æ˜¯.panel-headingtable.table-responsiceåº”ç”¨åœ¨tableçš„çˆ¶å…ƒç´ ä¸Šï¼Œè€Œä¸æ˜¯tableå…ƒç´ Wrong: 123&lt;table class=\"table table-responsive\"&gt; ...&lt;/table&gt; Right: 12345&lt;div class=\"table-responsive\"&gt; &lt;table class=\"table\"&gt; ... &lt;/table&gt;&lt;/div&gt; form.form-groupå…ƒç´ ä¸èƒ½åµŒå¥—123456&lt;div class=\"form-group\"&gt; ...&lt;/div&gt;&lt;div class=\"form-group\"&gt; ...&lt;/div&gt; .form-inline æˆ–è€….form-horizontalç›´æ¥ä½¿ç”¨åœ¨ .form-group. å…ƒç´ ä¸Š æˆ–è€… .form-group åµŒå¥—åœ¨ .form-inline or .form-horizontalå†…éƒ¨ 1234567891011&lt;div class=\"form-inline\"&gt; &lt;div class=\"form-group\"&gt; ... &lt;/div&gt;&lt;/div&gt;&lt;div class=\"form-horizontal\"&gt; &lt;div class=\"form-group\"&gt; ... &lt;/div&gt;&lt;/div&gt; .form-control-feedback .form-control-feedbackå…ƒç´ çš„ç¥–å…ˆå…ƒç´ å¿…é¡»æœ‰ .form-group.has-feedback æ ·å¼ Wrong: 12345&lt;div class=\"form-group has-error\"&gt; &lt;label class=\"control-label\" for=\"inputError2\"&gt;Input with error&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputError2\"&gt; &lt;span class=\"glyphicon glyphicon-remove form-control-feedback\"&gt;&lt;/span&gt;&lt;/div&gt; Right: 12345&lt;div class=\"form-group has-feedback has-error\"&gt; &lt;label class=\"control-label\" for=\"inputError2\"&gt;Input with error&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputError2\"&gt; &lt;span class=\"glyphicon glyphicon-remove form-control-feedback\"&gt;&lt;/span&gt;&lt;/div&gt; .form-controlä¸èƒ½ç”¨åœ¨æ²¡æœ‰äº¤äº’è¾“å…¥çš„æ–‡æœ¬å±æ€§çš„inputä¸ŠRight 1234567&lt;input type=\"text\" class=\"form-control\" value=\"Text input\" /&gt;&lt;textarea class=\"form-control\"&gt;Text area&lt;/textarea&gt;&lt;select class=\"form-control\"&gt; &lt;option&gt;Option 1&lt;/option&gt; &lt;option&gt;Option 2&lt;/option&gt; ...&lt;/select&gt; glyphicon.glyphicon-*å¿…é¡»å’Œ.glyphiconç»“åˆä½¿ç”¨1&lt;span class=\"glyphicon glyphicon-heart\"&gt;&lt;/span&gt; .glyphicon-*çš„å…ƒç´ ï¼Œä¸èƒ½æœ‰å­èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹Wrong: 1&lt;span class=\"glyphicon glyphicon-heart\"&gt;&lt;a href=\"#love\"&gt;I love this&lt;/a&gt;&lt;/span&gt; Right: 1&lt;span class=\"glyphicon glyphicon-heart\"&gt;&lt;/span&gt; &lt;a href=\"#love\"&gt;I love this&lt;/a&gt; modalmodalæ­£ç¡®çš„åµŒå¥—ç»“æ„ .modal .modal-dialog .modal-content .modal-header .modal-title .modal-body .modal-footeråµŒå¥—ç»“æ„ä¸èƒ½æ”¹å˜ã€‚ .modal-header .modal-footeræ˜¯å¯é€‰çš„ã€‚ 1234567891011121314151617&lt;div class=\"modal fade\"&gt; &lt;div class=\"modal-dialog\"&gt; &lt;div class=\"modal-content\"&gt; &lt;div class=\"modal-header\"&gt; &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;span class=\"sr-only\"&gt;Close&lt;/span&gt;&lt;/button&gt; &lt;h4 class=\"modal-title\"&gt;Modal title&lt;/h4&gt; &lt;/div&gt; &lt;div class=\"modal-body\"&gt; &lt;p&gt;One fine body&lt;/p&gt; &lt;/div&gt; &lt;div class=\"modal-footer\"&gt; &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-primary\"&gt;Save changes&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; .hide should not be used on .modal in Bootstrap v3. .hideåœ¨Bootstrap3ä¸­ä¸èƒ½åº”ç”¨åœ¨.modalèº«ä¸Šã€‚ .modalå¿…é¡»å«æœ‰tabindexå’Œroleå±æ€§123&lt;div class=\"modal\" tabindex=\"-1\" role=\"dialog\"&gt; ...&lt;/div&gt; .modal-dialogå…ƒç´ å¿…é¡»å«æœ‰role=&quot;document&quot;123&lt;div class=\"modal-dialog\" role=\"document\"&gt; ...&lt;/div&gt; .alert.alert åŒ…å«dismiss buttonæ—¶ å¿…é¡»åŒ…å« .alert-dismissibleæ ·å¼1234&lt;div class=\"alert alert-warning alert-dismissible\" role=\"alert\"&gt; &lt;button type=\"button\" data-dismiss=\"alert\"&gt;Dismiss&lt;/button&gt; Better check yourself, you're not looking too good.&lt;/div&gt; .alertçš„.closebuttonå¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹1234&lt;div class=\"alert alert-warning alert-dismissible\" role=\"alert\"&gt; &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;span class=\"sr-only\"&gt;Close&lt;/span&gt;&lt;/button&gt; Better check yourself, you're not looking too good.&lt;/div&gt; media.media-left and .media-right åœ¨.media å†…éƒ¨ä½¿ç”¨.12345678&lt;div class=\"media\"&gt; &lt;div class=\"media-left\"&gt; ... &lt;/div&gt; &lt;div class=\"media-body\"&gt; ... &lt;/div&gt;&lt;/div&gt; nav.navbar-left and .navbar-right should not be used outside of navbars.12345678910111213141516&lt;nav class=\"navbar navbar-default\"&gt; &lt;div class=\"container-fluid\"&gt; &lt;div class=\"navbar-header\"&gt; &lt;button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-42\"&gt; &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;a class=\"navbar-brand\" href=\"#\"&gt;Brand&lt;/a&gt; &lt;/div&gt; &lt;div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-42\"&gt; &lt;p class=\"navbar-text navbar-right\"&gt;Signed in as Mark Otto&lt;/p&gt; &lt;/div&gt; &lt;/div&gt;&lt;/nav&gt; .carousel.carousel-inner å¿…é¡»æœ‰ä¸€ä¸ªæ´»åŠ¨çŠ¶æ€çš„å­èŠ‚ç‚¹ .item.active12345&lt;div class=\"carousel-inner\" role=\"listbox\"&gt; &lt;div class=\"item active\"&gt;...&lt;/div&gt; &lt;div class=\"item\"&gt;...&lt;/div&gt; ...&lt;/div&gt; .carousel å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ª .carousel-inner å­èŠ‚ç‚¹12345678910111213141516&lt;div id=\"carousel-example-generic\" class=\"carousel slide\"&gt; &lt;ol class=\"carousel-indicators\"&gt;...&lt;/ol&gt; &lt;div class=\"carousel-inner\" role=\"listbox\"&gt; ... &lt;/div&gt; &lt;a class=\"left carousel-control\" href=\"#carousel-example-generic\" role=\"button\" data-slide=\"prev\"&gt; &lt;span class=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"&gt;&lt;/span&gt; &lt;span class=\"sr-only\"&gt;Previous&lt;/span&gt; &lt;/a&gt; &lt;a class=\"right carousel-control\" href=\"#carousel-example-generic\" role=\"button\" data-slide=\"next\"&gt; &lt;span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\"&gt;&lt;/span&gt; &lt;span class=\"sr-only\"&gt;Next&lt;/span&gt; &lt;/a&gt;&lt;/div&gt; ç­‰ç­‰è§„åˆ™ï¼Œè¯¦æƒ…è§bootlint wiki å‚è€ƒhttps://www.tutorialrepublic.com/twitter-bootstrap-tutorial/ https://github.com/twbs/bootlint/ https://github.com/twbs/bootlint/blob/master/dist/browser/bootlint.js","tags":[{"name":"Bootstrap","slug":"Bootstrap","permalink":"https://betgar.github.io/tags/Bootstrap/"}]},{"title":"iCheckä½¿ç”¨æ€»ç»“","date":"2018-07-11T12:00:00.000Z","path":"2018/07/11/use-the-icheck/","text":"iCheckä½¿ç”¨ æ³¨æ„ï¼šä½¿ç”¨iCheckæ—¶éœ€è¦è‡ªå·±å¼•ç”¨ç›¸å…³çš„çš®è‚¤ï¼Œå®˜æ–¹æä¾›äº†å‡ å¥—çš®è‚¤ï¼Œæ¯ä¸€å¥—è¿˜æœ‰ä¸åŒçš„é¢œè‰²ï¼Œä½¿ç”¨ä¹‹å‰ä¸€å®šè¦å¼•å…¥ç›¸å…³cssï¼Œä¸ç„¶ä¼šå‡ºç°checkboxæ— æ³•æ˜¾ç¤ºçš„çª˜å¢ƒã€‚ åˆå§‹åŒ–iCheck å…·ä½“çš„è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ å¼•å…¥æ ·å¼CSSå’ŒJavaScript 123&lt;script src=\"your-path/jquery.js\"&gt;&lt;/script&gt;&lt;link href=\"your-path/minimal/red.css\" rel=\"stylesheet\"&gt;&lt;script src=\"your-path/icheck.js\"&gt;&lt;/script&gt; æ·»åŠ HTML 1234&lt;input type=\"checkbox\"&gt;&lt;input type=\"checkbox\" checked&gt;&lt;input type=\"radio\" name=\"iCheck\"&gt;&lt;input type=\"radio\" name=\"iCheck\" checked&gt; åˆå§‹åŒ–iCheck 123456789101112131415161718192021222324&lt;!-- ä¾‹å­1ï¼š æŒ‡å®šçš®è‚¤æ ·å¼ --&gt;&lt;script&gt; $(document).ready(function()&#123; $('input').iCheck(&#123; checkboxClass: 'icheckbox_minimal', // æŒ‡å®šçš„çš®è‚¤æ ·å¼ radioClass: 'iradio_minimal', increaseArea: '20%' // optional &#125;); &#125;);&lt;/script&gt;&lt;!-- ä¾‹å­2ï¼š æŒ‡å®šçš®è‚¤æ ·å¼å’Œé¢œè‰² --&gt;&lt;script&gt; $(document).ready(function()&#123; $('input').iCheck(&#123; checkboxClass: 'icheckbox_minimal-red', radioClass: 'iradio_minimal-red', increaseArea: '20%' // optional &#125;); &#125;);&lt;/script&gt;&lt;!-- ä¾‹å­3ï¼š htmlä¸ŠæŒ‡å®šçš®è‚¤ --&gt;&lt;input type=\"checkbox\" checked class=\"minimal\"&gt; å…¨é€‰åŠŸèƒ½å®ç° å®ç°ä¸€ä¸ªå…¨é€‰åŠŸèƒ½ã€‚ 1234567891011121314151617181920&lt;div class=\"row\"&gt; &lt;div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" class=\"js-all\"&gt;checkbox2 &lt;/label&gt; &lt;/div&gt;&lt;/div&gt; &lt;div class=\"row\" data-role=\"checkbox\"&gt; &lt;div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt;checkbox1 &lt;/label&gt; &lt;/div&gt; &lt;div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt;checkbox2 &lt;/label&gt; &lt;/div&gt;&lt;/div&gt; 1234567891011121314151617181920212223$(function () &#123; var checkAll = $('input.js-all'); var checkboxes = $('input[type=\"checkbox\"]', '[data-role=\"checkbox\"]'); $('input').iCheck(); // å…¨éƒ¨é€‰ä¸­æˆ–è€…ä¸é€‰. checkAll.on('ifChecked ifUnchecked', function(event) &#123; if (event.type == 'ifChecked') &#123; checkboxes.iCheck('check'); &#125; else &#123; checkboxes.iCheck('uncheck'); &#125; &#125;); // æ”¹å˜å…¨é€‰checkboxçŠ¶æ€. checkboxes.on('ifChanged', function(event)&#123; if(checkboxes.filter(':checked').length == checkboxes.length) &#123; checkAll.prop('checked', true); &#125; else &#123; checkAll.prop('checked', false); &#125; checkAll.iCheck('update'); &#125;);&#125;); åŠ¨æ€æ·»åŠ checkboxäº‹ä»¶ä»£ç† åŠ¨æ€æ·»åŠ checkboxäº‹ä»¶ä¸ç”Ÿæ•ˆé—®é¢˜ï¼Œåº”è¯¥ä½¿ç”¨äº‹ä»¶ä»£ç†ã€‚ 12345678910111213&lt;div class=\"row\" data-role=\"checkbox\"&gt; &lt;div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt;checkbox1 &lt;/label&gt; &lt;/div&gt; &lt;div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-6\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt;checkbox2 &lt;/label&gt; &lt;/div&gt; &lt;!-- è¿™é‡ŒåŠ¨æ€æ·»åŠ checkbox æ—¶, jséœ€è¦ä¿®æ”¹ä¸ºäº‹ä»¶ä»£ç†æ¨¡å¼ --&gt;&lt;/div&gt; 1234567891011121314// å¦‚æœæ‰€æœ‰&lt;div class=\"row\" data-role=\"checkbox\"&gt;// å†…æ‰€æœ‰çš„checkboxéƒ½é€‰ä¸­ï¼Œæˆ–è€…ä¸å…¨é€‰éœ€è¦åŠ¨æ€çš„æ”¹å˜â€œå…¨é€‰â€checkboxçŠ¶æ€// å› ä¸ºæœ‰åŠ¨æ€åŠ å…¥çš„checkboxï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ä¿®æ”¹æˆä»£ç†äº‹ä»¶var $checkboxContainer = $('.row[data-role=\"checkbox\"]');$checkboxContainer.on('ifChanged', function(event)&#123; // checkboxeséœ€è¦åŠ¨æ€è·å– var checkboxes = $('input[type=\"checkbox\"]', $checkboxContainer); if(checkboxes.filter(':checked').length == checkboxes.length) &#123; checkAll.prop('checked', true); &#125; else &#123; checkAll.prop('checked', false); &#125; checkAll.iCheck('update');&#125;); è·å–checkedçŠ¶æ€çš„checkbox iCheckboxæ˜¯æ²¡æœ‰æä¾›è·å–checkedçŠ¶æ€çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä½ è¦ä½¿ç”¨jQueryæä¾›çš„propæ–¹æ³•ã€‚ 12345678var checkboxes = $('input[type=\"checkbox\"]', $checkboxContainer);// è·å–é€‰ä¸­çš„checkboxvar allChecked = checkboxes.filter(':checked');// è·å–checkedçŠ¶æ€$.each(checkboxes, function (checkbox, i) &#123; console.log($(this).prop('checked')); // true | false&#125;); å‚è€ƒhttp://icheck.fronteed.com/ http://github.com/fronteed/iCheck/ https://stackoverflow.com/questions/17820080/function-select-all-and-icheck https://github.com/fronteed/iCheck/issues/44 https://www.cnblogs.com/xcsn/p/6307610.html","tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://betgar.github.io/tags/jQuery/"},{"name":"iCheck","slug":"iCheck","permalink":"https://betgar.github.io/tags/iCheck/"}]},{"title":"ä¸ªäººè£…æœºè½¯ä»¶","date":"2018-07-03T14:46:12.000Z","path":"2018/07/03/software-for-daily/","text":"ä¸ªäººè£…æœºè½¯ä»¶ æ€»ç»“ä¸€ä¸‹ä¸ªäººwindowsè£…æœºè½¯ä»¶ï¼Œæ¯”è¾ƒé€‚åˆcoder. å‹ç¼©è½¯ä»¶ 7-zip bindizip ä¸‹è½½è½¯ä»¶ è¿…é›·æé€Ÿç‰ˆ you-get proxyee-down å®‰å…¨è½¯ä»¶ ç«ç»’ è¾…åŠ©è½¯ä»¶ ccleaner xmeters rainmeter(å¾ˆæ¼‚äº®ä¹Ÿå¾ˆå¤æ‚) everything freecommander æ–‡æ¡£å·¥å…· ms office typora(markdown) notepad++ SumatraPDF office tool plus æµè§ˆå™¨ firefox(è‡ªåŠ¨åŒæ­¥ä¹¦ç­¾å’Œå¤šä¸ªç»ˆç«¯çš„tabs) chrome é‚®ä»¶ foxmail é€šè®¯è½¯ä»¶ QQ(TIMæ²¡å¹¿å‘Š) weixin ä»£ç†è½¯ä»¶ shadowsocks è¾“å…¥æ³• QQæ‹¼éŸ³ æœç‹—è¾“å…¥æ³• cmd git for windows cmder cygwin ftp filezilla ssh putty xmanager ç¼–è¾‘å™¨&amp;IDE webStorm vscode eclipse spring tool suite plsql developer notepad++ èµ„æ–™ å¯ä»¥çœ‹çœ‹amazingç³»åˆ—ã€‚ https://legacy.gitbook.com/@amazing-apps https://amazing-apps.gitbooks.io/windows-apps-that-amaze-us/zh-CN/","tags":[{"name":"software","slug":"software","permalink":"https://betgar.github.io/tags/software/"}]},{"title":"test-hexo-synax-again","date":"2018-06-26T15:30:00.000Z","path":"2018/06/26/test-hexo-synax-again/","text":"hexoè¯­æ³•æµ‹è¯• é¢„å®šä¹‰å‚æ•°æµ‹è¯•","tags":[{"name":"hexo","slug":"hexo","permalink":"https://betgar.github.io/tags/hexo/"}]},{"title":"Android å¼€å‘ç¯å¢ƒéƒ¨ç½²","date":"2018-06-25T02:00:00.000Z","path":"2018/06/25/android-dev-env/","text":"Android å¼€å‘ç¯å¢ƒéƒ¨ç½² android studio 3.0 android SDK Javaç¯å¢ƒé…ç½® Java SDKå®‰è£…ï¼šJDK8.X Javaç¯å¢ƒå˜é‡é…ç½® æˆ‘çš„ç”µè„‘é…ç½®ç¯å¢ƒå˜é‡ï¼š JAVA_HOME D:\\Android\\jdk1.6.0_03 CLASSPATH %JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar; 3-PATH %JAVA_HOME%\\bin; Android Studioå®‰è£… android studio è§£å‹å°±å¯ä»¥ç”¨. Android SDK manager æ›´æ–°SDK ç¬¬ä¸€æ¬¡å¯åŠ¨android studioï¼Œæœ‰è®©ä½ é€‰æ‹©çš„android SDKçš„è·¯å¾„ï¼Œç„¶åå‹¾é€‰ä¸€äº›é€‰é¡¹ç„¶åè¿›è¡Œæ›´æ–°ã€‚ ä¹Ÿå¯ä»¥è·³è¿‡ï¼Œç„¶åå¯åŠ¨android studioä¹‹åï¼Œè¿›å…¥configureæœç´¢sdkè¿›è¡Œæ›´æ–°ï¼ˆç›®å‰å¥½åƒä¸å­˜åœ¨ç§‘å­¦ä¸Šç½‘çš„é—®é¢˜äº†ï¼‰ã€‚ Android studio å¸¸ç”¨æ’ä»¶ Butterknife Zelezny Parcelable Code Generator Prettify ADB Idea GsonFormat Android Drawable Importer Android Code Generator Android Material Design Icon Generator å‚è€ƒï¼šhttps://www.cnblogs.com/zhayh/p/6555850.html ADBç¯å¢ƒå˜é‡ ADBç¯å¢ƒå˜é‡é…ç½®ï¼Œæ–¹ä¾¿è°ƒè¯•ä½¿ç”¨adbå‘½ä»¤ã€‚ ç¯å¢ƒå˜é‡é‡Œé¢é…ç½®ï¼š ANDROID_HOME=ä½ çš„anroid sdkè·¯å¾„ path=%ANDROID_HOME%\\platform-tools;%ANDROID_HOME%\\tools; å‚è€ƒï¼š https://www.cnblogs.com/yxysuanfa/p/7251253.html ADB usb driverå®‰è£… æ¨èä½¿ç”¨adbinstaller http://adbdriver.com/","tags":[{"name":"android","slug":"android","permalink":"https://betgar.github.io/tags/android/"}]},{"title":"apt-cygå®‰è£…","date":"2018-06-04T00:29:00.000Z","path":"2018/06/04/apt-cyg/","text":"apt-cyg å› ä¸ºä½¿ç”¨åœ¨windowsä¸‹ä½¿ç”¨cygwinï¼Œä¸ºäº†æ–¹ä¾¿å®‰è£…å…¶å®ƒåŒ…ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…apt-cygåŒ…ç®¡ç†å™¨ã€‚ ä½¿ç”¨setup-x86_64.exeå®‰è£…ï¼ˆapt-cygï¼‰ setup-x86_64.exeå·²ç»æ˜¯cygwinçš„åŒ…ç®¡ç†å™¨ï¼Œæ‰€ä»¥å…¶å®ƒåŒ…éƒ½å¯ä»¥é€šè¿‡å®ƒæ¥å®‰è£…ã€‚ åˆ«åæ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œè®¾ç½®åªåœ¨å½“å‰çš„shellç”Ÿæ•ˆ alias cyg-get=â€/cygdrive/d/path/to/cygwin/setup-x86_64.exe -q -Pâ€ å»ºè®®ä½¿ç”¨ftp://sourceware.org/pub/cygwiné•œåƒæ¯”è¾ƒå¿« http://mirrors.163.com/cygwin/cyg-get wget å®‰è£…wget ä½¿ç”¨apt-cygéœ€è¦å…ˆå®‰è£…wget ä¸‹è½½apt-cyg ä¸‹è½½apt-cygä¿å­˜åˆ°$root\\cygwin64\\bin åœ°å€ï¼šhttps://raw.githubusercontent.com/transcode-open/apt-cyg/master/apt-cyg è®¾ç½®é•œåƒæº1234# æ·»åŠ æƒé™chmod +x /bin/apt-cyg# è®¾ç½®å®˜æ–¹é•œåƒapt-cyg mirror ftp://sourceware.org/pub/cygwin å®‰è£…chereçš„package chereå¯ä»¥æŠŠcygwinæ·»åŠ åˆ°èµ„æºç®¡ç†å™¨çš„å³é”®èœå•(windows explorer context menu) 123456# å®‰è£…chereapy-cyg install chere# æ³¨å†Œåˆ°context menuchere -i -t mintty -s bash# windows context menu æœ‰Bash Prompt here apt-cygæºç  å¦‚æœapt-cygå®‰è£…ä¸æˆåŠŸï¼Œç›´æ¥copyä¸‹æ–‡æºç ä¿å­˜apt-cygæ–‡ä»¶ï¼Œæ”¾åˆ°cygwinçš„å®‰è£…ç›®å½•çš„binä¸‹ï¼Œæ·»åŠ ä¸€ä¸‹æ‰§è¡Œæƒé™ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673#!/bin/bash# apt-cyg: install tool for Cygwin similar to debian apt-get## The MIT License (MIT)## Copyright (c) 2013 Trans-code Design## Permission is hereby granted, free of charge, to any person obtaining a copy# of this software and associated documentation files (the \"Software\"), to deal# in the Software without restriction, including without limitation the rights# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell# copies of the Software, and to permit persons to whom the Software is# furnished to do so, subject to the following conditions:## The above copyright notice and this permission notice shall be included in# all copies or substantial portions of the Software.## THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN# THE SOFTWARE.if [ $&#123;BASH_VERSINFO&#125;$&#123;BASH_VERSINFO[1]&#125; -lt 42 ]then echo 'Bash version 4.2+ required' exitfiusage=\"\\NAME apt-cyg - package manager utilitySYNOPSIS apt-cyg [operation] [options] [targets]DESCRIPTION apt-cyg is a package management utility that tracks installed packages on a Cygwin system. Invoking apt-cyg involves specifying an operation with any potential options and targets to operate on. A target is usually a package name, file name, URL, or a search string. Targets can be provided as command line arguments.OPERATIONS install Install package(s). remove Remove package(s) from the system. update Download a fresh copy of the master package list (setup.ini) from the server defined in setup.rc. download Retrieve package(s) from the server, but do not install/upgrade anything. show Display information on given package(s). depends Produce a dependency tree for a package. rdepends Produce a tree of packages that depend on the named package. list Search each locally-installed package for names that match regexp. If no package names are provided in the command line, all installed packages will be queried. listall This will search each package in the master package list (setup.ini) for names that match regexp. category Display all packages that are members of a named category. listfiles List all files owned by a given package. Multiple packages can be specified on the command line. search Search for downloaded packages that own the specified file(s). The path can be relative or absolute, and one or more files can be specified. searchall Search cygwin.com to retrieve file information about packages. The provided target is considered to be a filename and searchall will return the package(s) which contain this file. mirror Set the mirror; a full URL to a location where the database, packages, and signatures for this repository can be found. If no URL is provided, display current mirror. cache Set the package cache directory. If a file is not found in cache directory, it will be downloaded. Unix and Windows forms are accepted, as well as absolute or regular paths. If no directory is provided, display current cache.OPTIONS --nodeps Specify this option to skip all dependency checks. --version Display version and exit.\"version=\"\\apt-cyg version 1The MIT License (MIT)Copyright (c) 2005-9 Stephen Jungels\"function wget &#123; if command wget -h &amp;&gt;/dev/null then command wget \"$@\" else warn wget is not installed, using lynx as fallback set \"$&#123;*: -1&#125;\" lynx -source \"$1\" &gt; \"$&#123;1##*/&#125;\" fi&#125;function find-workspace &#123; # default working directory and mirror # work wherever setup worked last, if possible cache=$(awk ' BEGIN &#123; RS = \"\\n\\\\&lt;\" FS = \"\\n\\t\" &#125; $1 == \"last-cache\" &#123; print $2 &#125; ' /etc/setup/setup.rc) mirror=$(awk ' /last-mirror/ &#123; getline print $1 &#125; ' /etc/setup/setup.rc) mirrordir=$(sed ' s / %2f g s : %3a g ' &lt;&lt;&lt; \"$mirror\") mkdir -p \"$cache/$mirrordir/$arch\" cd \"$cache/$mirrordir/$arch\" if [ -e setup.ini ] then return 0 else get-setup return 1 fi&#125;function get-setup &#123; touch setup.ini mv setup.ini setup.ini-save wget -N $mirror/$arch/setup.bz2 if [ -e setup.bz2 ] then bunzip2 setup.bz2 mv setup setup.ini echo Updated setup.ini else echo Error updating setup.ini, reverting mv setup.ini-save setup.ini fi&#125;function check-packages &#123; if [[ $pks ]] then return 0 else echo No packages found. return 1 fi&#125;function warn &#123; printf '\\e[1;31m%s\\e[m\\n' \"$*\" &gt;&amp;2&#125;function apt-update &#123; if find-workspace then get-setup fi&#125;function apt-category &#123; check-packages find-workspace for pkg in \"$&#123;pks[@]&#125;\" do awk ' $1 == \"@\" &#123; pck = $2 &#125; $1 == \"category:\" &amp;&amp; $0 ~ query &#123; print pck &#125; ' query=\"$pks\" setup.ini done&#125;function apt-list &#123; local sbq for pkg in \"$&#123;pks[@]&#125;\" do let sbq++ &amp;&amp; echo awk 'NR&gt;1 &amp;&amp; $1~pkg &amp;&amp; $0=$1' pkg=\"$pkg\" /etc/setup/installed.db done let sbq &amp;&amp; return awk 'NR&gt;1 &amp;&amp; $0=$1' /etc/setup/installed.db&#125;function apt-listall &#123; check-packages find-workspace local sbq for pkg in \"$&#123;pks[@]&#125;\" do let sbq++ &amp;&amp; echo awk '$1~pkg &amp;&amp; $0=$1' RS='\\n\\n@ ' FS='\\n' pkg=\"$pkg\" setup.ini done&#125;function apt-listfiles &#123; check-packages find-workspace local pkg sbq for pkg in \"$&#123;pks[@]&#125;\" do (( sbq++ )) &amp;&amp; echo if [ ! -e /etc/setup/\"$pkg\".lst.gz ] then download \"$pkg\" fi gzip -cd /etc/setup/\"$pkg\".lst.gz done&#125;function apt-show &#123; find-workspace check-packages for pkg in \"$&#123;pks[@]&#125;\" do (( notfirst++ )) &amp;&amp; echo awk ' $1 == query &#123; print fd++ &#125; END &#123; if (! fd) print \"Unable to locate package \" query &#125; ' RS='\\n\\n@ ' FS='\\n' query=\"$pkg\" setup.ini done&#125;function apt-depends &#123; find-workspace check-packages for pkg in \"$&#123;pks[@]&#125;\" do awk ' @include \"join\" $1 == \"@\" &#123; apg = $2 &#125; $1 == \"requires:\" &#123; for (z=2; z&lt;=NF; z++) reqs[apg][z-1] = $z &#125; END &#123; prpg(ENVIRON[\"pkg\"]) &#125; function smartmatch(small, large, values) &#123; for (each in large) values[large[each]] return small in values &#125; function prpg(fpg) &#123; if (smartmatch(fpg, spath)) return spath[length(spath)+1] = fpg print join(spath, 1, length(spath), \" &gt; \") if (isarray(reqs[fpg])) for (each in reqs[fpg]) prpg(reqs[fpg][each]) delete spath[length(spath)] &#125; ' setup.ini done&#125;function apt-rdepends &#123; find-workspace for pkg in \"$&#123;pks[@]&#125;\" do awk ' @include \"join\" $1 == \"@\" &#123; apg = $2 &#125; $1 == \"requires:\" &#123; for (z=2; z&lt;=NF; z++) reqs[$z][length(reqs[$z])+1] = apg &#125; END &#123; prpg(ENVIRON[\"pkg\"]) &#125; function smartmatch(small, large, values) &#123; for (each in large) values[large[each]] return small in values &#125; function prpg(fpg) &#123; if (smartmatch(fpg, spath)) return spath[length(spath)+1] = fpg print join(spath, 1, length(spath), \" &lt; \") if (isarray(reqs[fpg])) for (each in reqs[fpg]) prpg(reqs[fpg][each]) delete spath[length(spath)] &#125; ' setup.ini done&#125;function apt-download &#123; check-packages find-workspace local pkg sbq for pkg in \"$&#123;pks[@]&#125;\" do (( sbq++ )) &amp;&amp; echo download \"$pkg\" done&#125;function download &#123; local pkg digest digactual pkg=$1 # look for package and save desc file awk '$1 == pc' RS='\\n\\n@ ' FS='\\n' pc=$pkg setup.ini &gt; desc if [ ! -s desc ] then echo Unable to locate package $pkg exit 1 fi # download and unpack the bz2 or xz file # pick the latest version, which comes first set -- $(awk '$1 == \"install:\"' desc) if (( ! $# )) then echo 'Could not find \"install\" in package description: obsolete package?' exit 1 fi dn=$(dirname $2) bn=$(basename $2) # check the md5 digest=$4 case $&#123;#digest&#125; in 32) hash=md5sum ;; 128) hash=sha512sum ;; esac mkdir -p \"$cache/$mirrordir/$dn\" cd \"$cache/$mirrordir/$dn\" if ! test -e $bn || ! $hash -c &lt;&lt;&lt; \"$digest $bn\" then wget -O $bn $mirror/$dn/$bn $hash -c &lt;&lt;&lt; \"$digest $bn\" || exit fi tar tf $bn | gzip &gt; /etc/setup/\"$pkg\".lst.gz cd ~- mv desc \"$cache/$mirrordir/$dn\" echo $dn $bn &gt; /tmp/dwn&#125;function apt-search &#123; check-packages echo Searching downloaded packages... for pkg in \"$&#123;pks[@]&#125;\" do key=$(type -P \"$pkg\" | sed s./..) [[ $key ]] || key=$pkg for manifest in /etc/setup/*.lst.gz do if gzip -cd $manifest | grep -q \"$key\" then package=$(sed ' s,/etc/setup/,, s,.lst.gz,, ' &lt;&lt;&lt; $manifest) echo $package fi done done&#125;function apt-searchall &#123; cd /tmp for pkg in \"$&#123;pks[@]&#125;\" do printf -v qs 'text=1&amp;arch=%s&amp;grep=%s' $arch \"$pkg\" wget -O matches cygwin.com/cgi-bin2/package-grep.cgi?\"$qs\" awk ' NR == 1 &#123;next&#125; mc[$1]++ &#123;next&#125; /-debuginfo-/ &#123;next&#125; /^cygwin32-/ &#123;next&#125; &#123;print $1&#125; ' FS=-[[:digit:]] matches done&#125;function apt-install &#123; check-packages find-workspace local pkg dn bn requires wr package sbq script for pkg in \"$&#123;pks[@]&#125;\" do if grep -q \"^$pkg \" /etc/setup/installed.db then echo Package $pkg is already installed, skipping continue fi (( sbq++ )) &amp;&amp; echo echo Installing $pkg download $pkg read dn bn &lt;/tmp/dwn echo Unpacking... cd \"$cache/$mirrordir/$dn\" tar -x -C / -f $bn # update the package database awk ' ins != 1 &amp;&amp; pkg &lt; $1 &#123; print pkg, bz, 0 ins = 1 &#125; 1 END &#123; if (ins != 1) print pkg, bz, 0 &#125; ' pkg=\"$pkg\" bz=$bn /etc/setup/installed.db &gt; /tmp/awk.$$ mv /etc/setup/installed.db /etc/setup/installed.db-save mv /tmp/awk.$$ /etc/setup/installed.db [ -v nodeps ] &amp;&amp; continue # recursively install required packages requires=$(awk '$1==\"requires\", $0=$2' FS=': ' desc) cd ~- wr=0 if [[ $requires ]] then echo Package $pkg requires the following packages, installing: echo $requires for package in $requires do if grep -q \"^$package \" /etc/setup/installed.db then echo Package $package is already installed, skipping continue fi apt-cyg install --noscripts $package || (( wr++ )) done fi if (( wr )) then echo some required packages did not install, continuing fi # run all postinstall scripts [ -v noscripts ] &amp;&amp; continue find /etc/postinstall -name '*.sh' | while read script do echo Running $script $script mv $script $script.done done echo Package $pkg installed done&#125;function apt-remove &#123; check-packages cd /etc cygcheck awk bash bunzip2 grep gzip mv sed tar xz &gt; setup/essential.lst for pkg in \"$&#123;pks[@]&#125;\" do if ! grep -q \"^$pkg \" setup/installed.db then echo Package $pkg is not installed, skipping continue fi if [ ! -e setup/\"$pkg\".lst.gz ] then warn Package manifest missing, cannot remove $pkg. Exiting exit 1 fi gzip -dk setup/\"$pkg\".lst.gz awk ' NR == FNR &#123; if ($NF) ess[$NF] next &#125; $NF in ess &#123; exit 1 &#125; ' FS='[/\\\\\\\\]' setup/&#123;essential,$pkg&#125;.lst esn=$? if [ $esn = 0 ] then echo Removing $pkg if [ -e preremove/\"$pkg\".sh ] then preremove/\"$pkg\".sh rm preremove/\"$pkg\".sh fi mapfile dt &lt; setup/\"$pkg\".lst for each in $&#123;dt[*]&#125; do [ -f /$each ] &amp;&amp; rm /$each done for each in $&#123;dt[*]&#125; do [ -d /$each ] &amp;&amp; rmdir --i /$each done rm -f setup/\"$pkg\".lst.gz postinstall/\"$pkg\".sh.done awk -i inplace '$1 != ENVIRON[\"pkg\"]' setup/installed.db echo Package $pkg removed fi rm setup/\"$pkg\".lst if [ $esn = 1 ] then warn apt-cyg cannot remove package $pkg, exiting exit 1 fi done&#125;function apt-mirror &#123; if [ \"$pks\" ] then awk -i inplace ' 1 /last-mirror/ &#123; getline print \"\\t\" pks &#125; ' pks=\"$pks\" /etc/setup/setup.rc echo Mirror set to \"$pks\". else awk ' /last-mirror/ &#123; getline print $1 &#125; ' /etc/setup/setup.rc fi&#125;function apt-cache &#123; if [ \"$pks\" ] then vas=$(cygpath -aw \"$pks\") awk -i inplace ' 1 /last-cache/ &#123; getline print \"\\t\" vas &#125; ' vas=\"$&#123;vas//\\\\/\\\\\\\\&#125;\" /etc/setup/setup.rc echo Cache set to \"$vas\". else awk ' /last-cache/ &#123; getline print $1 &#125; ' /etc/setup/setup.rc fi&#125;if [ -p /dev/stdin ]then mapfile -t pksfi# process optionsuntil [ $# = 0 ]do case \"$1\" in --nodeps) nodeps=1 shift ;; --noscripts) noscripts=1 shift ;; --version) printf \"$version\" exit ;; update) command=$1 shift ;; list | cache | remove | depends | listall | download | listfiles |\\ show | mirror | search | install | category | rdepends | searchall ) if [[ $command ]] then pks+=(\"$1\") else command=$1 fi shift ;; *) pks+=(\"$1\") shift ;; esacdoneset -aif type -t apt-$command | grep -q functionthen readonly arch=$&#123;HOSTTYPE/i6/x&#125; apt-$commandelse printf \"$usage\"fi","tags":[{"name":"cygwin","slug":"cygwin","permalink":"https://betgar.github.io/tags/cygwin/"}]},{"title":"npmå¸¸ç”¨å‘½ä»¤","date":"2018-06-04T00:00:00.000Z","path":"2018/06/04/npm-common-commands/","text":"npmå¸¸ç”¨å‘½ä»¤ æ€»ç»“ä¸€ä¸‹npmå¸¸ç”¨çš„å‘½ä»¤ã€‚ 123456789101112131415npm -vnpm install -g npm@latestnpm install -g npm@nextnpm install -g npm@versionnpm updatenpm outdatednpm uninstall lodash# å¦‚éœ€ä» package.json æ–‡ä»¶ä¸­åˆ é™¤ä¾èµ–ï¼Œéœ€è¦åœ¨å‘½ä»¤åæ·»åŠ å‚æ•° --savenpm uninstall --save lodash # package.json æ–‡ä»¶ä¸­ä¾èµ–devDependencyï¼Œå°±æ˜¯--save-dev å‚æ•°ä¿å­˜çš„# å¿…é¡»é€šè¿‡ --save-dev å‚æ•°å¯ä»¥å°†å…¶å¸è½½ã€‚npm uninstall --save-dev lodash npmç”Ÿå‘½å‘¨æœŸçš„å‘½ä»¤ install: å®‰è£…ä¾èµ–ã€‚ npm run installçš„é»˜è®¤å€¼æ˜¯node-gyp rebuildï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰binding.gypæ–‡ä»¶ã€‚ buildï¼šæ„å»ºé¡¹ç›®ã€‚ npm è„šæœ¬æœ‰preå’Œpostä¸¤ä¸ªé’©å­ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œbuildè„šæœ¬å‘½ä»¤çš„é’©å­å°±æ˜¯prebuildå’Œpostbuild ã€‚ 12345678// package.json&#123; \"scripts\": &#123; \"prebuild\": \"echo I run before the build script\", \"build\": \"cross-env NODE_ENV=production webpack\", \"postbuild\": \"echo I run after the build script\" &#125;&#125; rebuildï¼šé‡æ–°æ„å»ºã€‚ testï¼šæµ‹è¯•ã€‚ startï¼šå¼€å‘é˜¶æ®µå¯åŠ¨æœåŠ¡ã€‚ ä¸Šé¢ä»£ç ä¸­ï¼Œnpm run startçš„é»˜è®¤å€¼æ˜¯node server.jsï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰server.jsè¿™ä¸ªè„šæœ¬ã€‚ restartï¼šé‡æ–°å¯åŠ¨ã€‚ npm restart æ˜¯ä¸€ä¸ªå¤åˆå‘½ä»¤ï¼Œå®é™…ä¸Šä¼šæ‰§è¡Œä¸‰ä¸ªè„šæœ¬å‘½ä»¤ï¼šstopã€restartã€startã€‚å…·ä½“çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ã€‚ prerestart prestop stop poststop restart prestart start poststart postrestart stopï¼šåœæ­¢æœåŠ¡ã€‚ publishï¼šå¯¹å¤–å‘å¸ƒpackageã€‚ republish npm default hook npmå‘½ä»¤çš„é»˜è®¤é’©å­å‘½ä»¤ã€‚ prepublishï¼Œpostpublish preinstallï¼Œpostinstall preuninstallï¼Œpostuninstall preversionï¼Œpostversion pretestï¼Œposttest prestopï¼Œpoststop prestartï¼Œpoststart prerestartï¼Œpostrestart æ³¨æ„ï¼š prepublishè¿™ä¸ªé’©å­ä¸ä»…ä¼šåœ¨npm publishå‘½ä»¤ä¹‹å‰è¿è¡Œï¼Œè¿˜ä¼šåœ¨npm installï¼ˆä¸å¸¦ä»»ä½•å‚æ•°ï¼‰å‘½ä»¤ä¹‹å‰è¿è¡Œã€‚è¿™ç§è¡Œä¸ºå¾ˆå®¹æ˜“è®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ï¼Œæ‰€ä»¥ npm 4 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é’©å­prepareï¼Œè¡Œä¸ºç­‰åŒäºprepublishï¼Œè€Œä» npm 5 å¼€å§‹ï¼Œprepublishå°†åªåœ¨npm publishå‘½ä»¤ä¹‹å‰è¿è¡Œã€‚ npm shortcut commandså››ä¸ªå¸¸ç”¨çš„ npm è„šæœ¬æœ‰ç®€å†™å½¢å¼ã€‚ npm startæ˜¯npm run start npm stopæ˜¯npm run stopçš„ç®€å†™ npm testæ˜¯npm run testçš„ç®€å†™ npm restartæ˜¯npm run stop &amp;&amp; npm run restart &amp;&amp; npm run startçš„ç®€å†™ npm runæ˜¯npm run-scriptçš„ç®€å†™ã€‚ npm config å¥½å¤šå†…å®¹ä»¥ååœ¨è¡¥å……ã€‚ npm scriptså˜é‡ nodeç¯å¢ƒä¸­å¯ä»¥å¼•ç”¨package.jsonå’Œbashç­‰å˜é‡ã€‚ å˜é‡å‰ç¼€ï¼šnpm_package_npm è„šæœ¬æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥ä½¿ç”¨ npm çš„å†…éƒ¨å˜é‡ã€‚ é¦–å…ˆï¼Œé€šè¿‡npm_package_å‰ç¼€ï¼Œnpm è„šæœ¬å¯ä»¥æ‹¿åˆ°package.jsoné‡Œé¢çš„å­—æ®µã€‚æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªpackage.jsonã€‚ 12345678&gt; &#123;&gt; &quot;name&quot;: &quot;foo&quot;, &gt; &quot;version&quot;: &quot;1.2.5&quot;,&gt; &quot;scripts&quot;: &#123;&gt; &quot;view&quot;: &quot;node view.js&quot;&gt; &#125;&gt; &#125;&gt; é‚£ä¹ˆï¼Œå˜é‡npm_package_nameè¿”å›fooï¼Œå˜é‡npm_package_versionè¿”å›1.2.5ã€‚ 1234&gt; // view.js&gt; console.log(process.env.npm_package_name); // foo&gt; console.log(process.env.npm_package_version); // 1.2.5&gt; ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç¯å¢ƒå˜é‡process.envå¯¹è±¡ï¼Œæ‹¿åˆ°package.jsonçš„å­—æ®µå€¼ã€‚ å˜é‡å‰ç¼€ï¼š$npm_package ï¼ˆbashå˜é‡ï¼‰å¦‚æœæ˜¯ Bash è„šæœ¬ï¼Œå¯ä»¥ç”¨$npm_package_nameå’Œ$npm_package_versionå–åˆ°è¿™ä¸¤ä¸ªå€¼ã€‚ å˜é‡ï¼šnpm_config_npm è„šæœ¬è¿˜å¯ä»¥é€šè¿‡npm_config_å‰ç¼€ï¼Œæ‹¿åˆ° npm çš„é…ç½®å˜é‡ï¼Œå³npm config get xxxå‘½ä»¤è¿”å›çš„å€¼ã€‚æ¯”å¦‚ï¼Œå½“å‰æ¨¡å—çš„å‘è¡Œæ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡npm_config_tagå–åˆ°ã€‚ 1234// config&#123; \"view\": \"echo $npm_config_tag\"&#125; ç¯å¢ƒå˜é‡è¦†ç›–package.jsonçš„configå¯¹è±¡package.jsoné‡Œé¢çš„configå¯¹è±¡ï¼Œå¯ä»¥è¢«ç¯å¢ƒå˜é‡è¦†ç›–ã€‚ 12345&#123; &quot;name&quot; : &quot;foo&quot;, &quot;config&quot; : &#123; &quot;port&quot; : &quot;8080&quot; &#125;, &quot;scripts&quot; : &#123; &quot;start&quot; : &quot;node server.js&quot; &#125;&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œnpm_package_config_portå˜é‡è¿”å›çš„æ˜¯8080ã€‚è¿™ä¸ªå€¼å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•è¦†ç›–ã€‚ 1$ npm config set foo:port 80 package.json è¯¦æƒ…è§ï¼šhttp://javascript.ruanyifeng.com/nodejs/packagejson.html package.lock.json npm5ä»¥åï¼Œæ¯æ¬¡npm installä¼šè‡ªåŠ¨åˆ›å»ºpackage.lock.jsonï¼Œä½†æ˜¯æœ‰ä¸€äº›æ½œè§„åˆ™ã€‚ å¦‚æœpackage.jsonå’Œpackage.lock.jsonä¸€è‡´ï¼Œåˆ™ä½¿ç”¨package.lock.jsonä¸­çš„é…ç½®ã€‚ å¦‚æœpackage.jsonå’Œpackage.lock.jsonä¸ä¸€è‡´ï¼Œåˆ™ä½¿ç”¨package.jsonä¸­çš„é…ç½®ã€‚","tags":[{"name":"npm","slug":"npm","permalink":"https://betgar.github.io/tags/npm/"}]},{"title":"Nodeç¯å¢ƒé…ç½®","date":"2018-05-31T16:00:00.000Z","path":"2018/06/01/node-env-config/","text":"Nodeç¯å¢ƒé…ç½® Nodeç¯å¢ƒåŠé…ç½®å‚è€ƒ nvm for windows nvmæ˜¯ä¸€ä¸ªNodeçš„ç‰ˆæœ¬ç®¡ç†æ¨¡å—ï¼Œä½¿ç”¨å®ƒå¯ä»¥éšæ—¶åˆ‡æ¢Nodeç¯å¢ƒã€‚ æ³¨æ„: å®‰è£… node å‰ä¿è¯è‡ªå·±ç”µè„‘ä¸­çš„nodeï¼Œnpmå·²å¸è½½å¹²å‡€ nvmå®‰è£… nvm-windows æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ 1nvm --version æŸ¥çœ‹å½“å‰å·²å®‰è£… node çš„ç‰ˆæœ¬ 1nvm ls å®‰è£…æŸç‰ˆæœ¬ nodeï¼Œ æ ¹æ® LTS æŸ¥çœ‹æ­¤å¤„å®‰è£… 8.11.1 1nvm install 8.11.1 ä½¿ç”¨æŸç‰ˆæœ¬ node 1nvm use 8.11.1 æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨ node 1node -v nrmç®¡ç†ä¸‹è½½æº nrm æ˜¯ä¸ºäº†è§£å†³åˆ‡æ¢ npm æºçš„é—®é¢˜ï¼Œå› ä¸ºå¦‚æœç›´æ¥é€šè¿‡ npm æ‰‹åŠ¨è®¾ç½® registry éå¸¸éº»çƒ¦ï¼Œå¹¶ä¸”ä¸å®¹æ˜“è®°å¿†ï¼Œå› æ­¤ï¼Œæ‰æœ‰äº† nrm çš„å‡ºç°ã€‚npmçš„å®˜æ–¹æºå¯¹å¹¿å¤§ä¸­å›½å¼€å‘è€…æ¥è¯´è¾ƒå¡ï¼Œå› æ­¤æ¨è cnpm æˆ–è€… taobaoã€‚ nrm æ˜¯ä¸ºäº†è§£å†³åˆ‡æ¢npm æºçš„é—®é¢˜ï¼Œå› ä¸ºå¦‚æœç›´æ¥é€šè¿‡ npm æ‰‹åŠ¨è®¾ç½® registry éå¸¸éº»çƒ¦ï¼Œå¹¶ä¸”ä¸å®¹æ˜“è®°å¿†ï¼Œå› æ­¤ï¼Œæ‰æœ‰äº†nrmçš„å‡ºç°ã€‚ npmçš„å®˜æ–¹æºå¯¹å¹¿å¤§ä¸­å›½å¼€å‘è€…æ¥è¯´è¾ƒå¡ï¼Œå› æ­¤æ¨è cnpm æˆ–è€… taobaoã€‚ nrmçš„å®‰è£…æœ‰äº†npmåï¼Œä¸€åˆ‡éƒ½å˜å¾—éå¸¸ç®€å•ï¼Œå…¨å±€å®‰è£… nrm, ä½¿ç”¨taobaoæºä¸‹è½½ 1npm install -g nrm æŸ¥è¯¢å½“å‰æœ‰å“ªäº›å¯ç”¨æº 1nrm ls åˆ‡æ¢æ·˜å®æº 1nrm use taobao æµ‹è¯•æºå»¶è¿Ÿæ¯«ç§’æ•° (ä¹Ÿä¸å½“å‰ç½‘ç»œç¯å¢ƒæœ‰å…³) 1nrm test python å®‰è£… node-gypæ¨¡å—éœ€è¦å®‰è£…python(python (v2.7 recommended, v3.x.x is not supported) pythonä¾èµ–.net framework 4.5 è§£å†³æ–¹å¼1ï¼š 12# run as Administratornpm install --global --production windows-build-tools è§£å†³æ–¹å¼2ï¼šè‡ªå·±åˆ°å¾®è½¯çš„å®˜ç½‘ä¸‹è½½æœ€æ–°çš„.net frameworkå®‰è£…ã€‚ node-gypé…ç½®python æ³¨æ„ï¼š node-gypå®˜ç½‘ å› ä¸ºpythonæœ‰v2å’Œv3ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸¤ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ï¼Œå¦‚æœç”µè„‘ä¸Šæœ‰åº”ç”¨è½¯ä»¶ä½¿ç”¨pythonçš„ç‰ˆæœ¬ä¸åŒï¼Œ æœ€å¥½ä¸è¦æŠŠpythonè·¯å¾„é…ç½®åˆ°ç³»ç»Ÿpathä¸­ã€‚ 12# å¦‚æœä½ ä½¿ç”¨node-gypå•ç‹¬ç¼–è¯‘ä¸€äº›æ¨¡å—ï¼Œåˆ™è¿™æ ·é…ç½®ï¼ˆå¤šæ•°æƒ…å†µä¸‹æ˜¯é€šè¿‡npmè°ƒç”¨çš„ï¼‰node-gyp --python /path/to/python2.7 npmé…ç½®python å¦‚æœä½¿ç”¨npm è°ƒç”¨çš„node-gypï¼Œåˆ™ä½¿ç”¨npmé…ç½®pythonå°±å¯ä»¥ 1npm config set python /path/to/executable/python2.7 verdaccioå®‰è£… å¦‚æœæ­å»ºnpmç§æœå¯ä»¥å‚è€ƒã€‚verdaccioå®˜ç½‘ verdaccioæ˜¯ç”¨æ¥æ­å»ºnpmç§æœï¼Œå·²ç»å®‰è£…è¿‡çš„æ¨¡å—ä¼šç¼“å­˜èµ·æ¥ï¼Œä»¥åå®‰è£…ä¾èµ–æ˜¯ä¼šä¼˜å…ˆæŸ¥çœ‹ç¼“å­˜ã€‚ å®‰è£…1npm i -g verdaccio å¯åŠ¨1verdaccio é…ç½® é…ç½®ä¸»è¦ä¿®æ”¹ä½¿ç”¨taobaoæºå’Œç«¯å£ä¿®æ”¹ 12# é…ç½®æ–‡ä»¶åœ°å€ï¼šæˆ‘çš„window 10æ˜¯.configéå®˜ç½‘è¯´çš„.local# C:\\Users\\ä½ çš„ç”¨æˆ·åç§°\\.config\\verdaccio ä¿®æ”¹é»˜è®¤ç«¯å£ï¼ˆå¦‚æœæœ‰éœ€è¦ï¼‰ æ·»åŠ uplinks ä¿®æ”¹ä½¿ç”¨çš„proxy 12345678910111213141516171819202122232425262728293031323334# ä¿®æ”¹é»˜è®¤çš„ç«¯å£listen: 0.0.0.0:10086# a list of other known repositories we can talk touplinks: npmjs: url: https://registry.npmjs.org/ # æ·»åŠ taobao taobao: url: https://registry.npm.taobao.orgpackages: '@*/*': # scoped packages access: $all publish: $authenticated # ä½¿ç”¨taobao proxy: taobao '**': # allow all users (including non-authenticated users) to read and # publish all packages # # you can specify usernames/groupnames (depending on your auth plugin) # and three keywords: \"$all\", \"$anonymous\", \"$authenticated\" access: $all # allow all known users to publish packages # (anyone can register by default, remember?) publish: $authenticated # if package is not available locally, proxy requests to 'npmjs' registry proxy: taobao # ä½¿ç”¨taobao chrome driverå®‰è£… ä½¿ç”¨æ·˜å®æº 1npm install chromedriver --chromedriver_cdnurl=http://cdn.npm.taobao.org/dist/chromedriver vueé¡¹ç›®ä½¿ç”¨sass å¦‚æœä½¿ç”¨vue-cliåˆ›å»ºé¡¹ç›®ï¼Œå¹¶ä¸”ä½¿ç”¨.vueå•æ–‡ä»¶ï¼Œä½¿ç”¨scssæ¥å†™CSSéœ€è¦å®‰è£…ä¸¤ä¸ªä¾èµ–ã€‚ vue-clié»˜è®¤æ²¡æœ‰å®‰è£…node-sasså’Œsass-loaderã€‚ å®‰è£…ä¾èµ–12npm install node-sass --save-devnpm install sass-loader --save-dev é…ç½®webpack12345// webpack.base.config.js ä¸­æ·»åŠ  &#123; test: /\\.scss$/, loaders: [\"style\", \"css\", \"sass\"] &#125; å‚è€ƒèµ„æ–™Node.jsç®€ä»‹ä»¥åŠç¯å¢ƒé…ç½®","tags":[{"name":"node","slug":"node","permalink":"https://betgar.github.io/tags/node/"}]},{"title":"jQueryæœ€ä½³å®è·µ","date":"2018-04-19T12:00:00.000Z","path":"2018/04/19/jquery-best-practice/","text":"jQueryæœ€ä½³å®è·µ æœ¬æ–‡ä»‹ç»ä¸€äº›ä½¿ç”¨jQueryçš„é€šç”¨æ ‡å‡†å’Œæœ€ä½³å®è·µï¼Œè¿™äº›æ ‡å‡†ä¸æ¶µç›–Javascriptçš„æ ‡å‡†å’Œæœ€ä½³å®è·µï¼Œè‹±æ–‡åŸæ–‡åœ°å€æ˜¯ http://lab.abhinayrathore.com/jquery-standards/ã€‚ ä¸­æ–‡åœ°å€: http://keenwon.com/955.html åŠ è½½jQuery1ã€å°½é‡ä½¿ç”¨CDNåŠ è½½ï¼š 12&lt;script type=\"text/javascript\" src=\"//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js\"&gt;&lt;/script&gt;&lt;script&gt;window.jQuery || document.write('&lt;script src=\"js/jquery-1.11.0.min.js\" type=\"text/javascript\"&gt;&lt;\\/script&gt;')&lt;/script&gt; 2ã€å°±åƒä¸Šé¢çš„ä»£ç ä¸€æ ·ï¼Œåœ¨CDNåŠ è½½å¤±è´¥æ—¶ï¼Œè¦å›æºåˆ°æœ¬åœ°æœåŠ¡å™¨çš„åŒç‰ˆæœ¬jQueryã€‚ 3ã€ä½¿ç”¨ä¾èµ–åè®®çš„URLï¼ˆä¸åŠ http:å’Œhttps:ï¼Œç›´æ¥ä½¿ç”¨//ï¼‰ï¼Œå‚çœ‹ä¸Šé¢çš„ä¾‹å­ã€‚ 4ã€å°½å¯èƒ½åœ¨é¡µé¢åº•éƒ¨åŠ è½½jQueryå’Œjavascriptã€‚ 5ã€å¦‚ä½•é€‰æ‹©jQueryç‰ˆæœ¬ï¼Ÿ å¦‚æœè¦å…¼å®¹IE6/7/8ï¼Œä¸è¦ä½¿ç”¨2.xç‰ˆæœ¬çš„ å¯¹äºæ–°çš„åº”ç”¨ï¼Œå¦‚æœä¸è€ƒè™‘ä¸€äº›æ’ä»¶çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå°½å¯èƒ½çš„ä½¿ç”¨æœ€æ–°ç‰ˆ ä»CDNåŠ è½½jQueryçš„æ—¶å€™ï¼Œä½¿ç”¨å®Œæ•´çš„ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨1.11.0ï¼Œä¸ç”¨1.11å’Œ1ï¼‰ ä¸è¦åŠ è½½å¤šä¸ªç‰ˆæœ¬çš„jQuery 6ã€å¦‚æœä½ ä½¿ç”¨äº†Prototype, MooTools, Zeptoç­‰ï¼Œå°è¯•ä½¿ç”¨jQueryä»£æ›¿$ã€‚å¯ä»¥ä½¿ç”¨$.noConflict()è®©å‡º$çš„æ§åˆ¶æƒã€‚ jQueryå˜é‡1ã€æ‰€æœ‰è¢«ç¼“å­˜çš„jQueryå¯¹è±¡ï¼Œå˜é‡åä»¥$å¼€å¤´ã€‚ 2ã€æ€»æ˜¯ç¼“å­˜jQueryé€‰æ‹©å™¨è¿”å›çš„å¯¹è±¡ï¼Œæ–¹ä¾¿å¤ç”¨ï¼š 12var $myDiv = $(\"#myDiv\");$myDiv.click(function()&#123;...&#125;); 3ã€ä½¿ç”¨é©¼å³°å‘½åã€‚ é€‰æ‹©å™¨1ã€å°½å¯èƒ½çš„ä½¿ç”¨IDé€‰æ‹©å™¨ã€‚IDé€‰æ‹©å™¨ä½¿ç”¨document.getElementById()ï¼Œæ‰€ä»¥æ›´å¿«ã€‚ 2ã€å½“ä½¿ç”¨ç±»é€‰æ‹©å™¨çš„æ—¶å€™ï¼Œä¸è¦åŠ DOMå…ƒç´ ç±»å‹ï¼š 12var $products = $(\"div.products\"); // æ…¢var $products = $(\".products\"); // å¿« 3ã€ä½¿ç”¨findæŸ¥æ‰¾ID-&gt;Childçš„åµŒå¥—æŸ¥è¯¢ï¼Œ.find()æ–¹æ³•æ›´å¿«ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡é€‰æ‹©æ²¡æœ‰ä½¿ç”¨jQueryçš„é€‰æ‹©å™¨å¼•æ“ï¼š 12345// å·®, å…¨éƒ¨ä½¿ç”¨jQueryçš„é€‰æ‹©å™¨å¼•æ“var $productIds = $(\"#products div.id\"); // å¥½, #productsä½¿ç”¨document.getElementById(), åªæœ‰div.idéœ€è¦ä½¿ç”¨jQueryçš„é€‰æ‹©å™¨å¼•æ“var $productIds = $(\"#products\").find(\"div.id\"); 4ã€è¶Šé å³ä¾§è¶Šå…·ä½“ï¼š 12345// å·®$(\"div.data .gonzalez\"); // æœ€ä½³$(\".data td.gonzalez\"); 5ã€é€‰æ‹©å™¨ä¸è¦å¤ªâ€œå…·ä½“â€ï¼š 1234$(\".data table.attendees td.gonzalez\"); // æ›´å¥½ï¼Œå°½å¯èƒ½çœå»ä¸­é—´éƒ¨åˆ†$(\".data td.gonzalez\"); 6ã€ç»™é€‰æ‹©å™¨æŒ‡å®šä¸Šä¸‹æ–‡ï¼ˆé™å®šèŒƒå›´ï¼‰ï¼š 12345// æ…¢ï¼Œå› ä¸ºå®ƒåœ¨æ•´ä¸ªDOMç»“æ„ä¸­æŸ¥æ‰¾$('.class'); // å¿«ï¼Œå› ä¸ºå®ƒåªæŸ¥æ‰¾ class-container ä¸‹çš„.$('.class', '#class-container'); 7ã€é¿å…ä½¿ç”¨â€œ*â€ï¼š 12$('div.container &gt; *'); // å·®$('div.container').children(); // å¥½ 8ã€é¿å…éšå¼ä½¿ç”¨â€œ*â€ 12$('div.someclass :radio'); // å·®ï¼Œè¿˜æ˜¯ç”¨äº†â€œ*â€$('div.someclass input:radio'); // å¥½ 9ã€ä¸è¦ä½¿ç”¨å¤šä¸ªIDé€‰æ‹©å™¨ï¼Œæˆ–è€…åµŒå¥—ä½¿ç”¨IDé€‰æ‹©å™¨ï¼Œå•ç‹¬çš„IDé€‰æ‹©å™¨ä½¿ç”¨document.getElementById()ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼š 1234$('#outer #inner'); // å·®$('div#inner'); // å·®$('.outer-container #inner'); // å·®$('#inner'); // å¥½, è°ƒç”¨ document.getElementById() DOMæ“ä½œ1ã€å…ˆæŠŠå…ƒç´ åˆ†ç¦»å‡ºDOMç»“æ„ï¼Œå†è¿›è¡Œå¤æ‚çš„æ“ä½œï¼Œä¹‹åå†é™„åŠ å›DOMä¸­ã€‚ä¸æ˜ç™½åŸå› çš„è¯ï¼Œå¯ä»¥äº†è§£ä¸‹.detach()è¿™ä¸ªæ–¹æ³• 123var $myList = $(\"#list-container &gt; ul\").detach();// å¯¹ $myList æ‰§è¡Œå¤§é‡å¤æ‚æ“ä½œ$myList.appendTo(\"#list-container\"); 2ã€ä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥æˆ–è€…array.join()ï¼Œå°‘ç”¨.append()ï¼Œç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æ€§èƒ½æ¯”è¾ƒã€‚ 1234567891011121314151617181920// æ…¢var $myList = $(\"#list\");for(var i = 0; i &lt; 10000; i++)&#123; $myList.append(\"&lt;li&gt;\"+i+\"&lt;/li&gt;\");&#125; // å¿«var $myList = $(\"#list\");var list = \"\";for(var i = 0; i &lt; 10000; i++)&#123; list += \"&lt;li&gt;\"+i+\"&lt;/li&gt;\";&#125;$myList.html(list); // æ›´å¿«var array = []; for(var i = 0; i &lt; 10000; i++)&#123; array[i] = \"&lt;li&gt;\"+i+\"&lt;/li&gt;\"; &#125;$myList.html(array.join('')); 3ã€ä¸è¦å¯¹ä¸å­˜åœ¨çš„å…ƒç´ åšæ“ä½œï¼š 12345678// å·®: åœ¨å‘ç°è¯¥IDä¸å­˜åœ¨ä¹‹å‰ï¼Œå·²ç»æ‰§è¡Œäº†3ä¸ªå‡½æ•°$(\"#nosuchthing\").slideUp(); // å¥½var $mySelection = $(\"#nosuchthing\");if ($mySelection.length) &#123; $mySelection.slideUp();&#125; äº‹ä»¶1ã€ä¸€ä¸ªé¡µé¢åªä½¿ç”¨ä¸€ä¸ªDocument readyï¼Œä¾¿äºè°ƒè¯•å’Œè·Ÿè¸ªã€‚ 2ã€ä¸è¦ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®šäº‹ä»¶ï¼ŒåŒ¿åå‡½æ•°ä¸åˆ©äºè°ƒè¯•ï¼Œå¤ç”¨ï¼Œæµ‹è¯•ï¼Œdebugï¼š 123$(\"#myLink\").on(\"click\", function()&#123;...&#125;); // å·® // å¥½function myLinkClickHandler()&#123;...&#125;$(\"#myLink\").on(\"click\", myLinkClickHandler); 3ã€Document ready ä¸è¦ç”¨åŒ¿åå‡½æ•°ï¼ŒåŸå› åŒä¸Šï¼š 1234567$(function()&#123; ... &#125;); // å·®: ä½ æ²¡åŠæ³•å†™å•å…ƒæµ‹è¯•å’Œå¤ç”¨ // å¥½$(initPage); // or $(document).ready(initPage);function initPage()&#123; //...&#125; 4ã€Document ready çš„å¤„ç†å‡½æ•°åº”è¯¥å†™åœ¨å¤–éƒ¨æ–‡ä»¶ï¼Œå†…è”çš„javascriptå¯ä»¥åœ¨ä¸€äº›åˆå§‹åŒ–è®¾ç½®ä¹‹åè°ƒç”¨ ready å‡½æ•°ï¼Œä¾‹å¦‚ï¼š 12345&lt;script src=\"my-document-ready.js\"&gt;&lt;/script&gt;&lt;script&gt; // åšä¸€äº›åˆå§‹åŒ–è®¾ç½®. $(document).ready(initPage); // or $(initPage); initPageå‡½æ•°åœ¨å¤–éƒ¨æ–‡ä»¶ä¸­&lt;/script&gt; 5ã€ä¸è¦æŠŠäº‹ä»¶ç›´æ¥å†™åœ¨HTMLå…ƒç´ ä¸Šï¼Œè¿™æ ·ä¸æ–¹ä¾¿è°ƒè¯•ï¼š 1&lt;a id=\"myLink\" href=\"#\" onclick=\"myEventHandler();\"&gt;my link&lt;/a&gt; &lt;!-- å·®--&gt; 1$(\"#myLink\").on(\"click\", myEventHandler); // å¥½ 6ã€å°½å¯èƒ½çš„ç»™äº‹ä»¶åŠ ä¸Šå‘½åç©ºé—´ã€‚è¿™æ ·æ–¹ä¾¿è§£é™¤ç»‘å®šï¼Œè€Œä¸å½±å“è¯¥DOMå…ƒç´ çš„å…¶ä»–äº‹ä»¶ï¼š 123$(\"#myLink\").on(\"click.mySpecialClick\", myEventHandler); // å¥½// ä¹‹åï¼Œå¾ˆå®¹æ˜“çš„è§£é™¤ç»‘å®š$(\"#myLink\").unbind(\"click.mySpecialClick\"); AJAX1ã€ä½¿ç”¨.ajax()ï¼Œé¿å….getJson()æˆ–è€….get()ï¼Œå®ƒä»¬åœ¨å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨.ajax()çš„ã€‚ 2ã€ä¸è¦åœ¨httpsçš„ç«™ç‚¹ä¸Šè¯·æ±‚httpï¼Œä½¿ç”¨ä¾èµ–åè®®çš„URL 3ã€ä¸è¦æŠŠæ•°æ®åŠ åœ¨urlä¸Šï¼Œä½¿ç”¨dataå±æ€§ã€‚ 1234567891011// å¯è¯»æ€§å·®$.ajax(&#123; url: \"something.php?param1=test1&amp;param2=test2\", ....&#125;); // å¯è¯»æ€§å¥½$.ajax(&#123; url: \"something.php\", data: &#123; param1: test1, param2: test2 &#125;&#125;); 4ã€æŒ‡å®šdataTypeå±æ€§ï¼Œæ›´å®¹æ˜“çŸ¥é“æ•°æ®ç±»å‹ã€‚ 5ã€å¯¹äºajaxåŠ è½½çš„å†…å®¹ï¼Œä½¿ç”¨å§”æ‰˜ç»‘å®šäº‹ä»¶ï¼Œè¿™æ ·å¯ä»¥åœ¨å…ƒç´ ä¸å­˜åœ¨çš„æ—¶å€™æ‰§è¡Œç»‘å®šã€‚ï¼ˆä¹‹åajaxåŠ è½½è¿›DOMç»“æ„ä¸­ï¼‰ 1$(\"#parent-container\").on(\"click\", \"a\", delegatedClickHandlerForAjax); 6ã€ä½¿ç”¨Promise 123456$.ajax(&#123; ... &#125;).then(successHandler, failureHandler); // æˆ–è€…var jqxhr = $.ajax(&#123; ... &#125;);jqxhr.done(successHandler);jqxhr.fail(failureHandler); 7ã€æŠ½è±¡å‡ºajaxæ¨¡æ¿ï¼Œæ–¹ä¾¿å¤ç”¨ï¼š 1234567891011121314var jqxhr = $.ajax(&#123; url: url, type: \"GET\", // default is GET but you can use other verbs based on your needs. cache: true, // default is true, but false for dataType 'script' and 'jsonp', so set it on need basis. data: &#123;&#125;, // add your request parameters in the data object. dataType: \"json\", // specify the dataType for future reference jsonp: \"callback\", // only specify this to match the name of callback parameter your API is expecting for JSONP requests. statusCode: &#123; // if you want to handle specific error codes, use the status code mapping settings. 404: handler404, 500: handler500 &#125;&#125;);jqxhr.done(successHandler);jqxhr.fail(failureHandler); åŠ¨ç”»æ•ˆæœ1ã€Adopt a restrained and consistent approach to implementing animation functionalityï¼ˆå¤§æ„ï¼šé‡‡å–å—é™åˆ¶çš„å’Œç»Ÿä¸€çš„æ–¹æ³•æ¥å®ç°åŠ¨ç”»åŠŸèƒ½ã€‚ï¼‰ 2ã€æ»¡è¶³ç”¨æˆ·ä½“éªŒå³å¯ï¼Œä¸è¦åšè¿‡å¤šçš„åŠ¨ç”»ï¼š å°½é‡ä½¿ç”¨ç®€å•çš„show/hideï¼ŒslideUp/slideDownæ¥åˆ‡æ¢å…ƒç´  å°½é‡ä½¿ç”¨jQueryé¢„å®šä¹‰çš„æ—¶é—´é—´éš”ï¼ˆdurationsï¼‰ï¼Œâ€œslowâ€ï¼Œâ€œfastâ€æˆ–è€…400ï¼ˆä¸­ç­‰ï¼‰ æ’ä»¶1ã€é€‰æ‹©å…¼å®¹æ€§å¥½ï¼Œæ–‡æ¡£ï¼Œæµ‹è¯•é½å…¨ä½•ç¤¾åŒºæ”¯æŒå¥½çš„æ’ä»¶ã€‚ 2ã€æ£€æŸ¥æ’ä»¶åœ¨ä¸åŒç‰ˆæœ¬jQueryä¸‹çš„å…¼å®¹æ€§ã€‚ 3ã€ä»»ä½•å‚åŠ çš„å¯å¤ç”¨çš„ç»„ä»¶ï¼Œéƒ½åº”è¯¥ä»¥æ’ä»¶çš„å½¢å¼å®ç°ã€‚ é“¾å¼è°ƒç”¨1ã€ä½¿ç”¨é“¾å¼è°ƒç”¨ä»£æ›¿å˜é‡ç¼“å­˜å’Œå¤šæ¬¡è°ƒç”¨é€‰æ‹©å™¨ï¼š 1$(\"#myDiv\").addClass(\"error\").show(); 2ã€å½“é“¾å¼è°ƒç”¨è¶…è¿‡3çº§çš„æ—¶å€™ï¼Œé€‚å½“çš„æ¢è¡Œå¢åŠ å¯è¯»æ€§ï¼š 12345$(\"#myLink\") .addClass(\"bold\") .on(\"click\", myClickHandler) .on(\"mouseover\", myMouseOverHandler) .show(); 3ã€é“¾å¤ªé•¿çš„æ—¶å€™ï¼Œç¼“å­˜ä¸­é—´å¯¹è±¡æ˜¯å¯ä»¥æ¥å—çš„ã€‚ å…¶ä»–1ã€å‚æ•°å°½é‡ä½¿ç”¨å¯¹è±¡å½¢å¼ï¼š 1234567$myLink.attr(\"href\", \"#\").attr(\"title\", \"my link\").attr(\"rel\", \"external\"); // å·®, è°ƒç”¨ä¸‰æ¬¡attr()// å¥½, è°ƒç”¨ä¸€æ¬¡$myLink.attr(&#123; href: \"#\", title: \"my link\", rel: \"external\"&#125;); 2ã€å°½é‡ä¸è¦æŠŠcssæ··åœ¨jsä¸­ï¼š 1.error &#123; color: red; font-weight: bold; &#125; /* å¥½*/ 12$(\"#mydiv\").css(&#123;'color':red, 'font-weight':'bold'&#125;); // å·®$(\"#mydiv\").addClass(\"error\"); // å¥½ 3ã€ä¸è¦ä½¿ç”¨è¿‡æ—¶çš„æ–¹æ³•ï¼Œæ³¨æ„æ–°ç‰ˆæ›´æ–°æ—¶å¼ƒç”¨çš„æ–¹æ³•ï¼Œä¸è¦ä½¿ç”¨å®ƒä»¬ã€‚ 4ã€å¿…è¦çš„æ—¶å€™ä½¿ç”¨åŸç”Ÿjsï¼Œè¿™é‡Œçœ‹æŸ¥çœ‹æ€§èƒ½å¯¹æ¯” http://jsperf.com/document-getelementbyid-vs-jquery/3 12$(\"#myId\"); // è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹ç‚¹ç‚¹æ…¢...document.getElementById(\"myId\");","tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://betgar.github.io/tags/jQuery/"}]},{"title":"qem-manual(ä½¿ç”¨æ‰‹å†Œ)","date":"2018-04-17T12:00:00.000Z","path":"2018/04/17/qem-manual/","text":"qem-manual(ä½¿ç”¨æ‰‹å†Œ) q$error_managerä½¿ç”¨æ‰‹å†Œ (DBMS_UTILITY.format_error_backtrace()ä¹ŸæŒºå¥½ç”¨) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455SELECT * FROM q$log;SELECT * FROM q$error;SELECT * FROM q$error_context;SELECT * FROM q$error_instance;DELETE FROM q$error_instance;DELETE FROM q$error;---------------------------- q$error_manager install-- æ‰§è¡Œqem$install.sql--------------------------- q$error_manager.pks-- q$error_manager.pkb-- æ¸…ç©ºq$logCALL q$error_manager.clear_trace();-- æŸ¥è¯¢traceCALL q$error_manager.show_trace(from_id_in =&gt; NULL, context_like_in =&gt; 'km_sum_with_obj');-- AæŸ¥è¯¢CALL q$error_manager.show_trace(from_id_in =&gt; NULL, context_like_in =&gt; 'km_sum_with_obj', text_like_in =&gt; 'XTCACMERGEDATA');-- ç­‰ä»·AæŸ¥è¯¢SELECT * FROM q$log l WHERE l.context LIKE '%km_sum_with_obj' AND l.text LIKE '%XTCACMERGEDATA%' ORDER BY l.ID;execsql;-------------- è·Ÿè¸ªä»£ç /*IF NOT q$error_manager.trace_enabled(context_in =&gt; 'km_sum_with_obj') THEN q$error_manager.trace_on(context_like_in =&gt; 'km_sum_with_obj');END IF;*/----------- è®°å½•/*IF q$error_manager.trace_enabled('km_sum_with_obj') THEN q$error_manager.trace(context_in =&gt; 'km_sum_with_obj',text_in =&gt; V_SQLSTRING);END IF;*/------------- è®°å½•é”™è¯¯q$error_manager.error_trace_on();q$error_manager.register_error(error_code_in =&gt; SQLCODE, error_instance_id_out =&gt; error_instance_id, text_in =&gt; dbms_utility.format_error_backtrace); q$error_manager.error_trace_off(); Usageregister_error qem_demo_register_error.sql 123456789101112131415161718BEGIN DELETE FROM q$error_instance; FOR rec IN (SELECT * FROM employees) LOOP DBMS_OUTPUT.put_line (rec.last_name); q$error_manager.register_error (error_name_in =&gt; 'UNANTICIPATED-ERROR' , text_in =&gt; 'My message here: ' || rec.last_name , name1_in =&gt; 'FIRSTNAME' , value1_in =&gt; rec.first_name ); q$error_manager.mark_q$error_handled; END LOOP; COMMIT;END; trace logging with multiple contexts qem_demo_mult_contexts.sql 123456789101112131415161718192021222324252627282930313233343536/*Test the trace logging with multiple contexts*/CREATE OR REPLACE PROCEDURE dept_sal (department_id_in IN PLS_INTEGER)IS l_max_salary NUMBER;BEGIN IF q$error_manager.trace_enabled('context1') THEN q$error_manager.trace ('context1', department_id_in); END IF; l_max_salary := CASE WHEN department_id_in &gt; 100 THEN 10000 ELSE 20000 END; IF q$error_manager.trace_enabled('context2') THEN q$error_manager.trace ('context2', l_max_salary); END IF;END dept_sal;/BEGIN q$error_manager.trace_on ('context2,context1'); q$error_manager.toscreen;-- or use q$error_manager.totable so the output is writed to the q$log table dept_sal (50); dept_sal (200); IF q$error_manager.trace_enabled('context3') THEN q$error_manager.trace ('context3', 'All done!'); END IF;END;/ discard_error_state qem_demo_discard_error_state.sql 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/* Raise and propagate an Oracle error, thentrap that error and extract information about the error.*/CREATE OR REPLACE PROCEDURE dept_sal (department_id_in IN PLS_INTEGER)IS l_max_salary NUMBER;BEGIN l_max_salary := CASE WHEN department_id_in &gt; 100 THEN 10000 ELSE 20000 END; BEGIN IF l_max_salary = 10000 THEN DBMS_OUTPUT.put_line ('Raising DUP_VAL_ON_INDEX'); RAISE DUP_VAL_ON_INDEX; ELSE DBMS_OUTPUT.put_line ('Raising NO_DATA_FOUND'); RAISE NO_DATA_FOUND; END IF; EXCEPTION WHEN OTHERS THEN /* Trap the error, add some context, pass it along. */ q$error_manager.raise_unanticipated (name1_in =&gt; 'DEPARTMENT ID' , value1_in =&gt; department_id_in , name2_in =&gt; 'MAX SALARY' , value2_in =&gt; l_max_salary , name3_in =&gt; 'TABLE_NAME' , value3_in =&gt; 'DEPARTMENTS' , name4_in =&gt; 'OWNER' , value4_in =&gt; USER ); END;EXCEPTION WHEN OTHERS THEN DBMS_OUTPUT.put_line (DBMS_UTILITY.format_error_stack);END dept_sal;/BEGIN DBMS_OUTPUT.put_line ('Keep Error State:'); q$error_manager.keep_error_state; dept_sal (50); dept_sal (200); DBMS_OUTPUT.put_line ('Discard Error State:'); q$error_manager.discard_error_state; dept_sal (50); dept_sal (200);END;/ q$error_managerå®‰è£… qem$install.sqlæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322/*| This program is a part of the Quest Error Manager for Oracle.| This product is freeware and is not supported by Quest.| | www.quest.com| | Copyright, Quest Software, Inc, 2007| All rights reserved?2008 Quest Software, Inc.ALL RIGHTS RESERVED.Redistribution and use of the Quest Error Manager for Oracle software in source and binary forms, with or without modification, are permitted provided that the following conditions are met:1. Redistributions of source code must retain (i) the following copyright notice: \"?008 Quest Software, Inc. All rights reserved,\" (ii) this list of conditions, and (iii) the disclaimer below. 2. Redistributions in binary form must reproduce (i) the following copyright notice: \"?008 Quest Software, Inc. All rights reserved,\" (ii) this list of conditions, and (iii) the disclaimer below, in the documentation and/or other materials provided with the distribution. 3. All advertising materials mentioning features or use of the Quest Error Manager for Oracle software must display the following acknowledgement: This product includes software developed by Quest Software, Inc. and its contributors.4. Neither the name of Quest Software, Inc. nor the name its affiliates, subsidiaries or contributors may be used to endorse or promote products derived from the Quest Error Manager for Oracle software without specific prior written permission from Quest Software, Inc. Disclaimer:THIS SOFTWARE IS PROVIDED BY QUEST SOFTWARE, INC. AND ITS CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT ARE DISCLAIMED. IN NO EVENT SHALL QUEST SOFTWARE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THE QUEST ERROR MANAGER SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.*/SPOOL qem$install.logCREATE SEQUENCE q$error_seq/CREATE SEQUENCE q$log_seq/CREATE SEQUENCE q$error_context_seq/CREATE SEQUENCE q$error_instance_seq/CREATE TABLE q$error_context( id INTEGER , error_instance_id INTEGER , name VARCHAR2 (500) NOT NULL , VALUE VARCHAR2 (4000) , created_on TIMESTAMP , created_by VARCHAR2 (100) , changed_on TIMESTAMP , changed_by VARCHAR2 (100))//* 1.3.3 If QEM is already installed, use the alter statements to change the datatypes */ALTER TABLE q$error_context MODIFY (created_on TIMESTAMP, changed_on TIMESTAMP)/COMMENT ON TABLE q$error_context IS'Actual value for the named context for a given error instance.'/CREATE TABLE q$error( id INTEGER , error_category_name VARCHAR2 (500) , code INTEGER , name VARCHAR2 (500) , description VARCHAR2 (4000) , substitute_string VARCHAR2 (4000) , recommendation VARCHAR2 (4000) , created_on TIMESTAMP , created_by VARCHAR2 (100) , changed_on TIMESTAMP , changed_by VARCHAR2 (100))//* 1.3.3 If QEM is already installed, use the alter statements to change the datatypes */ALTER TABLE q$error MODIFY (created_on TIMESTAMP, changed_on TIMESTAMP)/COMMENT ON TABLE q$error IS'The set of pre-defined errors copied from sa_error when app was deployed'/CREATE TABLE q$error_instance( id INTEGER , error_id INTEGER , error_stack VARCHAR2 (4000) , call_stack VARCHAR2 (4000) , MESSAGE VARCHAR2 (4000) , system_error_code INTEGER , system_error_message VARCHAR2 (4000) , environment_info VARCHAR2 (4000) , created_on TIMESTAMP , created_by VARCHAR2 (100) , changed_on TIMESTAMP , changed_by VARCHAR2 (100))//* 1.3.3 If QEM is already installed, use the alter statements to change the datatypes */ALTER TABLE q$error_instance MODIFY (created_on TIMESTAMP, changed_on TIMESTAMP)/COMMENT ON TABLE q$error_instance IS'A particular instance of an error that occurs in the application'/CREATE TABLE q$log( id INTEGER , context VARCHAR2 (500) , text VARCHAR2 (4000) , call_stack VARCHAR2 (4000) , created_on TIMESTAMP , created_by VARCHAR2 (100) , changed_on TIMESTAMP , changed_by VARCHAR2 (100))//* 1.3.3 If QEM is already installed, use the alter statements to change the datatypes */ALTER TABLE q$log MODIFY (created_on TIMESTAMP, changed_on TIMESTAMP)/CREATE UNIQUE INDEX q$error_context_un ON q$error_context (error_instance_id, name)/CREATE UNIQUE INDEX q$error_context_pk ON q$error_context (id)/CREATE UNIQUE INDEX q$error_pk ON q$error (id)/CREATE UNIQUE INDEX q$error_code_pk ON q$error (code)/CREATE UNIQUE INDEX q$error_instance_pk ON q$error_instance (id)/CREATE UNIQUE INDEX q$log_pk ON q$log (id)/ALTER TABLE q$error_context ADD ( CONSTRAINT q$error_context_pk PRIMARY KEY (id))/ALTER TABLE q$error ADD ( CONSTRAINT q$error_pk PRIMARY KEY (id))/ALTER TABLE q$error_instance ADD ( CONSTRAINT q$error_instance_pk PRIMARY KEY (id))/ALTER TABLE q$log ADD ( CONSTRAINT q$log_pk PRIMARY KEY (id))/ALTER TABLE q$error_context ADD ( CONSTRAINT q$error_context_errinst_fk FOREIGN KEY (error_instance_id) REFERENCES q$error_instance (id) ON DELETE CASCADE)/ALTER TABLE q$error_instance ADD ( CONSTRAINT q$error_instance_err_fk FOREIGN KEY (error_id) REFERENCES q$error (id) ON DELETE CASCADE)//* 1.2.17 Provided by Filipe de Silva; add env info. */CREATE OR REPLACE TRIGGER q$error_instance_ir BEFORE INSERT ON q$error_instance REFERENCING OLD AS old NEW AS new FOR EACH ROWBEGIN :new.created_on := SYSDATE; :new.created_by := SYS_CONTEXT ('USERENV', 'SESSION_USER'); :new.environment_info := 'instance: ' || SYS_CONTEXT ('USERENV', 'INSTANCE') || '/' || SYS_CONTEXT ('USERENV', 'INSTANCE_NAME') || CHR (10) || 'db_name: ' || SYS_CONTEXT ('USERENV', 'DB_NAME') || CHR (10) || 'db_domain: ' || SYS_CONTEXT ('USERENV', 'DB_DOMAIN') || CHR (10) || 'host: ' || SYS_CONTEXT ('USERENV', 'SERVER_HOST') || CHR (10) || 'service_name: ' || SYS_CONTEXT ('USERENV', 'SERVICE_NAME') || CHR (10) || '--' || CHR (10) || 'session_user: ' || SYS_CONTEXT ('USERENV', 'SESSION_USER') || CHR (10) || 'session_id: ' || SYS_CONTEXT ('USERENV', 'SESSIONID') || CHR (10) || '--' || CHR (10) || 'host: ' || SYS_CONTEXT ('USERENV', 'HOST') || CHR (10) || 'ip_address: ' || SYS_CONTEXT ('USERENV', 'IP_ADDRESS') || CHR (10) || 'os_user: ' || SYS_CONTEXT ('USERENV', 'OS_USER') || CHR (10) || '--' || CHR (10) || 'module: ' || SYS_CONTEXT ('USERENV', 'MODULE') || CHR (10) || 'action: ' || SYS_CONTEXT ('USERENV', 'ACTION') || CHR (10) || 'client_identifier: ' || SYS_CONTEXT ('USERENV', 'CLIENT_IDENTIFIER') || CHR (10) || 'client_info: ' || SYS_CONTEXT ('USERENV', 'CLIENT_INFO') || CHR (10) || '--' || CHR (10) || 'bg_job_id: ' || SYS_CONTEXT ('USERENV', 'BG_JOB_ID') || CHR (10) || 'fg_job_id: ' || SYS_CONTEXT ('USERENV', 'FG_JOB_ID') || CHR (10); /* 1.3.7 Provided by Filipe Silva */ &lt;&lt;debug_web_variables&gt;&gt; BEGIN FOR i IN 1 .. OWA.num_cgi_vars LOOP :new.environment_info := :new.environment_info || OWA.cgi_var_name (i) || ': ' || OWA.cgi_var_val (i) || CHR (10); END LOOP; EXCEPTION WHEN VALUE_ERROR THEN NULL; END debug_web_variables; END;//* 1.3.7 Trigger needed to allow DBA partition of table. Provided by Filipe Silva. */CREATE OR REPLACE TRIGGER \"Q$ERROR_CONTEXT_IR\" BEFORE INSERT ON \"Q$ERROR_CONTEXT\" FOR EACH ROW BEGIN :new.created_on := SYSTIMESTAMP; :new.created_by := SYS_CONTEXT ('USERENV', 'SESSION_USER');END;//* 1.3.7 Populate the changed* columns */CREATE OR REPLACE TRIGGER \"Q$ERROR_CONTEXT_UR\" BEFORE UPDATE ON \"Q$ERROR_CONTEXT\" FOR EACH ROW BEGIN :new.changed_on := SYSTIMESTAMP; :new.changed_by := SYS_CONTEXT ('USERENV', 'SESSION_USER');END;/CREATE OR REPLACE TRIGGER \"Q$ERROR_INSTANCE_UR\" BEFORE UPDATE ON \"Q$ERROR_INSTANCE\" FOR EACH ROW BEGIN :new.changed_on := SYSTIMESTAMP; :new.changed_by := SYS_CONTEXT ('USERENV', 'SESSION_USER');END;/@@q$error_manager.pks@@q$error_manager.pkbSPOOL OFF q$error_manageråŒ…å£°æ˜ q$error_manager.pks 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740741742743744745746747748749750751752753754755756757758759760761762763764765766767768769770771772773774775776777778779780781782783784785786787788789790791792793794795796797798799800801802803804805806807808809810811812813814815816817818819820821822823824825826827828829830831832833834835836837838839840841842843844845846847848849850create or replace PACKAGE q$error_manager/*| This program is a part of the Quest Error Manager for Oracle.| This product is freeware and is not supported by Quest.|| www.quest.com|?2009 Quest Software, Inc.ALL RIGHTS RESERVED.Redistribution and use of the Quest Error Manager for Oracle software in source and binary forms,with or without modification, are permitted provided that the following conditions are met:1. Redistributions of source code must retain (i) the following copyright notice: \"?008 Quest Software, Inc.All rights reserved,\" (ii) this list of conditions, and (iii) the disclaimer below.2. Redistributions in binary form must reproduce (i) the following copyright notice:\"?008 Quest Software, Inc. All rights reserved,\" (ii) this list of conditions, and (iii)the disclaimer below, in the documentation and/or other materials provided with the distribution.3. All advertising materials mentioning features or use of the Quest Error Managerfor Oracle software must display the following acknowledgement:This product includes software developed by Quest Software, Inc. and its contributors.4. Neither the name of Quest Software, Inc. nor the name its affiliates, subsidiariesor contributors may be used to endorse or promote products derived from the Quest ErrorManager for Oracle software without specific prior written permission from Quest Software, Inc.Disclaimer:THIS SOFTWARE IS PROVIDED BY QUEST SOFTWARE, INC. AND ITS CONTRIBUTORS ``AS IS''AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,AND NON-INFRINGEMENT ARE DISCLAIMED. IN NO EVENT SHALL QUEST SOFTWARE OR ITSCONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTEGOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THEQUEST ERROR MANAGER SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.*/IS c_version CONSTANT PLS_INTEGER := 1; c_release CONSTANT PLS_INTEGER := 4; c_subrelease CONSTANT PLS_INTEGER := 1; /* Modification History Date Who Vrsn What ----------- ----- ------ ------------------------------------------------------- Oct 15 2010 FS 1.4.1 * removed declaration of unreference variables * labeled end tags * discard_error_state: clear state already stored Jul 27 2010 FS 1.4.0 * add error_category_name field to error_info_rt * minor refactoring * add more last_* functions and last_error_info function to return the record * add option to disregard the remaining_context in the message Jul 23 2010 FS 1.3.8 * make register_error truncate text_in to 4000 to make the insert possible (thanks to Bill Pribyl for reporting) * add truncante to 4000 to DBMS_UTILITY.format* output when storing to table Mar 22 2010 FS 1.3.7 * add trigger to populate environmental info to q$error_context * q$error_instance_ir trigger: add web environment variables log (if available) * corrected commentaries in example scripts and cleaned unused variables * add missing example file from the last versions: QEM in APEX Mar 04 2010 SF 1.3.6 * Change all argument names in raise/register/add from err_ to error_ for consistency. Synch up with QCGU scripts. Feb 19 2010 SF 1.3.5 * Add last* functions so that you can easily get values for last-raised error and among other things test more easily (request from Aci Polajnar). Dec 01 2009 SF 1.3.4 * Add clean_up_errors to help users remove error information. * Add grab_settings to register_error (error_name_in, text_in) overload. It was missing. * Remove redundant overloading of register_error (Why did Oracle let me COMPILE it the way it was, I wonder...) Oct 05 2009 SF 1.3.3 Change audit dates to TIMESTAMP from DATE Sep 12 2009 SF 1.3.2 If error stack is empty assign call stack to it. Add \"simple assert\" routines that simply call RAE. Add PROCEDURE clean_up_errors to remove rows from q$error_instance and q$error_context. Idea from Dennis Anderson. Aug 18 2009 SF 1.3.1 Add fields to the error_info_rt and overloadings to also return that information through parameters. Also make sure that environment info is passed back through get_error_info (kudos to Neal Ala for both providing specs and testing the release). Fix bug in exc section of pl (Thanks, Volker Bartuseck) Dec 12 2008 SF 1.2.19 Change trigger intro'd in 1.2.17 so that you do NOT need access to v$session to run QEM. It will just ignore the environment info when running the trigger. Dec 9 2008 SF 1.2.18 Avoid context strings &gt; 500 characters. Thanks, Mike Pinker! Add ability to specify multiple distinct contexts. Nov 10 2008 SF/FS 1.2.17 Minor fixes from feedback by Filipe Silva, add trigger to populate environmental info. Also, offer toggle to avoid the need to mark an error as unhandled. Jul 12 2008 SF 1.2.16 Avoid VALUE_ERROR exception for sqlcode_name. July 2008 SF 1.2.15 register_oracle_error RAISES an error. Should not do that. Thanks to Filipe de Silva for pointing this out. Also add overloading to return error instance ID. Mar 12 2008 SF 1.2.14 Minor refactorings from feedback by Volker Bartusek. Nov 27 2007 SF 1.2.13 REMOVE DBMS_ERRLOG - only available in 10gR2. Will put in separate utility that will come with QEM. Nov 11 2007 SF 1.2.12 Allow user to show error info in message. Oct 1 2007 SF 1.2.11 * Start tracking version. * Change q$error error code for DUPVAL to -1. * Add raise/register_oracle_error alternative. * Obtain most recent instance ID from package global g_error_instance_raised instead of parsing the Oracle error message. This is set in the session each time an error is registered. Sep 27 2007 SF SF Add dbms_Errlog functionality Sep 26 2007 SF SF Add raise_unaticipated Sep 21 2007 SF SF Add overloadings with different column names err_instance instead of error_instance to support backward compatibility with QCGU generated code. Sep 5 2007 SF SF Add \"not yet implemented\" program */ c_newline CONSTANT CHAR (1) := CHR (10); TYPE weak_refcursor IS REF CURSOR; SUBTYPE maxvarchar2_t IS VARCHAR2 (32767); -- public global constants c_varchar2_max_length CONSTANT PLS_INTEGER := 32767; /* 1.4.0 */ c_varchar2_max_length_db CONSTANT PLS_INTEGER := 4000; c_subst_char CONSTANT VARCHAR2 (1) := '$'; c_error_prefix CONSTANT VARCHAR2 (4) := 'QEM'; c_error_prefix_len CONSTANT PLS_INTEGER := 3; c_error_code_len CONSTANT PLS_INTEGER := 20; c_oracle_separator CONSTANT VARCHAR2 (5) := '-ORA-'; c_oracle_code_len CONSTANT PLS_INTEGER := 5; -- public global user-defined types -- used to return error info back to a calling context TYPE error_info_rt IS RECORD ( code q$error.code%TYPE ,name q$error.name%TYPE ,system_error_code q$error_instance.system_error_code%TYPE ,system_error_message q$error_instance.system_error_message%TYPE ,text q$error_instance.MESSAGE%TYPE ,recommendation q$error.recommendation%TYPE ,error_stack q$error_instance.error_stack%TYPE ,call_stack q$error_instance.call_stack%TYPE ,environment_info q$error_instance.environment_info%TYPE /* Added in 1.3 */ ,id q$error_instance.id%TYPE ,MESSAGE q$error_instance.MESSAGE%TYPE ,error_id q$error_instance.error_id%TYPE ,contexts maxvarchar2_t ,created_on q$error_instance.created_on%TYPE ,created_by q$error_instance.created_by%TYPE ,changed_on q$error_instance.changed_on%TYPE ,changed_by q$error_instance.changed_by%TYPE /* Added in 1.4.0 */ ,error_category_name q$error.error_category_name%TYPE ); TYPE q$log_tc IS TABLE OF q$log%ROWTYPE INDEX BY PLS_INTEGER; TYPE q$error_context_tc IS TABLE OF q$error_context%ROWTYPE INDEX BY PLS_INTEGER; -- Error/warning management c_error CONSTANT CHAR (5) := 'ERROR'; c_info_msg CONSTANT CHAR (4) := 'INFO'; c_warning CONSTANT CHAR (7) := 'WARNING'; c_status_delimiter CONSTANT CHAR (1) := ':'; /* Special NYI exception */ e_not_yet_implemented EXCEPTION; c_not_yet_implemented PLS_INTEGER := -20999; PRAGMA EXCEPTION_INIT (e_not_yet_implemented, -20999); -- public global routines -- ------------------------------------- -- Tracing and DBMS_OUTPUT encapsulation -- ------------------------------------- -- switches output to the console -- NOTE: default is to Table PROCEDURE toscreen; -- switches output to the q$log. table -- NOTE: this is the default destination PROCEDURE totable; PROCEDURE totable (purge_in IN BOOLEAN); -- Send output to file. tofile opens the file; trace off closes the file. PROCEDURE tofile (dir_in IN VARCHAR2 ,file_in IN VARCHAR2 ,overwrite_in IN BOOLEAN DEFAULT TRUE); -- simple DBMS_OUTPUT handling of 255 char limit -- looks for a newline, or chops to fit given length PROCEDURE pl (string_in IN VARCHAR2, length_in IN PLS_INTEGER := 80); -- converts the given boolean value to string, -- then writes it out as above PROCEDURE pl (val IN BOOLEAN); -- as above but concatenates str with the string value of bool -- e.g., 'cursor%found TRUE' PROCEDURE pl (str IN VARCHAR2, bool IN BOOLEAN, len IN PLS_INTEGER := 80); PROCEDURE pl (clob_in IN CLOB, length_in IN PLS_INTEGER := 80); PROCEDURE set_error_trace (onoff_in IN BOOLEAN); -- When error trace is turned on, all errors are also written -- to the log table automatically. PROCEDURE error_trace_on; PROCEDURE error_trace_off; FUNCTION error_trace_enabled RETURN BOOLEAN; /* 1.4.0 control the adding or not of the remaining_context to the text message by default it's on*/ PROCEDURE add_remaining_context_msg_on; PROCEDURE add_remaining_context_msg_off; PROCEDURE set_add_remaining_context_msg (onoff_in IN BOOLEAN); FUNCTION add_remaining_context_enabled RETURN BOOLEAN; -- Controls the trace mechanism via a private global variable -- and sets the trace context filter (defaults to all traces) -- NOTE: tracing defaults to FALSE on package initialization -- only one context can be in force at a time -- and is case-insensitive PROCEDURE set_trace (onoff_in IN BOOLEAN ,context_like_in IN q$log.context%TYPE := NULL ,include_timestamp_in IN BOOLEAN DEFAULT FALSE ,delimiter_in IN VARCHAR2 DEFAULT ','); -- Clears out the trace contents. Currently just deletes from q$log. PROCEDURE clear_trace; PROCEDURE trace_on (context_like_in IN q$log.context%TYPE := NULL ,include_timestamp_in IN BOOLEAN DEFAULT FALSE ,delimiter_in IN VARCHAR2 DEFAULT ','); PROCEDURE trace_off (context_like_in IN q$log.context%TYPE := NULL ,include_timestamp_in IN BOOLEAN DEFAULT FALSE); -- Has tracing been turned on globally? FUNCTION trace_enabled RETURN BOOLEAN; -- Has tracing been turned on globally or for a specific context? -- Context values are compared using UPPER case. FUNCTION trace_enabled (context_in IN q$log.context%TYPE) RETURN BOOLEAN; -- Writes output to the screen or q$log. table -- (see toscreen and totable above) -- If you pass TRUE for force parameter, this program will write to the log -- even if overall tracing is disabled. -- Level results in indentation to help you understand the log output. PROCEDURE trace (context_in IN q$log.context%TYPE ,text_in IN q$log.text%TYPE ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL); PROCEDURE trace (context_in IN q$log.context%TYPE ,number_in IN NUMBER ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL); PROCEDURE trace (context_in IN q$log.context%TYPE ,date_in IN DATE ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL); PROCEDURE trace (context_in IN q$log.context%TYPE ,boolean_in IN BOOLEAN ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL); PROCEDURE trace (context_in IN q$log.context%TYPE ,clob_in IN CLOB ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL); -- writes to the console the trace rows -- given (optionally filtered in any combination): -- trace id, context, text -- may be limited by limit_in -- call stack can also be displayed PROCEDURE show_trace (from_id_in IN q$log.id%TYPE := NULL ,context_like_in IN VARCHAR2 := '%' ,text_like_in IN VARCHAR2 := '%' ,limit_in IN PLS_INTEGER := NULL ,include_call_stack_in IN BOOLEAN := TRUE); ------------------------------------------- -- Error handling and raising functionality ------------------------------------------- -- An error needs to be raised or logged. -- Get a message handle for this particular error instance. -- The \"error message\" id keeps track of both the error -- and message information. This program also serves as -- \"record and go\" and \"go\". In other words, we do not -- raise an error, but it is noted. -- PROCEDURE register_error ( error_code_in IN q$error.code%TYPE ,error_instance_id_out IN OUT q$error_instance.id%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); -- Pass in error name instead of code. PROCEDURE register_error ( error_name_in IN q$error.name%TYPE ,error_instance_id_out IN OUT q$error_instance.id%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); /* 1.3.6 Standardize arg name - this OL no longer needed PROCEDURE register_error ( error_code_in IN q$error.code%TYPE , error_instance_id_out IN OUT q$error_instance.id%TYPE , text_in IN q$error_instance.MESSAGE%TYPE:= NULL , name1_in IN VARCHAR2 DEFAULT NULL , value1_in IN VARCHAR2 DEFAULT NULL , name2_in IN VARCHAR2 DEFAULT NULL , value2_in IN VARCHAR2 DEFAULT NULL , name3_in IN VARCHAR2 DEFAULT NULL , value3_in IN VARCHAR2 DEFAULT NULL , name4_in IN VARCHAR2 DEFAULT NULL , value4_in IN VARCHAR2 DEFAULT NULL , name5_in IN VARCHAR2 DEFAULT NULL , value5_in IN VARCHAR2 DEFAULT NULL , grab_settings_in IN BOOLEAN DEFAULT TRUE ); */ -- Record error (using name or code), but ignore error instance. -- Essentially, this is \"record but do not raise error.\" PROCEDURE register_error ( error_code_in IN q$error.code%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE DEFAULT NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); PROCEDURE register_error ( error_name_in IN q$error.name%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); -- Set a single context value for an error_instance row. -- Should overload this for a variety of datatypes. PROCEDURE add_context ( error_instance_id_in IN q$error_instance.id%TYPE ,NAME_IN IN q$error_context.name%TYPE ,value_in IN q$error_context.VALUE%TYPE ,validate_in IN BOOLEAN DEFAULT TRUE); /* 1.3.6 Do not maintain an overloading only with an arg name change. PROCEDURE add_context (err_instance_id_in IN q$error_instance.id%TYPE , NAME_IN IN q$error_context.name%TYPE , value_in IN q$error_context.VALUE%TYPE , validate_in IN BOOLEAN DEFAULT TRUE );*/ -- Global contexts; not tied to any specific instance. PROCEDURE add_gcontext (NAME_IN IN q$error_context.name%TYPE ,value_in IN q$error_context.VALUE%TYPE); -- Remove all global contexts. -- This is called by mark_q$error_handled as well. PROCEDURE clear_gcontexts; /* Raise specified error, providing minimal message information in a single procedure call. No context information is passed; if message text is not provided then the default with the error is used. */ PROCEDURE raise_error ( error_code_in IN q$error.code%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); PROCEDURE raise_error ( error_name_in IN q$error.name%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); /* 1.3.6 Standardize arg name */ PROCEDURE raise_error_instance ( error_instance_id_in IN q$error_instance.id%TYPE); /* Raise an unanticipated error. */ PROCEDURE raise_unanticipated ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); /* V1.2.11 Allow user to specify that an Oracle error should be registered (but not re-raised) or raised (registered and re-raised). */ PROCEDURE register_oracle_error ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); /* 1.2.15 Return error instance */ /* 1.3.6 Standardize arg name */ PROCEDURE register_oracle_error ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE ,error_instance_id_out OUT q$error_instance.id%TYPE); PROCEDURE raise_oracle_error ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE); /* Get error info for latest error. */ PROCEDURE get_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,error_info_out OUT error_info_rt ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline); PROCEDURE get_error_info (error_info_out OUT error_info_rt); /* 1.4.0 */ FUNCTION last_error_info RETURN error_info_rt; /* 1.4.0 */ FUNCTION q$error_raised RETURN BOOLEAN; --Simplest format, no composite structures PROCEDURE get_error_info ( code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE); PROCEDURE get_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE); /* 1.3.6 Standardize arg name */ PROCEDURE get_error_info ( error_message_in IN VARCHAR2 ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE); /* 1.3 Add id and message as OUT arguments */ PROCEDURE get_error_info ( code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE ,id_out OUT q$error_instance.id%TYPE ,message_out OUT q$error_instance.MESSAGE%TYPE ,contexts_out OUT VARCHAR2 ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline); PROCEDURE get_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE ,id_out OUT q$error_instance.id%TYPE ,message_out OUT q$error_instance.MESSAGE%TYPE ,contexts_out OUT VARCHAR2 ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline); /* 1.3.6 Standardize arg name */ PROCEDURE get_error_info ( error_message_in IN VARCHAR2 ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE ,id_out OUT q$error_instance.id%TYPE ,message_out OUT q$error_instance.MESSAGE%TYPE ,contexts_out OUT VARCHAR2 ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline); /* 1.4.0 */ FUNCTION last_error_id RETURN q$error.id%TYPE; /* 1.4.0 */ FUNCTION last_instance_id RETURN q$error_instance.id%TYPE; /* 1.4.0 */ FUNCTION last_error_category_name RETURN q$error.error_category_name%TYPE; FUNCTION last_code RETURN q$error.code%TYPE; FUNCTION last_name RETURN q$error.name%TYPE; FUNCTION last_text RETURN q$error_instance.MESSAGE%TYPE; FUNCTION last_system_error_code RETURN q$error_instance.system_error_code%TYPE; FUNCTION last_system_error_message RETURN q$error_instance.system_error_message%TYPE; PROCEDURE show_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE); PROCEDURE show_errors_after ( date_in IN DATE ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE); PROCEDURE show_errors_with_message ( text_in IN VARCHAR2 ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE); PROCEDURE show_errors_with_code ( error_code_in IN PLS_INTEGER ,is_system_error_code_in IN BOOLEAN DEFAULT FALSE ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE); PROCEDURE show_errors_for ( where_clause_in IN VARCHAR2 ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE); FUNCTION error_clipboard (clear_clipboard_in IN BOOLEAN DEFAULT TRUE) RETURN VARCHAR2; FUNCTION error_clipboard_is_full RETURN BOOLEAN; PROCEDURE clear_error_clipboard; PROCEDURE assert (condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,error_code_in IN q$error.code%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL); PROCEDURE assert (condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,error_name_in IN q$error.name%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL); PROCEDURE assert (condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL); PROCEDURE simple_assert ( condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,raise_with_code_in IN PLS_INTEGER DEFAULT -20000); PROCEDURE mark_q$error_handled; -- Added/exposed in 1.1.1 FUNCTION error_instance_from_string (string_in IN VARCHAR2) RETURN PLS_INTEGER; FUNCTION error_instance_from_sqlerrm RETURN PLS_INTEGER; -- 1.2 Get message text only FUNCTION error_message RETURN VARCHAR2; PROCEDURE start_execution (program_name_in IN VARCHAR2 := NULL ,information_in IN VARCHAR2 := NULL); /* Test builder validation: * return a status string composed of type:message * if no prefix, then it is an error */ FUNCTION is_warning (status_in IN VARCHAR2) RETURN BOOLEAN; FUNCTION is_error (status_in IN VARCHAR2) RETURN BOOLEAN; FUNCTION is_info_msg (status_in IN VARCHAR2) RETURN BOOLEAN; PROCEDURE parse_status_string (status_in IN VARCHAR2 ,status_type_out OUT VARCHAR2 ,message_out OUT VARCHAR2); PROCEDURE make_a_warning (status_inout IN OUT VARCHAR2); PROCEDURE make_an_error (status_inout IN OUT VARCHAR2); PROCEDURE make_an_info_msg (status_inout IN OUT VARCHAR2); FUNCTION make_a_warning (status_in IN VARCHAR2) RETURN VARCHAR2; FUNCTION make_an_error (status_in IN VARCHAR2) RETURN VARCHAR2; FUNCTION make_an_info_msg (status_in IN VARCHAR2) RETURN VARCHAR2; FUNCTION full_log_string (context_in IN VARCHAR2 ,text_in IN VARCHAR2 ,level_in IN PLS_INTEGER) RETURN VARCHAR2; FUNCTION log_entries_after (timestamp_in IN DATE) RETURN SYS_REFCURSOR; PROCEDURE not_yet_implemented (program_name_in IN VARCHAR2); /* 1.2.12 Provide switch to force display of \"real\" error in the error message, rather than simply showing the error handle. You should ask for \"raise with message\" when you are not going to use the get_error_info program to extract error information. */ PROCEDURE raise_with_message; /* Only show the error instance handle in the error message. This is the default and assumes that you will be calling get_error_info to extract all the info. */ PROCEDURE raise_with_handle; /* 1.2.17 Specify that you do NOT want the error state cached. This means that you will not have to explicitly mark the error as handled, but this also means that if successive layers in your call stack handle and re-raise your exception with QEM, you will see multiple entries in your error instance table. */ PROCEDURE discard_error_state; /* The default */ PROCEDURE keep_error_state; FUNCTION error_state_discarded RETURN BOOLEAN; /* Remove data from q$error_instance and q$error_context for all errors that were reported earlier than the specified date. Pass NULL (default) to remove all rows. NOTE: This is a pragma autonomous_transaction; procedure. */ PROCEDURE clean_up_errors (older_than_in IN DATE DEFAULT NULL);END q$error_manager;/ q$error_manageråŒ…ä½“ q$error_manager.pkb 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210310410510610710810911011111211311411511611711811912012112212312412512612712812913013113213313413513613713813914014114214314414514614714814915015115215315415515615715815916016116216316416516616716816917017117217317417517617717817918018118218318418518618718818919019119219319419519619719819920020120220320420520620720820921021121221321421521621721821922022122222322422522622722822923023123223323423523623723823924024124224324424524624724824925025125225325425525625725825926026126226326426526626726826927027127227327427527627727827928028128228328428528628728828929029129229329429529629729829930030130230330430530630730830931031131231331431531631731831932032132232332432532632732832933033133233333433533633733833934034134234334434534634734834935035135235335435535635735835936036136236336436536636736836937037137237337437537637737837938038138238338438538638738838939039139239339439539639739839940040140240340440540640740840941041141241341441541641741841942042142242342442542642742842943043143243343443543643743843944044144244344444544644744844945045145245345445545645745845946046146246346446546646746846947047147247347447547647747847948048148248348448548648748848949049149249349449549649749849950050150250350450550650750850951051151251351451551651751851952052152252352452552652752852953053153253353453553653753853954054154254354454554654754854955055155255355455555655755855956056156256356456556656756856957057157257357457557657757857958058158258358458558658758858959059159259359459559659759859960060160260360460560660760860961061161261361461561661761861962062162262362462562662762862963063163263363463563663763863964064164264364464564664764864965065165265365465565665765865966066166266366466566666766866967067167267367467567667767867968068168268368468568668768868969069169269369469569669769869970070170270370470570670770870971071171271371471571671771871972072172272372472572672772872973073173273373473573673773873974074174274374474574674774874975075175275375475575675775875976076176276376476576676776876977077177277377477577677777877978078178278378478578678778878979079179279379479579679779879980080180280380480580680780880981081181281381481581681781881982082182282382482582682782882983083183283383483583683783883984084184284384484584684784884985085185285385485585685785885986086186286386486586686786886987087187287387487587687787887988088188288388488588688788888989089189289389489589689789889990090190290390490590690790890991091191291391491591691791891992092192292392492592692792892993093193293393493593693793893994094194294394494594694794894995095195295395495595695795895996096196296396496596696796896997097197297397497597697797897998098198298398498598698798898999099199299399499599699799899910001001100210031004100510061007100810091010101110121013101410151016101710181019102010211022102310241025102610271028102910301031103210331034103510361037103810391040104110421043104410451046104710481049105010511052105310541055105610571058105910601061106210631064106510661067106810691070107110721073107410751076107710781079108010811082108310841085108610871088108910901091109210931094109510961097109810991100110111021103110411051106110711081109111011111112111311141115111611171118111911201121112211231124112511261127112811291130113111321133113411351136113711381139114011411142114311441145114611471148114911501151115211531154115511561157115811591160116111621163116411651166116711681169117011711172117311741175117611771178117911801181118211831184118511861187118811891190119111921193119411951196119711981199120012011202120312041205120612071208120912101211121212131214121512161217121812191220122112221223122412251226122712281229123012311232123312341235123612371238123912401241124212431244124512461247124812491250125112521253125412551256125712581259126012611262126312641265126612671268126912701271127212731274127512761277127812791280128112821283128412851286128712881289129012911292129312941295129612971298129913001301130213031304130513061307130813091310131113121313131413151316131713181319132013211322132313241325132613271328132913301331133213331334133513361337133813391340134113421343134413451346134713481349135013511352135313541355135613571358135913601361136213631364136513661367136813691370137113721373137413751376137713781379138013811382138313841385138613871388138913901391139213931394139513961397139813991400140114021403140414051406140714081409141014111412141314141415141614171418141914201421142214231424142514261427142814291430143114321433143414351436143714381439144014411442144314441445144614471448144914501451145214531454145514561457145814591460146114621463146414651466146714681469147014711472147314741475147614771478147914801481148214831484148514861487148814891490149114921493149414951496149714981499150015011502150315041505150615071508150915101511151215131514151515161517151815191520152115221523152415251526152715281529153015311532153315341535153615371538153915401541154215431544154515461547154815491550155115521553155415551556155715581559156015611562156315641565156615671568156915701571157215731574157515761577157815791580158115821583158415851586158715881589159015911592159315941595159615971598159916001601160216031604160516061607160816091610161116121613161416151616161716181619162016211622162316241625162616271628162916301631163216331634163516361637163816391640164116421643164416451646164716481649165016511652165316541655165616571658165916601661166216631664166516661667166816691670167116721673167416751676167716781679168016811682168316841685168616871688168916901691169216931694169516961697169816991700170117021703170417051706170717081709171017111712171317141715171617171718171917201721172217231724172517261727172817291730173117321733173417351736173717381739174017411742174317441745174617471748174917501751175217531754175517561757175817591760176117621763176417651766176717681769177017711772177317741775177617771778177917801781178217831784178517861787178817891790179117921793179417951796179717981799180018011802180318041805180618071808180918101811181218131814181518161817181818191820182118221823182418251826182718281829183018311832183318341835183618371838183918401841184218431844184518461847184818491850185118521853185418551856185718581859186018611862186318641865186618671868186918701871187218731874187518761877187818791880188118821883188418851886188718881889189018911892189318941895189618971898189919001901190219031904190519061907190819091910191119121913191419151916191719181919192019211922192319241925192619271928192919301931193219331934193519361937193819391940194119421943194419451946194719481949195019511952195319541955195619571958195919601961196219631964196519661967196819691970197119721973197419751976197719781979198019811982198319841985198619871988198919901991199219931994199519961997199819992000200120022003200420052006200720082009201020112012201320142015201620172018201920202021202220232024202520262027202820292030203120322033203420352036203720382039204020412042204320442045204620472048204920502051205220532054205520562057205820592060206120622063206420652066206720682069207020712072207320742075207620772078207920802081208220832084208520862087208820892090209120922093209420952096209720982099210021012102210321042105210621072108210921102111211221132114211521162117211821192120212121222123212421252126212721282129213021312132213321342135213621372138213921402141214221432144214521462147214821492150215121522153215421552156215721582159216021612162216321642165216621672168216921702171217221732174217521762177217821792180218121822183218421852186218721882189219021912192219321942195219621972198219922002201220222032204220522062207220822092210221122122213221422152216221722182219222022212222222322242225222622272228222922302231223222332234223522362237223822392240224122422243224422452246224722482249225022512252225322542255225622572258225922602261226222632264226522662267226822692270227122722273227422752276227722782279228022812282228322842285228622872288228922902291229222932294229522962297229822992300230123022303230423052306230723082309231023112312231323142315231623172318231923202321232223232324232523262327232823292330233123322333233423352336233723382339234023412342234323442345234623472348234923502351235223532354235523562357235823592360236123622363236423652366236723682369237023712372237323742375237623772378237923802381238223832384238523862387238823892390239123922393239423952396239723982399240024012402240324042405240624072408240924102411241224132414241524162417241824192420242124222423242424252426242724282429243024312432243324342435243624372438243924402441244224432444244524462447244824492450245124522453245424552456245724582459246024612462246324642465246624672468246924702471247224732474247524762477247824792480248124822483248424852486248724882489249024912492249324942495249624972498249925002501250225032504250525062507250825092510251125122513251425152516251725182519252025212522252325242525252625272528252925302531253225332534253525362537253825392540254125422543254425452546254725482549255025512552255325542555255625572558255925602561256225632564256525662567256825692570257125722573257425752576257725782579258025812582258325842585258625872588258925902591259225932594259525962597259825992600260126022603260426052606260726082609261026112612261326142615261626172618261926202621262226232624262526262627262826292630263126322633263426352636263726382639264026412642264326442645264626472648264926502651265226532654265526562657265826592660266126622663266426652666266726682669267026712672267326742675267626772678267926802681268226832684268526862687268826892690269126922693269426952696269726982699270027012702270327042705270627072708270927102711271227132714271527162717271827192720272127222723272427252726272727282729273027312732273327342735273627372738273927402741274227432744274527462747274827492750275127522753275427552756275727582759276027612762276327642765276627672768276927702771277227732774277527762777277827792780278127822783278427852786278727882789279027912792279327942795279627972798279928002801280228032804280528062807280828092810281128122813281428152816281728182819282028212822282328242825282628272828282928302831283228332834283528362837283828392840284128422843284428452846284728482849285028512852285328542855285628572858285928602861286228632864286528662867286828692870287128722873287428752876287728782879288028812882288328842885288628872888288928902891289228932894289528962897289828992900290129022903290429052906290729082909291029112912291329142915291629172918291929202921292229232924292529262927292829292930293129322933293429352936293729382939294029412942294329442945294629472948294929502951295229532954295529562957295829592960296129622963296429652966296729682969297029712972297329742975297629772978297929802981298229832984298529862987298829892990299129922993299429952996299729982999300030013002300330043005300630073008300930103011301230133014301530163017301830193020302130223023302430253026302730283029303030313032303330343035303630373038303930403041304230433044304530463047304830493050305130523053305430553056305730583059306030613062306330643065306630673068306930703071307230733074307530763077307830793080308130823083308430853086308730883089309030913092309330943095309630973098309931003101310231033104310531063107310831093110311131123113311431153116311731183119312031213122312331243125312631273128312931303131313231333134313531363137313831393140314131423143314431453146314731483149315031513152315331543155315631573158315931603161316231633164316531663167316831693170317131723173317431753176317731783179318031813182318331843185318631873188318931903191319231933194319531963197319831993200320132023203320432053206320732083209321032113212321332143215321632173218321932203221322232233224322532263227322832293230323132323233323432353236323732383239324032413242324332443245324632473248324932503251325232533254325532563257325832593260326132623263326432653266326732683269327032713272327332743275327632773278327932803281328232833284328532863287328832893290329132923293329432953296329732983299330033013302330333043305330633073308330933103311create or replace PACKAGE BODY q$error_manager/*| This program is a part of the Quest Error Manager for Oracle.| This product is freeware and is not supported by Quest.|| www.quest.com?2008 Quest Software, Inc.ALL RIGHTS RESERVED.Redistribution and use of the Quest Error Manager for Oracle software in source and binary forms,with or without modification, are permitted provided that the following conditions are met:1. Redistributions of source code must retain (i) the following copyright notice: \"?008 Quest Software, Inc.All rights reserved,\" (ii) this list of conditions, and (iii) the disclaimer below.2. Redistributions in binary form must reproduce (i) the following copyright notice:\"?008 Quest Software, Inc. All rights reserved,\" (ii) this list of conditions, and (iii)the disclaimer below, in the documentation and/or other materials provided with the distribution.3. All advertising materials mentioning features or use of the Quest Error Managerfor Oracle software must display the following acknowledgement:This product includes software developed by Quest Software, Inc. and its contributors.4. Neither the name of Quest Software, Inc. nor the name its affiliates, subsidiariesor contributors may be used to endorse or promote products derived from the Quest ErrorManager for Oracle software without specific prior written permission from Quest Software, Inc.Disclaimer:THIS SOFTWARE IS PROVIDED BY QUEST SOFTWARE, INC. AND ITS CONTRIBUTORS ``AS IS''AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE,AND NON-INFRINGEMENT ARE DISCLAIMED. IN NO EVENT SHALL QUEST SOFTWARE OR ITSCONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTEGOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THEQUEST ERROR MANAGER SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.*/IS c_default_error_code CONSTANT PLS_INTEGER := -20000; g_clipboard maxvarchar2_t; g_clipboard_is_full BOOLEAN DEFAULT FALSE; -- c_trunc_warning VARCHAR2 (100) := '*** WARNING: Information truncated! '; c_warning_len PLS_INTEGER := LENGTH (c_warning); -- -- trace variables g_trace_enabled BOOLEAN := FALSE; g_error_trace_enabled BOOLEAN := TRUE; g_context_like q$log.context%TYPE := NULL; g_include_timestamp BOOLEAN := FALSE; g_multiple_contexts BOOLEAN := FALSE; g_context_list DBMS_SQL.varchar2s; /* Flag to indicate that the error has already been registered and raised within QD, so just propagate it on up the call stack. */ g_error_instance_raised q$error_instance.id%TYPE DEFAULT NULL; -- system settings g_grabbed_settings error_info_rt; /* 1.4.0 flag to register is we want to append the remaining context to text */ g_add_remaining_context_msg BOOLEAN := TRUE; -- Global contexts TYPE gcontext_rt IS RECORD ( name q$error_context.name%TYPE ,VALUE q$error_context.VALUE%TYPE ); TYPE gcontext_tt IS TABLE OF gcontext_rt INDEX BY BINARY_INTEGER; g_gcontexts gcontext_tt; -- current program TYPE runtime_rt IS RECORD ( package_name all_objects.object_name%TYPE ,program_name all_objects.object_name%TYPE ); /* 1.2.14 No longer used g_runtime runtime_rt; -- \"current\" running program */ -- collection of record TYPE runtime_nat IS TABLE OF runtime_rt; -- runtime stack implemented as a dense nested table. -- starts with element 1 and grows upward. g_runtime_nat runtime_nat := runtime_nat (); -- trace target c_screen CONSTANT INTEGER := 0; c_table CONSTANT INTEGER := 1; --1.4.1 c_file CONSTANT INTEGER := 2; g_target INTEGER := c_table; TYPE trace_file_info_rt IS RECORD ( dir maxvarchar2_t ,filename maxvarchar2_t ,lines_written PLS_INTEGER ); g_file_info trace_file_info_rt; -- Every hundred lines written, close and reopen. --1.4.1 c_close_threshold CONSTANT PLS_INTEGER := 100; /* V1.2.11 show/hide setting */ TYPE show_oracle_rt IS RECORD ( show BOOLEAN DEFAULT FALSE ,revert BOOLEAN DEFAULT FALSE ,revert_to BOOLEAN ); g_show_oracle show_oracle_rt; /* Option on how error is raised. */ c_with_handle CONSTANT PLS_INTEGER := -98; c_with_message CONSTANT PLS_INTEGER := +75; g_raise_with PLS_INTEGER := c_with_handle; g_discard_error_state BOOLEAN := FALSE; /* 1.2.12 Provide switch to force display of \"real\" error in the error message, rather than simply showing the error handle. This is needed when user is running tests via the API and is not retrieving errors via get_error_info. */ PROCEDURE raise_with_message IS BEGIN g_raise_with := c_with_message; END raise_with_message; PROCEDURE raise_with_handle IS BEGIN g_raise_with := c_with_handle; END raise_with_handle; FUNCTION raising_with_message RETURN BOOLEAN IS BEGIN RETURN g_raise_with = c_with_message; END raising_with_message; FUNCTION raising_with_handle RETURN BOOLEAN IS BEGIN RETURN g_raise_with = c_with_handle; END raising_with_handle; /* END 1.2.12 changes */ -- Private routines/handy utilities FUNCTION error_backtrace (prefix_with_error_in IN BOOLEAN DEFAULT FALSE) RETURN VARCHAR2 IS l_errortrace maxvarchar2_t := DBMS_UTILITY.format_error_stack; l_backtrace maxvarchar2_t; l_return maxvarchar2_t; BEGIN EXECUTE IMMEDIATE 'BEGIN :val := DBMS_UTILITY.format_error_backtrace; END;' USING OUT l_backtrace; l_return := CASE WHEN prefix_with_error_in THEN l_errortrace || CHR (10) || CHR (10) || l_backtrace ELSE l_backtrace END; RETURN l_return; EXCEPTION WHEN OTHERS THEN RETURN l_errortrace; END error_backtrace; FUNCTION oracle_app_error (code_in IN PLS_INTEGER) RETURN BOOLEAN IS BEGIN RETURN code_in BETWEEN -20999 AND -20000; END oracle_app_error; PROCEDURE validate_oracle_error (code_in IN PLS_INTEGER ,message_out OUT VARCHAR2 ,is_valid_out OUT BOOLEAN) IS l_message maxvarchar2_t; BEGIN /* Take care of special case... */ IF code_in IN (100, -1403) THEN is_valid_out := TRUE; ELSE l_message := SQLERRM (code_in); -- If SQLERRM does not find an entry, it return a string like one of these: -- If the number is negative... -- ORA-NNNNN: Message NNNN not found; product=RDBMS; facility=ORA -- If the number is positive... -- -13000: non-ORACLE exception -- If the positive number is too big, we get numeric overflow. IF l_message LIKE 'ORA-_____: Message%not found;%' OR l_message LIKE '%: non-ORACLE exception%' THEN message_out := NULL; is_valid_out := FALSE; ELSE message_out := l_message; is_valid_out := TRUE; END IF; END IF; EXCEPTION WHEN OTHERS THEN --numeric overflow IF SQLCODE = -1426 THEN message_out := NULL; is_valid_out := FALSE; ELSE RAISE; END IF; END validate_oracle_error; FUNCTION is_valid_oracle_error (code_in IN PLS_INTEGER) RETURN BOOLEAN IS l_message maxvarchar2_t; retval BOOLEAN; BEGIN validate_oracle_error (code_in, l_message, retval); RETURN retval; END is_valid_oracle_error; FUNCTION sqlcode_name (error_code_in IN PLS_INTEGER) RETURN VARCHAR2 IS l_return maxvarchar2_t; /* 1.2.16 all_objects.object_name%TYPE; */ BEGIN l_return := CASE error_code_in WHEN -6511 THEN 'CURSOR_ALREADY_OPEN' WHEN -0001 THEN 'DUP_VAL_ON_INDEX' WHEN -0051 THEN 'TIMEOUT_ON_RESOURCE' WHEN -1001 THEN 'INVALID_CURSOR' WHEN -1012 THEN 'NOT_LOGGED_ON' WHEN -1017 THEN 'LOGIN_DENIED' WHEN 100 THEN 'NO_DATA_FOUND' WHEN -1476 THEN 'ZERO_DIVIDE' WHEN -1722 THEN 'INVALID_NUMBER' WHEN -1422 THEN 'TOO_MANY_ROWS' WHEN -6500 THEN 'STORAGE_ERROR' WHEN -6501 THEN 'PROGRAM_ERROR' WHEN -6502 THEN 'VALUE_ERROR' WHEN -6530 THEN 'ACCESS_INTO_NULL' WHEN -6531 THEN 'COLLECTION_IS_NULL ' WHEN -6532 THEN 'SUBSCRIPT_OUTSIDE_LIMIT' WHEN -6533 THEN 'SUBSCRIPT_BEYOND_COUNT ' WHEN -650 THEN 'ROWTYPE_MISMATCH' WHEN -1410 THEN 'SYS_INVALID_ROWID' WHEN -30625 THEN 'SELF_IS_NULL' WHEN -6592 THEN 'CASE_NOT_FOUND' WHEN -1725 THEN 'USERENV_COMMITSCN_ERROR' WHEN -6548 THEN 'NO_DATA_NEEDED' ELSE UPPER ( SUBSTR (SQLERRM (error_code_in) ,INSTR (SQLERRM (error_code_in), ':') + 2)) END; RETURN l_return; END sqlcode_name; FUNCTION sqlcode_text (error_code_in IN PLS_INTEGER) RETURN VARCHAR2 IS BEGIN IF error_code_in IN (100, -1403) THEN RETURN 'No data found'; ELSE RETURN SQLERRM (error_code_in); END IF; END sqlcode_text; -- MOve from q$error_qp to remove dependency on package. FUNCTION q$error_qp_onerow (id_in IN q$error.id%TYPE) RETURN q$error%ROWTYPE IS CURSOR onerow_cur IS SELECT * FROM q$error WHERE id = id_in; onerow_rec q$error%ROWTYPE; BEGIN OPEN onerow_cur; FETCH onerow_cur INTO onerow_rec; CLOSE onerow_cur; RETURN onerow_rec; END q$error_qp_onerow; FUNCTION q$error_instance_qp_onerow (id_in IN q$error_instance.id%TYPE) RETURN q$error_instance%ROWTYPE IS CURSOR onerow_cur IS SELECT * FROM q$error_instance WHERE id = id_in; onerow_rec q$error_instance%ROWTYPE; BEGIN OPEN onerow_cur; FETCH onerow_cur INTO onerow_rec; CLOSE onerow_cur; RETURN onerow_rec; END q$error_instance_qp_onerow; PROCEDURE mark_q$error_raised (id_in IN q$error_instance.id%TYPE) IS BEGIN /* 1.2.17 Do not maintain state if user has requested this non-default behavior. That is, immediately mark it as handled. */ IF error_state_discarded () THEN mark_q$error_handled (); ELSE g_error_instance_raised := id_in; END IF; END mark_q$error_raised; -- Reset when get_error_info is called. PROCEDURE mark_q$error_handled IS BEGIN g_error_instance_raised := NULL; clear_gcontexts; END mark_q$error_handled; FUNCTION q$error_instance_id_raised RETURN q$error_instance.id%TYPE IS BEGIN RETURN g_error_instance_raised; END q$error_instance_id_raised; FUNCTION q$error_raised RETURN BOOLEAN IS BEGIN RETURN /* 1.4.0 Do not directly reference variables g_error_instance_raised */ q$error_instance_id_raised () IS NOT NULL; END q$error_raised; -- returns the program name at the \"top\" of the runtime stack FUNCTION top_program_name RETURN all_objects.object_name%TYPE IS v_program_name all_objects.object_name%TYPE; BEGIN IF (g_runtime_nat.COUNT &gt; 0) THEN v_program_name := g_runtime_nat (g_runtime_nat.LAST).program_name; END IF; RETURN (v_program_name); END top_program_name; -- PBA 20040518 FUNCTION top_package_name RETURN all_objects.object_name%TYPE IS v_package_name all_objects.object_name%TYPE; BEGIN IF (g_runtime_nat.COUNT &gt; 0) THEN v_package_name := g_runtime_nat (g_runtime_nat.LAST).program_name; END IF; RETURN (v_package_name); END top_package_name; -- PBA 20040518 FUNCTION top_packprog_name RETURN VARCHAR2 IS BEGIN RETURN top_package_name || '.' || top_program_name; END top_packprog_name; -- returns the current runtime context at the \"top\" of the runtime stack FUNCTION top_runtime RETURN runtime_rt IS v_runtime runtime_rt; BEGIN IF (g_runtime_nat.COUNT &gt; 0) THEN v_runtime := g_runtime_nat (g_runtime_nat.LAST); END IF; RETURN (v_runtime); END top_runtime; -- convert Boolean value to String FUNCTION strval (val IN BOOLEAN) RETURN VARCHAR2 IS BEGIN IF val THEN RETURN ('TRUE'); ELSIF NOT val THEN RETURN ('FALSE'); ELSE RETURN ('NULL'); END IF; END strval; -- public routines (exposed in the package header) -- ------------------------------------- -- Tracing and DBMS_OUTPUT encapsulation -- ------------------------------------- -- Tracing and DBMS_OUTPUT encapsulation -- switches output to the console -- NOTE: default is to Table PROCEDURE toscreen IS BEGIN g_target := c_screen; END toscreen; -- switches output to the q$log table -- NOTE: this is the default destination PROCEDURE totable IS BEGIN g_target := c_table; END totable; PROCEDURE totable (purge_in IN BOOLEAN) IS PRAGMA AUTONOMOUS_TRANSACTION; BEGIN totable (); IF purge_in THEN DELETE FROM q$log; COMMIT; END IF; END totable; PROCEDURE tofile (dir_in IN VARCHAR2 ,file_in IN VARCHAR2 ,overwrite_in IN BOOLEAN DEFAULT TRUE) IS BEGIN g_file_info.dir := dir_in; g_file_info.filename := file_in; g_file_info.lines_written := 0; /* Write to file now occurs in front end when tracing is terminated g_file_info.file_handle := utx_file.fopen (dir_in , file_in , CASE WHEN overwrite_in THEN 'W' ELSE 'A' END , max_linesize =&gt; 32767 );*/ /* We still write to the table, and then dump to file later. */ g_target := c_table; END tofile; -- simple DBMS_OUTPUT handling of 255 char limit -- looks for a newline, or chops to fit given length PROCEDURE pl (string_in IN VARCHAR2, length_in IN PLS_INTEGER := 80) IS v_len PLS_INTEGER := LEAST (length_in, 255); v_len2 PLS_INTEGER; v_chr10 PLS_INTEGER; v_str VARCHAR2 (2000); BEGIN IF LENGTH (string_in) &gt; v_len THEN v_chr10 := INSTR (string_in, CHR (10)); IF v_chr10 &gt; 0 AND v_len &gt;= v_chr10 THEN v_len := v_chr10 - 1; v_len2 := v_chr10 + 1; ELSE v_len2 := v_len + 1; END IF; v_str := SUBSTR (string_in, 1, v_len); DBMS_OUTPUT.put_line (v_str); pl (string_in =&gt; SUBSTR (string_in, v_len2) ,length_in =&gt; length_in); ELSE DBMS_OUTPUT.put_line (string_in); END IF; EXCEPTION /* 1.3.1 Volker Bartuseck fix */ WHEN OTHERS THEN DBMS_OUTPUT.enable (1000000); IF v_str IS NULL THEN DBMS_OUTPUT.put_line (string_in); ELSE DBMS_OUTPUT.put_line (v_str); END IF; END pl; -- converts the given boolean value to string, -- then writes it out as above PROCEDURE pl (val IN BOOLEAN) IS BEGIN pl (strval (val)); END pl; -- as above but concatenates str with the string value of bool -- e.g., 'cursor%found TRUE' PROCEDURE pl (str IN VARCHAR2, bool IN BOOLEAN, len IN PLS_INTEGER := 80) IS BEGIN pl (string_in =&gt; str || ' ' || strval (bool), length_in =&gt; len); END pl; PROCEDURE pl (clob_in IN CLOB, length_in IN PLS_INTEGER := 80) IS buffer VARCHAR2 (255); amount BINARY_INTEGER := GREATEST (length_in, 255); position INTEGER := 1; BEGIN LOOP DBMS_LOB.read (clob_in ,amount ,position ,buffer); /* Display the buffer contents using the string overloading */ pl (buffer); position := position + amount; END LOOP; EXCEPTION WHEN NO_DATA_FOUND OR VALUE_ERROR THEN pl ('** End of CLOB data **'); END pl; PROCEDURE set_error_trace (onoff_in IN BOOLEAN) IS BEGIN IF onoff_in THEN error_trace_on; ELSE error_trace_off; END IF; END set_error_trace; PROCEDURE error_trace_on IS BEGIN g_error_trace_enabled := TRUE; END error_trace_on; PROCEDURE error_trace_off IS BEGIN g_error_trace_enabled := FALSE; END error_trace_off; FUNCTION error_trace_enabled RETURN BOOLEAN IS BEGIN RETURN g_error_trace_enabled; END error_trace_enabled; /*1.4.0 */ PROCEDURE add_remaining_context_msg_on IS BEGIN g_add_remaining_context_msg := TRUE; END add_remaining_context_msg_on; PROCEDURE add_remaining_context_msg_off IS BEGIN g_add_remaining_context_msg := FALSE; END add_remaining_context_msg_off; PROCEDURE set_add_remaining_context_msg (onoff_in IN BOOLEAN) IS BEGIN IF onoff_in THEN add_remaining_context_msg_on; ELSE add_remaining_context_msg_off; END IF; END set_add_remaining_context_msg; FUNCTION add_remaining_context_enabled RETURN BOOLEAN IS BEGIN RETURN g_add_remaining_context_msg; END add_remaining_context_enabled; /* end 1.4.0 */ FUNCTION string_to_list (string_in IN VARCHAR2, delim_in IN VARCHAR2) RETURN DBMS_SQL.varchar2s IS c_end_of_list CONSTANT PLS_INTEGER := -99; l_item maxvarchar2_t; l_startloc PLS_INTEGER := 1; items_out DBMS_SQL.varchar2s; PROCEDURE add_item (item_in IN VARCHAR2) IS BEGIN IF item_in = delim_in THEN /* We don't put delimiters into the collection. */ NULL; ELSE items_out (items_out.COUNT + 1) := RTRIM (LTRIM (item_in)); END IF; END add_item; PROCEDURE get_next_item (string_in IN VARCHAR2 ,startloc_inout IN OUT PLS_INTEGER ,item_out OUT VARCHAR2) IS l_loc PLS_INTEGER; BEGIN l_loc := INSTR (string_in, delim_in, startloc_inout); IF l_loc = startloc_inout -- Previous item is NULL THEN item_out := NULL; ELSIF l_loc = 0 -- Rest of string is last item THEN item_out := SUBSTR (string_in, startloc_inout); ELSE item_out := SUBSTR (string_in ,startloc_inout ,l_loc - startloc_inout); END IF; IF l_loc = 0 THEN startloc_inout := c_end_of_list; ELSE startloc_inout := l_loc + 1; END IF; END get_next_item; BEGIN IF string_in IS NOT NULL AND delim_in IS NOT NULL THEN LOOP get_next_item (string_in, l_startloc, l_item); add_item (l_item); EXIT WHEN l_startloc = c_end_of_list; END LOOP; END IF; RETURN items_out; END string_to_list; -- Clears out the trace contents. Currently just deletes from q$log. PROCEDURE clear_trace IS BEGIN EXECUTE IMMEDIATE 'truncate table q$log'; EXCEPTION WHEN OTHERS THEN NULL; END clear_trace; PROCEDURE set_trace (onoff_in IN BOOLEAN ,context_like_in IN q$log.context%TYPE := NULL ,include_timestamp_in IN BOOLEAN DEFAULT FALSE ,delimiter_in IN VARCHAR2 DEFAULT ',') IS BEGIN -- Special commands.... IF onoff_in AND UPPER (context_like_in) = 'QCTO#TOTABLE' THEN totable (purge_in =&gt; TRUE); g_trace_enabled := onoff_in; g_context_like := '%'; q$error_manager.trace ( 'set_trace to table via override with context \"%\"' ,g_trace_enabled); g_include_timestamp := include_timestamp_in; ELSE g_trace_enabled := onoff_in; g_context_like := UPPER (NVL (context_like_in, '%')); q$error_manager.trace ( 'set_trace with context \"' || g_context_like || '\"' ,g_trace_enabled); g_include_timestamp := include_timestamp_in; /* Write to file now occurs in front end when tracing is terminated IF NOT g_trace_enabled AND g_target = c_file THEN utx_file.fclose (g_file_info.file_handle); END IF;*/ -- BM 1239 When turning off, set back to table, which is the default. IF NOT g_trace_enabled THEN totable; END IF; END IF; g_multiple_contexts := INSTR (context_like_in, delimiter_in) &gt; 0; IF g_multiple_contexts THEN g_context_list := string_to_list (context_like_in, delimiter_in); END IF; END set_trace; PROCEDURE trace_on (context_like_in IN q$log.context%TYPE := NULL ,include_timestamp_in IN BOOLEAN DEFAULT FALSE ,delimiter_in IN VARCHAR2 DEFAULT ',') IS BEGIN set_trace (onoff_in =&gt; TRUE ,context_like_in =&gt; context_like_in ,include_timestamp_in =&gt; include_timestamp_in); END trace_on; PROCEDURE trace_off (context_like_in IN q$log.context%TYPE := NULL ,include_timestamp_in IN BOOLEAN DEFAULT FALSE) IS BEGIN set_trace (onoff_in =&gt; FALSE ,context_like_in =&gt; context_like_in ,include_timestamp_in =&gt; include_timestamp_in); END trace_off; FUNCTION trace_enabled RETURN BOOLEAN IS BEGIN RETURN g_trace_enabled; END trace_enabled; FUNCTION context_matches (context_in IN VARCHAR2) RETURN BOOLEAN IS BEGIN FOR indx IN 1 .. g_context_list.COUNT LOOP IF UPPER (context_in) LIKE UPPER (g_context_list (indx)) THEN RETURN TRUE; END IF; END LOOP; RETURN FALSE; END context_matches; FUNCTION trace_enabled (context_in IN q$log.context%TYPE) RETURN BOOLEAN IS l_return BOOLEAN DEFAULT FALSE; BEGIN IF g_trace_enabled THEN /* IF multiple contexts, then check for exact match. */ IF g_multiple_contexts THEN l_return := context_matches (context_in); /* Use wildcarded comparision */ ELSE l_return := (g_context_like IS NULL OR UPPER (context_in) LIKE '%' || g_context_like || '%'); END IF; END IF; RETURN l_return; END trace_enabled; FUNCTION full_log_string (context_in IN VARCHAR2 ,text_in IN VARCHAR2 ,level_in IN PLS_INTEGER) RETURN VARCHAR2 IS /* Cannot be longer than 4000 characters, since it is returned via a query. */ c_timestamp CONSTANT VARCHAR2 (100) := TO_CHAR (SYSDATE, 'HH24:MI:SS-YYYYMMDD') ; l_string maxvarchar2_t; BEGIN l_string := CASE WHEN g_include_timestamp THEN c_timestamp || ' ' ELSE NULL END || context_in; l_string := l_string || ' - ' || SUBSTR (text_in ,1 ,c_varchar2_max_length_db - LENGTH (l_string) - 5); /* Ignore level || CASE WHEN level_in &gt; 0 THEN LPAD (' ', level_in) ELSE NULL END || context_in || ' - ' || text_in;*/ RETURN l_string; EXCEPTION WHEN VALUE_ERROR THEN RETURN SUBSTR (context_in || ' - ' || text_in ,1 ,c_varchar2_max_length); END full_log_string; -- writes output to the screen or q$log table -- (see toscreen and totable above) PROCEDURE trace (context_in IN q$log.context%TYPE ,text_in IN q$log.text%TYPE ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL) IS PRAGMA AUTONOMOUS_TRANSACTION; l_context q$log.context%TYPE; l_text q$log.text%TYPE; BEGIN IF trace_enabled (context_in) OR force_trace_in THEN -- Bypass encapsulation; problems with infinite loop. IF g_target = c_table THEN /* 1.2.18 Avoid context strings &gt; 500 characters */ l_context := CASE WHEN g_include_timestamp THEN TO_CHAR (SYSDATE, 'HH24:MI:SS-YYYYMMDD') || ' ' ELSE NULL END; l_context := SUBSTR (l_context || context_in, 1, 500); l_text := SUBSTR (text_in, 1, c_varchar2_max_length_db); INSERT INTO q$log (id ,context ,text ,call_stack ,created_on ,created_by) VALUES ( q$log_seq.NEXTVAL ,l_context ,l_text ,SUBSTR (DBMS_UTILITY.format_call_stack ,1 ,c_varchar2_max_length_db) ,SYSDATE ,USER); ELSIF g_target = c_screen THEN pl ( string_in =&gt; full_log_string (context_in ,text_in ,level_in)); /* Write to file now occurs in front end when tracing is terminated ELSIF g_target = c_file THEN utx_file.put_line (g_file_info.file_handle , full_log_string (context_in, text_in, level_in) ); -- 1.2.3: close and reopen file g_file_info.lines_written := g_file_info.lines_written + 1; IF g_file_info.lines_written &gt;= c_close_threshold THEN utx_file.fclose (g_file_info.file_handle); g_file_info.file_handle := utx_file.fopen (g_file_info.dir , g_file_info.filename , 'A' , max_linesize =&gt; 32767 ); g_file_info.lines_written := 0; END IF;*/ END IF; COMMIT; END IF; EXCEPTION WHEN OTHERS THEN ROLLBACK; RAISE; END trace; PROCEDURE trace (context_in IN q$log.context%TYPE ,boolean_in IN BOOLEAN ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL) IS BEGIN IF boolean_in THEN trace (context_in ,'TRUE' ,force_trace_in =&gt; force_trace_in ,level_in =&gt; level_in); ELSIF NOT boolean_in THEN trace (context_in ,'FALSE' ,force_trace_in =&gt; force_trace_in ,level_in =&gt; level_in); ELSE trace (context_in ,'NULL BOOLEAN' ,force_trace_in =&gt; force_trace_in ,level_in =&gt; level_in); END IF; END trace; PROCEDURE trace (context_in IN q$log.context%TYPE ,number_in IN NUMBER ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL) IS BEGIN trace (context_in ,TO_CHAR (number_in) ,force_trace_in =&gt; force_trace_in ,level_in =&gt; level_in); END trace; PROCEDURE trace (context_in IN q$log.context%TYPE ,date_in IN DATE ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL) IS BEGIN trace (context_in ,TO_CHAR (date_in, 'YYYY MM DD HH24:MI:SS') ,force_trace_in =&gt; force_trace_in ,level_in =&gt; level_in); END trace; PROCEDURE trace (context_in IN q$log.context%TYPE ,clob_in IN CLOB ,force_trace_in IN BOOLEAN DEFAULT FALSE ,level_in IN PLS_INTEGER DEFAULT NULL) IS -- Maximum size set by column restriction buffer VARCHAR2 (4000); amount BINARY_INTEGER := 4000; position INTEGER := 1; l_notnull BOOLEAN := FALSE; BEGIN LOOP DBMS_LOB.read (clob_in ,amount ,position ,buffer); l_notnull := TRUE; trace ( CASE WHEN position = 1 THEN context_in ELSE NULL END ,buffer ,force_trace_in =&gt; force_trace_in ,level_in =&gt; CASE WHEN position = 1 THEN level_in ELSE 0 END); position := position + amount; END LOOP; EXCEPTION WHEN NO_DATA_FOUND OR VALUE_ERROR THEN -- Make sure that at least the trace message is written. IF NOT l_notnull THEN trace (context_in ,'' ,force_trace_in ,level_in); END IF; END trace; FUNCTION build_where_clause_show_trace ( from_id_in IN q$log.id%TYPE := NULL ,context_like_in IN VARCHAR2 := '%' ,text_like_in IN VARCHAR2 := '%') RETURN VARCHAR2 IS l_where VARCHAR2 (1000); BEGIN IF from_id_in IS NULL THEN l_where := '1 = 1'; ELSE l_where := 'id &gt;= ' || from_id_in; END IF; l_where := l_where || ' AND context LIKE ''%' || context_like_in || '%'' AND text LIKE ''%' || text_like_in || '%'''; RETURN l_where; END build_where_clause_show_trace; -- writes to the console the trace rows -- given (optionally filtered in any combination): -- trace id, context, text -- may be limited by limit_in -- call stack can also be displayed PROCEDURE show_trace (from_id_in IN q$log.id%TYPE := NULL ,context_like_in IN VARCHAR2 := '%' ,text_like_in IN VARCHAR2 := '%' ,limit_in IN PLS_INTEGER := NULL ,include_call_stack_in IN BOOLEAN := TRUE) IS l_where VARCHAR2 (1000); l_entries q$log_tc; l_index PLS_INTEGER; limit_not_reached BOOLEAN := TRUE; FUNCTION all_logs_by (where_clause_in IN VARCHAR2) RETURN q$log_tc IS TYPE weak_rc IS REF CURSOR; allrows_cur weak_rc; --1.4.1 l_rows PLS_INTEGER; retval q$log_tc; BEGIN OPEN allrows_cur FOR 'SELECT ID, CONTEXT, TEXT, CALL_STACK, CREATED_ON, CREATED_BY, CHANGED_ON, CHANGED_BY FROM q$log WHERE ' || where_clause_in; LOOP FETCH allrows_cur INTO retval (retval.COUNT + 1); EXIT WHEN allrows_cur%NOTFOUND; END LOOP; RETURN retval; END all_logs_by; BEGIN l_where := build_where_clause_show_trace ( from_id_in =&gt; from_id_in ,context_like_in =&gt; context_like_in ,text_like_in =&gt; text_like_in); l_entries := all_logs_by (l_where); l_index := l_entries.FIRST; WHILE (l_index IS NOT NULL AND limit_not_reached) LOOP pl ( 'ID-Context-Text = ' || l_entries (l_index).id || '-' || l_entries (l_index).context || '-' || l_entries (l_index).text); IF include_call_stack_in THEN pl (l_entries (l_index).call_stack); END IF; pl ('------------------------------------------------'); l_index := l_entries.NEXT (l_index); limit_not_reached := (l_index &lt;= limit_in OR limit_in IS NULL); END LOOP; END show_trace; ------------------------------------------- -- Error handling and raising functionality ------------------------------------------- PROCEDURE internal_raise (code_in IN PLS_INTEGER, message_in IN VARCHAR2) IS BEGIN -- 4/2004: Keep this trace call in? Offer it as an option? -- 5/2005: Made it optional, based on the trace setting. IF error_trace_enabled THEN trace ( 'ERROR RAISED' , 'Oracle error = ' || code_in || ' - Error instance handle = ' || message_in ,FALSE); END IF; raise_application_error (code_in, message_in); END internal_raise; -- Global contexts; not tied to any specific instance. PROCEDURE add_gcontext (NAME_IN IN q$error_context.name%TYPE ,value_in IN q$error_context.VALUE%TYPE) IS l_name q$error_context.name%TYPE := UPPER (NAME_IN); l_row PLS_INTEGER := g_gcontexts.FIRST; l_matched BOOLEAN := FALSE; BEGIN WHILE (l_row IS NOT NULL AND NOT l_matched) LOOP l_matched := l_name = g_gcontexts (l_row).name; IF NOT l_matched THEN l_row := g_gcontexts.NEXT (l_row); END IF; END LOOP; IF NOT l_matched THEN l_row := g_gcontexts.COUNT + 1; END IF; g_gcontexts (l_row).name := l_name; g_gcontexts (l_row).VALUE := value_in; END add_gcontext; -- Remove all global contexts. -- This is called by mark_q$error_handled as well. PROCEDURE clear_gcontexts IS BEGIN g_gcontexts.delete; END clear_gcontexts; -- Set a single context value PROCEDURE add_context ( error_instance_id_in IN q$error_instance.id%TYPE ,NAME_IN IN q$error_context.name%TYPE ,value_in IN q$error_context.VALUE%TYPE ,validate_in IN BOOLEAN DEFAULT TRUE) IS PRAGMA AUTONOMOUS_TRANSACTION; l_error_instance q$error_instance%ROWTYPE; BEGIN IF NAME_IN IS NOT NULL THEN IF validate_in THEN l_error_instance := q$error_instance_qp_onerow (error_instance_id_in); ELSE l_error_instance.id := error_instance_id_in; END IF; INSERT INTO q$error_context (id ,error_instance_id ,name ,VALUE) VALUES (q$error_context_seq.NEXTVAL ,l_error_instance.id ,NAME_IN ,value_in); COMMIT; END IF; EXCEPTION WHEN DUP_VAL_ON_INDEX THEN ROLLBACK; WHEN OTHERS THEN ROLLBACK; internal_raise ( c_default_error_code , 'Unable to insert QD context for \"' || NAME_IN || '\" with value \"' || value_in || '\" for instance ID ' || l_error_instance.id || ' with Oracle error = ' || SQLCODE); END add_context; PROCEDURE add_context (err_instance_id_in IN q$error_instance.id%TYPE ,NAME_IN IN q$error_context.name%TYPE ,value_in IN q$error_context.VALUE%TYPE ,validate_in IN BOOLEAN DEFAULT TRUE) IS BEGIN add_context (error_instance_id_in =&gt; err_instance_id_in ,NAME_IN =&gt; NAME_IN ,value_in =&gt; value_in ,validate_in =&gt; validate_in); END add_context; -- An error needs to be raised or logged. -- Get a message handle for this particular error instance. -- The \"error message\" id keeps track of both the error -- and message information. This program also serves as -- \"record and go\" and \"go\". In other words, we do not -- raise an error, but it is noted. -- PROCEDURE register_error_instance ( error_in IN q$error%ROWTYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,error_instance_id_out IN OUT q$error_instance.id%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL) IS l_error_instance_id q$error_instance.id%TYPE; PROCEDURE add_context_values IS l_row PLS_INTEGER; PROCEDURE add_one (NAME_IN IN VARCHAR2, value_in IN VARCHAR2) IS BEGIN IF NAME_IN IS NOT NULL THEN INSERT INTO q$error_context (id ,error_instance_id ,name ,VALUE) VALUES (q$error_context_seq.NEXTVAL ,l_error_instance_id ,SUBSTR (NAME_IN, 1, c_varchar2_max_length_db) ,SUBSTR (value_in, 1, c_varchar2_max_length_db)); END IF; EXCEPTION WHEN DUP_VAL_ON_INDEX THEN -- Entering another value for the same context. Mention it in the trace. trace ( 'ADD CONTEXT' , 'Duplicate entry for \"' || NAME_IN || '\" with value \"' || value_in || '\" for instance ID ' || l_error_instance_id ,TRUE); END add_one; BEGIN add_one (name1_in, value1_in); add_one (name2_in, value2_in); add_one (name3_in, value3_in); add_one (name4_in, value4_in); add_one (name5_in, value5_in); -- -- Add any global contexts l_row := g_gcontexts.FIRST; WHILE (l_row IS NOT NULL) LOOP add_one (g_gcontexts (l_row).name, g_gcontexts (l_row).VALUE); l_row := g_gcontexts.NEXT (l_row); END LOOP; END add_context_values; BEGIN IF q$error_raised THEN -- Just continue to propagate this error instance. error_instance_id_out := q$error_instance_id_raised; ELSE SELECT q$error_instance_seq.NEXTVAL INTO l_error_instance_id FROM DUAL; INSERT INTO q$error_instance (id ,error_id ,error_stack ,call_stack ,MESSAGE ,system_error_code ,system_error_message) VALUES ( l_error_instance_id ,error_in.id ,SUBSTR (g_grabbed_settings.error_stack ,1 ,c_varchar2_max_length_db) ,SUBSTR (g_grabbed_settings.call_stack ,1 ,c_varchar2_max_length_db) ,SUBSTR (text_in, 1, c_varchar2_max_length_db) ,SUBSTR (g_grabbed_settings.system_error_code ,1 ,c_varchar2_max_length_db) ,SUBSTR (g_grabbed_settings.system_error_message ,1 ,c_varchar2_max_length_db)); add_context_values; mark_q$error_raised (l_error_instance_id); error_instance_id_out := l_error_instance_id; END IF; END register_error_instance; PROCEDURE grab_settings IS BEGIN g_grabbed_settings.system_error_code := SQLCODE; g_grabbed_settings.system_error_message := DBMS_UTILITY.format_error_stack; g_grabbed_settings.error_stack := error_backtrace; g_grabbed_settings.call_stack := DBMS_UTILITY.format_call_stack; END grab_settings; PROCEDURE register_error ( error_code_in IN q$error.code%TYPE ,error_instance_id_out IN OUT q$error_instance.id%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS PRAGMA AUTONOMOUS_TRANSACTION; FUNCTION error_from_repository (error_code_in IN PLS_INTEGER) RETURN q$error%ROWTYPE IS l_error q$error%ROWTYPE; BEGIN /* If the error code is an Oracle error, do not create an \"undefined\" entry in the error log table. */ BEGIN SELECT id INTO l_error.id FROM q$error WHERE code = error_code_in; EXCEPTION WHEN NO_DATA_FOUND THEN l_error.id := NULL; END; IF l_error.id IS NULL -- an unknown error; record as such THEN SELECT q$error_seq.NEXTVAL INTO l_error.id FROM DUAL; IF is_valid_oracle_error (error_code_in) THEN l_error.name := sqlcode_name (error_code_in); l_error.description := sqlcode_text (error_code_in); INSERT INTO q$error (id ,code ,name ,description ,error_category_name) VALUES (l_error.id ,error_code_in ,l_error.name ,l_error.description ,'Oracle Error'); ELSE l_error.name := SQLERRM (error_code_in); INSERT INTO q$error (id ,code ,name ,description ,error_category_name) VALUES ( l_error.id ,error_code_in ,l_error.name ,'Undefined runtime error: ' || error_code_in || '. You should define this in the error repository.' ,'UNDEFINED'); END IF; l_error := q$error_qp_onerow (l_error.id); END IF; RETURN l_error; END error_from_repository; BEGIN IF q$error_raised THEN -- Just continue to propagate this error instance. error_instance_id_out := q$error_instance_id_raised; ELSE IF grab_settings_in THEN grab_settings; END IF; register_error_instance ( error_from_repository (error_code_in) ,text_in =&gt; text_in ,error_instance_id_out =&gt; error_instance_id_out ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in); COMMIT; END IF; EXCEPTION WHEN OTHERS THEN ROLLBACK; RAISE; END register_error; /* 1.3.6 Standardize arg name - this OL no longer needed PROCEDURE register_error ( error_code_in IN q$error.code%TYPE , error_instance_id_out IN OUT q$error_instance.id%TYPE , text_in IN q$error_instance.MESSAGE%TYPE:= NULL , name1_in IN VARCHAR2 DEFAULT NULL , value1_in IN VARCHAR2 DEFAULT NULL , name2_in IN VARCHAR2 DEFAULT NULL , value2_in IN VARCHAR2 DEFAULT NULL , name3_in IN VARCHAR2 DEFAULT NULL , value3_in IN VARCHAR2 DEFAULT NULL , name4_in IN VARCHAR2 DEFAULT NULL , value4_in IN VARCHAR2 DEFAULT NULL , name5_in IN VARCHAR2 DEFAULT NULL , value5_in IN VARCHAR2 DEFAULT NULL , grab_settings_in IN BOOLEAN DEFAULT TRUE ) IS BEGIN register_error (error_code_in =&gt; error_code_in , error_instance_id_out =&gt; err_instance_id_out , text_in =&gt; text_in , name1_in =&gt; name1_in , value1_in =&gt; value1_in , name2_in =&gt; name2_in , value2_in =&gt; value2_in , name3_in =&gt; name3_in , value3_in =&gt; value3_in , name4_in =&gt; name4_in , value4_in =&gt; value4_in , name5_in =&gt; name5_in , value5_in =&gt; value5_in , grab_settings_in =&gt; grab_settings_in ); END; */ PROCEDURE register_error ( error_name_in IN q$error.name%TYPE ,error_instance_id_out IN OUT q$error_instance.id%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS PRAGMA AUTONOMOUS_TRANSACTION; l_error q$error%ROWTYPE; BEGIN IF q$error_raised THEN -- Just continue to propagate this error instance. error_instance_id_out := q$error_instance_id_raised; ELSE IF grab_settings_in THEN grab_settings; END IF; BEGIN SELECT id INTO l_error.id FROM q$error WHERE name = error_name_in; EXCEPTION WHEN NO_DATA_FOUND THEN l_error.id := NULL; -- Create new error if not present. END; IF l_error.id IS NULL -- an unknown error; record as such THEN SELECT q$error_seq.NEXTVAL INTO l_error.id FROM DUAL; INSERT INTO q$error (id, name, description) VALUES ( l_error.id ,error_name_in ,'Undefined runtime error: ' || error_name_in || '. You should define this in the error repository.'); l_error := q$error_qp_onerow (l_error.id); END IF; register_error_instance ( l_error ,text_in =&gt; text_in ,error_instance_id_out =&gt; error_instance_id_out ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in); COMMIT; END IF; END register_error; PROCEDURE register_error ( error_code_in IN q$error.code%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS l_error_instance_id q$error_instance.id%TYPE; BEGIN IF q$error_raised THEN -- Just continue to propagate this error instance. l_error_instance_id := q$error_instance_id_raised; ELSE IF grab_settings_in THEN grab_settings; END IF; register_error (error_code_in =&gt; error_code_in ,error_instance_id_out =&gt; l_error_instance_id ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; FALSE); END IF; END register_error; PROCEDURE register_error ( error_name_in IN q$error.name%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS l_error_instance_id q$error_instance.id%TYPE; BEGIN IF q$error_raised THEN -- Just continue to propagate this error instance. l_error_instance_id := q$error_instance_id_raised; ELSE IF grab_settings_in THEN grab_settings; END IF; register_error (error_name_in =&gt; error_name_in ,error_instance_id_out =&gt; l_error_instance_id ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in); END IF; END register_error; /* V1.2.11 Allow user to specify that Oracle errors should be passed directly in the Oracle error information, and not hidden behind the \"error instance\" information. \"Hide\" (don't show) is the default setting. */ PROCEDURE show_oracle_error ( show_in IN BOOLEAN ,revert_after_raise_in IN BOOLEAN DEFAULT FALSE) IS BEGIN g_show_oracle.show := NVL (show_in, FALSE); IF g_show_oracle.revert THEN g_show_oracle.revert_to := g_show_oracle.show; END IF; g_show_oracle.revert := NVL (revert_after_raise_in, FALSE); END show_oracle_error; PROCEDURE revert_oracle_error IS BEGIN IF g_show_oracle.revert THEN g_show_oracle.show := g_show_oracle.revert_to; END IF; END revert_oracle_error; -- Now raise the error that has been defined. PROCEDURE raise_error_instance ( error_instance_id_in IN q$error_instance.id%TYPE) IS l_error_instance q$error_instance%ROWTYPE; PROCEDURE issue_oracle_raise ( error_instance_in IN q$error_instance%ROWTYPE) IS l_error q$error%ROWTYPE; l_error_code PLS_INTEGER; l_error_info error_info_rt; BEGIN l_error := q$error_qp_onerow (id_in =&gt; error_instance_in.error_id); l_error_code := NVL (l_error.code, error_instance_in.system_error_code); /* 1.2.12 If raising with message, load up the error message string. */ IF raising_with_message () THEN get_error_info (error_instance_in.id, l_error_info); internal_raise ( c_default_error_code , 'Error Code = ' || l_error_info.code || CHR (10) || 'Error Message = ' || l_error_info.text || CHR (10) || CHR (10) || 'Error Stack = ' || l_error_info.error_stack || CHR (10) || 'Call Stack = ' || l_error_info.call_stack); ELSIF oracle_app_error (l_error_code) THEN internal_raise (l_error_code, error_instance_in.MESSAGE); -- 1.0.5 Special case needed; cannot use EXCEPTION INIT with -1403 error. ELSIF l_error_code IN (100, -1403) THEN RAISE NO_DATA_FOUND; ELSIF l_error_code = 1 THEN -- Undefined error information. internal_raise ( c_default_error_code ,NVL (error_instance_in.MESSAGE, 'User-defined error')); /* No Oracle error (0). */ ELSIF l_error_code = 0 THEN internal_raise (c_default_error_code ,error_instance_in.MESSAGE); /* Using positive error numbers or we have an error instance with no error code (runtime-defined error). */ ELSIF l_error_code &gt; 0 OR (l_error_code IS NULL AND error_instance_in.id IS NOT NULL) THEN internal_raise ( c_default_error_code ,c_error_prefix || LPAD (TO_CHAR (error_instance_in.id) ,c_error_code_len ,'0') || c_oracle_separator || LPAD ( TO_CHAR ( ABS (error_instance_in.system_error_code)) ,c_oracle_code_len ,'0')); -- We have a message to pass back, at least. ELSIF l_error_code IS NULL AND error_instance_in.MESSAGE IS NOT NULL THEN internal_raise (c_default_error_code ,error_instance_in.MESSAGE); ELSIF is_valid_oracle_error (l_error_code) THEN /* Negative Oracle error. */ EXECUTE IMMEDIATE 'DECLARE ' || ' myexc EXCEPTION; ' || ' PRAGMA EXCEPTION_INIT (myexc, ' || TO_CHAR (l_error_code) || ');' || 'BEGIN ' || ' RAISE myexc;' || 'END;'; ELSE -- Undefined error information. internal_raise ( c_default_error_code , 'Unable to raise error instance ' || error_instance_id_in || ' with error code ' || l_error_code); END IF; END issue_oracle_raise; BEGIN l_error_instance := q$error_instance_qp_onerow (error_instance_id_in); -- Turn back on when we can check individual context values -- to see if they are required. --check_contexts (error_instance_in =&gt; l_error_instance); issue_oracle_raise (l_error_instance); END raise_error_instance; /* 1.3.6 Standardize arg name - this OL not needed PROCEDURE raise_error_instance ( error_instance_id_in IN q$error_instance.id%TYPE ) IS BEGIN raise_error_instance (error_instance_id_in =&gt; err_instance_id_in); END;*/ PROCEDURE raise_error ( error_code_in IN q$error.code%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS l_error_instance_id q$error_instance.id%TYPE; BEGIN IF q$error_raised THEN -- Just continue to propagate this error instance. l_error_instance_id := q$error_instance_id_raised; ELSE IF grab_settings_in THEN grab_settings; END IF; register_error (error_code_in =&gt; error_code_in ,error_instance_id_out =&gt; l_error_instance_id ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; FALSE); END IF; raise_error_instance (error_instance_id_in =&gt; l_error_instance_id); END raise_error; PROCEDURE raise_error ( error_name_in IN q$error.name%TYPE ,text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS l_error_instance_id q$error_instance.id%TYPE; BEGIN IF q$error_raised THEN -- Just continue to propagate this error instance. l_error_instance_id := q$error_instance_id_raised; ELSE IF grab_settings_in THEN grab_settings; END IF; register_error (error_name_in =&gt; error_name_in ,error_instance_id_out =&gt; l_error_instance_id ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; FALSE); END IF; raise_error_instance (error_instance_id_in =&gt; l_error_instance_id); END raise_error; PROCEDURE raise_unanticipated ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS BEGIN raise_error (error_code_in =&gt; SQLCODE /*'UNANTICIPATED-ERROR'*/ ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; grab_settings_in); END raise_unanticipated; /* V1.2.11 Allow user to specify that an Oracle error should be registered (but not re-raised) or raised (registered and re-raised). */ PROCEDURE register_oracle_error ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS BEGIN /* 1.2.15 Call register, not raise */ register_error (error_code_in =&gt; SQLCODE ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; grab_settings_in); END register_oracle_error; /* 1.2.15 Return error instance */ PROCEDURE register_oracle_error ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE ,error_instance_id_out OUT q$error_instance.id%TYPE) IS BEGIN register_error (error_code_in =&gt; SQLCODE ,error_instance_id_out =&gt; error_instance_id_out ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; grab_settings_in); END register_oracle_error; PROCEDURE raise_oracle_error ( text_in IN q$error_instance.MESSAGE%TYPE := NULL ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,grab_settings_in IN BOOLEAN DEFAULT TRUE) IS BEGIN raise_error (error_code_in =&gt; SQLCODE ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; grab_settings_in); END raise_oracle_error; -- Retrieval of error information PROCEDURE parse_message (string_in IN VARCHAR2 ,error_instance_id_out OUT PLS_INTEGER ,extra_out OUT VARCHAR2) IS l_startloc PLS_INTEGER := INSTR (string_in, ':'); --1.4.1 l_endloc PLS_INTEGER; l_errmsg q$error.description%TYPE := LTRIM (SUBSTR (string_in, l_startloc + 1)); BEGIN /* V1.2.11 Get latest instance from global package variable. If that is not available, then fall back on the error message; in any case try to extract the extra text. */ IF /* 1.2.14 Do not directly reference variables g_error_instance_raised */ q$error_instance_id_raised () IS NOT NULL THEN error_instance_id_out := q$error_instance_id_raised (); ELSE IF SUBSTR (LTRIM (l_errmsg), 1, c_error_prefix_len) = c_error_prefix THEN error_instance_id_out := TO_NUMBER ( SUBSTR (l_errmsg ,c_error_prefix_len + 1 ,c_error_code_len)); ELSE error_instance_id_out := NULL; END IF; END IF; extra_out := SUBSTR (l_errmsg, c_error_prefix_len + c_error_code_len + 1); END parse_message; FUNCTION error_instance_from_string (string_in IN VARCHAR2) RETURN PLS_INTEGER IS l_errmsg q$error.description%TYPE; retval PLS_INTEGER; BEGIN parse_message (string_in, retval, l_errmsg); RETURN retval; END error_instance_from_string; FUNCTION error_instance_from_sqlerrm RETURN PLS_INTEGER IS --1.4.1 l_loc PLS_INTEGER; --1.4.1 l_errmsg q$error.description%TYPE; --1.4.1 retval PLS_INTEGER; BEGIN RETURN error_instance_from_string (DBMS_UTILITY.format_error_stack); END error_instance_from_sqlerrm; PROCEDURE substitute_strings ( error_message_inout IN OUT q$error.substitute_string%TYPE ,recommendation_inout IN OUT q$error.recommendation%TYPE ,contexts_inout IN OUT q$error_context_tc) IS l_row PLS_INTEGER; --1.4.1 retval q$error.substitute_string%TYPE; PROCEDURE replace_all_occurrences ( context_in IN q$error_context%ROWTYPE ,context_row_in IN PLS_INTEGER) IS -- Maintain format of string while doing replacements on -- on named strings case IN sensitively. c_upper_subst_name q$error_context.name%TYPE := c_subst_char || UPPER (context_in.name); c_len PLS_INTEGER := LENGTH (context_in.name); l_loc PLS_INTEGER; l_found BOOLEAN DEFAULT FALSE; BEGIN IF error_message_inout IS NOT NULL THEN LOOP l_loc := INSTR (UPPER (error_message_inout) ,c_upper_subst_name ,1); EXIT WHEN l_loc = 0; l_found := TRUE; error_message_inout := SUBSTR (error_message_inout, 1, l_loc - 1) || context_in.VALUE || SUBSTR (error_message_inout, l_loc + c_len + 1); END LOOP; END IF; IF recommendation_inout IS NOT NULL THEN LOOP l_loc := INSTR (UPPER (recommendation_inout) ,c_upper_subst_name ,1); EXIT WHEN l_loc = 0; l_found := TRUE; recommendation_inout := SUBSTR (recommendation_inout, 1, l_loc - 1) || context_in.VALUE || SUBSTR (recommendation_inout, l_loc + c_len + 1); END LOOP; END IF; IF l_found THEN contexts_inout.delete (context_row_in); END IF; END replace_all_occurrences; BEGIN IF error_message_inout IS NOT NULL OR recommendation_inout IS NOT NULL THEN l_row := contexts_inout.FIRST; WHILE (l_row IS NOT NULL) LOOP replace_all_occurrences (contexts_inout (l_row), l_row); l_row := contexts_inout.NEXT (l_row); END LOOP; END IF; END substitute_strings; PROCEDURE get_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,error_info_out OUT error_info_rt ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline) IS l_error_instance q$error_instance%ROWTYPE; l_error q$error%ROWTYPE; PROCEDURE subst_for_msg_help_strings IS l_contexts q$error_context_tc; PROCEDURE add_to_text (new_string_in IN VARCHAR2) IS BEGIN IF new_string_in IS NOT NULL THEN error_info_out.text := error_info_out.text || CASE WHEN error_info_out.text IS NOT NULL THEN context_delimiter_in ELSE NULL END || new_string_in; END IF; END add_to_text; PROCEDURE add_to_context (new_string_in IN VARCHAR2) IS BEGIN IF new_string_in IS NOT NULL THEN error_info_out.contexts := CASE WHEN error_info_out.contexts IS NOT NULL THEN error_info_out.contexts || context_delimiter_in || new_string_in ELSE new_string_in END; END IF; END add_to_context; PROCEDURE add_remaining_contexts IS l_row PLS_INTEGER; BEGIN l_row := l_contexts.FIRST; IF l_row IS NOT NULL THEN -- Insert a blank line. add_to_context (' '); WHILE (l_row IS NOT NULL) LOOP add_to_context ( l_contexts (l_row).name || ' = ' || l_contexts (l_row).VALUE); l_row := l_contexts.NEXT (l_row); END LOOP; END IF; --1.0.4 If string gets too big then just pass back what we've got. EXCEPTION WHEN VALUE_ERROR THEN NULL; END add_remaining_contexts; BEGIN error_info_out.text := l_error_instance.MESSAGE; -- Use context values for substitution, then add any contexts -- that were not used at the end of the string. SELECT * BULK COLLECT INTO l_contexts FROM q$error_context WHERE error_instance_id = l_error_instance.id; substitute_strings (l_error.substitute_string ,l_error.recommendation ,l_contexts); error_info_out.recommendation := l_error.recommendation; IF error_info_out.text IS NULL AND l_error.substitute_string IS NULL THEN -- Fall back on the generic descriptoin. error_info_out.text := l_error.description; ELSE add_to_text (l_error.substitute_string); END IF; add_remaining_contexts; /* 1.4.0 option to disgard the remaining_context in the text*/ IF add_remaining_context_enabled () THEN BEGIN add_to_text (error_info_out.contexts); EXCEPTION WHEN VALUE_ERROR THEN add_to_text ( SUBSTR ( error_info_out.contexts ,1 , c_varchar2_max_length - LENGTH (error_info_out.text) - 2)); END; END IF; END subst_for_msg_help_strings; BEGIN IF error_instance_id_in IS NULL THEN -- Fall back on current error information. error_info_out.code := SQLCODE; error_info_out.name := 'Oracle Error'; error_info_out.system_error_code := SQLCODE; error_info_out.system_error_message := DBMS_UTILITY.format_error_stack; error_info_out.text := DBMS_UTILITY.format_error_stack; ELSE l_error_instance := q$error_instance_qp_onerow (error_instance_id_in); l_error := q$error_qp_onerow (l_error_instance.error_id); -- error_info_out.code := l_error.code; error_info_out.name := l_error.name; /* 1.4.0 */ error_info_out.error_category_name := l_error.error_category_name; -- subst_for_msg_help_strings; error_info_out.system_error_code := l_error_instance.system_error_code; error_info_out.system_error_message := l_error_instance.system_error_message; error_info_out.call_stack := l_error_instance.call_stack; /* 1.3.1 If an assertion, then error stack is empty. */ error_info_out.error_stack := NVL (l_error_instance.error_stack ,l_error_instance.call_stack); error_info_out.environment_info := l_error_instance.environment_info; /* 1.3 Add id and message, also environment info. */ error_info_out.id := l_error_instance.id; error_info_out.error_id := l_error_instance.error_id; error_info_out.created_on := l_error_instance.created_on; error_info_out.created_by := l_error_instance.created_by; error_info_out.changed_on := l_error_instance.changed_on; error_info_out.changed_by := l_error_instance.changed_by; error_info_out.MESSAGE := l_error_instance.MESSAGE; -- All done, revert to \"no error\" state. mark_q$error_handled; END IF; END get_error_info; PROCEDURE get_error_info (error_info_out OUT error_info_rt) IS l_message maxvarchar2_t := DBMS_UTILITY.format_error_stack; l_extra q$error.description%TYPE; l_error_instance_id q$error_instance.id%TYPE; BEGIN parse_message (l_message, l_error_instance_id, l_extra); IF l_error_instance_id IS NOT NULL THEN get_error_info (error_instance_id_in =&gt; l_error_instance_id ,error_info_out =&gt; error_info_out); ELSE -- Of the form ORA-NNNNN: Message error_info_out.code := SUBSTR (l_message, 4, INSTR (l_message, ':') - 4); error_info_out.name := 'System Error'; error_info_out.text := l_message; error_info_out.system_error_code := error_info_out.code; error_info_out.system_error_message := error_info_out.text; END IF; -- All done, revert to \"no error\" state. mark_q$error_handled; END get_error_info; /* 1.4.0 */ FUNCTION last_error_info RETURN error_info_rt IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error; END last_error_info; PROCEDURE get_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE ,id_out OUT q$error_instance.id%TYPE ,message_out OUT q$error_instance.MESSAGE%TYPE ,contexts_out OUT VARCHAR2 ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline) IS l_error error_info_rt; BEGIN get_error_info (error_instance_id_in =&gt; error_instance_id_in ,error_info_out =&gt; l_error ,context_delimiter_in =&gt; context_delimiter_in); -- -- All this logic repeated in next overloading! code_out := l_error.code; name_out := l_error.name; text_out := l_error.text; recommendation_out := l_error.recommendation; system_error_code_out := l_error.system_error_code; system_error_message_out := l_error.system_error_message; error_stack_out := l_error.error_stack; call_stack_out := l_error.call_stack; environment_info_out := l_error.environment_info; contexts_out := l_error.contexts; id_out := l_error.id; message_out := l_error.MESSAGE; END get_error_info; /* 1.4.0 */ FUNCTION last_error_id RETURN q$error.id%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.error_id; END last_error_id; /* 1.4.0 */ FUNCTION last_instance_id RETURN q$error_instance.id%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.id; END last_instance_id; /* 1.4.0 */ FUNCTION last_error_category_name RETURN q$error.error_category_name%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.error_category_name; END last_error_category_name; FUNCTION last_code RETURN q$error.code%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.code; END last_code; FUNCTION last_name RETURN q$error.name%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.name; END last_name; FUNCTION last_text RETURN q$error_instance.MESSAGE%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.text; END last_text; FUNCTION last_system_error_code RETURN q$error_instance.system_error_code%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.system_error_code; END last_system_error_code; FUNCTION last_system_error_message RETURN q$error_instance.system_error_message%TYPE IS l_error error_info_rt; BEGIN get_error_info (l_error); RETURN l_error.system_error_message; END last_system_error_message; PROCEDURE get_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE) IS l_id q$error_instance.id%TYPE; l_message q$error_instance.MESSAGE%TYPE; l_contexts maxvarchar2_t; BEGIN get_error_info (error_instance_id_in =&gt; error_instance_id_in ,code_out =&gt; code_out ,name_out =&gt; name_out ,text_out =&gt; text_out ,system_error_code_out =&gt; system_error_code_out ,system_error_message_out =&gt; system_error_message_out ,recommendation_out =&gt; recommendation_out ,error_stack_out =&gt; error_stack_out ,call_stack_out =&gt; call_stack_out ,environment_info_out =&gt; environment_info_out ,id_out =&gt; l_id ,message_out =&gt; l_message ,contexts_out =&gt; l_contexts); END get_error_info; /* 1.3.6 Standardize arg name */ PROCEDURE get_error_info ( error_message_in IN VARCHAR2 ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE ,id_out OUT q$error_instance.id%TYPE ,message_out OUT q$error_instance.MESSAGE%TYPE ,contexts_out OUT VARCHAR2 ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline) IS l_error error_info_rt; l_extra q$error.description%TYPE; l_error_instance_id q$error_instance.id%TYPE; BEGIN parse_message (error_message_in, l_error_instance_id, l_extra); IF l_error_instance_id IS NOT NULL THEN get_error_info (error_instance_id_in =&gt; l_error_instance_id ,error_info_out =&gt; l_error ,context_delimiter_in =&gt; context_delimiter_in); code_out := l_error.code; name_out := l_error.name; text_out := l_error.text; recommendation_out := l_error.recommendation; system_error_code_out := l_error.system_error_code; system_error_message_out := l_error.system_error_message; error_stack_out := l_error.error_stack; call_stack_out := l_error.call_stack; id_out := l_error.id; message_out := error_message_in; environment_info_out := l_error.environment_info; contexts_out := l_error.contexts; ELSE -- Of the form ORA-NNNNN: Message code_out := SUBSTR (error_message_in ,4 ,INSTR (error_message_in, ':') - 4); name_out := 'System Error'; text_out := error_message_in; system_error_code_out := code_out; system_error_message_out := text_out; id_out := NULL; message_out := error_message_in; END IF; -- All done, revert to \"no error\" state. mark_q$error_handled; END get_error_info; /* 1.3.6 Standardize arg name */ PROCEDURE get_error_info ( error_message_in IN VARCHAR2 ,code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE) IS l_id q$error_instance.id%TYPE; l_message q$error_instance.MESSAGE%TYPE; l_contexts maxvarchar2_t; BEGIN get_error_info (error_message_in =&gt; DBMS_UTILITY.format_error_stack ,code_out =&gt; code_out ,name_out =&gt; name_out ,text_out =&gt; text_out ,system_error_code_out =&gt; system_error_code_out ,system_error_message_out =&gt; system_error_message_out ,recommendation_out =&gt; recommendation_out ,error_stack_out =&gt; error_stack_out ,call_stack_out =&gt; call_stack_out ,environment_info_out =&gt; environment_info_out ,id_out =&gt; l_id ,message_out =&gt; l_message ,contexts_out =&gt; l_contexts); END get_error_info; PROCEDURE get_error_info ( code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE) IS BEGIN get_error_info (error_message_in =&gt; DBMS_UTILITY.format_error_stack ,code_out =&gt; code_out ,name_out =&gt; name_out ,text_out =&gt; text_out ,system_error_code_out =&gt; system_error_code_out ,system_error_message_out =&gt; system_error_message_out ,recommendation_out =&gt; recommendation_out ,error_stack_out =&gt; error_stack_out ,call_stack_out =&gt; call_stack_out ,environment_info_out =&gt; environment_info_out); END get_error_info; /* 1.3 Add id and message as OUT arguments */ PROCEDURE get_error_info ( code_out OUT q$error.code%TYPE ,name_out OUT q$error.name%TYPE ,text_out OUT q$error_instance.MESSAGE%TYPE ,system_error_code_out OUT q$error_instance.system_error_code%TYPE ,system_error_message_out OUT q$error_instance.system_error_message%TYPE ,recommendation_out OUT q$error.recommendation%TYPE ,error_stack_out OUT q$error_instance.error_stack%TYPE ,call_stack_out OUT q$error_instance.call_stack%TYPE ,environment_info_out OUT q$error_instance.environment_info%TYPE ,id_out OUT q$error_instance.id%TYPE ,message_out OUT q$error_instance.MESSAGE%TYPE ,contexts_out OUT VARCHAR2 ,context_delimiter_in IN VARCHAR2 DEFAULT c_newline) IS BEGIN get_error_info (error_message_in =&gt; DBMS_UTILITY.format_error_stack ,code_out =&gt; code_out ,name_out =&gt; name_out ,text_out =&gt; text_out ,system_error_code_out =&gt; system_error_code_out ,system_error_message_out =&gt; system_error_message_out ,recommendation_out =&gt; recommendation_out ,error_stack_out =&gt; error_stack_out ,call_stack_out =&gt; call_stack_out ,environment_info_out =&gt; environment_info_out ,id_out =&gt; id_out ,message_out =&gt; message_out ,context_delimiter_in =&gt; context_delimiter_in ,contexts_out =&gt; contexts_out); END get_error_info; -- 1.2 Get message text only FUNCTION error_message RETURN VARCHAR2 IS l_extra q$error.description%TYPE; l_error_instance_id q$error_instance.id%TYPE; l_error error_info_rt; BEGIN parse_message (DBMS_UTILITY.format_error_stack ,l_error_instance_id ,l_extra); get_error_info (error_instance_id_in =&gt; l_error_instance_id ,error_info_out =&gt; l_error); RETURN NVL (l_error.text, l_error.system_error_message); END error_message; FUNCTION error_clipboard (clear_clipboard_in IN BOOLEAN DEFAULT TRUE) RETURN VARCHAR2 IS l_clipboard maxvarchar2_t; BEGIN l_clipboard := g_clipboard; IF clear_clipboard_in THEN clear_error_clipboard; END IF; RETURN l_clipboard; END error_clipboard; FUNCTION error_clipboard_is_full RETURN BOOLEAN IS BEGIN RETURN g_clipboard_is_full; /* IF g_clipboard IS NULL THEN RETURN FALSE; ELSE RETURN (c_warning LIKE g_clipboard || '%'); END IF; */ END error_clipboard_is_full; PROCEDURE clear_error_clipboard IS BEGIN g_clipboard := NULL; g_clipboard_is_full := FALSE; END clear_error_clipboard; PROCEDURE add_to_error_clipboard (str IN VARCHAR2) IS BEGIN IF g_clipboard IS NULL THEN g_clipboard := str; ELSE g_clipboard := g_clipboard || CHR (10) || str; END IF; END add_to_error_clipboard; PROCEDURE show_error_info ( error_instance_id_in IN q$error_instance.id%TYPE ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE) IS code_out q$error.code%TYPE; name_out q$error.name%TYPE; text_out q$error_instance.MESSAGE%TYPE; system_error_code_out q$error_instance.system_error_code%TYPE; system_error_message_out q$error_instance.system_error_message%TYPE; recommendation_out q$error.recommendation%TYPE; error_stack_out q$error_instance.error_stack%TYPE; call_stack_out q$error_instance.call_stack%TYPE; environment_info_out q$error_instance.environment_info%TYPE; PROCEDURE pl (str IN VARCHAR2) IS already_full EXCEPTION; BEGIN IF error_clipboard_is_full THEN RAISE already_full; END IF; IF copy_to_clipboard_in THEN add_to_error_clipboard (str); ELSE q$error_manager.pl (str); END IF; EXCEPTION WHEN already_full THEN NULL; WHEN VALUE_ERROR THEN g_clipboard_is_full := TRUE; IF LENGTH (g_clipboard) &gt; (c_varchar2_max_length - c_warning_len) THEN g_clipboard := c_trunc_warning || SUBSTR (g_clipboard ,1 ,c_varchar2_max_length - c_warning_len); ELSE g_clipboard := c_trunc_warning || g_clipboard; END IF; END pl; PROCEDURE pl_header (str IN VARCHAR2) IS BEGIN pl ('================================================='); pl (str); END pl_header; PROCEDURE show_contexts IS l_context q$error_context_tc; l_row PLS_INTEGER; BEGIN SELECT * BULK COLLECT INTO l_context FROM q$error_context WHERE error_instance_id = error_instance_id_in; l_row := l_context.FIRST; IF l_row IS NOT NULL THEN pl (' &gt; Error context information:'); WHILE (l_row IS NOT NULL) LOOP pl (' Context = \"' || l_context (l_row).name || '\"'); pl (' Value = \"' || l_context (l_row).VALUE || '\"'); l_row := l_context.NEXT (l_row); END LOOP; END IF; END show_contexts; BEGIN get_error_info (error_instance_id_in =&gt; error_instance_id_in ,code_out =&gt; code_out ,name_out =&gt; name_out ,text_out =&gt; text_out ,system_error_code_out =&gt; system_error_code_out ,system_error_message_out =&gt; system_error_message_out ,recommendation_out =&gt; recommendation_out ,error_stack_out =&gt; error_stack_out ,call_stack_out =&gt; call_stack_out ,environment_info_out =&gt; environment_info_out); pl_header ( 'Error report for error instance ' || error_instance_id_in); pl (' &gt; Code-Name: ' || code_out || '-' || name_out); pl (' &gt; Text: ' || text_out); pl (' &gt; System error code: ' || system_error_code_out); pl (' &gt; System error message: ' || system_error_message_out); pl (' &gt; Recommendation: ' || recommendation_out); pl (' &gt; Error stack: ' || error_stack_out); pl (' &gt; Call stack: ' || call_stack_out); IF environment_info_out IS NOT NULL THEN pl_header (' &gt; Environmental Information'); pl (' ' || environment_info_out); END IF; show_contexts; END show_error_info; PROCEDURE show_errors (cursor_in IN weak_refcursor ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE) IS l_error_id PLS_INTEGER; BEGIN LOOP FETCH cursor_in INTO l_error_id; EXIT WHEN cursor_in%NOTFOUND; show_error_info (l_error_id ,copy_to_clipboard_in =&gt; copy_to_clipboard_in); EXIT WHEN error_clipboard_is_full; END LOOP; END show_errors; PROCEDURE show_errors_after ( date_in IN DATE ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE) IS l_cursor weak_refcursor; BEGIN OPEN l_cursor FOR SELECT id FROM q$error_instance WHERE created_on &gt;= date_in ORDER BY id; show_errors (l_cursor, copy_to_clipboard_in =&gt; copy_to_clipboard_in); CLOSE l_cursor; END show_errors_after; PROCEDURE show_errors_with_message ( text_in IN VARCHAR2 ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE) IS l_cursor weak_refcursor; BEGIN OPEN l_cursor FOR SELECT id FROM q$error_instance WHERE INSTR (UPPER (MESSAGE), UPPER (text_in)) &gt; 0 ORDER BY id; show_errors (l_cursor, copy_to_clipboard_in =&gt; copy_to_clipboard_in); CLOSE l_cursor; END show_errors_with_message; PROCEDURE show_errors_with_code ( error_code_in IN PLS_INTEGER ,is_system_error_code_in IN BOOLEAN DEFAULT FALSE ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE) IS l_cursor weak_refcursor; BEGIN IF is_system_error_code_in THEN OPEN l_cursor FOR SELECT id FROM q$error_instance WHERE system_error_code = error_code_in ORDER BY id; ELSE OPEN l_cursor FOR SELECT i.id FROM q$error_instance i, q$error e WHERE i.error_id = e.id AND code = error_code_in ORDER BY i.id; END IF; show_errors (l_cursor, copy_to_clipboard_in =&gt; copy_to_clipboard_in); CLOSE l_cursor; END show_errors_with_code; PROCEDURE show_errors_for ( where_clause_in IN VARCHAR2 ,copy_to_clipboard_in IN BOOLEAN DEFAULT FALSE) IS l_cursor weak_refcursor; BEGIN OPEN l_cursor FOR 'SELECT ID FROM q$error_instance WHERE ' || where_clause_in || ' ORDER BY ID'; show_errors (l_cursor, copy_to_clipboard_in =&gt; copy_to_clipboard_in); CLOSE l_cursor; END show_errors_for; PROCEDURE assert (condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,error_code_in IN q$error.code%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL) IS BEGIN IF condition_in IS NULL OR NOT condition_in THEN trace ('ASSERTION FAILURE', text_in, FALSE); raise_error (error_code_in =&gt; error_code_in ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; TRUE); END IF; END assert; PROCEDURE assert (condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,error_name_in IN q$error.name%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL) IS BEGIN IF condition_in IS NULL OR NOT condition_in THEN trace ('ASSERT', text_in, TRUE); raise_error (error_name_in =&gt; error_name_in ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; TRUE); END IF; END assert; PROCEDURE assert (condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL) IS BEGIN IF condition_in IS NULL OR NOT condition_in THEN trace ('ASSERT', text_in, TRUE); raise_error (error_name_in =&gt; 'ASSERTION-FAILURE' ,text_in =&gt; text_in ,name1_in =&gt; name1_in ,value1_in =&gt; value1_in ,name2_in =&gt; name2_in ,value2_in =&gt; value2_in ,name3_in =&gt; name3_in ,value3_in =&gt; value3_in ,name4_in =&gt; name4_in ,value4_in =&gt; value4_in ,name5_in =&gt; name5_in ,value5_in =&gt; value5_in ,grab_settings_in =&gt; TRUE); END IF; END assert; PROCEDURE simple_assert ( condition_in IN BOOLEAN ,text_in IN q$error_instance.MESSAGE%TYPE ,name1_in IN VARCHAR2 DEFAULT NULL ,value1_in IN VARCHAR2 DEFAULT NULL ,name2_in IN VARCHAR2 DEFAULT NULL ,value2_in IN VARCHAR2 DEFAULT NULL ,name3_in IN VARCHAR2 DEFAULT NULL ,value3_in IN VARCHAR2 DEFAULT NULL ,name4_in IN VARCHAR2 DEFAULT NULL ,value4_in IN VARCHAR2 DEFAULT NULL ,name5_in IN VARCHAR2 DEFAULT NULL ,value5_in IN VARCHAR2 DEFAULT NULL ,raise_with_code_in IN PLS_INTEGER DEFAULT -20000) IS l_text maxvarchar2_t := text_in; PROCEDURE add_nv (text_inout IN OUT VARCHAR2 ,nm_in IN VARCHAR2 ,val_in IN VARCHAR2) IS BEGIN text_inout := text_inout || CASE WHEN nm_in IS NULL THEN NULL ELSE CHR (10) || nm_in || ' = ' || val_in END; END add_nv; BEGIN IF condition_in IS NULL OR NOT condition_in THEN add_nv (l_text, name1_in, value1_in); add_nv (l_text, name2_in, value2_in); add_nv (l_text, name3_in, value3_in); add_nv (l_text, name4_in, value4_in); add_nv (l_text, name5_in, value5_in); raise_application_error (raise_with_code_in, l_text); END IF; END simple_assert; PROCEDURE start_execution (program_name_in IN VARCHAR2 := NULL ,information_in IN VARCHAR2 := NULL) IS BEGIN NULL; END start_execution; /* Test builder validation: * return a status string composed of type:message * if no prefix, then it is an error */ FUNCTION is_warning (status_in IN VARCHAR2) RETURN BOOLEAN IS BEGIN RETURN status_in LIKE c_warning || '%'; END is_warning; FUNCTION is_error (status_in IN VARCHAR2) RETURN BOOLEAN IS BEGIN RETURN status_in LIKE c_error || '%'; END is_error; FUNCTION is_info_msg (status_in IN VARCHAR2) RETURN BOOLEAN IS BEGIN RETURN status_in LIKE c_info_msg || '%'; END is_info_msg; PROCEDURE parse_status_string (status_in IN VARCHAR2 ,status_type_out OUT VARCHAR2 ,message_out OUT VARCHAR2) IS l_loc PLS_INTEGER := INSTR (status_in, c_status_delimiter); BEGIN IF l_loc = 0 THEN status_type_out := c_error; message_out := status_in; ELSE status_type_out := SUBSTR (status_in, 1, l_loc - 1); message_out := SUBSTR (status_in, l_loc + 1); END IF; END parse_status_string; FUNCTION make_a_string (header_in IN VARCHAR2, status_in IN VARCHAR2) RETURN VARCHAR2 IS BEGIN RETURN header_in || c_status_delimiter || status_in || CASE WHEN trace_enabled THEN CHR (10) || CHR (10) || error_backtrace ELSE NULL END; END make_a_string; FUNCTION make_an_info_msg (status_in IN VARCHAR2) RETURN VARCHAR2 IS BEGIN RETURN make_a_string (c_info_msg, status_in); END make_an_info_msg; FUNCTION make_a_warning (status_in IN VARCHAR2) RETURN VARCHAR2 IS BEGIN RETURN make_a_string (c_warning, status_in); END make_a_warning; FUNCTION make_an_error (status_in IN VARCHAR2) RETURN VARCHAR2 IS BEGIN RETURN make_a_string (c_error, status_in); END make_an_error; PROCEDURE make_a_warning (status_inout IN OUT VARCHAR2) IS BEGIN status_inout := make_a_warning (status_inout); END make_a_warning; PROCEDURE make_an_error (status_inout IN OUT VARCHAR2) IS BEGIN status_inout := make_an_error (status_inout); END make_an_error; PROCEDURE make_an_info_msg (status_inout IN OUT VARCHAR2) IS BEGIN status_inout := make_an_info_msg (status_inout); END make_an_info_msg; FUNCTION log_entries_after (timestamp_in IN DATE) RETURN SYS_REFCURSOR IS CV SYS_REFCURSOR; BEGIN IF trace_enabled THEN trace ('log_entries_after for date', timestamp_in, TRUE); END IF; OPEN CV FOR SELECT full_log_string (context, text, NULL) FROM q$log ql /* WHERE BM2066 return all rows for now ql.created_on &gt;= timestamp_in*/ ORDER BY ql.id; RETURN CV; END log_entries_after; PROCEDURE not_yet_implemented (program_name_in IN VARCHAR2) IS BEGIN DBMS_OUTPUT.put_line ( 'Callstack that found its way to \"' || program_name_in || '\"'); DBMS_OUTPUT.put_line (DBMS_UTILITY.format_call_stack); raise_application_error ( c_not_yet_implemented , 'Program named \"' || program_name_in || '\" has not yet been implemented.' || ' Enable SERVEROUTPUT to see callstack for this program call.'); END not_yet_implemented; PROCEDURE discard_error_state IS BEGIN g_discard_error_state := TRUE; /*fds: 1.4.1 - discard_error_state: clear state already stored */ g_error_instance_raised := NULL; clear_gcontexts; END discard_error_state; PROCEDURE keep_error_state IS BEGIN g_discard_error_state := FALSE; END keep_error_state; FUNCTION error_state_discarded RETURN BOOLEAN IS BEGIN RETURN g_discard_error_state; END error_state_discarded; PROCEDURE clean_up_errors (older_than_in IN DATE DEFAULT NULL) IS PRAGMA AUTONOMOUS_TRANSACTION; BEGIN DELETE FROM q$error_instance WHERE older_than_in IS NULL OR created_on &lt;= older_than_in; COMMIT; END clean_up_errors;END q$error_manager;/ è‡ªå®šä¹‰é”™è¯¯ qem$define_errors.sql 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155/*| This program is a part of the Quest Error Manager for Oracle.| This product is freeware and is not supported by Quest.|| You may copy and change the data in these statements to meet| your own application-specific requirements. That is, you can| define your own errors in this script.|| www.quest.com| | Copyright, Quest Software, Inc, 2007| All rights reserved*/DECLARE c_support CONSTANT VARCHAR2 (32767) := '&lt;PUT IN YOUR OWN \"CONTACT SUPPORT\" MESSAGE HERE&gt;'; PROCEDURE ins ( error_category_name_in IN VARCHAR2 , code_in IN NUMBER DEFAULT NULL , NAME_IN IN VARCHAR2 DEFAULT NULL , description_in IN VARCHAR2 DEFAULT NULL , substitute_string_in IN VARCHAR2 DEFAULT NULL , recommendation_in IN VARCHAR2 DEFAULT NULL ) IS BEGIN INSERT INTO q$error (ID, error_category_name, code , NAME, description, substitute_string , recommendation ) VALUES (q$error_seq.NEXTVAL, error_category_name_in, code_in , NAME_IN, description_in, substitute_string_in , recommendation_in ); EXCEPTION WHEN DUP_VAL_ON_INDEX THEN /* Running install over existing install. Just ignore. */ NULL; END ins;BEGIN ins (error_category_name_in =&gt; 'GENERAL ADMINISTRATION' , code_in =&gt; 10000001 , NAME_IN =&gt; 'ASSERTION-FAILURE' , description_in =&gt; 'This exception is raised when you:* call q$error_manager.assert* pass it a Boolean expression that evaluates to FALSE or NULL* and do not provide a specific error code or name to be raised for you.There are no pre-defined context values used in the error message. Instead, if you set any name-value pairs when you call q$error_manager.assert, these will be displayed.' , recommendation_in =&gt; '' , substitute_string_in =&gt; 'The Boolean expression provided evaluated to FALSE or NULL. The condition checked by the assertion program has failed.' ); ins (error_category_name_in =&gt; 'GENERAL ADMINISTRATION' , code_in =&gt; 10000003 , NAME_IN =&gt; 'DEPRECATED-FUNCTIONALITY' , description_in =&gt; 'The user tried to run a program that has been deprecated.' , recommendation_in =&gt; 'This is NOT a user error. ' || c_support , substitute_string_in =&gt; 'The application attempted to run a program named \"$program_name\" that has been deprecated; that is, it is no longer available and should not be executed.' ); ins (error_category_name_in =&gt; 'GENERAL ADMINISTRATION' , code_in =&gt; 10000000 , NAME_IN =&gt; 'NOEXCEPTION' , description_in =&gt; 'No exception has been raised.' , recommendation_in =&gt; '' , substitute_string_in =&gt; c_support ); ins (error_category_name_in =&gt; 'GENERAL ADMINISTRATION' , code_in =&gt; 10000002 , NAME_IN =&gt; 'UNANTICIPATED-ERROR' , description_in =&gt; 'This exception should be used in a PL/SQL WHEN OTHERS clause or other similar ''catch all'' handler for errors. You could not in advance know that this error was raised, and therefore could not handle it specifically. Instead, you will pass as much information possible and hope that the user or tester can figure out the problem.' , recommendation_in =&gt; 'If you cannot figure out the cause of the difficulty, ' || c_support , substitute_string_in =&gt; 'An unanticipated error has occurred. Please review the information below and see if it will help you resolve the problem.' ); ins (error_category_name_in =&gt; 'DML ERRORS' , code_in =&gt; -2290 , NAME_IN =&gt; 'CHECK-CONSTRAINT-FAILURE' , description_in =&gt; 'A check constraint failed.' , recommendation_in =&gt; 'Determine the logic of the constraint and change the data so that it will not fail.' , substitute_string_in =&gt; 'The constaint named $constaint_name, defined on table $table_name and owned by $owner, failed. This means that a rule that was defined on this table was violated in the process of inserting or updating a row of data.' ); ins (error_category_name_in =&gt; 'DML ERRORS' , code_in =&gt; -1400 , NAME_IN =&gt; 'COLUMN-CANNOT-BE-NULL' , description_in =&gt; 'The column has been defined to be NOT NULL, yet a DML operation attempted to set it to NULL.' , recommendation_in =&gt; 'If you can change the value to something that is not blank, do so. If this is not under your control, ' || c_support , substitute_string_in =&gt; 'You have tried to set the column $COLUMN_NAME of table $OWNER.$TABLE_NAME to NULL or a blank line; this is not allowed.' ); /* V1.2.11 Error number is changed to -1. Remove existing row. */ DELETE FROM q$error WHERE name = 'DUPLICATE-VALUE'; ins (error_category_name_in =&gt; 'DML ERRORS' , code_in =&gt; -1 , NAME_IN =&gt; 'DUPLICATE-VALUE' , description_in =&gt; 'A duplicate value on index error (ORA-00001) was raised for an insert or update' , recommendation_in =&gt; 'This means that either the primary key is a repeated value, which is almost certainly a software error, or you are repeating a value in a column that must be unique. For example, in many applications the NAME will be unique. Perhaps you entered a name that is already in use.' , substitute_string_in =&gt; 'We tried to insert or update a row of data, and ran into the following problem: at least one of the values are already in the database and you are not allowed to have duplicates.This error occurred on the table named $table_name, which is owned by $owner. The name of this unique constraint is $constraint_name. In some cases, we may be able to also display the columns and values that triggered the conflict. If available, they follow below.' ); ins (error_category_name_in =&gt; 'DML ERRORS' , code_in =&gt; -2266 , NAME_IN =&gt; 'EXISTING-FKY-REFERENCE' , description_in =&gt; 'An DROP TABLE, TRUNCATE TABLE or DELETE statement attempted to remove a row in which the primary key or unique values are referenced by the foreign key value in another table.' , recommendation_in =&gt; c_support , substitute_string_in =&gt; 'We were unable to remove a row from table $owner.$table because it contains a primary key or unique value that is referenced by the foreign key value in another table.' ); ins (error_category_name_in =&gt; 'DML ERRORS' , code_in =&gt; -24381 , NAME_IN =&gt; 'FORALL-INSERT-FAILURE' , description_in =&gt; 'An error occurred while performing a bulk insert operation.' , recommendation_in =&gt; '' , substitute_string_in =&gt; 'An attempt to perform a FORALL on table $TABLE_NAME failed. The incoming array had $ROW_COUNT'' rows in it. The last action taken during that procedure''s execution was:$PROGRESS_INDICATOR' ); ins (error_category_name_in =&gt; 'DML ERRORS' , code_in =&gt; -2291 , NAME_IN =&gt; 'INTEGRITY-CONSTRAINT-FAILURE' , description_in =&gt; 'An integrity constraint (primary key, foreign key, etc.) failed.' , recommendation_in =&gt; 'Make sure that you are entering data correctly. If that seems to be the case, ' || c_support , substitute_string_in =&gt; 'The constraint named $constraint_name, defined on table $table_name and owned by $owner, failed.' ); ins (error_category_name_in =&gt; 'DML ERRORS' , code_in =&gt; 10010008 , NAME_IN =&gt; 'SEQUENCE-GENERATION-FAILURE' , description_in =&gt; 'An attempt to generate a sequence with the next primary key function resulted in failure.' , recommendation_in =&gt; 'Make sure the sequence exists and that you have the authority necessary (SELECT) to obtain the next value from this sequence.' , substitute_string_in =&gt; 'An attempt to obtain the next sequence value from $sequence failed.' ); COMMIT;END;/ å¸è½½ qem$uninstall.sql 123456789101112131415161718192021222324252627282930313233/*| This program is a part of the Quest Error Manager for Oracle.| This product is freeware and is not supported by Quest.| | www.quest.com| | Copyright, Quest Software, Inc, 2007| All rights reserved*/DROP SEQUENCE q$error_seq/DROP SEQUENCE q$log_seq/DROP SEQUENCE q$error_context_seq/DROP SEQUENCE q$error_instance_seq/DROP TABLE q$error_context/DROP TABLE q$error_instance/DROP TABLE q$error/DROP TABLE q$log/DROP PACKAGE q$error_manager/","tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://betgar.github.io/tags/Oracle/"},{"name":"PLSQL","slug":"PLSQL","permalink":"https://betgar.github.io/tags/PLSQL/"},{"name":"qem","slug":"qem","permalink":"https://betgar.github.io/tags/qem/"}]},{"title":"Oracle ç»‘å®šå˜é‡(bind variable)","date":"2018-04-16T12:00:00.000Z","path":"2018/04/16/oracle-bind-variable/","text":"Oracle ç»‘å®šå˜é‡(bind variable) è½¬è½½ï¼š http://www.ecdoer.com/post/oracle-dynamic-sql.html ã€åŠ¨æ€SQLå®šä¹‰ã€‘åŠ¨æ€SQLæ˜¯æŒ‡åœ¨PL/SQLå—ä¸­ï¼Œå¯ä»¥æ ¹æ®ä¸åŒå‚æ•°æ‹¼æ¥ä¸åŒçš„SQLå­—ç¬¦ä¸²ï¼Œå³æ‰§è¡Œå‰ä¸èƒ½ç¡®å®šè¯¥SQLæ˜¯ä»€ä¹ˆï¼ˆå¦‚è¡¨åã€å­—æ®µåæˆ–æ¡ä»¶å€¼æœªçŸ¥ï¼‰ã€‚ ã€åŠ¨æ€SQLä¸é™æ€SQLåŒºåˆ«ã€‘1ï¼‰é™æ€SQLæ˜¯ç¡®å®šçš„ï¼Œåœ¨æ‰§è¡Œå‰å·²ç»å®Œæˆç¼–è¯‘ï¼ˆéšPL/SQLå—ä¸€èµ·å®Œæˆäº†ç¼–è¯‘ï¼‰ï¼Œæ‰§è¡Œæ—¶æ•°æ®åº“ç›´æ¥æ‰§è¡Œç¼–è¯‘å¥½çš„SQLï¼›è€ŒåŠ¨æ€SQLæ˜¯ä¸ç¡®å®šçš„ï¼Œæ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ‰ç¼–è¯‘å¹¶æ‰§è¡Œï¼ˆä¸éšPL/SQLå—ç¼–è¯‘æ—¶ç¼–è¯‘ï¼‰ã€‚ 2ï¼‰é™æ€SQLä¸€æ¬¡ç¼–è¯‘ï¼Œå¤šæ¬¡è°ƒç”¨ï¼Œä½¿ç”¨ç›¸åŒçš„æ‰§è¡Œè®¡åˆ’ã€‚åŠ¨æ€SQLæ¯æ¬¡è¿è¡Œå‡è¦å…ˆå¯¹å…¶ç¼–è¯‘ï¼Œå³å¤šæ¬¡è°ƒç”¨åˆ™éœ€è¦å¤šæ¬¡ç¼–è¯‘ã€‚ 3ï¼‰é™æ€SQLä½¿ç”¨ç›¸åŒçš„æ‰§è¡Œè®¡åˆ’ï¼Œå¯¹äºç¡®å®šçš„ä»»åŠ¡è€Œè¨€ï¼Œé™æ€SQLæ›´å…·æœ‰é«˜æ•ˆæ€§ï¼Œä½†ç¼ºä¹çµæ´»æ€§ï¼›åŠ¨æ€SQLä½¿ç”¨äº†ä¸åŒçš„æ‰§è¡Œè®¡åˆ’ï¼Œæ•ˆç‡ä¸å¦‚é™æ€SQLï¼Œä½†èƒ½å¤Ÿè§£å†³å¤æ‚çš„é—®é¢˜ã€‚ 4ï¼‰åŠ¨æ€SQLå®¹æ˜“äº§ç”ŸSQLæ³¨å…¥ï¼Œä¸ºæ•°æ®åº“å®‰å…¨å¸¦æ¥éšæ‚£ã€‚ ã€åŠ¨æ€SQLç”¨é€”ã€‘1ï¼‰å¤„ç†PL/SQLå—ä¸­ä¸èƒ½å¤„ç†çš„DDLæˆ–DCLè¯­å¥ï¼› 2ï¼‰å¤„ç†PL/SQLå—ä¸­å¸¦å‚æ•°å…·æœ‰ä¸ç¡®å®šæ€§çš„SQLï¼ˆå¦‚è¡¨åã€å­—æ®µåæˆ–æ¡ä»¶å€¼ä½œä¸ºå˜é‡ï¼‰ï¼› 3ï¼‰PL/SQLä¸­é™æ€SQLå‡ºç°æ€§èƒ½ç“¶é¢ˆï¼› ã€åŠ¨æ€SQLè¯­æ³•ã€‘123456789101112131415161718192021execute immediate 'sql';--åŒºåˆ«äºé™æ€SQLå˜é‡èµ‹å€¼çš„INTOä½ç½®ï¼Œselect col into var from table;execute immediate 'sql_select' into var_1, var_2;execute immediate 'sql' using bind_var_1,bind_var_2;execute immediate 'sql_select' into var_1, var_2 using bind_var_1,bind_var_2;-- returningå­å¥åœ¨insertä¹‹åè¿”å›æ–°åŠ çš„å€¼ï¼Œupdateä¹‹åè¿”å›ä¿®æ”¹åçš„å€¼ï¼Œdeleteè¿”å›åˆ é™¤å‰çš„å€¼execute immediate 'sql_dml' returning into var_1;--æ‰¹é‡åŠ¨æ€SQLï¼Œå³åœ¨åŠ¨æ€SQLä¸­ä½¿ç”¨BULKå­å¥ï¼Œæˆ–ä½¿ç”¨æ¸¸æ ‡å˜é‡æ—¶åœ¨fetchä¸­ä½¿ç”¨BULKï¼Œæˆ–åœ¨FORALLè¯­å¥ä¸­ä½¿ç”¨BULKå­å¥æ¥å®ç°execute immediate 'sql' bulk collect into var_array;--åŠ¨æ€REFæ¸¸æ ‡ï¼Œä¸åŒäºé™æ€æ¸¸æ ‡å£°æ˜æ–¹å¼open cursor_name for â€˜sqlâ€™ using bind_var_1; ã€åŠ¨æ€SQLä¸¾ä¾‹ã€‘123456789/*åŠ¨æ€SQLæ‰§è¡ŒDDLè¯­å¥ï¼ˆä¸èƒ½è·Ÿusingï¼‰*/declare sql_statement varchar2(100); table_name varchar2(20);begin table_name := 'emp'; sql_statement := 'truncate table ' || table_name; execute immediate sql_statement;end; â€“æ³¨ï¼šå˜é‡ä¸èƒ½æ”¾åœ¨å¼•å·å†…ï¼Œå¦åˆ™ä¼šè§£ææˆæ–‡æœ¬è€Œä¸æ˜¯å˜é‡ï¼Œä½†è‹¥åœ¨DMLè¯­å¥çš„ç»‘å®šå˜é‡ï¼Œåˆ™éœ€è¦åœ¨å¼•å·å†…ï¼Œæ‹¼SQLæ—¶ä¸€å®šè¦æ³¨æ„å…³é”®å­—åçš„ç©ºæ ¼ï¼Œå¦‚truncate tableä¹‹åæ˜¯æœ‰ä¸€ä¸ªç©ºæ ¼çš„ 1234567891011121314151617181920212223/*åŠ¨æ€SELECTè¯­å¥ï¼ˆä¸èƒ½è·Ÿreturningï¼‰*//*SELECTä¸­è¡¨åæ˜¯å˜é‡*/declare sql_stat varchar2(100); v_tab varchar2(20);begin v_tab := 'emp'; sql_stat := 'select sal from '|| v_tab || ' where empno = 1'; dbms_output.put_line(sql_stat); execute immediate sql_stat;end;--æ³¨ï¼šæ³¨æ„fromåé¢å’Œwhereå‰é¢æ˜¯æœ‰ç©ºæ ¼çš„/*SELECT INTOå˜é‡èµ‹å€¼*/declare sql_stat varchar2(100); v_sal number(6, 2);begin sql_stat := 'select sal from emp where empno = :1'; execute immediate sql_stat into v_sal using 1; dbms_output.put_line(v_sal);end; â€“æ³¨ï¼šINTOçš„ä½ç½®ï¼Œä¸åƒé™æ€SQLä¸€æ ·åœ¨å­—æ®µååï¼Œè€Œæ˜¯åœ¨execute immediateæ—¶æ‰åŠ ï¼Œä¸”å…³é”®å­—åœ¨usingä¹‹å‰ï¼›å¦å¤–ï¼Œæ³¨æ„åŒºåˆ†æœ‰returningå­å¥çš„ï¼Œreturningå­å¥åœ¨SQLæ–‡æœ¬å’Œexecute immediateå­å¥ä¸­å‡æœ‰å‡ºç°ï¼Œä½†æ­¤æ—¶INTOçš„ä½ç½®åœ¨usingä¹‹åã€‚ 1234567891011121314/*åŠ¨æ€SQLæ‰§è¡ŒDMLè¯­å¥ï¼ˆå«returningå­å¥ï¼‰*/declare v_sal number(6, 2); sql_stat varchar2(100); v_eno number(2);begin v_eno := 1; sql_stat := 'update emp set sal = sal * (1 + :percent / 100) where empno = :2 returning sal into :3'; execute immediate sql_stat using &amp;1, v_eno returning into v_sal; commit; dbms_output.put_line('new salary: ' || v_sal);end; â€“æ³¨ï¼šåŠ¨æ€SQLå†…çš„ç»“å°¾ä¸åŠ åˆ†å·â€œ;â€ï¼Œä½†PL/SQLçš„è¯­å¥ç»“å°¾åŠ â€œ;â€ï¼Œä¸”å†’å·åçš„å ä½ç¬¦æ˜¯å­—æ¯æˆ–æ•°å­—å®Œå…¨æ²¡æœ‰å½±å“ï¼Œusingçš„å˜é‡å€¼å¯ä»¥æ˜¯ç»‘å®šå˜é‡ã€æˆ–å˜é‡æˆ–å¸¸é‡å‡å¯ã€‚å¦‚ï¼šå ä½ç¬¦:percentå¯¹åº”ç»‘å®šå˜é‡&amp;1ï¼Œè™½ç„¶åå­—å®Œå…¨ä¸åŒï¼Œä½†ä¹Ÿä¸å½±å“ï¼Œå¦å¤–ï¼Œå ä½ç¬¦:2å¯¹åº”äº†å˜é‡v_enoï¼Œä¹Ÿæ˜¯å®Œå…¨ä¸åŒã€‚å³ï¼ŒæŒ‰é¡ºåºå ä½ï¼Œä¸å ä½ç¬¦åæ— å…³ã€‚æŒ‰é¡ºåºç»‘å®šå˜é‡ï¼Œä¸ç»‘å®šå˜é‡åæ— å…³ã€‚ç»™å ä½ç¬¦æˆ–ç»‘å®šå˜é‡å‘½ååªæ˜¯ä¸ºäº†ç¨‹åºçš„å¯è¯»æ€§ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273declare type cur_totalvaue_type is ref cursor; cur_totalvaue cur_totalvaue_type; sql_stat VARCHAR2(100); record_totalvalue t_threeyear_hour%rowtype;begin sql_stat := 'select * from t_threeyear_hour t where t.time = :1'; open cur_totalvaue for sql_stat using to_date('20130209', 'yyyymmdd'); loop fetch cur_totalvaue into record_totalvalue; exit when cur_totalvaue%NOTFOUND; dbms_output.put_line(record_totalvalue.time || ' is ' || record_totalvalue.totalvalue); end loop; close cur_totalvaue;end;/*æ‰¹é‡åŠ¨æ€SQLï¼ˆBULK COLLECT INTO ï¼‰*/declare type ename_table_type is table of emp.ename%type index by binary_integer; type sal_table_type is table of emp.sal%type index by binary_integer; ename_table ename_table_type; sal_table sal_table_type; sql_stat varchar2(120); v_percent number := &amp;percent; v_dno number := &amp;dno;begin sql_stat := 'update emp set sal = sal * (1 + :percent / 100)' || ' where deptno = :dno' || ' returning ename, sal into :name, :salary'; execute immediate sql_stat using v_percent, v_dno returning bulk collect into ename_table, sal_table; for i in 1 .. ename_table.count loop dbms_output.put_line('employee ' || ename_table(i) || ' salary is: ' || sal_table(i)); end loop;end;/*åŠ¨æ€æ¸¸æ ‡+BULK*/declare type cur_emp_type is ref cursor; cur_emp cur_emp_type; type ename_table_type is table of emp.ename%type index by binary_integer; ename_table ename_table_type; sql_stat varchar2(120);begin sql_stat := 'select ename from emp where deptno = :dno'; open cur_emp for sql_stat using &amp;dno; fetch cur_emp bulk collect into ename_table; for i in 1 .. ename_table.count loop dbms_output.put_line('employee name is ' || ename_table(i)); end loop; close cur_emp;end;/*FORALL+BULKï¼ˆä»…æ”¯æŒDMLï¼‰*/declare type ename_table_type is table of tb2.ename%type; type sal_table_type is table of tb2.sal%type; ename_table ename_table_type; sal_table sal_table_type; sql_stat varchar2(100);begin ename_table := ename_table_type('blake', 'ford', 'miller'); --ä¸ºå¤åˆç±»å‹èµ‹å€¼ sql_stat := 'update tb2 set sal = sal * 1.1 where ename = :1 returning sal into :2'; forall i in 1 .. ename_table.count execute immediate sql_stat using ename_table(i) returning bulk collect into sal_table; for j in 1 .. ename_table.count loop dbms_output.put_line('the new salary is ' || sal_table(j) || ' for ' || ename_table(j)); end loop;end; ã€ç»‘å®šå˜é‡ã€‘Oracleä¼šè‡ªåŠ¨æŠŠå¾ªç¯ä¸­å¸¦å‚æ•°SQLè¯­å¥è½¬æ¢ä¸ºé‡‡ç”¨ç»‘å®šå˜é‡æ–¹å¼æ‰§è¡Œï¼Œä»¥å‡å°‘ç¡¬è§£æå’Œlatchç«äº‰ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸“é—¨å»æ³¨æ„åœ¨PL/SQLå—ä¸­ä½¿ç”¨ç»‘å®šå˜é‡ï¼ŒOracleä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆè¿™ä¸ªåŠ¨ä½œã€‚è‡³äºSQLPLUSä¸­ä½¿ç”¨ç»‘å®šå˜é‡ï¼Œå…¶å®æˆ‘ä»¬æ—¥å¸¸ä¹Ÿè¾ƒå°‘ä½¿ç”¨SQLPLUSEï¼Œæ•…ä¹Ÿæ— éœ€ä¸“é—¨æ³¨æ„è¯¥é—®é¢˜ã€‚ 1234567-- sqlplusä¸­ä½¿ç”¨ç»‘å®šå˜é‡variable x number(4);exec :x := 1;select * from emp t where empno = :x; â€“æ³¨ï¼šå¿…é¡»å…ˆä½¿ç”¨å…³é”®å­—variableå£°æ˜å˜é‡ï¼Œå†ä½¿ç”¨execç»™ç»‘å®šå˜é‡èµ‹å€¼ï¼ˆå˜é‡å‰å¸¦å†’å·ï¼‰ï¼Œæœ€åä½¿ç”¨ç»‘å®šå˜é‡ã€‚ ç»‘å®šå˜é‡æ•ˆç‡é«˜çš„åŸå›  Oracleä¸­ï¼Œå¯¹äºä¸€ä¸ªæäº¤çš„sqlè¯­å¥ï¼Œå­˜åœ¨ä¸¤ç§å¯é€‰çš„è§£æè¿‡ç¨‹ï¼Œä¸€ç§å«åšç¡¬è§£æï¼Œä¸€ç§å«åšè½¯è§£æã€‚å½“ä¸€ä¸ªsqlè¯­å¥æäº¤åï¼Œoracleä¼šé¦–å…ˆæ£€æŸ¥ä¸€ä¸‹å…±äº«ç¼“å†²æ± ï¼ˆshared poolï¼‰é‡Œæœ‰æ²¡æœ‰ä¸ä¹‹å®Œå…¨ç›¸åŒçš„è¯­å¥ï¼Œå¦‚æœæœ‰çš„è¯åªé¡»æ‰§è¡Œè½¯åˆ†æå³å¯ï¼Œå¦åˆ™å°±å¾—è¿›è¡Œç¡¬åˆ†æã€‚ ç¡¬è§£æéœ€è¦ç»è§£æï¼Œåˆ¶å®šæ‰§è¡Œè·¯å¾„ã€ä¼˜åŒ–è®¿é—®è®¡åˆ’ç­‰è®¸å¤šçš„æ­¥éª¤ã€‚ç¡¬è§£é‡Šä¸ä»…ä»…è€—è´¹å¤§é‡çš„cpuï¼Œæ›´é‡è¦çš„æ˜¯ä¼šå æ®é‡è¦é—©ï¼ˆlatchï¼‰èµ„æºï¼Œä¸¥é‡çš„å½±å“ç³»ç»Ÿè§„æ¨¡æ‰©å¤§ï¼ˆå³é™åˆ¶äº†ç³»ç»Ÿçš„å¹¶å‘è¡Œï¼‰ï¼Œè€Œä¸”å¼•èµ·çš„é—®é¢˜ä¸èƒ½é€šè¿‡å¢åŠ å†…å­˜æ¡å’Œcpuçš„æ•°é‡æ¥è§£å†³ã€‚ä¹‹æ‰€ä»¥è¿™æ ·æ˜¯å› ä¸ºé—©æ˜¯ä¸ºäº†é¡ºåºè®¿é—®ä»¥åŠä¿®æ”¹ä¸€äº›å†…å­˜åŒºåŸŸè€Œè®¾ç½®çš„ï¼Œè¿™äº›å†…å­˜åŒºåŸŸæ˜¯ä¸èƒ½è¢«åŒæ—¶ä¿®æ”¹ã€‚ è‹¥Oracleåœ¨shared poolä¸­æŸ¥æ‰¾ç›¸åŒSQLè¯­å¥çš„è¿‡ç¨‹ä¸­ï¼ŒSQLè¯­å¥ä½¿ç”¨äº†ç»‘å®šå˜é‡ï¼ˆbind variableï¼‰ï¼Œé‚£ä¹ˆå°±æ˜¯æ¯”è¾ƒSQLè¯­å¥çš„é™æ€éƒ¨åˆ†ï¼Œå‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œé™æ€éƒ¨åˆ†æ˜¯æœ‰é™çš„ï¼Œå¾ˆå®¹æ˜“å°±èƒ½å¤Ÿç¼“å­˜åœ¨å†…å­˜é‡Œï¼Œä»è€Œæ‰¾åˆ°ç›¸åŒçš„SQLè¯­å¥çš„æ¦‚ç‡å¾ˆé«˜ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ç»‘å®šå˜é‡ï¼Œåˆ™å°±æ˜¯æ¯”è¾ƒSQLè¯­å¥çš„é™æ€éƒ¨åˆ†å’ŒåŠ¨æ€éƒ¨åˆ†ï¼Œè€ŒåŠ¨æ€éƒ¨åˆ†çš„å˜åŒ–æ˜¯æ— é™çš„ï¼Œå› æ­¤è¿™æ ·çš„SQLè¯­å¥å¾ˆéš¾è¢«ç¼“å­˜åœ¨shared poolé‡Œã€‚æ¯•ç«Ÿå†…å­˜æ˜¯æœ‰é™çš„ï¼Œä¸å¯èƒ½æŠŠæ‰€æœ‰çš„åŠ¨æ€éƒ¨åˆ†éƒ½ç¼“å­˜åœ¨sharedpoolé‡Œï¼Œå³ä¾¿èƒ½å¤Ÿç¼“å­˜ï¼Œç®¡ç†è¿™æ ·ä¸€ä¸ªæ— é™å¤§çš„shared poolä¹Ÿæ˜¯ä¸å¯èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚ä¸ä½¿ç”¨ç»‘å®šå˜é‡å¯¼è‡´çš„ç›´æ¥ç»“æœå°±æ˜¯ï¼Œæ‰¾åˆ°ç›¸åŒçš„SQLè¯­å¥çš„æ¦‚ç‡å¾ˆä½ï¼Œå¯¼è‡´å¿…é¡»å®Œæ•´çš„è§£æSQLè¯­å¥ï¼Œä¹Ÿå°±å¯¼è‡´æ¶ˆè€—æ›´å¤šçš„èµ„æºã€‚ ç»‘å®šå˜é‡çš„ä½¿ç”¨ç¯å¢ƒ ç”±äºåœ¨OLTPä¸­ï¼ŒSQLè¯­å¥å¤§å¤šæ˜¯æ¯”è¾ƒç®€å•æˆ–è€…æ“ä½œçš„ç»“æœé›†éƒ½å¾ˆå°ã€‚å½“ä¸€ä¸ªè¡¨ä¸Šåˆ›å»ºäº†ç´¢å¼•ï¼Œé‚£ä¹ˆè¿™ç§æå°ç»“æœé›†çš„æ“ä½œä½¿ç”¨ç´¢å¼•æœ€åˆé€‚ï¼Œå¹¶ä¸”å‡ ä¹æ‰€æœ‰çš„SQLçš„æ‰§è¡Œè®¡åˆ’çš„ç´¢å¼•éƒ½ä¼šè¢«é€‰æ‹©ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹ï¼Œç´¢å¼•å¯èƒ½åªéœ€è¦æ‰«æå‡ ä¸ªæ•°æ®å—å°±å¯ä»¥å®šä½åˆ°æ•°æ®ï¼Œè€Œå…¨è¡¨æ‰«æå°†ä¼šç›¸å½“è€—èµ„æºã€‚å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿æ¯ä¸ªç”¨æˆ·çš„è°“è¯æ¡ä»¶ä¸ä¸€æ ·ï¼Œæ‰§è¡Œè®¡åˆ’ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯éƒ½ç”¨ç´¢å¼•æ¥è®¿é—®æ•°æ®ï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°å…¨è¡¨æ‰«æçš„æƒ…å†µã€‚åœ¨è¿™ç§æ‰§è¡Œè®¡åˆ’å‡ ä¹å”¯ä¸€çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç»‘å®šå˜é‡æ¥ä»£æ›¿è°“è¯å¸¸é‡æ˜¯åˆé€‚çš„ã€‚ æ³¨æ„ï¼Œåœ¨OLTPä¸­ä½¿ç”¨ç»‘å®šå˜é‡ä¸€å®šè¦æ³¨æ„ï¼Œå˜é‡çš„ç±»å‹è¦ä¸è¡¨å­—æ®µç±»å‹ä¸€æ ·ï¼Œå¦åˆ™è‹¥é€ æˆäº†éšå¼è½¬æ¢ï¼Œç´¢å¼•å°†å¤±æ•ˆè€Œé‡‡ç”¨å…¨è¡¨æ‰«æï¼Œæ­¤æ—¶ä¼šé€ æˆç³»ç»Ÿæ€§èƒ½çš„æå¤§ä¸‹é™ã€‚ åœ¨OLAPç³»ç»Ÿä¸­ï¼ŒSQLçš„æ“ä½œå°±å¤æ‚å¾ˆå¤šï¼ŒOLAPæ•°æ®åº“ä¸Šå¤§å¤šæ•°æ—¶å€™è¿è¡Œçš„ä¸€äº›æŠ¥è¡¨SQLï¼Œè¿™äº›SQLç»å¸¸ä¼šç”¨åˆ°èšåˆæŸ¥è¯¢ï¼ˆå¦‚ï¼šgroupbyï¼‰ï¼Œè€Œä¸”ç»“æœé›†ä¹Ÿæ˜¯éå¸¸åºå¤§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç´¢å¼•å¹¶ä¸æ˜¯å¿…ç„¶çš„é€‰æ‹©ï¼Œç”šè‡³æœ‰æ—¶å€™å…¨è¡¨æ‰«æçš„æ€§èƒ½ä¼šæ›´ä¼˜äºç´¢å¼•ï¼Œå³ä½¿ç›¸åŒçš„SQLï¼Œå¦‚æœè°“è¯ä¸åŒï¼Œæ‰§è¡Œè®¡åˆ’éƒ½å¯èƒ½ä¸åŒã€‚è®©Oracleå¯¹æ¯æ¡SQLåšç¡¬åˆ†æï¼Œç¡®åˆ‡çš„çŸ¥é“è°“è¯æ¡ä»¶çš„å€¼ï¼Œè¿™å¯¹æ‰§è¡Œè®¡åˆ’çš„é€‰æ‹©è‡³å…³é‡è¦ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯ä¸ºäº†å¾—åˆ°ä¸€ä¸ªæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚åœ¨OLAPç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„èµ„æºåŸºæœ¬ä¸Šæ˜¯ç”¨äºåšå¤§çš„SQLæŸ¥è¯¢ï¼Œå’ŒæŸ¥è¯¢æ¯”èµ·æ¥SQLè§£ææ¶ˆè€—çš„èµ„æºæ˜¾å¾—å¾®ä¸è¶³é“ï¼ŒSQLç¡¬åˆ†æçš„ä»£ä»·æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚å› æ­¤è®©Oracleç¡®åˆ‡åœ°çŸ¥é“è°“è¯çš„æ•°å€¼è‡³å…³é‡è¦ï¼Œå®ƒç›´æ¥å†³å®šäº†SQLæ‰§è¡Œè®¡åˆ’çš„é€‰æ‹©ï¼Œæ‰€ä»¥åœ¨OLAPç³»ç»Ÿå®Œå…¨æ²¡æœ‰å¿…è¦ç»‘å®šå˜é‡ï¼Œé‚£æ ·å¾ˆå¯èƒ½å¸¦æ¥è´Ÿé¢å½±å“ï¼Œæ¯”å¦‚å¯¼è‡´SQLé€‰æ‹©é”™è¯¯çš„æ‰§è¡Œï¼Œè¿™ä¸ªä»£ä»·æœ‰æ—¶æ˜¯ç¾éš¾æ€§çš„ã€‚ ã€æ–‡ç« å‚è€ƒã€‘ http://blog.csdn.net/leshami/article/details/6118010 http://czmmiao.iteye.com/blog/1489625","tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://betgar.github.io/tags/Oracle/"},{"name":"PLSQL","slug":"PLSQL","permalink":"https://betgar.github.io/tags/PLSQL/"}]},{"title":"plsql-forall","date":"2018-04-10T16:00:00.000Z","path":"2018/04/11/plsql-forall/","text":"PL/SQL FORALL forallè¯­æ³• 1234567891011121314151617181920212223242526DECLARE V_INPUT_STR VARCHAR2(1000); V_INSER_SQL VARCHAR2(1000); V_STR_LIST DBMS_SQL.VARCHAR2S;BEGIN V_INPUT_STR := &apos;2003130, 2003131, 2003132, 2003116, 2001100,,2001101,&apos;; V_STR_LIST := TEST_STRING_TO_LIST(V_INPUT_STR, &apos;,&apos;, FALSE); FORALL V_INDEX IN V_STR_LIST.FIRST .. V_STR_LIST.LAST INSERT INTO GT_KM_IMP (ITEMCODE) VALUES (:ITEMCODE) USING V_STR_LIST (V_INDEX);END;DECLARE V_INPUT_STR VARCHAR2(1000); V_INSER_SQL VARCHAR2(1000); V_STR_LIST DBMS_SQL.VARCHAR2S;BEGIN V_INPUT_STR := &apos;2003130, 2003131, 2003132, 2003116, 2001100,,2001101,&apos;; V_STR_LIST := TEST_STRING_TO_LIST(V_INPUT_STR, &apos;,&apos;, FALSE); FORALL V_INDEX IN INDICES OF V_STR_LIST BETWEEN V_STR_LIST.FIRST AND V_STR_LIST.LAST INSERT INTO GT_KM_IMP (ITEMCODE) VALUES (V_STR_LIST(V_INDEX));END;","tags":[]},{"title":"è§£æURIä¸­çš„query string","date":"2018-03-24T12:00:00.000Z","path":"2018/03/24/parse-uri-string-into-key-value-collection-in-java/","text":"è§£æURIä¸­çš„query string è§£æURLä¸­çš„query stringæˆé›†åˆ. å‰ç«¯å¯ä»¥é…åˆä½¿ç”¨$.paramç”Ÿæˆåºåˆ—åŒ–å­—ç¬¦ä¸²ã€‚ JavaScriptè§£æURIä¸­çš„query stringåŸç”Ÿè§£æ æŸ¥æ‰¾æŒ‡å®šnameçš„å‚æ•°å€¼ï¼Œåªä¼šåŒ¹é…ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„ã€‚ 123456789function getParameterByName(name, url) &#123; if (!url) url = window.location.href; name = name.replace(/[\\[\\]]/g, \"\\\\$&amp;\"); var regex = new RegExp(\"[?&amp;]\" + name + \"(=([^&amp;#]*)|&amp;|#|$)\"), results = regex.exec(url); if (!results) return null; if (!results[2]) return ''; return decodeURIComponent(results[2].replace(/\\+/g, \" \"));&#125; qs.jsåº“è§£æquery string qs.jsæ”¯æŒè§£æ query stringï¼Œä¹Ÿæ”¯æŒåºåˆ—åŒ–query stringï¼Œè€Œä¸”qsæ”¯æŒè§£æquery stringä¸­çš„Objectå’ŒAarryï¼Œå‰ææ˜¯æŒ‰ç…§qsçš„æ”¯æŒçš„æ ¼å¼ä¹¦å†™ã€‚ parse 12var obj = qs.parse('a=c');assert.deepEqual(obj, &#123; a: 'c' &#125;); stringifying 12var str = qs.stringify(obj);assert.equal(str, 'a=c'); Javaè§£æç¼–ç è¿‡çš„å­—ç¬¦ä¸²1234567891011121314public static Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url, String charset) throws UnsupportedEncodingException &#123; final Map&lt;String, List&lt;String&gt;&gt; queryPairs = new LinkedHashMap&lt;String, List&lt;String&gt;&gt;(); final String[] pairs = url.getQuery().split(\"&amp;\"); for (String pair : pairs) &#123; final int idx = pair.indexOf(\"=\"); final String key = idx &gt; 0 ? URLDecoder.decode(pair.substring(0, idx), charset) : pair; if (!queryPairs.containsKey(key)) &#123; queryPairs.put(key, new LinkedList&lt;String&gt;()); &#125; final String value = idx &gt; 0 &amp;&amp; pair.length() &gt; idx + 1 ? URLDecoder.decode(pair.substring(idx + 1), \"UTF-8\") : null; queryPairs.get(key).add(value); &#125; return queryPairs;&#125; JDK 8 version 123456789101112131415public Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url) &#123; if (Strings.isNullOrEmpty(url.getQuery())) &#123; return Collections.emptyMap(); &#125; return Arrays.stream(url.getQuery().split(\"&amp;\")) .map(this::splitQueryParameter) .collect(Collectors.groupingBy(SimpleImmutableEntry::getKey, LinkedHashMap::new, mapping(Map.Entry::getValue, toList())));&#125;public SimpleImmutableEntry&lt;String, String&gt; splitQueryParameter(String it) &#123; final int idx = it.indexOf(\"=\"); final String key = idx &gt; 0 ? it.substring(0, idx) : it; final String value = idx &gt; 0 &amp;&amp; it.length() &gt; idx + 1 ? it.substring(idx + 1) : null; return new SimpleImmutableEntry&lt;&gt;(key, value);&#125; common-httpclients.jar 123456789import org.apache.hc.client5.http.utils.URLEncodedUtilspublic static void main(String[] args) &#123; String url = \"http://www.example.com/something.html?one=1&amp;two=2&amp;three=3&amp;three=3a\"; List&lt;NameValuePair&gt; params = URLEncodedUtils.parse(new URI(url), \"UTF-8\"); for (NameValuePair param : params) &#123; System.out.println(param.getName() + \" : \" + param.getValue()); &#125;&#125; Spring Framework 123456789public static void main(String[] args) &#123; String uri = \"http://youhost.com/test?param1=abc&amp;param2=def&amp;param2=ghi\"; MultiValueMap&lt;String, String&gt; parameters = UriComponentsBuilder.fromUriString(uri).build().getQueryParams(); List&lt;String&gt; param1 = parameters.get(\"param1\"); List&lt;String&gt; param2 = parameters.get(\"param2\"); System.out.println(\"param1: \" + param1.get(0)); System.out.println(\"param2: \" + param2.get(0) + \",\" + param2.get(1));&#125; å‚è€ƒé“¾æ¥Parse a URI String into Name-Value Collection","tags":[{"name":"qs","slug":"qs","permalink":"https://betgar.github.io/tags/qs/"}]},{"title":"åœ¨Oracleå’ŒJavaä¸­ä½¿ç”¨Base64","date":"2018-03-13T12:00:00.000Z","path":"2018/03/13/how-to-use-base64-between-oracle-and-java/","text":"åœ¨Oracleå’ŒJavaä¸­ä½¿ç”¨Base64Oracle UTL_RAWï¼šå¤„ç†äºŒè¿›åˆ¶çš„æ•°æ®åŒ…ã€‚ UTL_ENCODEï¼šå¤„ç†ç¼–ç åŒ…ã€‚ UTL_ENCODE.BASE64_ENCODEä½¿ç”¨ æ­¥éª¤ï¼š å…ˆç”¨UTL_RAW.CAST_TO_RAWæŠŠvarchar2è½¬æ¢ä¸ºrawç±»å‹. ä½¿ç”¨UTL_ENCODE.BASE64_ENCODEç¼–ç . ä½¿ç”¨UTL_RAW.CAST_TO_VARCHAR2ä»raw(äºŒè¿›åˆ¶ç±»å‹)è½¬æ¢ä¸ºvarchar2ç±»å‹è½¬æ¢. æ³¨æ„ï¼š rawç±»å‹ä¹Ÿå¯ä»¥è¿›è¡Œä¼ é€’ï¼Œä½†æ˜¯Javaä¸­è¦ä½¿ç”¨Byteè¿›è¡Œè§£æã€‚ â€‹ 12select utl_raw.cast_to_varchar2(utl_encode.base64_encode(utl_raw.cast_to_raw('&#123;\"count\": 1000&#125;'))) from dual; UTL_ENCODE.BASE64_DECODEä½¿ç”¨ 1select utl_raw.cast_to_varchar2(utl_encode.base64_decode(utl_raw.cast_to_raw('e1wiY291bnRcIjogMTAwMH0='))) from dual; æŒ‡å®šå­—ç¬¦ç¼–ç  12UTL_ENCODE.TEXT_ENCODE(string, charset);UTL_ENCODE.TEXT_DECODE(string, charset); â€‹ Java BASE64Decoder BASE64Encoder EncodeUtilï¼šå·¥å…·ç±» BASE64Encoderä½¿ç”¨ 123456789101112public static String encodeString(String plainText, String charSet) &#123; BASE64Encoder encoder = new BASE64Encoder(); try &#123; return encoder.encode(plainText.getBytes(charSet)); &#125; catch(UnsupportedEncodingException e) &#123; throw new EncodeException(\"E0208.0013\", EcpI18nUtil.localizedString(\"E0208.0013\", \"\\u4E0D\\u652F\\u6301\\u7684\\u5B57\\u7B26\\u96C6\"), e, new Object[0]); &#125; &#125; BASE64Decoderä½¿ç”¨ 123456789101112public static String decodeString(String encodedText, String charSet) &#123; BASE64Decoder decoder = new BASE64Decoder(); try &#123; return new String(decoder.decodeBuffer(encodedText), charSet); &#125; catch(Exception e) &#123; throw new EncodeException(\"E0208.0013\", EcpI18nUtil.localizedString(\"E0208.0013\", \"\\u89E3\\u7801\\u5931\\u8D25\"), e, new Object[0]); &#125; &#125; Javaä¸­byteå’ŒStringç›¸äº’è½¬æ¢ 123456// String -&gt; byteString str = \"count\";byte[] bytes = str.getBytes(\"GBK\");// byte -&gt; StringString str2 = new String(bytes, 'GBK'); å­—ç¬¦é›† ç¼–ç å’Œè§£ç éƒ½å¯ä»¥æŒ‡å®šå­—ç¬¦é›†ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰ä¸­æ–‡ ç¼–ç ä¹‹åè§£ç ä¼šå‡ºç°ä¹±ç ï¼Œå› ä¸ºEcpå·¥å…·ç±»é»˜è®¤ä½¿ç”¨GBKå­—ç¬¦é›†ç¼–ç å’Œè§£ç ã€‚ æ³¨æ„ å¦‚æœå¸Œæœ›æœåŠ¡ç«¯Javaç¼–ç ä¹‹åå¯ä»¥åœ¨æ•°æ®åº“è¿‡ç¨‹ä¸­è¿›è¡Œè§£ç ï¼ˆåä¹‹äº¦ç„¶ï¼‰ï¼Œè¯·ä¸è¦åœ¨å…³é”®ä¸šåŠ¡æ•°æ®ä¸­å‡ºç°ä¸­æ–‡ ã€‚","tags":[{"name":"Base64","slug":"Base64","permalink":"https://betgar.github.io/tags/Base64/"}]},{"title":"SQL style guide","date":"2018-02-26T12:00:00.000Z","path":"2018/02/26/sqlstyle.guide/","text":"SQL style guideOverviewYou can use this set of guidelines, fork them or make your own - thekey here is that you pick a style and stick to it. To suggest changesor fix bugs please open an issue or pull request on GitHub. These guidelines are designed to be compatible with Joe Celkoâ€™s SQL ProgrammingStyle book to make adoption for teams who have already read that bookeasier. This guide is a little more opinionated in some areas and in others alittle more relaxed. It is certainly more succinct where Celkoâ€™s bookcontains anecdotes and reasoning behind each rule as thoughtful prose. It is easy to include this guide in Markdown format as a part of aprojectâ€™s code base or reference it here for anyone on the project to freelyreadâ€”much harder with a physical book. SQL style guide by Simon Holywell is licensed under a Creative CommonsAttribution-ShareAlike 4.0 International License.Based on a work at http://www.sqlstyle.guide. GeneralDo Use consistent and descriptive identifiers and names. Make judicious use of white space and indentation to make code easier to read. Store ISO-8601 compliant time and date information(YYYY-MM-DD HH:MM:SS.SSSSS). Try to use only standard SQL functions instead of vendor specific functions forreasons of portability. Keep code succinct and devoid of redundant SQLâ€”such as unnecessary quoting orparentheses or WHERE clauses that can otherwise be derived. Include comments in SQL code where necessary. Use the C style opening /* andclosing */ where possible otherwise precede comments with -- and finishthem with a new line. 123SELECT file_hash -- stored ssdeep hash FROM file_system WHERE file_name = '.vimrc'; 12345/* Updating the file record after writing to the file */UPDATE file_system SET file_modified_date = '1980-02-22 13:19:01.00000', file_size = 209732 WHERE file_name = '.vimrc'; Avoid CamelCaseâ€”it is difficult to scan quickly. Descriptive prefixes or Hungarian notation such as sp_ or tbl. Pluralsâ€”use the more natural collective term where possible instead. For examplestaff instead of employees or people instead of individuals. Quoted identifiersâ€”if you must use them then stick to SQL92 double quotes forportability (you may need to configure your SQL server to support this dependingon vendor). Object oriented design principles should not be applied to SQL or databasestructures. Naming conventionsGeneral Ensure the name is unique and does not exist as areserved keyword. Keep the length to a maximum of 30 bytesâ€”in practice this is 30 charactersunless you are using multi-byte character set. Names must begin with a letter and may not end with an underscore. Only use letters, numbers and underscores in names. Avoid the use of multiple consecutive underscoresâ€”these can be hard to read. Use underscores where you would naturally include a space in the name (firstname becomes first_name). Avoid abbreviations and if you have to use them make sure they are commonlyunderstood. 12SELECT first_name FROM staff; Tables Use a collective name or, less ideally, a plural form. For example (in order ofpreference) staff and employees. Do not prefix with tbl or any other such descriptive prefix or Hungariannotation. Never give a table the same name as one of its columns and vice versa. Avoid, where possible, concatenating two table names together to create the nameof a relationship table. Rather than cars_mechanics prefer services. Columns Always use the singular name. Where possible avoid simply using id as the primary identifier for the table. Do not add a column with the same name as its table and vice versa. Always use lowercase except where it may make sense not to such as proper nouns. Aliasing or correlations Should relate in some way to the object or expression they are aliasing. As a rule of thumb the correlation name should be the first letter of each wordin the objectâ€™s name. If there is already a correlation with the same name then append a number. Always include the AS keywordâ€”makes it easier to read as it is explicit. For computed data (SUM() or AVG()) use the name you would give it were ita column defined in the schema. 1234SELECT first_name AS fn FROM staff AS s1 JOIN students AS s2 ON s2.mentor_id = s1.staff_num; 12SELECT SUM(s.monitor_tally) AS monitor_total FROM staff AS s; Stored procedures The name must contain a verb. Do not prefix with sp_ or any other such descriptive prefix or Hungariannotation. Uniform suffixesThe following suffixes have a universal meaning ensuring the columns can be readand understood easily from SQL code. Use the correct suffix where appropriate. _idâ€”a unique identifier such as a column that is a primary key. _statusâ€”flag value or some other status of any type such aspublication_status. _totalâ€”the total or sum of a collection of values. _numâ€”denotes the field contains any kind of number. _nameâ€”signifies a name such as first_name. _seqâ€”contains a contiguous sequence of values. _dateâ€”denotes a column that contains the date of something. _tallyâ€”a count. _sizeâ€”the size of something such as a file size or clothing. _addrâ€”an address for the record could be physical or intangible such asip_addr. Query syntaxReserved wordsAlways use uppercase for the reserved keywordslike SELECT and WHERE. It is best to avoid the abbreviated keywords and use the full length ones whereavailable (prefer ABSOLUTE to ABS). Do not use database server specific keywords where an ANSI SQL keyword alreadyexists performing the same function. This helps to make code more portable. 123SELECT model_num FROM phones AS p WHERE p.release_date &gt; '2014-09-30'; White spaceTo make the code easier to read it is important that the correct compliment ofspacing is used. Do not crowd code or remove natural language spaces. SpacesSpaces should be used to line up the code so that the root keywords all end onthe same character boundary. This forms a river down the middle making it easy forthe readers eye to scan over the code and separate the keywords from theimplementation detail. Rivers are bad in typography, but helpful here. 12345SELECT f.average_height, f.average_diameter FROM flora AS f WHERE f.species_name = 'Banksia' OR f.species_name = 'Sheoak' OR f.species_name = 'Wattle'; Notice that SELECT, FROM, etc. are all right aligned while the actual columnnames and implementation specific details are left aligned. Although not exhaustive always include spaces: before and after equals (=) after commas (,) surrounding apostrophes (&#39;) where not within parentheses or with a trailingcomma or semicolon. 1234SELECT a.title, a.release_date, a.recording_date FROM albums AS a WHERE a.title = 'Charcoal Lane' OR a.title = 'The New Danger'; Line spacingAlways include newlines/vertical space: before AND or OR after semicolons to separate queries for easier reading after each keyword definition after a comma when separating multiple columns into logical groups to separate code into related sections, which helps to ease the readability oflarge chunks of code. Keeping all the keywords aligned to the righthand side and the values left alignedcreates a uniform gap down the middle of query. It makes it much easier to scanthe query definition over quickly too. 123INSERT INTO albums (title, release_date, recording_date)VALUES ('Charcoal Lane', '1990-01-01 01:01:01.00000', '1990-01-01 01:01:01.00000'), ('The New Danger', '2008-01-01 01:01:01.00000', '1990-01-01 01:01:01.00000'); 123UPDATE albums SET release_date = '1990-01-01 01:01:01.00000' WHERE title = 'The New Danger'; 12345SELECT a.title, a.release_date, a.recording_date, a.production_date -- grouped dates together FROM albums AS a WHERE a.title = 'Charcoal Lane' OR a.title = 'The New Danger'; IndentationTo ensure that SQL is readable it is important that standards of indentationare followed. JoinsJoins should be indented to the other side of the river and grouped with a newline where necessary. 123456789SELECT r.last_name FROM riders AS r INNER JOIN bikes AS b ON r.bike_vin_num = b.vin_num AND b.engines &gt; 2 INNER JOIN crew AS c ON r.crew_chief_last_name = c.last_name AND c.chief = 'Y'; SubqueriesSubqueries should also be aligned to the right side of the river and then laidout using the same style as any other query. Sometimes it will make sense to havethe closing parenthesis on a new line at the same character position as itâ€™sopening partnerâ€”this is especially true where you have nested subqueries. 1234567891011SELECT r.last_name, (SELECT MAX(YEAR(championship_date)) FROM champions AS c WHERE c.last_name = r.last_name AND c.confirmed = 'Y') AS last_championship_year FROM riders AS r WHERE r.last_name IN (SELECT c.last_name FROM champions AS c WHERE YEAR(championship_date) &gt; '2008' AND c.confirmed = 'Y'); Preferred formalisms Make use of BETWEEN where possible instead of combining multiple statementswith AND. Similarly use IN() instead of multiple OR clauses. Where a value needs to be interpreted before leaving the database use the CASEexpression. CASE statements can be nested to form more complex logical structures. Avoid the use of UNION clauses and temporary tables where possible. If theschema can be optimised to remove the reliance on these features then it mostlikely should be. 12345678SELECT CASE postcode WHEN 'BN1' THEN 'Brighton' WHEN 'EH1' THEN 'Edinburgh' END AS city FROM office_locations WHERE country = 'United Kingdom' AND opening_time BETWEEN 8 AND 9 AND postcode IN ('EH1', 'BN1', 'NN1', 'KW1') Create syntaxWhen declaring schema information it is also important to maintain humanreadable code. To facilitate this ensure the column definitions are ordered andgrouped where it makes sense to do so. Indent column definitions by four (4) spaces within the CREATE definition. Choosing data types Where possible do not use vendor specific data typesâ€”these are not portable andmay not be available in older versions of the same vendorâ€™s software. Only use REAL or FLOAT types where it is strictly necessary for floatingpoint mathematics otherwise prefer NUMERIC and DECIMAL at all times. Floatingpoint rounding errors are a nuisance! Specifying default values The default value must be the same type as the columnâ€”if a column is declareda DECIMAL do not provide an INTEGER default value. Default values must follow the data type declaration and come before anyNOT NULL statement. Constraints and keysConstraints and their subset, keys, are a very important component of anydatabase definition. They can quickly become very difficult to read and reasonabout though so it is important that a standard set of guidelines are followed. Choosing keysDeciding the column(s) that will form the keys in the definition should be acarefully considered activity as it will effect performance and data integrity. The key should be unique to some degree. Consistency in terms of data type for the value across the schema and a lowerlikelihood of this changing in the future. Can the value be validated against a standard format (such as one published byISO)? Encouraging conformity to point 2. Keeping the key as simple as possible whilst not being scared to use compoundkeys where necessary. It is a reasoned and considered balancing act to be performed at the definitionof a database. Should requirements evolve in the future it is possible to makechanges to the definitions to keep them up to date. Defining constraintsOnce the keys are decided it is possible to define them in the system usingconstraints along with field value validation. General Tables must have at least one key to be complete and useful. Constraints should be given a custom name excepting UNIQUE, PRIMARY KEYand FOREIGN KEY where the database vendor will generally supply sufficientlyintelligible names automatically. Layout and order Specify the primary key first right after the CREATE TABLE statement. Constraints should be defined directly beneath the column they correspond to.Indent the constraint so that it aligns to the right of the column name. If it is a multi-column constraint then consider putting it as close to bothcolumn definitions as possible and where this is difficult as a last resortinclude them at the end of the CREATE TABLE definition. If it is a table level constraint that applies to the entire table then itshould also appear at the end. Use alphabetical order where ON DELETE comes before ON UPDATE. If it make senses to do so align each aspect of the query on the same characterposition. For example all NOT NULL definitions could start at the samecharacter position. This is not hard and fast, but it certainly makes the codemuch easier to scan and read. Validation Use LIKE and SIMILAR TO constraints to ensure the integrity of stringswhere the format is known. Where the ultimate range of a numerical value is known it must be written as arange CHECK() to prevent incorrect values entering the database or the silenttruncation of data too large to fit the column definition. In the least itshould check that the value is greater than zero in most cases. CHECK() constraints should be kept in separate clauses to ease debugging. Example12345678CREATE TABLE staff ( PRIMARY KEY (staff_num), staff_num INT(5) NOT NULL, first_name VARCHAR(100) NOT NULL, pens_in_drawer INT(2) NOT NULL, CONSTRAINT pens_in_drawer_range CHECK(pens_in_drawer &gt;= 1 AND pens_in_drawer &lt; 100)); Designs to avoid Object oriented design principles do not effectively translate to relationaldatabase designsâ€”avoid this pitfall. Placing the value in one column and the units in another column. The columnshould make the units self evident to prevent the requirement to combinecolumns again later in the application. Use CHECK() to ensure valid data isinserted into the column. EAV (Entity Attribute Value) tablesâ€”use a specialist product intended forhandling such schema-less data instead. Splitting up data that should be in one table across many because of arbitraryconcerns such as time-based archiving or location in a multi-nationalorganisation. Later queries must then work across multiple tables with UNIONrather than just simply querying one table. AppendixReserved keyword referenceA list of ANSI SQL (92, 99 and 2003), MySQL 3 to 5.x, PostgreSQL 8.1, MS SQL Server 2000, MS ODBC and Oracle 10.2 reserved keywords. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740741742743744745746747748749750751752753754755756757758759760761762763764765766767768769770771772773774775776777778779780781782783784785786787788789790791792793794795796797798799800801802803804805806807808809810811812813814815816817818819820821822823824825AABORTABSABSOLUTEACCESSACTIONADAADDADMINAFTERAGGREGATEALIASALLALLOCATEALSOALTERALWAYSANALYSEANALYZEANDANYAREARRAYASASCASENSITIVEASSERTIONASSIGNMENTASYMMETRICATATOMICATTRIBUTEATTRIBUTESAUDITAUTHORIZATIONAUTO_INCREMENTAVGAVG_ROW_LENGTHBACKUPBACKWARDBEFOREBEGINBERNOULLIBETWEENBIGINTBINARYBITBIT_LENGTHBITVARBLOBBOOLBOOLEANBOTHBREADTHBREAKBROWSEBULKBYCCACHECALLCALLEDCARDINALITYCASCADECASCADEDCASECASTCATALOGCATALOG_NAMECEILCEILINGCHAINCHANGECHARCHAR_LENGTHCHARACTERCHARACTER_LENGTHCHARACTER_SET_CATALOGCHARACTER_SET_NAMECHARACTER_SET_SCHEMACHARACTERISTICSCHARACTERSCHECKCHECKEDCHECKPOINTCHECKSUMCLASSCLASS_ORIGINCLOBCLOSECLUSTERCLUSTEREDCOALESCECOBOLCOLLATECOLLATIONCOLLATION_CATALOGCOLLATION_NAMECOLLATION_SCHEMACOLLECTCOLUMNCOLUMN_NAMECOLUMNSCOMMAND_FUNCTIONCOMMAND_FUNCTION_CODECOMMENTCOMMITCOMMITTEDCOMPLETIONCOMPRESSCOMPUTECONDITIONCONDITION_NUMBERCONNECTCONNECTIONCONNECTION_NAMECONSTRAINTCONSTRAINT_CATALOGCONSTRAINT_NAMECONSTRAINT_SCHEMACONSTRAINTSCONSTRUCTORCONTAINSCONTAINSTABLECONTINUECONVERSIONCONVERTCOPYCORRCORRESPONDINGCOUNTCOVAR_POPCOVAR_SAMPCREATECREATEDBCREATEROLECREATEUSERCROSSCSVCUBECUME_DISTCURRENTCURRENT_DATECURRENT_DEFAULT_TRANSFORM_GROUPCURRENT_PATHCURRENT_ROLECURRENT_TIMECURRENT_TIMESTAMPCURRENT_TRANSFORM_GROUP_FOR_TYPECURRENT_USERCURSORCURSOR_NAMECYCLEDATADATABASEDATABASESDATEDATETIMEDATETIME_INTERVAL_CODEDATETIME_INTERVAL_PRECISIONDAYDAY_HOURDAY_MICROSECONDDAY_MINUTEDAY_SECONDDAYOFMONTHDAYOFWEEKDAYOFYEARDBCCDEALLOCATEDECDECIMALDECLAREDEFAULTDEFAULTSDEFERRABLEDEFERREDDEFINEDDEFINERDEGREEDELAY_KEY_WRITEDELAYEDDELETEDELIMITERDELIMITERSDENSE_RANKDENYDEPTHDEREFDERIVEDDESCDESCRIBEDESCRIPTORDESTROYDESTRUCTORDETERMINISTICDIAGNOSTICSDICTIONARYDISABLEDISCONNECTDISKDISPATCHDISTINCTDISTINCTROWDISTRIBUTEDDIVDODOMAINDOUBLEDROPDUALDUMMYDUMPDYNAMICDYNAMIC_FUNCTIONDYNAMIC_FUNCTION_CODEEACHELEMENTELSEELSEIFENABLEENCLOSEDENCODINGENCRYPTEDENDEND-EXECENUMEQUALSERRLVLESCAPEESCAPEDEVERYEXCEPTEXCEPTIONEXCLUDEEXCLUDINGEXCLUSIVEEXECEXECUTEEXISTINGEXISTSEXITEXPEXPLAINEXTERNALEXTRACTFALSEFETCHFIELDSFILEFILLFACTORFILTERFINALFIRSTFLOATFLOAT4FLOAT8FLOORFLUSHFOLLOWINGFORFORCEFOREIGNFORTRANFORWARDFOUNDFREEFREETEXTFREETEXTTABLEFREEZEFROMFULLFULLTEXTFUNCTIONFUSIONGGENERALGENERATEDGETGLOBALGOGOTOGRANTGRANTEDGRANTSGREATESTGROUPGROUPINGHANDLERHAVINGHEADERHEAPHIERARCHYHIGH_PRIORITYHOLDHOLDLOCKHOSTHOSTSHOURHOUR_MICROSECONDHOUR_MINUTEHOUR_SECONDIDENTIFIEDIDENTITYIDENTITY_INSERTIDENTITYCOLIFIGNOREILIKEIMMEDIATEIMMUTABLEIMPLEMENTATIONIMPLICITININCLUDEINCLUDINGINCREMENTINDEXINDICATORINFILEINFIXINHERITINHERITSINITIALINITIALIZEINITIALLYINNERINOUTINPUTINSENSITIVEINSERTINSERT_IDINSTANCEINSTANTIABLEINSTEADINTINT1INT2INT3INT4INT8INTEGERINTERSECTINTERSECTIONINTERVALINTOINVOKERISISAMISNULLISOLATIONITERATEJOINKKEYKEY_MEMBERKEY_TYPEKEYSKILLLANCOMPILERLANGUAGELARGELASTLAST_INSERT_IDLATERALLEADINGLEASTLEAVELEFTLENGTHLESSLEVELLIKELIMITLINENOLINESLISTENLNLOADLOCALLOCALTIMELOCALTIMESTAMPLOCATIONLOCATORLOCKLOGINLOGSLONGLONGBLOBLONGTEXTLOOPLOW_PRIORITYLOWERMMAPMATCHMATCHEDMAXMAX_ROWSMAXEXTENTSMAXVALUEMEDIUMBLOBMEDIUMINTMEDIUMTEXTMEMBERMERGEMESSAGE_LENGTHMESSAGE_OCTET_LENGTHMESSAGE_TEXTMETHODMIDDLEINTMINMIN_ROWSMINUSMINUTEMINUTE_MICROSECONDMINUTE_SECONDMINVALUEMLSLABELMODMODEMODIFIESMODIFYMODULEMONTHMONTHNAMEMOREMOVEMULTISETMUMPSMYISAMNAMENAMESNATIONALNATURALNCHARNCLOBNESTINGNEWNEXTNONO_WRITE_TO_BINLOGNOAUDITNOCHECKNOCOMPRESSNOCREATEDBNOCREATEROLENOCREATEUSERNOINHERITNOLOGINNONCLUSTEREDNONENORMALIZENORMALIZEDNOSUPERUSERNOTNOTHINGNOTIFYNOTNULLNOWAITNULLNULLABLENULLIFNULLSNUMBERNUMERICOBJECTOCTET_LENGTHOCTETSOFOFFOFFLINEOFFSETOFFSETSOIDSOLDONONLINEONLYOPENOPENDATASOURCEOPENQUERYOPENROWSETOPENXMLOPERATIONOPERATOROPTIMIZEOPTIONOPTIONALLYOPTIONSORORDERORDERINGORDINALITYOTHERSOUTOUTEROUTFILEOUTPUTOVEROVERLAPSOVERLAYOVERRIDINGOWNERPACK_KEYSPADPARAMETERPARAMETER_MODEPARAMETER_NAMEPARAMETER_ORDINAL_POSITIONPARAMETER_SPECIFIC_CATALOGPARAMETER_SPECIFIC_NAMEPARAMETER_SPECIFIC_SCHEMAPARAMETERSPARTIALPARTITIONPASCALPASSWORDPATHPCTFREEPERCENTPERCENT_RANKPERCENTILE_CONTPERCENTILE_DISCPLACINGPLANPLIPOSITIONPOSTFIXPOWERPRECEDINGPRECISIONPREFIXPREORDERPREPAREPREPAREDPRESERVEPRIMARYPRINTPRIORPRIVILEGESPROCPROCEDURALPROCEDUREPROCESSPROCESSLISTPUBLICPURGEQUOTERAID0RAISERRORRANGERANKRAWREADREADSREADTEXTREALRECHECKRECONFIGURERECURSIVEREFREFERENCESREFERENCINGREGEXPREGR_AVGXREGR_AVGYREGR_COUNTREGR_INTERCEPTREGR_R2REGR_SLOPEREGR_SXXREGR_SXYREGR_SYYREINDEXRELATIVERELEASERELOADRENAMEREPEATREPEATABLEREPLACEREPLICATIONREQUIRERESETRESIGNALRESOURCERESTARTRESTORERESTRICTRESULTRETURNRETURNED_CARDINALITYRETURNED_LENGTHRETURNED_OCTET_LENGTHRETURNED_SQLSTATERETURNSREVOKERIGHTRLIKEROLEROLLBACKROLLUPROUTINEROUTINE_CATALOGROUTINE_NAMEROUTINE_SCHEMAROWROW_COUNTROW_NUMBERROWCOUNTROWGUIDCOLROWIDROWNUMROWSRULESAVESAVEPOINTSCALESCHEMASCHEMA_NAMESCHEMASSCOPESCOPE_CATALOGSCOPE_NAMESCOPE_SCHEMASCROLLSEARCHSECONDSECOND_MICROSECONDSECTIONSECURITYSELECTSELFSENSITIVESEPARATORSEQUENCESERIALIZABLESERVER_NAMESESSIONSESSION_USERSETSETOFSETSSETUSERSHARESHOWSHUTDOWNSIGNALSIMILARSIMPLESIZESMALLINTSOMESONAMESOURCESPACESPATIALSPECIFICSPECIFIC_NAMESPECIFICTYPESQLSQL_BIG_RESULTSQL_BIG_SELECTSSQL_BIG_TABLESSQL_CALC_FOUND_ROWSSQL_LOG_OFFSQL_LOG_UPDATESQL_LOW_PRIORITY_UPDATESSQL_SELECT_LIMITSQL_SMALL_RESULTSQL_WARNINGSSQLCASQLCODESQLERRORSQLEXCEPTIONSQLSTATESQLWARNINGSQRTSSLSTABLESTARTSTARTINGSTATESTATEMENTSTATICSTATISTICSSTATUSSTDDEV_POPSTDDEV_SAMPSTDINSTDOUTSTORAGESTRAIGHT_JOINSTRICTSTRINGSTRUCTURESTYLESUBCLASS_ORIGINSUBLISTSUBMULTISETSUBSTRINGSUCCESSFULSUMSUPERUSERSYMMETRICSYNONYMSYSDATESYSIDSYSTEMSYSTEM_USERTABLETABLE_NAMETABLESTABLESAMPLETABLESPACETEMPTEMPLATETEMPORARYTERMINATETERMINATEDTEXTTEXTSIZETHANTHENTIESTIMETIMESTAMPTIMEZONE_HOURTIMEZONE_MINUTETINYBLOBTINYINTTINYTEXTTOTOASTTOPTOP_LEVEL_COUNTTRAILINGTRANTRANSACTIONTRANSACTION_ACTIVETRANSACTIONS_COMMITTEDTRANSACTIONS_ROLLED_BACKTRANSFORMTRANSFORMSTRANSLATETRANSLATIONTREATTRIGGERTRIGGER_CATALOGTRIGGER_NAMETRIGGER_SCHEMATRIMTRUETRUNCATETRUSTEDTSEQUALTYPEUESCAPEUIDUNBOUNDEDUNCOMMITTEDUNDERUNDOUNENCRYPTEDUNIONUNIQUEUNKNOWNUNLISTENUNLOCKUNNAMEDUNNESTUNSIGNEDUNTILUPDATEUPDATETEXTUPPERUSAGEUSEUSERUSER_DEFINED_TYPE_CATALOGUSER_DEFINED_TYPE_CODEUSER_DEFINED_TYPE_NAMEUSER_DEFINED_TYPE_SCHEMAUSINGUTC_DATEUTC_TIMEUTC_TIMESTAMPVACUUMVALIDVALIDATEVALIDATORVALUEVALUESVAR_POPVAR_SAMPVARBINARYVARCHARVARCHAR2VARCHARACTERVARIABLEVARIABLESVARYINGVERBOSEVIEWVOLATILEWAITFORWHENWHENEVERWHEREWHILEWIDTH_BUCKETWINDOWWITHWITHINWITHOUTWORKWRITEWRITETEXTX509XORYEARYEAR_MONTHZEROFILLZONE","tags":[{"name":"SQL","slug":"SQL","permalink":"https://betgar.github.io/tags/SQL/"}]},{"title":"jQuery cookieæ’ä»¶ä½¿ç”¨ä¾‹å­","date":"2018-02-26T12:00:00.000Z","path":"2018/02/26/jquery-cookie-plug-api/","text":"jQuery cookieæ’ä»¶ä½¿ç”¨ä¾‹å­ è®°å½•ä¸€ä¸‹jQuery-cookieçš„ä½¿ç”¨æ–¹æ³•ã€‚ ä½¿ç”¨ jQuery.cookieä½¿ç”¨éå¸¸çš„ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ æ„é€ å‡½æ•°1234567891011121314/* @param &#123;string&#125; name - cookieé”®. * @param &#123;string&#125; value - cookieå€¼. * @param &#123;Object&#125; options - cookieçš„æ§åˆ¶å‚æ•° * @param &#123;Number|Date&#125; options.expires * æœŸæœ›ä»€ä¹ˆæ—¶å€™cookieè¿‡æœŸï¼Œä»å½“å‰æ—¶é—´è®¡ç®—ï¼ˆæµè§ˆå™¨æ—¶é—´ï¼‰ã€‚ * å¦‚æœexpiresä¸ºnullæˆ–è€…è¢«å¿½ç•¥ï¼Œåˆ™cookieåœ¨å½“å‰sessionæœ‰æ•ˆï¼Œé€€å‡ºæµè§ˆå™¨å¤±æ•ˆã€‚ * * @param &#123;string&#125; options.path - è®¾ç½®cookieçš„é¡µé¢è·¯å¾„ï¼›é»˜è®¤è®¾ç½®é¡µé¢ã€‚ * @param &#123;string&#125; options.domain - cookieçš„åŸŸåœ°å€ (default: é»˜è®¤åˆ›å»ºcookieé¡µé¢). * @param &#123;Boolean&#125; options.secure - è®¾ç½®ç»™cookieä¹‹åï¼Œä¼ é€’cookieç»™æœåŠ¡ç«¯ * éœ€è¦ä½¿ç”¨å®‰å…¨åè®®(ä¾‹å¦‚:https) * @type undefined */$.cookie('the_cookie', 'the_value', &#123;expires: 7, path: '/', domain: 'jquery.com', secure: true&#125;); åˆ›å»ºcookie è®¾ç½®cookie 12// Set the value of a cookie.$.cookie('the_cookie', 'the_value'); ä½¿ç”¨options 12// Create a cookie with all available options.$.cookie('the_cookie', 'the_value', &#123;expires: 7, path: '/', domain: 'jquery.com', secure: true&#125;); åˆ é™¤cookie 12345// Delete a cookie by passing null as value.$.cookie('the_cookie', null);// æ³¨æ„ç‰ˆæœ¬$.removeCookie('the_cookie', options); è¯»å–cookie è·å–cookie 1$.cookie('the_cookie'); source-code123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117/*! * jQuery Cookie Plugin v1.4.1 * https://github.com/carhartl/jquery-cookie * * Copyright 2013 Klaus Hartl * Released under the MIT license */(function (factory) &#123; if (typeof define === 'function' &amp;&amp; define.amd) &#123; // AMD define(['jquery'], factory); &#125; else if (typeof exports === 'object') &#123; // CommonJS factory(require('jquery')); &#125; else &#123; // Browser globals factory(jQuery); &#125;&#125;(function ($) &#123; var pluses = /\\+/g; function encode(s) &#123; return config.raw ? s : encodeURIComponent(s); &#125; function decode(s) &#123; return config.raw ? s : decodeURIComponent(s); &#125; function stringifyCookieValue(value) &#123; return encode(config.json ? JSON.stringify(value) : String(value)); &#125; function parseCookieValue(s) &#123; if (s.indexOf('\"') === 0) &#123; // This is a quoted cookie as according to RFC2068, unescape... s = s.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\'); &#125; try &#123; // Replace server-side written pluses with spaces. // If we can't decode the cookie, ignore it, it's unusable. // If we can't parse the cookie, ignore it, it's unusable. s = decodeURIComponent(s.replace(pluses, ' ')); return config.json ? JSON.parse(s) : s; &#125; catch(e) &#123;&#125; &#125; function read(s, converter) &#123; var value = config.raw ? s : parseCookieValue(s); return $.isFunction(converter) ? converter(value) : value; &#125; var config = $.cookie = function (key, value, options) &#123; // Write if (value !== undefined &amp;&amp; !$.isFunction(value)) &#123; options = $.extend(&#123;&#125;, config.defaults, options); if (typeof options.expires === 'number') &#123; var days = options.expires, t = options.expires = new Date(); t.setTime(+t + days * 864e+5); &#125; return (document.cookie = [ encode(key), '=', stringifyCookieValue(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : '' ].join('')); &#125; // Read var result = key ? undefined : &#123;&#125;; // To prevent the for loop in the first place assign an empty array // in case there are no cookies at all. Also prevents odd result when // calling $.cookie(). var cookies = document.cookie ? document.cookie.split('; ') : []; for (var i = 0, l = cookies.length; i &lt; l; i++) &#123; var parts = cookies[i].split('='); var name = decode(parts.shift()); var cookie = parts.join('='); if (key &amp;&amp; key === name) &#123; // If second argument (value) is a function it's a converter... result = read(cookie, value); break; &#125; // Prevent storing a cookie that we couldn't decode. if (!key &amp;&amp; (cookie = read(cookie)) !== undefined) &#123; result[name] = cookie; &#125; &#125; return result; &#125;; config.defaults = &#123;&#125;; $.removeCookie = function (key, options) &#123; if ($.cookie(key) === undefined) &#123; return false; &#125; // Must not alter options, thus extending a fresh object... $.cookie(key, '', $.extend(&#123;&#125;, options, &#123; expires: -1 &#125;)); return !$.cookie(key); &#125;;&#125;));","tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://betgar.github.io/tags/jQuery/"},{"name":"cookie","slug":"cookie","permalink":"https://betgar.github.io/tags/cookie/"}]},{"title":"NPMçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿","date":"2018-01-08T12:00:00.000Z","path":"2018/01/08/how-to-use-utldtree/","text":"utldtree utldtree.sqlæ˜¯Oracle æä¾›çš„ä¸€ä¸ªåˆ†æä¾èµ–çš„sqlæ–‡ä»¶ã€‚ è·¯å¾„ï¼š%ORACLE_CLIENT%\\RDBMS\\ADMIN å› ä¸ºæ²¡æœ‰åŒ…å«åœ¨æ•°æ®åº“æ ‡å‡†åŒ…ä¸­ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±æ‰‹åŠ¨åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œutldtreeä¸‹ã€‚ utldtreeåˆ›å»ºçš„objects: åºåˆ—ï¼šdeptree_seq 12&gt; create sequence deptree_seq cache 200&gt; è¡¨ï¼šdeptree_temptab 12345678&gt; create table deptree_temptab&gt; (&gt; object_id number,&gt; referenced_object_id number,&gt; nest_level number,&gt; seq# number &gt; )&gt; è§†å›¾ï¼šdeptreeï¼Œideptree è¿‡ç¨‹ï¼šdeptree_fill 12&gt; create or replace procedure deptree_fill (type char, schema char, name char)&gt; ç”Ÿæˆä¾èµ–å…³ç³»æ­¥éª¤ç”Ÿæˆä¾èµ–å…³ç³»12345678-- 1.ç”Ÿæˆä¾èµ–å…³ç³»-- è¯´æ˜ï¼šæ¯ä¸€æ¬¡è°ƒç”¨ä¼šâ€œæ¸…ç©ºâ€è¡¨DEPTREE_TEMPTAB-- å‚æ•°è¯´æ˜ï¼š-- typeï¼šå¯¹è±¡ç±»å‹ï¼ˆtable,view,procedure...ï¼‰-- schemaï¼šå½“å‰ç”¨æˆ·åç§°-- nameï¼šå¯¹è±¡åç§°ï¼ˆå¾…æŸ¥è¯¢çš„è¢«äººä¾èµ–çš„å¯¹è±¡ï¼‰CALL DEPTREE_FILL(&apos;PROCEDURE&apos;, &apos;EXCEL&apos;, &apos;CONCAT&apos;); æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ112345-- 2. æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ-- è¯´æ˜ï¼š-- è¿™ä¸ªè§†å›¾é™„å¸¦åµŒå¥—å±‚æ¬¡SELECT * FROM DEPTREE D ORDER BY D.SEQ#; æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ212345-- 3. æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ-- è¯´æ˜ï¼š-- æ­¥éª¤ï¼š3å’Œ2ä¸€æ ·ï¼Œåªæ˜¯å±•ç¤ºæ–¹å¼ä¸åŒSELECT * FROM IDEPTREE; åŠ¨æ€è¯­å¥ä¸­çš„objectä¾èµ–æ— æ³•åˆ†æ åŠ¨æ€çš„SQLè¯­å¥ä¸­çš„ä¾èµ–å…³ç³»æ˜¯æ— æ³•åˆ†æå‡ºæ¥ã€‚æ‰€ä»¥å»ºè®®å°‘ç”¨åŠ¨æ€è¯­å¥ã€‚ åŠ¨æ€è¯­å¥è§£å†³æ–¹æ³•ï¼šASK TOMä¸Šæä¾›äº†é—´æ¥çš„æ–¹æ³•ã€‚ 12345678910111213141516SQL&gt; 1 CREATE or replace PROCEDURE testproc IS 2 i PLS_INTEGER; 3 var_table varchar2(7):=&apos;TESTTAB&apos;; -- åˆ›å»ºä¸€ä¸ªé—´æ¥ä¾èµ–ï¼Œä½†æ˜¯åœ¨è¿‡ç¨‹ä¸­æ²¡æœ‰ä½¿ç”¨ã€‚4 cursor dummy is select * from TESTTAB; 5 BEGIN 6 execute immediate &apos;SELECT COUNT(*) FROM &apos;||var_table||&apos;&apos; INTO i; 7 dbms_output.put_line(TO_CHAR(i)); 8* END testproc; 9 / Procedure created. Elapsed: 00:00:00.09 SQL&gt; exec dbms_utility.get_dependency(&apos;TABLE&apos;, &apos;DWHADMIN&apos;,&apos;TESTTAB&apos;); å¼•ç”¨how to find the dependencies of table?","tags":[{"name":"PLSQL","slug":"PLSQL","permalink":"https://betgar.github.io/tags/PLSQL/"},{"name":"utldtree","slug":"utldtree","permalink":"https://betgar.github.io/tags/utldtree/"}]},{"title":"Oracle ç®¡ç†ç”¨æˆ·å¯¹è±¡ä¾èµ–å…³ç³»","date":"2018-01-08T12:00:00.000Z","path":"2018/01/08/how-to-find-schema-object-dependencies/","text":"Oracle ç®¡ç†ç”¨æˆ·å¯¹è±¡ä¾èµ–å…³ç³» èƒŒæ™¯ï¼š é¡¹ç›®ç»„ä½¿ç”¨å¾ˆå¤šçš„procedureä½œä¸ºå–æ•°æ¥å£ï¼Œç°åœ¨éœ€è¦é‡æ„åº•å±‚å–æ•°è¿‡ç¨‹ï¼Œä½†æ˜¯æ— æ³•æ‰¾å‡ºâ€œåº•å±‚å–æ•°procedureâ€è¢«å“ªäº›â€œé€»è¾‘å¯¹è±¡â€ï¼ˆprocedure, functionâ€¦etc.ï¼‰ä¾èµ–ã€‚æ— æ³•è¯„ä¼°å½±å“çš„èŒƒå›´ï¼ŒJavaæœåŠ¡ç«¯å¯ä»¥é€šè¿‡è°ƒç”¨å±‚æ¬¡åˆ†æå‡ºï¼Œä½†æ˜¯ç›´æ¥åœ¨æ•°æ®åº“ç«¯ï¼Œè¿›è¡Œè°ƒç”¨æ—¶å°±å¾ˆéš¾åˆ†æã€‚ é€šè¿‡æŸ¥æ‰¾å®˜æ–¹æ–‡æ¡£ï¼Œæ‰¾åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼Œç°åœ¨åˆ†äº«ç»™å¤§å®¶ã€‚ æ–¹æ³•ï¼š utldtree.sql DBMS_UTILITY.get_dependency(type, schema, object_name); utldtree utldtree.sqlæ˜¯Oracle æä¾›çš„ä¸€ä¸ªåˆ†æä¾èµ–çš„sqlæ–‡ä»¶ã€‚ è·¯å¾„ï¼š%ORACLE_CLIENT%\\RDBMS\\ADMIN å› ä¸ºæ²¡æœ‰åŒ…å«åœ¨æ•°æ®åº“æ ‡å‡†åŒ…ä¸­ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±æ‰‹åŠ¨åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œutldtreeä¸‹ã€‚ utldtreeåˆ›å»ºçš„objects: åºåˆ—ï¼šdeptree_seq 12&gt; create sequence deptree_seq cache 200&gt; è¡¨ï¼šdeptree_temptab 12345678&gt; create table deptree_temptab&gt; (&gt; object_id number,&gt; referenced_object_id number,&gt; nest_level number,&gt; seq# number &gt; )&gt; è§†å›¾ï¼šdeptreeï¼Œideptree è¿‡ç¨‹ï¼šdeptree_fill 12&gt; create or replace procedure deptree_fill (type char, schema char, name char)&gt; utldtreeç”Ÿæˆä¾èµ–å…³ç³»æ­¥éª¤ç”Ÿæˆä¾èµ–å…³ç³»12345678-- 1.ç”Ÿæˆä¾èµ–å…³ç³»-- è¯´æ˜ï¼šæ¯ä¸€æ¬¡è°ƒç”¨ä¼šâ€œæ¸…ç©ºâ€è¡¨DEPTREE_TEMPTAB-- å‚æ•°è¯´æ˜ï¼š-- typeï¼šå¯¹è±¡ç±»å‹ï¼ˆtable,view,procedure...ï¼‰-- schemaï¼šå½“å‰ç”¨æˆ·åç§°-- nameï¼šå¯¹è±¡åç§°ï¼ˆå¾…æŸ¥è¯¢çš„è¢«äººä¾èµ–çš„å¯¹è±¡ï¼‰CALL DEPTREE_FILL(&apos;PROCEDURE&apos;, &apos;FMIS0200&apos;, &apos;GET_ZWCS_DATA_KM&apos;); æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ112345-- 2. æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ-- è¯´æ˜ï¼š-- è¿™ä¸ªè§†å›¾é™„å¸¦åµŒå¥—å±‚æ¬¡SELECT * FROM DEPTREE D ORDER BY D.SEQ#; æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ212345-- 3. æŸ¥è¯¢ä¾èµ–å…³ç³»ç»“æœ-- è¯´æ˜ï¼š-- æ­¥éª¤ï¼š3å’Œ2ä¸€æ ·ï¼Œåªæ˜¯å±•ç¤ºæ–¹å¼ä¸åŒSELECT * FROM IDEPTREE; DBMS_UTILITY.get_dependency oracle 11g R1å¼€å§‹æä¾›ç®¡ç†object dependencieså…³ç³». 12345678910111213-- sql window æ‰§è¡Œsqlè¯­å¥-- å‚æ•°è¯´æ˜ï¼š-- typeï¼šå¯¹è±¡ç±»å‹-- schemaï¼šæ¨¡å¼åç§°ï¼ˆç”¨æˆ·åç§°ï¼‰-- nameï¼šobjectçš„å¯¹è±¡åç§°call dbms_utility.get_dependency(&apos;PROCEDURE&apos;, &apos;LALAL&apos;, &apos;TEST&apos;);-- output tabé¡µé¢æŸ¥çœ‹ç»“æœ/*DEPENDENCIES ON LALAL.TEST------------------------------------------------------------------...*/ åŠ¨æ€è¯­å¥ä¸­çš„objectä¾èµ–æ— æ³•åˆ†æ åŠ¨æ€çš„SQLè¯­å¥ä¸­çš„ä¾èµ–å…³ç³»æ˜¯æ— æ³•åˆ†æå‡ºæ¥ã€‚æ‰€ä»¥å»ºè®®å°‘ç”¨åŠ¨æ€è¯­å¥ã€‚ åŠ¨æ€è¯­å¥è§£å†³æ–¹æ³•ï¼šASK TOMä¸Šæä¾›äº†é—´æ¥çš„æ–¹æ³•ã€‚ åœ¨åˆ›å»ºprocedureæˆ–è€…functionä¸­åœ¨declareéƒ¨åˆ†ï¼Œåˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºä¾èµ–ã€‚ 1234567891011121314 CREATE or replace PROCEDURE testproc IS i PLS_INTEGER; var_table varchar2(7):=&apos;TESTTAB&apos;; -- åˆ›å»ºä¸€ä¸ªâ€œç›´æ¥â€ä¾èµ–ï¼Œä½†æ˜¯åœ¨è¿‡ç¨‹ä¸­æ²¡æœ‰ä½¿ç”¨dummyå˜é‡ã€‚ cursor dummy is select * from TESTTAB; BEGIN -- åŠ¨æ€è¯­å¥ä¾èµ–çš„object(tableå¯¹è±¡) execute immediate &apos;SELECT COUNT(*) FROM &apos;||var_table||&apos;&apos; INTO i; dbms_output.put_line(TO_CHAR(i)); END testproc; / -- æŸ¥è¯¢ä¾èµ–exec dbms_utility.get_dependency(&apos;TABLE&apos;, &apos;DWHADMIN&apos;,&apos;TESTTAB&apos;); è™½ç„¶â€œåŠ¨æ€è¯­å¥ä¾èµ–â€åœ¨ä¾èµ–å…³ç³»ä¸­æ— æ³•åˆ†æï¼Œä½†æ˜¯åœ¨procedureçš„declareéƒ¨åˆ†æ˜¾ç¤ºä¾èµ–äº†TESTTABï¼Œæ‰€ä»¥ä½¿ç”¨Oracleçš„ä¾èµ–ç®¡ç†è¿˜æ˜¯å¯ä»¥æ‰¾åˆ°â€œä¾èµ–å…³ç³»â€ã€‚ 12345&gt; -- å£°æ˜â€œæ¸¸æ ‡â€ï¼Œoracleæ˜¯åªä¼šåˆ†é…â€œæ¸¸æ ‡çš„å‚¨å­˜ç©ºé—´â€&gt; -- ä¸ä¼šçœŸæ­£æ‰§è¡Œsqlè¯­å¥å–æ•°ï¼Œå¦‚æœä½ æ€•å½±å“æ€§èƒ½ï¼Œå¯ä»¥åŠ ä¸Šwhereæ¡ä»¶ï¼Œå–æ•°ä¸º0æ¡è®°å½•å³å¯ã€‚&gt; -- è¯¦æƒ…å¯ä»¥æŸ¥çœ‹where does the Cursor stores the rows?&gt; cursor dummy is select * from TESTTAB; &gt; æ˜¾ç¤ºä¾èµ–ï¼Œä½†æ˜¯ä¸ä½¿ç”¨dummyå˜é‡ï¼Œè¿™æ˜¯ä¸å¥½çš„å®è·µã€‚å¥½çš„å®è·µæ˜¯è¦æ¶ˆç­åŠ¨æ€SQLè¯­å¥ï¼Œå› ä¸ºåŠ¨æ€å¸¦æ¥äº†æå¤§çš„ç»´æŠ¤æˆæœ¬ã€‚ é™„å½•-utldtree.sqlï¼ˆutldtree is stand for utility deep treeï¼‰ ä½¿ç”¨command window æ‰§è¡Œå®ƒã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138Rem Rem $Header: utldtree.sql,v 1.2 1992/10/26 16:24:44 RKOOI Stab $ Rem Rem Copyright (c) 1991 by Oracle Corporation Rem NAMERem deptree.sql - Show objects recursively dependent on given objectRem DESCRIPTIONRem This procedure, view and temp table will allow you to see allRem objects that are (recursively) dependent on the given object.Rem Note: you will only see objects for which you have permission.Rem Examples:Rem execute deptree_fill(&apos;procedure&apos;, &apos;scott&apos;, &apos;billing&apos;);Rem select * from deptree order by seq#;RemRem execute deptree_fill(&apos;table&apos;, &apos;scott&apos;, &apos;emp&apos;);Rem select * from deptree order by seq#;RemRem execute deptree_fill(&apos;package body&apos;, &apos;scott&apos;, &apos;accts_payable&apos;);Rem select * from deptree order by seq#;RemRem A prettier way to display this information thanRem select * from deptree order by seq#;Rem isRem select * from ideptree;Rem This shows the dependency relationship via indenting. NoticeRem that no order by clause is needed with ideptree.Rem RETURNSRem Rem NOTESRem Run this script once for each schema that needs this utility.Rem Rem MODIFIED (MM/DD/YY)Rem rkooi 10/26/92 - owner -&gt; schema for SQL2 Rem glumpkin 10/20/92 - Renamed from DEPTREE.SQL Rem rkooi 09/02/92 - change ORU errors Rem rkooi 06/10/92 - add rae errors Rem rkooi 01/13/92 - update for sys vs. regular user Rem rkooi 01/10/92 - fix ideptree Rem rkooi 01/10/92 - Better formatting, add ideptree view Rem rkooi 12/02/91 - deal with cursors Rem rkooi 10/19/91 - Creation drop sequence deptree_seq/create sequence deptree_seq cache 200 /* cache 200 to make sequence faster *//drop table deptree_temptab/create table deptree_temptab( object_id number, referenced_object_id number, nest_level number, seq# number )/create or replace procedure deptree_fill (type char, schema char, name char) is obj_id number;begin delete from deptree_temptab; commit; select object_id into obj_id from all_objects where owner = upper(deptree_fill.schema) and object_name = upper(deptree_fill.name) and object_type = upper(deptree_fill.type); insert into deptree_temptab values(obj_id, 0, 0, 0); insert into deptree_temptab select object_id, referenced_object_id, level, deptree_seq.nextval from public_dependency connect by prior object_id = referenced_object_id start with referenced_object_id = deptree_fill.obj_id;exception when no_data_found then raise_application_error(-20000, &apos;ORU-10013: &apos; || type || &apos; &apos; || schema || &apos;.&apos; || name || &apos; was not found.&apos;);end;/drop view deptree/set echo onREM This view will succeed if current user is sys. This view shows REM which shared cursors depend on the given object. If the currentREM user is not sys, then this view get an error either about lackREM of privileges or about the non-existence of table x$kglxs.set echo offcreate view sys.deptree (nested_level, type, schema, name, seq#)as select d.nest_level, o.object_type, o.owner, o.object_name, d.seq# from deptree_temptab d, dba_objects o where d.object_id = o.object_id (+)union all select d.nest_level+1, &apos;CURSOR&apos;, &apos;&lt;shared&gt;&apos;, &apos;&quot;&apos;||c.kglnaobj||&apos;&quot;&apos;, d.seq#+.5 from deptree_temptab d, x$kgldp k, x$kglob g, obj$ o, user$ u, x$kglob c, x$kglxs a where d.object_id = o.obj# and o.name = g.kglnaobj and o.owner# = u.user# and u.name = g.kglnaown and g.kglhdadr = k.kglrfhdl and k.kglhdadr = a.kglhdadr /* make sure it is not a transitive */ and k.kgldepno = a.kglxsdep /* reference, but a direct one */ and k.kglhdadr = c.kglhdadr and c.kglhdnsp = 0 /* a cursor *//set echo onREM This view will succeed if current user is not sys. This viewREM does *not* show which shared cursors depend on the given object.REM If the current user is sys then this view will get an error REM indicating that the view already exists (since prior view createREM will have succeeded).set echo offcreate view deptree (nested_level, type, schema, name, seq#)as select d.nest_level, o.object_type, o.owner, o.object_name, d.seq# from deptree_temptab d, all_objects o where d.object_id = o.object_id (+)/drop view ideptree/create view ideptree (dependencies)as select lpad(&apos; &apos;,3*(max(nested_level))) || max(nvl(type, &apos;&lt;no permission&gt;&apos;) || &apos; &apos; || schema || decode(type, NULL, &apos;&apos;, &apos;.&apos;) || name) from deptree group by seq# /* So user can omit sort-by when selecting from ideptree *// å¼•ç”¨how to find the dependencies of table? where does the Cursor stores the rows? 6-schema object dependencies (Oracle Database Concepts, 11g Release 1)","tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://betgar.github.io/tags/Oracle/"},{"name":"PLSQL","slug":"PLSQL","permalink":"https://betgar.github.io/tags/PLSQL/"}]},{"title":"excelçš„concatenateå‡½æ•°","date":"2017-12-28T12:00:00.000Z","path":"2017/12/28/excel-function-concatenate/","text":"Excelçš„concatenateå‡½æ•° Excelä¸­çš„å­—ç¬¦ä¸²è¿æ¥å‡½æ•°ï¼Œç±»ä¼¼ä¸€äº›concatå‡½æ•°ã€‚ é™åˆ¶ï¼šæœ€å¤šæ”¯æŒ255ä¸ªå‚æ•°è¿æ¥ã€‚ æ³¨æ„ï¼šè¿æ¥å­—ç¬¦æ—¶ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦å½“æˆä¸€ä¸ªå…ƒç´ çœ‹å¾…ã€‚ æ —å­ï¼š 12// è¿æ¥å•å…ƒæ ¼ï¼ŒB2,C2,D2å†…å®¹CONCATENATE(B2,C2,D2) concatenateç”Ÿæˆsqlè¯­å¥ å¦‚æœæƒ³æŠŠExcelï¼Œç„¶åæƒ³å¯¼å…¥æ•°æ®åº“ï¼Œè¿™ç§æ–¹å¼æ¯”è¾ƒæ–¹ä¾¿ã€‚ å­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹ å­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹çš„è¿æ¥æ–¹å¼ æ —å­ï¼š 12345678// å­—ç¬¦ä¸²ï¼šB2// æ•°å­—: C2,D2CONCATENATE(&quot;INSERT INTO TEST () VALUES(&quot;, &apos;&quot;, B2, &quot;&apos;&quot;, &quot;,&quot;, C2, &quot;,&quot;, D2, &quot;);&quot;)// å•å…ƒæ ¼æ è¾“å…¥ï¼šA2:A200// A2:A200 ï¼šèƒ½å¤Ÿé€‰ä¸­A2-A200çš„å•å…ƒæ ¼// å…¬å¼æ è¾“å…¥ï¼šå…¬å¼// è¾“å…¥å…¬å¼ï¼ŒCTRL+ENTERï¼ŒA2:A200éƒ½ä¼šå¡«å……ä¸€æ ·çš„å…¬å¼ã€‚","tags":[{"name":"Excel","slug":"Excel","permalink":"https://betgar.github.io/tags/Excel/"}]},{"title":"PL/SQLæ³¨é‡Šé£æ ¼","date":"2017-12-21T12:00:00.000Z","path":"2017/12/21/plsql-comment-style/","text":"PL/SQLæ³¨é‡Šé£æ ¼PL/SQL Comment Style å¸¸å¸¸çº ç»“ç¨‹åºçš„ç¼–ç¨‹é£æ ¼å’Œæ³¨é‡Šçš„é£æ ¼ã€‚PL/SQLä¸­çš„ç¼–ç¨‹é£æ ¼ä¹Ÿæ˜¯å„ç§æµæ´¾ï¼Œæ‰€ä»¥æˆ‘å°±çœ‹äº†ä¸‹Oracleå†…ç½®å‡½æ•°çš„ç¼–ç¨‹é£æ ¼å’Œæ³¨é‡Šé£æ ¼ï¼Œè‡ªå·±æ€»ç»“äº†ä¸‹ï¼Œè®°å½•ä¸‹æ¥ï¼Œå½“ä½œå‚è€ƒã€‚ Document Style12345678910111213141516------------------ ä¸»é¢˜(å¤§å†™)---- æ­£æ–‡å¼€å§‹-- å•¦å•¦å•¦å•¦-- ç¬¬ä¸€æ®µè½ç»“æŸ.-- -- ç¬¬äºŒæ®µå¼€å§‹-- å•¦å•¦å•¦-- ç¬¬äºŒæ®µç»“æŸã€‚------------------- ä¸»é¢˜1-- -- æ­£æ–‡å¼€å§‹-- æ­£æ–‡ç»“æŸã€‚ Procedure Example å­˜å‚¨è¿‡ç¨‹æ —å­ 1234567891011121314procedure waitany(name out varchar2, message out varchar2, status out integer, timeout in number default maxwait);-- æè¿°è¿‡ç¨‹çš„ä½œç”¨...-- æ¥ç€è¯´...-- è¾“å…¥å‚æ•°ï¼š-- ç¬¬ä¸€ä¸ªå‚æ•°ï¼š...-- ç¬¬ä¸€ä¸ªå‚æ•°å‚æ•°æè¿°...-- ç¬¬Nä¸ªå‚æ•°: ....-- è¾“å‡ºå‚æ•°(è¿”å›å€¼)ï¼š-- ç¬¬ä¸€ä¸ªå‚æ•°ï¼š ...-- å¼‚å¸¸å¤„ç†ï¼š...-- å¤„ç†æè¿°... 123456789101112131415161718192021222324252627282930procedure waitany(name out varchar2, message out varchar2, status out integer, timeout in number default maxwait); -- Wait for an alert to occur for any of the alerts for which this -- session is registered. Although probably unusual, the same session -- that waits for the alert may also first signal the alert. In this -- case remember to commit after the signal and prior to the wait. -- Otherwise a lock request exception (status 4) will occur. This -- call always performs a commit. -- Input parameters: -- timeout -- The maximum time to wait for an alert. If no alert occurs before -- timeout seconds, then this call will return with status of 1. -- Output parameters: -- name -- The name of the alert that occurred, in uppercase. -- message -- The message associated with the alert. This is the message -- provided by the &apos;signal&apos; call. Note that if multiple signals -- on this alert occurred before the waitany call, then the message -- will correspond to the most recent signal call. Messages from -- prior signal calls will be discarded. -- status -- 0 - alert occurred -- 1 - timeout occurred -- Errors raised: -- -20000, ORU-10024: there are no alerts registered. -- Cause: You must register an alert before waiting. -- DBMS_ALERT Example oracleä¸­çš„DBMS_ALERTæ —å­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285create or replace package sys.dbms_alert is ------------ -- OVERVIEW -- -- This package provides support for the asynchronous (as opposed to -- polling) notification of database events. By appropriate use of -- this package and database triggers, an application can cause itself -- to be notified whenever values of interest in the database are -- changed. -- -- For example, suppose a graphics tool is displaying a graph of some -- data from a database table. The graphics tool can, after reading and -- graphing the data, wait on a database alert (&apos;dbms_alert.waitone&apos;) -- covering the data just read. The tool will automatically wake up when -- the data is changed by any other user. All that is required is that a -- trigger be placed on the database table which then performs a signal -- (&apos;dbms_alert.signal&apos;) whenever the trigger is fired. -- -- Alerts are transaction based. This means that the waiting session -- does not get alerted until the transaction signalling the alert commits. -- -- There can be any number of concurrent signallers of a given alert, and -- there can be any number of concurrent waiters on a given alert. -- -- A waiting application will be blocked in the database and cannot do -- any other work. -- -- Most of the calls in the package, except for &apos;signal&apos;, do commits. -- ----------- -- EXAMPLE -- -- Suppose the application wishes to graph average salaries, say by -- department, for all employees. So the application needs to know -- whenever &apos;emp&apos; is changed. The application would look like this: -- -- dbms_alert.register(&apos;emp_table_alert&apos;); -- readagain: -- &lt;read the emp table and graph it&gt; -- dbms_alert.waitone(&apos;emp_table_alert&apos;, :message, :status); -- if status = 0 then goto readagain; else &lt;error condition&gt; -- -- The &apos;emp&apos; table would have a trigger similar to the following: -- -- create trigger emptrig after insert or update or delete on emp -- begin -- dbms_alert.signal(&apos;emp_table_alert&apos;, &apos;message_text&apos;); -- end; -- -- When the application is no longer interested in the alert, it does -- dbms_alert.remove(&apos;emp_table_alert&apos;); -- This is important since it reduces the amount of work required by -- the alert signaller. -- -- If a session exits (or dies) while there exist registered alerts, -- they will eventually be cleaned up by future users of this package. -- -- The above example guarantees that the application will always see -- the latest data, although it may not see every intermediate value. -------------- -- VARIATIONS -- -- The application can register for multiple events and can then wait for -- any of them to occur using the &apos;waitany&apos; call. -- -- An application can also supply an optional &apos;timeout&apos; parameter to the -- &apos;waitone&apos; or &apos;waitany&apos; calls. A &apos;timeout&apos; of 0 returns immediately -- if there is no pending alert. -- -- The signalling session can optionally pass a message which will be -- received by the waiting session. -- -- Alerts may be signalled more often than the corresponding application -- &apos;wait&apos; calls. In such cases the older alerts are discaded. The -- application always gets the latest alert (based on transaction commit -- times). -- -- If the application does not require transaction based alerts, then the -- &apos;dbms_pipe&apos; package may provide a useful alternative -- -- If the transaction is rolled back after the call to &apos;dbms_alert.signal&apos;, -- no alert will occur. -- -- It is possible to receive an alert, read the data, and find that no -- data has changed. This is because the data changed after the *prior* -- alert, but before the data was read for that *prior* alert. -------------------------- -- IMPLEMENTATION DETAILS -- -- In most cases the implementation is event-driven, i.e., there are no -- polling loops. There are two cases where polling loops can occur: -- -- 1) Parallel mode. If your database is running parallel mode then -- a polling loop is required to check for alerts from another -- instance. The polling loop defaults to one second and is settable -- by the &apos;set_defaults&apos; call. -- 2) Waitany call. If you use the &apos;waitany&apos; call, and a signalling -- session does a signal but does not commit within one second of the -- signal, then a polling loop is required so that this uncommitted -- alert does not camouflage other alerts. The polling loop begins -- at a one second interval and exponentially backs off to 30 second -- intervals. -- -- This package uses the dbms_lock package (for synchronization between -- signallers and waiters) and the dbms_pipe package (for asynchronous -- event dispatching). ------------------------------------------------------- -- INTERACTION WITH MULTI-THREADED AND PARALLEL SERVER -- -- When running with the parallel server AND multi-threaded server, a -- multi-threaded (dispatcher) &quot;shared server&quot; will be bound to a -- session (and therefore not shareable) during the time a session has -- any alerts &quot;registered&quot;, OR from the time a session &quot;signals&quot; an -- alert until the time the session commits. Therefore, applications -- which register for alerts should use &quot;dedicated servers&quot; rather than -- connecting through the dispatcher (to a &quot;shared server&quot;) since -- registration typically lasts for a long time, and applications which -- cause &quot;signals&quot; should have relatively short transactions so as not -- to tie up &quot;shared servers&quot; for too long. ------------ -- SECURITY -- -- Security on this package may be controlled by granting execute on -- this package to just those users or roles that you trust. You may -- wish to write a cover package on top of this one which restricts -- the alertnames used. Execute privilege on this cover package can -- then be granted rather than on this package. ------------- -- RESOURCES -- -- This package uses one database pipe and two locks for each alert a -- session has registered. --------------------- -- SPECIAL CONSTANTS -- maxwait constant integer := 86400000; -- 1000 days -- The maximum time to wait for an alert (essentially forever). ---------------------------- -- PROCEDURES AND FUNCTIONS -- procedure set_defaults(sensitivity in number); -- Set various defaults for this package. -- Input parameters: -- sensitivity -- In case a polling loop is required (see &quot;Implementation Details&quot; -- above), this is the time to sleep between polls. Deafult is 5 sec. -- procedure register(name in varchar2, cleanup in boolean default TRUE); -- Register interest in an alert. A session may register interest in -- an unlimited number of alerts. Alerts should be de-registered when -- the session no longer has any interest (see &apos;remove&apos;). This call -- always performs a &apos;commit&apos;. -- Input parameters: -- name -- The name of the alert in which this session is interested. -- WARNING: Alert names beginning with &apos;ORA$&apos; are reserved for use for -- products provided by Oracle Corporation. Name must be 30 bytes -- or less. The name is case-insensitive. -- cleanup -- This specifies whether we should perform cleanup of any orphaned -- pipes that may exist and are used by the dbms_alert package. This -- cleanup is only performed on the first call to &quot;register&quot; for each -- package instantiation. The default for the parameter is TRUE. -- procedure remove(name in varchar2); -- Remove alert from registration list. Do this when the session is no -- longer interested in an alert. Removing an alert is important -- since it will reduce the amount of work done by signalers of the alert. -- If a session dies without removing the alert, that alert will -- eventually (but not immediately) be cleaned up. This call always -- performs a commit. -- Input parameters: -- name -- The name of the alert to be removed from registration list. The -- name is case-insensitive. -- procedure removeall; -- Remove all alerts for this session from registration list. Do this -- when the session is no longer interested in any alerts. Removing -- alerts is important since it will reduce the amount of work done -- by signalers of the alert. If a session dies without removing all -- of its alerts, the alerts will eventually (but not immediately) -- be cleaned up. This call always performs a commit. -- -- This procedure is called automatically upon first reference to this -- package during a session. Therefore no alerts from prior sessions -- which may have terminated abnormally can affect this session. procedure waitany(name out varchar2, message out varchar2, status out integer, timeout in number default maxwait); -- Wait for an alert to occur for any of the alerts for which this -- session is registered. Although probably unusual, the same session -- that waits for the alert may also first signal the alert. In this -- case remember to commit after the signal and prior to the wait. -- Otherwise a lock request exception (status 4) will occur. This -- call always performs a commit. -- Input parameters: -- timeout -- The maximum time to wait for an alert. If no alert occurs before -- timeout seconds, then this call will return with status of 1. -- Output parameters: -- name -- The name of the alert that occurred, in uppercase. -- message -- The message associated with the alert. This is the message -- provided by the &apos;signal&apos; call. Note that if multiple signals -- on this alert occurred before the waitany call, then the message -- will correspond to the most recent signal call. Messages from -- prior signal calls will be discarded. -- status -- 0 - alert occurred -- 1 - timeout occurred -- Errors raised: -- -20000, ORU-10024: there are no alerts registered. -- Cause: You must register an alert before waiting. -- procedure waitone(name in varchar2, message out varchar2, status out integer, timeout in number default maxwait); -- Wait for specified alert to occur. If the alert was signalled since -- the register or last waitone/waitany, then this call will return -- immediately. The same session that waits for the alert may also -- first signal the alert. In this case remember to commit after the -- signal and prior to the wait. Otherwise a lock request exception -- (status 4) will occur. This call always performs a commit. -- Input parameters: -- name -- The name of the alert to wait for. The name is case-insensitive. -- timeout -- The maximum time to wait for this alert. If no alert occurs before -- timeout seconds, then this call will return with status of 1. -- If the named alert has not been registered then the this call -- will return after the timeout period expires. -- Output parameters: -- message -- The message associated with the alert. This is the message -- provided by the &apos;signal&apos; call. Note that if multiple signals -- on this alert occurred before the waitone call, then the message -- will correspond to the most recent signal call. Messages from -- prior signal calls will be discarded. The message may be up to -- 1800 bytes. -- status -- 0 - alert occurred -- 1 - timeout occurred -- procedure signal(name in varchar2, message in varchar2); -- Signal an alert. -- Input parameters: -- name -- Name of the alert to signal. The effect of the signal call only -- occurs when the transaction in which it is made commits. If the -- transaction rolls back, then the effect of the signal call is as -- if it had never occurred. All sessions that have registered -- interest in this alert will be notified. If the interested sessions -- are currently waiting, they will be awakened. If the interested -- sessions are not currently waiting, then they will be notified the -- next time they do a wait call. Multiple sessions may concurrently -- perform signals on the same alert. However the first session -- will block concurrent sessions until the first session commits. -- Name must be 30 bytes or less. It is case-insensitive. This call -- does not perform a commit. -- message -- Message to associate with this alert. This will be passed to -- the waiting session. The waiting session may be able to avoid -- reading the database after the alert occurs by using the -- information in this message. The message must be 1800 bytes or less.end; æ³¨é‡Šæ¨¡ç‰ˆ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176CREATE OR REPLACE PROCEDURE TEST_PA_COMMENT_STYLE(I_COMP_ID IN VARCHAR2, -- 1 I_MODE_IDS IN VARCHAR2, -- 2 I_OBJ_TYPES IN VARCHAR2, -- 3 I_OBJECTS IN VARCHAR2, -- 4 I_DATE_POINT IN VARCHAR2 -- 5 ) IS ------------------------------- -- TEST_PA_COMMENT_STYLEï¼š -- åŠŸèƒ½ï¼š -- æ ¹æ®å¯¹æ–¹æ•°æ®æ·»åŠ â€œæ¸…ç†å…³é”®å­—â€, -- æ ¹æ®â€œå€Ÿæ–¹â€æˆ–è€…â€œå€Ÿæ–¹â€ç»™å¯¹æ–¹æ·»åŠ å…³é”®å­—. -- ç¼–å†™äººï¼šLJN -- ç¼–å†™æ—¥æœŸï¼š2017-12-26 -- å†…éƒ¨æäº¤(commit): NO -- -- ç­–ç•¥(vpd)ï¼š -- æ—¶é—´å’Œå•ä½ -- -- ä¸­é—´è¡¨ï¼ˆtemporary tableï¼‰ï¼š -- 1. GT_GET_GLDX_SES -- 2. GT_GET_KMTMP_SES ----------------------- -- è¾“å…¥ï¼ˆINï¼‰å‚æ•°è¯´æ˜ï¼š -- I_OBJ_TYPESï¼š -- å•ä½id -- I_MODE_IDS: -- æ¸…ç†æ–¹å¼idï¼Œå¤šä¸ªé€—å·åˆ†éš”. -- I_OBJ_TYPESï¼š -- ç®¡ç†å¯¹è±¡ç±»å‹idï¼Œå¤šä¸ªé€—å·åˆ†éš”. -- I_OBJECTSï¼š -- ç®¡ç†å¯¹è±¡id. -- I_DATE_POINTï¼š -- æ—¶é—´ç‚¹ï¼›æ ¼å¼YYYY-MM-DD. --------------- -- è¾“å‡º(out)å‚æ•°ï¼š -- --------------- -- å¼‚å¸¸è¯´æ˜ï¼š -- E_IN_PARAM_EMPTY_EX -- å‚æ•°ä¸ºç©ºå¼‚å¸¸ ----------- -- å˜é‡å£°æ˜ -- V_SQLï¼š -- SQLè¯­å¥. ---------- -- å­ç¨‹åº -- FU_ADD_QUOTES_STR -- æ·»åŠ è‹±æ–‡å¼•å· -- FU_BUILD_IN_CONDITION -- æ„å»ºINæ¡ä»¶ ----------- -- å¼‚å¸¸å®šä¹‰ -- V_ERR_MSG -- é”™è¯¯æ¶ˆæ¯. V_SQL VARCHAR2(8000); V_ERR_MSG VARCHAR2(4000); V_ERR_CODE BINARY_INTEGER; E_PARAM_EMPTY_CODE CONSTANT BINARY_INTEGER DEFAULT - 20001; --------------- -- å‚æ•°ä¸ºç©ºå¼‚å¸¸. E_IN_PARAM_EMPTY_EX EXCEPTION; PRAGMA EXCEPTION_INIT(E_IN_PARAM_EMPTY_EX, -20001); FUNCTION FU_ADD_QUOTES_STR(I_STR IN VARCHAR2, -- 1 I_SEPARATOR IN VARCHAR2 DEFAULT &apos;,&apos; -- 2 ) RETURN VARCHAR2 IS V_ID_STR VARCHAR2(50); V_INDEX1 NUMBER(5) DEFAULT 0; V_INDEX2 NUMBER(5) DEFAULT 1; V_CONDITION VARCHAR2(4000); V_ID VARCHAR2(4000); O_STR VARCHAR2(4000); BEGIN V_ID_STR := I_STR; IF V_ID_STR IS NOT NULL THEN V_INDEX1 := INSTR(V_ID_STR, I_SEPARATOR); WHILE V_INDEX1 &gt; -1 LOOP V_INDEX1 := INSTR(V_ID_STR, I_SEPARATOR, V_INDEX2); IF V_INDEX1 = 0 THEN V_ID := SUBSTR(V_ID_STR, V_INDEX2); V_INDEX1 := -1; ELSE V_ID := SUBSTR(V_ID_STR, V_INDEX2, V_INDEX1 - V_INDEX2); V_INDEX2 := V_INDEX1 + 1; END IF; IF V_CONDITION IS NOT NULL THEN V_CONDITION := V_CONDITION || &apos;,&apos;; END IF; V_CONDITION := V_CONDITION || &apos;&apos;&apos;&apos; || V_ID || &apos;&apos;&apos;&apos;; END LOOP; END IF; O_STR := V_CONDITION; RETURN(O_STR); END FU_ADD_QUOTES_STR; -- END FU_ADD_QUOTES_STR FUNCTION FU_BUILD_IN_CONDITION(I_NUM_STR IN VARCHAR2, -- 1 I_CONDT_STR IN VARCHAR2, -- 2 I_SEPARATOR IN VARCHAR2 DEFAULT &apos;,&apos; --3 ) RETURN VARCHAR2 IS V_CONDITION VARCHAR2(4000); O_STR VARCHAR2(4000); BEGIN V_CONDITION := FU_ADD_QUOTES_STR(I_NUM_STR, I_SEPARATOR); O_STR := I_CONDT_STR || &apos; IN (&apos; || V_CONDITION || &apos;)&apos;; RETURN(O_STR); END FU_BUILD_IN_CONDITION;BEGIN ------------ -- å‚æ•°å¤„ç† -- å•ä½ID IF I_COMP_ID IS NULL THEN RAISE E_IN_PARAM_EMPTY_EX; END IF; -- æ¸…ç†æ–¹å¼ID IF I_MODE_IDS IS NULL THEN RAISE E_IN_PARAM_EMPTY_EX; END IF; ------------- -- å¤„ç†ä¸´æ—¶è¡¨ EXECSQL(&apos;DELETE FROM GT_GET_KMTMP_SES&apos;); EXECSQL(&apos;DELETE FROM GT_GET_GLDX_SES&apos;); EXECSQL(&apos;DELETE FROM HZ_LS_KMHZBQUERY_SEC&apos;); ------------ -- ç§‘ç›® -- GT_GET_KMTMP_SES -- ç¡®å®šæ¸…ç†æ–¹å¼ç§‘ç›®è®¾ç½®å±‚çº§ åŠç§‘ç›®æ–¹å‘(ITEMCODEç§‘ç›®æ–¹å‘, LEAFæ¸…ç†å±‚æ¬¡) V_SQL := &apos;INSERT INTO HZ_LS_KMHZBQUERY_SEC (IID, ITEMCODE, LEAF)&apos; || &apos; SELECT &apos;; --SELECT * FROM XTQLMODE X WHERE X.DWDH=&apos;0001&apos; AND NVL(X.TYBZ, 0) = 0 AND X.QLMODEID IN (); ------------ -- å¯¹è±¡ç±»å‹ ----------- -- ç®¡ç†å¯¹è±¡ ---------â€”â€”--------- -- æŸ¥è¯¢å‡ºæœªæ¸…ç†æ•°æ®ï¼š -- 1. qlbz=0EXCEPTION ------------ -- å‚æ•°ä¸ºç©º WHEN E_IN_PARAM_EMPTY_EX THEN V_ERR_CODE := SQLCODE; V_ERR_MSG := &apos;å‚æ•°ä¸ºç©º.&apos;; DBMS_STANDARD.RAISE_APPLICATION_ERROR(V_ERR_CODE, V_ERR_MSG); DBMS_OUTPUT.PUT_LINE(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE); WHEN OTHERS THEN V_ERR_CODE := SQLCODE; V_ERR_MSG := SQLERRM(SQLCODE); ROLLBACK; -- OTHERSä¸­å¿…é¡»æ˜¾å¼å›æ»š ------------- -- æ‰“å°å¼‚å¸¸æ ˆ DBMS_STANDARD.RAISE_APPLICATION_ERROR(V_ERR_CODE, V_ERR_MSG); DBMS_OUTPUT.PUT_LINE(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE); RAISE; -- ç»§ç»­æŠ›å¼‚å¸¸END TEST_PA_COMMENT_STYLE;","tags":[{"name":"PLSQL","slug":"PLSQL","permalink":"https://betgar.github.io/tags/PLSQL/"}]},{"title":"JavaScriptä¸­Objectç±»å‹è½¬æ¢åˆ°åŸå§‹ç±»å‹","date":"2017-11-24T12:00:00.000Z","path":"2017/11/24/object-to-primitive-conversions-in-javascript/","text":"Object-to-Primitive Conversions in JavaScript è¿™æ˜¯ä¸€ç¯‡è½¬è½½çš„æ–‡ç« ã€‚ Like most object-oriented programming languages, JavaScript provides built-in ways to convert between objects and primitive values, by way of the special toString and valueOf methods. This article will cover the basics of these methods, but then dive into the details of how this stuff really works, bad stuff, performance, and browser support. Types and PrimitivesTo understand this article, youâ€™ll need to understand the difference between primitive and non-primitive values in JavaScript. There are 5 primitive types, which are associated with the various primitive values. Null: The value null. Undefined: The value undefined. Number: All numbers, such as 0 and 3.14. Also NaN, and Infinity. Boolean: The values true and false. String: All strings, such as â€œfooâ€ and â€œâ€. All other values are non-primitive, including arrays, functions, and plain old objects. For completeness, here are the results of the typeof operator, applied to these values: 123456789101112131415typeof null; // \"object\"typeof undefined; // \"undefined\"typeof 0; // \"number\" (typeof NaN is also \"number\")typeof true; // \"boolean\"typeof \"foo\"; // \"string\"typeof &#123;&#125;; // \"object\"typeof function () &#123;&#125;; // \"function\"typeof []; // \"object\" Note: typeof null should not be &quot;object&quot;. This is a mistake from the first versions of JavaScript, but itâ€™s really too late to fix. A more sensible type would have been &quot;null&quot;, but this is what weâ€™re stuck with.If youâ€™ve got that down, then weâ€™re ready to move on to the basics of toString and valueOf. If youâ€™re already familiar with the basics, feel free to skip ahead to â€œHow it Worksâ€. Basic Usage Weâ€™ll be using a simple example population object that holds a country name and a population. Lets code that up. function population(country, pop) { return { country: country, pop: pop };} var america_pop = population(â€œUSAâ€, 350e6);var mexico_pop = population(â€œMexicoâ€, 200e6);var canada_pop = population(â€œCanadaâ€, 200e6); alert(america_pop); // [object Object] var north_america_pop = america_pop + mexico_pop + canada_pop; alert(north_america_pop); // [object Object][object Object][object Object]This works, but the calls to alert are not very useful. What weâ€™d really like is for the first alert to show â€˜[Population â€œUSAâ€ 350000000]â€™ and the second to show â€œ750000000â€. So, letâ€™s code that up next. toString All objects inherit the method toString from Object.prototype, which returns â€œ[object Object]â€. However, we can easily override this by providing toString as a method of our object, or its prototype. In this example, weâ€™ll attach it directly to each instance, but feel free to use the prototype instead. function population(country, pop) { return { country: country, pop: pop, toString: function () { return &quot;[Population &quot; + &quot;\\&quot;&quot; + country + &quot;\\&quot; &quot; + pop + &quot;]&quot;; } } } var america_pop = population(â€œUSAâ€, 350e6);alert(america_pop); // [Population â€œUSAâ€ 350000000]Note: Iâ€™m using closure on the country parameter, rather than using this.country. This only works due to how the constructor is set up. If you placed toString on the prototype, you would need to use this.country.valueOf All JavaScript objects also inherit the method valueOf from Object.prototype. By default, this method simply returns the object itself, but is generally overridden to convert an object to a Number, or another primitive value, so it can be used by operators like +. We can do the same thing as above to complete our basic example. 12345678910111213141516171819function population(country, pop) &#123; return &#123; country: country, pop: pop, toString: function () &#123; return \"[Population \" + \"\\\"\" + country + \"\\\" \" + pop + \"]\"; &#125;, valueOf: function () &#123; return pop; &#125; &#125;;&#125; 1234567891011var america_pop = population(\"USA\", 350e6);var mexico_pop = population(\"Mexico\", 200e6);var canada_pop = population(\"Canada\", 200e6);alert(america_pop); // [Population \"USA\" 350000000var north_america_pop = america_pop + mexico_pop + canada_pop;alert(north_america_pop); // 750000000 Here weâ€™ve defined the valueOf function of our population object to return the population, which should be a Number. How It WorksAs with most things in JavaScript, the process by which toString gets called is not as simple as youâ€™d think. Letâ€™s explore what happens when alert(america_pop) is called. alert calls GetValue on the reference. This returns the object it points at.alert calls ToString on the value (this is not the same as the objectâ€™s toString)ToString calls ToPrimitive on the value, passing the hint String.ToPrimitive calls the objectâ€™s internal [[DefaultValue]] method with the hint String.[[DefaultValue]] calls the toString property of the object, with the object as this.The result of toString is a primitive value, so it is returned, all the way up the chain to the ToString method.Since the result is of type String, ToString returns all the way to alert.alert displays the value.While this is a lot, itâ€™s pretty straightforward. However, he key mechanism that needs more explaining is the ToPrimitive function. This function is used to take an arbitrary value and get a corresponding primitive value instead. If the input is already a primitive value then the value will be returned without conversion. However, if the value is non-primitive, then it will call the internal [[DefaultValue]] method to find a default value for the object. [[DefaultValue]] is an internal property of every object. Itâ€™s a method that takes an optional hint, which should be either Number or String. If a hint is not provided, it will default to Number unless the object is a Date, in which case it defaults to String (this is silly). After this has been figured out, it will call toString and valueOf, in order, to find a primitive value. This is where the hint comes into play. If the hint is Number, then valueOf will be tried first, but if itâ€™s String then toString will be tried first. Hereâ€™s the ensuing process: If the first method exists, and is callable, call it and get the result, otherwise skip to 3.If the result of 1 is a primitive, return it.If the second method exists, and is callable, call it and get the result, otherwise skip to 5.If the result of 3 is a primitive, return it.Throw a TypeError exception.The value that is returned by [[DefaultValue]] is guaranteed to be primitive. If it was not, a TypeError would have been thrown. This also implies that toString and valueOf should return primitives on order to be useful in this context. Confusion About the + Operator Hereâ€™s an example with a (possibly) unexpected result: 12345678910var foo = &#123; toString: function () &#123; return \"foo\"; &#125;, valueOf: function () &#123; return 5; &#125;&#125;; 123alert(foo + \"bar\"); // 5baralert([foo, \"bar\"].join(\"\")); // foobar In this context, weâ€™re using the + operator to do string concatenation. But, foo was not converted to a string using toString, it was turned into a number using valueOf, then used for string concatenation. This probably isnâ€™t what we want, but it is how it works. Itâ€™s a side-effect of the overloading of the + operator for arithmetic and string concatenation. The +operator has a well-defined process: Evaluate the left-hand side, and get the value. Evaluate the right-hand side, and get the value. Call ToPrimitive on both the left-hand and right-hand sides (without a hint) If either primitive value is a String, then skip to 7. Call ToNumber on both values. Return the sum of the values. Call ToString on both values. Return the concatenation of both values. Since no hint is passed to the ToPrimitive calls, the hint will be defaulted to Number (unless itâ€™s a Date, which defaults to String). This means that our valueOf function will be called, instead of toString. Itâ€™s not until after the primitive values are retrieved that the interpreter decides whether it is going to do string concatenation or arithmetic. Thatâ€™s why our example above returns â€œ5barâ€ instead of â€œfoobarâ€. Bad StuffThere is one really bad feature of all this, which is that ToPrimitive does not enforce any type-checking on the return values, other than that they are primitive. This means you can write code like this: 12345678910var foo = &#123; toString: function () &#123; return 5; &#125;, valueOf: function () &#123; return \"foo\"; &#125;&#125;; 12345alert(foo.toString() + 1); // 6 (bad!)alert(foo + 1); // \"foo1\" (no good!)alert(+foo); // NaN (the worst!) The valueOf method can be forgiven for not type-checking, because it is more generic. Youâ€™d expect it to be able to return any suitable primitive value. However, the toString method has no such excuse. This is simply a bad feature. You can, of course, mitigate by using String(foo) instead of foo.toString(), which will call toString and then convert that result to a string. But you should not have to do this, or worry about this. Please do not make objects with toString methods that do not return strings. How About Performance?After understanding the complexity that goes into these implicit conversion, I got curious about how that affects performance. So I decided to test the time it takes to perform an [].join(obj) over 1,000,000 iterations in the major browsers. I did one test with the object being implicitly cast to a string, and one where I called the toString method manually (i.e. [].join(obj.toString())). As expected, the explicit call was faster in most cases. Firefox 3.6.2: 874ms vs. 320ms - almost 3x faster.Chrome 5: 94ms vs. 47ms - 2x faster.Opera 10.50: 155ms vs 182ms - a little slower.Safari 4: 409ms vs 280ms - almost 2x faster.Internet Explorer 8: 2856ms vs 2786ms - about the same.Internet Explorer 9 (preview): 645ms vs 633ms - about the same.Note 1: The Firefox, Chrome, Opera, and Safari tests were all run on a Macbook Pro running OS X 10.5. The IE tests were run on a desktop running Windows 7. Run the tests yourself here.Note 2: I chose to use the [].join method because doing so was most likely to avoid any dead-code elimination optimizations in modern browsers. Iâ€™ve had trouble with this before, in Firefox. I did try testing with the String() constructor, with similar results in most browsers. Opera was an exception where using the explicit toString was close to 5x faster. In Firefox, the explicit cast was a bit faster, but both cases were about 100x faster than the [].join method (and other browsers), which means the code-path was probably being removed by the dead code eliminator.The takeaway from this performance test is that itâ€™s always best to call your objectâ€™s type-conversion methods directly, rather than relying on the interpreter to do the complex series of method calls and comparisons needed to do it automatically. The Opera 10.50 result is very strange, but itâ€™s not particularly slower, so I wouldnâ€™t worry about it. The gains made in other browsers more than make up for the outlier Opera result. How About Browser Support? Like many things in the ECMAScript specification, these processes are complex, and I doubted that all browsers would implement them exactly as specified. So, in that test suite from earlier, I added compliance checks. I was quite surprised to see that all major browsers, including versions of Internet Explorer going back to at least IE 5.5, implement these mechanisms correctly. This is even the case with the awkward handling when developers do things like make toString return a number instead of a string. All browsers handle the code according to the specification. This is great news. But the specification unhelpfully introduced ambiguity in one particular area: the absence of a hint for the ToPrimitive function. Hereâ€™s the exact wording: All native ECMAScript objects except Date objects handle the absence of a hint as if the hint Number were given; Date objects handle the absence of a hint as if the hint String were given. Host objects may handle the absence of a hint in some other manner. That the standard explicitly allows browsers to deviate here worried me. Included in that test suite was a check that, in the absence of a hint, Date objects will default to String and Boolean objects will default to Number. All browsers passed this check as well, which means that browser support for all of this functionality seems to be consistent and correct. ConclusionsI hope this was useful in understanding how these mechanisms work in JavaScript. There are three important things to take away from this article: Implement toString and valueOf on your commonly-reused objects. They can help you write clearer, more concise code, and make debugging easier too.All browsers implement object-to-primitive conversion according to the specification, so you can safely consult it for more detail.When performance is important, always try to call your type-conversion methods directly, instead of relying on JavaScriptâ€™s implicit calls.You can find the test suite used for this article here if youâ€™re interested in trying to replicate my results. Please let me know if you find contradictory results to what I posted here. Thanks for reading! If you have questions or feedback then leave a comment below or contact me directly. filed under javascript","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://betgar.github.io/tags/JavaScript/"}]},{"title":"æ€ä¹ˆä½¿ç”¨Oracleæ‰‹å†Œ","date":"2017-11-23T12:00:00.000Z","path":"2017/11/23/how-to-use-oracle-reference/","text":"æ€ä¹ˆä½¿ç”¨Oracleæ‰‹å†Œ ä»‹ç»ä¸€ä¸‹å®˜ç½‘æ–‡æ¡£æ¨¡å—ã€‚è¿™æ˜¯ä¸€ç‰‡è½¬è½½çš„æ–‡ç« ã€‚ ConceptåŒ…å«äº† oracle æ•°æ®åº“é‡Œé¢çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå’ŒåŸç†, æ¯”å¦‚ æ•°æ®åº“é€»è¾‘ç»“æ„, ç‰©ç†ç»“æ„, å®ä¾‹ç»“æ„, ä¼˜åŒ–å™¨, äº‹åŠ¡ç­‰. PDF 460é¡µReference åŒ…å«äº†åŠ¨æ€æ€§èƒ½è§†å›¾, æ•°æ®å­—å…¸, åˆå§‹åŒ–å‚æ•°ç­‰, å¦‚æœæœ‰å‚æ•°ä¸çŸ¥é“æ„æ€, æˆ–è€… v$è§†å›¾å­—æ®µä¿¡æ¯æ¨¡ç³Š, éƒ½å¯ä»¥ä»è¿™é‡Œæ‰¾åˆ°æè¿°, ä½¿ç”¨ htmlç‰ˆçš„è¿›å» ctrl+fæŸ¥æ‰¾æ¯”è¾ƒå¿«.è¿˜åŒ…å«ä¸€äº›å…¶ä»–æ¯”å¦‚æ•°æ®åº“çš„ç¡¬æ€§é™åˆ¶, ç­‰å¾…äº‹ä»¶çš„åç§°, åå°è¿›ç¨‹çš„æè¿°ç­‰. SQL Language Referenceè¿™ä¸ªæ–‡æ¡£ä¸­åŒ…å« oracleæ•°æ®åº“çš„sqlè¯­æ³•,(ä¸åŒ…å«plsql), æ¯”å¦‚ create table ç­‰. Administratorâ€™s Guideå„ç§ç®¡ç†oracleæ•°æ®åº“çš„åœºæ™¯éƒ½åœ¨è¿™é‡Œ, å„ç§ç®¡ç†è¡¨, ç´¢å¼•, è¡¨ç©ºé—´, redoç­‰ Performance tuning guideåŒ…å«ä¼˜åŒ–ç›¸å…³å†…å®¹, ä»‹ç»ä¼˜åŒ–æ–¹æ³•, æ•°æ®åº“å®ä¾‹åŠsqlçš„ä¼˜åŒ– Database Administration é¡µé¢å› ä¸ºä¸Šé¢ administratorâ€™s guide å·²ç»æè¿°äº†, è¿™é‡Œåˆ—ä¸¾å‡ ä¸ªæ¯”è¾ƒé‡è¦æ–‡æ¡£ Net Services Referenceæ–‡æ¡£è¯´æ˜äº†å‡ ä¸ªå…³äºç›‘å¬çš„é‡è¦æ–‡ä»¶, tnsnames.ora, listener.ora, sqlnet.ora ç­‰ Backup and Recovery Userâ€™s Guideæè¿°äº† rman çš„å„ç§ç”¨æ³• Application Development é¡µé¢PL/SQL Packages and Types ReferenceåŒ…æ‹¬å„ç§ oracle è‡ªå»ºçš„åŒ…å’Œå‡½æ•°çš„åŠŸèƒ½, å‚æ•°æè¿°. å¦‚æœæœ‰ä¸äº†è§£çš„åŒ…, å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°, æ¯”å¦‚ dbms_stats. PL/SQL language Referenceplsql ç¼–ç¨‹çš„åŸºç¡€æ¦‚å¿µ, è¯­æ³•ç­‰. SQLJ Developerâ€™s GuideSQLJ, JAVAç›¸å…³çš„å†…å®¹ Workspace Manager Developerâ€™s Guideå…³äº oracle çš„ workspace manager ç‰ˆæœ¬åŒ–çš„ä¸€äº›ä¸œè¥¿ installing and upgrading é¡µé¢éœ€è¦å®‰è£… oracle å‚ç…§è¿™é‡Œ. Grid Computing é¡µé¢åŒ…æ‹¬ oracle grid infrastructure é›†ç¾¤è½¯ä»¶çš„å„ç§æ–‡æ¡£ Automatic Storage Management Administratorâ€™s GuideAsm ç›¸å…³æ–‡æ¡£ Real Application Clusters Administration and Development GuideåŒ…æ‹¬ RAC ç¯å¢ƒä¸‹çš„æ•°æ®åº“ç®¡ç†å’Œç»´æŠ¤çš„å†…å®¹ Clusterware Administration and Deployment Guideä¸»è¦å†™äº†é›†ç¾¤è½¯ä»¶çš„å„ç§å·¥å…·å’Œå‘½ä»¤ High Availability é¡µé¢åŒ…å«å„ç§é«˜å¯ç”¨æ–‡æ¡£ Data Guard Broker å’Œ Data Guard Concepts and Administrationå…³äº Data guard æ–‡æ¡£ Data Warehousing and Business Intelligence é¡µé¢æ•°æ®ä»“åº“å’Œå•†ä¸šæ™ºèƒ½çš„ç›¸å…³æŠ€æœ¯ VLDB and Partitioning Guidevery large database, â€¦ partition å’Œ parallel ç›¸å…³çš„å†…å®¹ utilitiesimp, expdp, sql*loader, å¤–éƒ¨è¡¨, dbv, adrci, logminer unstructured Data and Content Management é¡µé¢éç»“æ„åŒ–æ•°æ®ç›¸å…³, æ¯”å¦‚ object type, xml type, oracle text SecureFiles and Large Objects Developerâ€™s Guideè®²è¿°äº† 11g ä¸­å­˜å‚¨ lob å­—æ®µä½¿ç”¨çš„ secure file æŠ€æœ¯å†…å®¹ Text Application Developerâ€™s Guide å’Œ Text Referenceå…¨æ–‡ç´¢å¼•ç›¸å…³","tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://betgar.github.io/tags/Oracle/"}]},{"title":"jQueryçš„æ•°æ®ç¼“å­˜æ¨¡å—","date":"2017-05-31T12:00:00.000Z","path":"2017/05/31/the-data-storage-module-of-jquery/","text":"jQueryçš„æ•°æ®ç¼“å­˜æ¨¡å— å‡ ä¹æ¯ä¸€ä¸ªå‰ç«¯åº“æˆ–è€…æ¡†æ¶éƒ½æœ‰è‡ªå·±çš„æ•°æ®ç¼“å­˜æ¨¡å—ï¼Œè€Œä¸”è¿™ä¸ªæ˜¯æ¡†æ¶çš„åŸºç¡€æ ¸å¿ƒæ¨¡å—ã€‚æ‰€æœ‰çš„åº”ç”¨æ¨¡å—ï¼Œéƒ½ä¼šä¾èµ–è¿™ä¸ªæ•°æ®ç¼“å­˜æ¨¡å—ã€‚jQueryä¹Ÿæœ‰è‡ªå·±çš„æ•°æ®ç¼“å­˜æ¨¡å—ï¼Œæ‰€ä»¥æŠŠè‡ªå·±å­¦ä¹ çš„å¿ƒå¾—åˆ†äº«ä¸€ä¸‹ã€‚ å±æ€§ç¼“å­˜æ•°æ® å±æ€§ç¼“å­˜æ•°æ®ï¼Œå°±æ˜¯ä½¿ç”¨å¯¹è±¡çš„å±æ€§æˆ–è€…elementå…ƒç´ çš„attributeæ¥ç¼“å­˜æ•°æ®ã€‚jQueryï¼ˆ1.xï¼‰å°±æ˜¯åˆ©ç”¨è¿™ä¸ªå®ç°çš„è‡ªå·±çš„æ•°æ®ç¼“å­˜æ¨¡å—çš„ã€‚è¿™ç§æ–¹æ³•ä¹Ÿå«å±æ€§æ ‡è®°æ³•. elementå±æ€§attributeæ ‡è®°æ³• è¿™ä¸ªå†™è¿‡å‰ç«¯ä»£ç çš„éƒ½å¾ˆç†Ÿæ‚‰ï¼Œå°±æ˜¯åœ¨æ ‡ç­¾çš„htmlä¸ŠåŠ ä¸Šè‡ªå®šä¹‰å±æ€§ã€‚ æ —å­1ï¼š 1234&lt;!-- element-attribute.html --&gt;&lt;div id=\"demo1\" customize=\"defined by me\"&gt;&lt;/div&gt;&lt;button id=\"getAttrBtn\"&gt;getAttr&lt;/button&gt;&lt;button id=\"setAttrBtn\"&gt;setAttr&lt;/button&gt; 12345678910111213141516171819202122var $ = function (id) &#123; return document.getElementById(id);&#125;;var getAttrBtn = $('getAttrBtn');var setAttrBtn = $('setAttrBtn');/** *æ ‡ç­¾å±æ€§æ ‡è®°æ³• */getAttrBtn.onclick = function () &#123; var demoEle = $('demo1'), value = demoEle.getAttribute('customize'); window.console.log(value); demoEle.innerHTML = value;&#125;;setAttrBtn.onclick = function () &#123; var demoEle = $('demo1'),value; demoEle.setAttribute('customize', 'changed by element attribute'); value = demoEle.getAttribute('customize'); window.console.log(value); demoEle.innerHTML = value;&#125;; æ —å­1å°±æ˜¯æˆ‘ä»¬é€šè¿‡elementæ ‡ç­¾æ¥ä¿å­˜ä¸€äº›è‡ªå·±çš„ä¸šåŠ¡æ•°æ®ã€‚ ä¼˜ç‚¹ï¼šåŸç”Ÿï¼›æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒã€‚ ç¼ºç‚¹ï¼šåªèƒ½ä¿å­˜å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¿å­˜å¯¹è±¡å’Œfunctionï¼Œè¿™ä¸¤ç§ç±»å‹ã€‚ â€‹ å¯¹è±¡å±æ€§æ ‡è®°æ³• å¯¹è±¡å±æ€§æ ‡è®°ï¼Œå°±å¾ˆå¥½ç†è§£äº†ï¼Œå°±æ˜¯å¹³æ—¶æˆ‘ä»¬ç»™JavaScriptå¯¹è±¡èµ‹å€¼çš„æ“ä½œã€‚ æ —å­2ï¼š 1234&lt;!-- element-attribute.html --&gt;&lt;div id=\"demo1\" customize=\"defined by me\"&gt;&lt;/div&gt;&lt;button id=\"getAttrBtn\"&gt;getAttr&lt;/button&gt;&lt;button id=\"setAttrBtn\"&gt;setAttr&lt;/button&gt; â€‹ 1234567891011121314/***å¯¹è±¡å±æ€§æ ‡è®°æ³•*/getAttrBtn.ondblclick = function () &#123; var demoEle = $('demo1'), value = demoEle['customize']; window.console.log(value); demoEle.innerHTML = value;&#125;;setAttrBtn.ondblclick = function () &#123; var demoEle = $('demo1'),value; demoEle['customize'] = 'changed by object attribute',value = demoEle['customize']; window.console.log(value); demoEle.innerHTML = value;&#125;; æ —å­2å°±æ˜¯å¯¹è±¡å±æ€§æ ‡è®°æ³•ï¼ŒåŸç†å°±æ˜¯ç›´æ¥ä½¿ç”¨æµè§ˆå™¨ä¸­element(å®¿ä¸»å…ƒç´ )è¿›è¡Œæ•°æ®ç¼“å­˜ã€‚ ä¼˜ç‚¹ï¼šJavaScriptå…¨ç±»å‹çš„æ•°æ®éƒ½æ”¯æŒã€‚ ç¼ºç‚¹ï¼š æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ã€‚ object,applet,embedç­‰å¯¹è±¡æ˜¯ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œè¿›è¡Œå±æ€§ç¼“å­˜æ•°æ®ï¼Œå› ä¸ºä»–ä»¬ä¸æ˜¯æ ‡å‡†çš„æµè§ˆå™¨ä¸­çš„å¯¹è±¡ï¼Œå±äºæ‰©å±•å†…å®¹ã€‚ windowå¯¹è±¡å¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå˜æˆäº†å…¨å±€å˜é‡ å†…å­˜æ³„æ¼ï¼šå†…å­˜æ³„æ¼æ˜¯è¿™ç§æ–¹å¼çš„æœ€å¤§å¨èƒã€‚ 1234567// å†…å­˜æ³„æ¼æ —å­ï¼š// æœ€ç›´æ¥çš„æ —å­å°±æ˜¯demoEle.dep.elçš„å±æ€§æŒ‡å‘demoElevar demoEle = $('demo1');demoEle.dep = &#123; el: demoEle&#125;;// è¿™æ ·çš„å¾ªç¯ä¾èµ–ï¼Œå¾ˆéš¾è§‰å¯Ÿåˆ°ï¼Œæ‰€ä»¥demoEle.depå’ŒdemoEleéƒ½å¾—ä¸åˆ°å›æ”¶ï¼Œé€ æˆå†…å­˜æ³„æ¼ã€‚ æ•°æ®ç¼“å­˜æ¨¡å—å®ç°åŸç† å±æ€§ç¼“å­˜æ•°æ®çš„ä¸¤ç§æ–¹æ³•ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ï¼Œä½†æ˜¯å¯¹è±¡å±æ€§ç¼“å­˜æ•°æ® å·²ç»éå¸¸ç†æƒ³äº†ï¼Œåªè¦è§£å†³ä¸€ä¸‹å†…å­˜æ³„æ¼ è¿™ä¸ªé—®é¢˜å°±å¾ˆå®ç”¨äº†ã€‚åˆ†äº«ä¸€ä¸‹jQueryçš„å·§å¦™è®¾è®¡ã€‚ jQueryçš„è®¾è®¡æ€è·¯ï¼š æ•°æ®ç»Ÿä¸€ç®¡ç†ï¼ˆæ•°æ®å‚¨å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ ä¸­ï¼‰ æ•°æ®ä¸ç¼“å­˜åœ¨å…·ä½“çš„elementå¯¹è±¡å±æ€§ä¸Šï¼Œè€Œæ˜¯åœ¨elementç¼“å­˜ä¸€ä¸ªjQueryKeyï¼Œç„¶åé€šè¿‡jQueryKeyå­˜å–æ•°æ®ã€‚ jQueryKeyï¼šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œä¸å­˜åœ¨å¾ªç¯ä¾èµ– è§£å†³å†…å­˜æ³„æ¼çš„é—®é¢˜ ã€‚ æ —å­ï¼š 1234&lt;!-- data-storage.html --&gt;&lt;div id=\"demo1\"&gt;&lt;/div&gt;&lt;button id=\"getAttrBtn\"&gt;getStore&lt;/button&gt;&lt;button id=\"setAttrBtn\"&gt;store&lt;/button&gt; 1234567891011121314151617181920212223242526272829function isNumeric(obj) &#123; return !isNaN(parseFloat(obj)) &amp;&amp; isFinite(obj);&#125;function Model() &#123;&#125;Model.cacheKey = 'ceche' + (new Date).getTime();Model.cache = &#123;&#125;; // ç”¨æ¥ç¼“å­˜æ•°æ®Model.uuid = 0;Model.data = function (ele, key, value) &#123; var cacheKey = Model.cacheKey, indexKey = ele[cacheKey]; if (arguments.length === 2) &#123; // get if (isNumeric(indexKey)) &#123; return Model.cache[indexKey][key] === undefined ? null : Model.cache[indexKey][key]; &#125; else &#123; return null; &#125; &#125; else &#123; // set if (isNumeric(indexKey)) &#123; Model.cache[indexKey][key] = value; &#125; else &#123; ele[cacheKey] = indexKey = '' + Model.uuid++; Model.cache[indexKey] = &#123;&#125;; Model.cache[indexKey][key] = value; &#125; &#125; &#125;; ä¸Šé¢çš„æ —å­ï¼š Model.cacheKeyåšelementçš„å±æ€§ï¼Œelement[Model.cacheKey]çš„valueå€¼æ˜¯Model.cacheçš„å¯¹è±¡keyã€‚ element[Model.cacheKey]çš„valueå€¼ï¼Œåªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ‰€ä»¥ï¼Œå®Œç¾è§£å†³äº†å†…å­˜æ³„æ¼ é—®é¢˜ã€‚ Model.cacheæ˜¯ä¸€ä¸ªæ™®é€šçš„JavaScriptå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ”¯æŒæ‰€æœ‰çš„JavaScriptçš„æ•°æ®ç±»å‹ã€‚è§£å†³äº†åœ¨æ ‡ç­¾çš„å±æ€§ä¸Šç¼“å­˜æ•°æ®ï¼Œåªæ”¯æŒ å­—ç¬¦ä¸² çš„é—®é¢˜ã€‚ 12// è¿™å°±æ˜¯elementå¯¹åº”cacheä¸­ç¼“å­˜çš„æ•´ä¸ªæ•°æ®å¯¹è±¡Model.cache[element[Model.cacheKey]]; jQueryæ•°æ®ç¼“å­˜æ¨¡å—æºç  jQueryæ•°æ®ç¼“å­˜æ¨¡å—çš„éƒ¨åˆ†æºç ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// ä¸‹é¢çš„å°±æ˜¯ä¸€äº› jQuery æ¶‰åŠæ•°æ®å­˜å‚¨çš„æ“ä½œjQuery.extend(&#123; // å…¨å±€çš„ç¼“å­˜å¯¹è±¡ cache: &#123;&#125;, // The following elements throw uncatchable exceptions if you // attempt to add expando properties to them. // å¦‚æœä½ å°è¯•ç»™ä»¥ä¸‹å…ƒç´ æ·»åŠ æ‰©å±•å±æ€§,å°†æŠ›å‡ºâ€œæ— æ³•æ•æ‰â€çš„å¼‚å¸¸ // è¿™é‡Œå£°æ˜çš„å‡ ä¸ªå…ƒç´ å¯¹è±¡æ˜¯ä¸ç»™äºæ•°æ®ç»‘å®šçš„ // appletã€embed å’Œ object å…ƒç´ æ˜¯ä¸æ”¯æŒè®¾ç½® expando å±æ€§çš„ï¼Œæ‰€ä»¥ä¸æ”¯æŒ data æ–¹æ³• noData: &#123; \"applet\": true, \"embed\": true, // Ban all objects except for Flash (which handle expandos) \"object\": \"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" &#125;, // æ£€æŸ¥å¯¹è±¡æ˜¯å¦å·²ç»å­˜å‚¨äº†æ•°æ® hasData: function(elem) &#123; elem = elem.nodeType ? jQuery.cache[elem[jQuery.expando]] : elem[jQuery.expando]; return !!elem &amp;&amp; !isEmptyDataObject(elem); &#125;, // ç»™ elemï¼ˆå¯æ˜¯DOMï¼Œå¯ä»¥æ˜¯JSå¯¹è±¡ï¼‰æ·»åŠ  key-value ä¸º name-data çš„æ•°æ® data: function(elem, name, data) &#123; return internalData(elem, name, data); &#125;, // ç§»é™¤ elemï¼ˆå¯æ˜¯DOMï¼Œå¯ä»¥æ˜¯JSå¯¹è±¡ï¼‰ä¸Š removeData: function(elem, name) &#123; return internalRemoveData(elem, name); &#125;, // For internal use only. // æ·»åŠ æˆ–è¯»å–ä¸€ä¸ªä»…ä¾›å†…éƒ¨ä½¿ç”¨çš„æ•°æ® _data: function(elem, name, data) &#123; return internalData(elem, name, data, true); &#125;, // åˆ é™¤å†…éƒ¨ä½¿ç”¨çš„æ•°æ®æ•°æ® _removeData: function(elem, name) &#123; return internalRemoveData(elem, name, true); &#125;, // A method for determining if a DOM node can handle the data expando // æ£€æµ‹ä¸€ä¸ªå±æ€§æ˜¯å¦å¯ä»¥ç»‘å®šæ•°æ® // nodeType = 1 -- Element // nodeType = 9 -- Document acceptData: function(elem) &#123; // Do not set data on non-element because it will not be cleared (#8335). // if (elem.nodeType &amp;&amp; elem.nodeType !== 1 &amp;&amp; elem.nodeType !== 9) &#123; return false; &#125; // if(elem.nodeName)&#123; // noData = jQuery.noData[elem.nodeName.toLowerCase()]; // &#125; var noData = elem.nodeName &amp;&amp; jQuery.noData[elem.nodeName.toLowerCase()]; // nodes accept data unless otherwise specified; rejection can be conditional return !noData || noData !== true &amp;&amp; elem.getAttribute(\"classid\") === noData; &#125;&#125;); æ¥ä¸€ä¸ªå¯¹åº”ï¼š jQuery.expandoå¯¹åº”Model.cacheKey jQuery.cacheå¯¹åº”Model.cache jQuery.dataå¯¹åº”Model.data åœ¨jQuery.hasDataæ–¹æ³•å†…éƒ¨çœ‹åˆ°äº†ï¼š 1jQuery.cache[elem[jQuery.expando]]; // å–æ•°æ® 1Model.cache[indexKey][key]; // Modelå’ŒjQueryåŸç†æ˜¯ä¸€æ ·çš„ã€‚ æœ‰äº†Modelè¿™ä¸ªå°æ —å­ï¼Œå°±èƒ½æ›´å¥½çš„ç†è§£jQueryçš„dataæ¨¡å—å®ç°åŸç†äº†ï¼›å½“ç„¶jQueryçš„dataæ¨¡å—è¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„å…¼å®¹æ€§å¤„ç†ï¼Œé˜²å†²çªå¤„ç†ã€‚ HTML5çš„DataSet API HTML5åŠ å…¥äº†ä¸€ä¸ªå…³äºè‡ªå®šä¹‰å±æ€§çš„APIï¼Œå¾ˆæ˜¯æ–¹ä¾¿ï¼Œè™½ç„¶éç°ä»£æµè§ˆå™¨ä¸æ”¯æŒï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨jQueryï¼ŒjQueryå·²ç»æä¾›äº†æ”¯æŒã€‚ æ —å­ï¼š 12&lt;!-- è‡ªå®šä¹‰å±æ€§ä½¿ç”¨ data-* å¼€å¤´ --&gt;&lt;span data-toggle=\"dropdown\" class=\"moduleTitle\" data-options=\"234\"&gt;æµ‹è¯•&lt;/span&gt; 123456789101112// åŸç”Ÿæ“ä½œ// è¿”å›å…¨éƒ¨ä»¥data-å¼€å¤´çš„è‡ªå®šä¹‰å±æ€§.var dataSet = document.querySelector('.moduleTitle').dataset; // DOMStringMap// è¿”å›optionsvar dataSet = document.querySelector('.moduleTitle').dataset.options;// æ–°å¢æˆ–è€…ä¿®æ”¹(åŒæ­¥DOMå…ƒç´ çš„data-optionså±æ€§)document.querySelector('.moduleTitle').dataset.options = 234;// åˆ é™¤delete document.querySelector('.moduleTitle').dataset.options jQueryæ —å­ï¼š 12&lt;span data-toggle=\"dropdown\" class=\"moduleTitle\" data-options=\"234\" data-camel-options=\"234\"&gt;æµ‹è¯•&lt;/span&gt; 123456789101112// jQueryæ“ä½œ// è®¿é—®æ‰€æœ‰çš„ç¼“å­˜æ•°æ®ï¼ŒåŒ…æ‹¬data-*è‡ªå®šä¹‰éƒ¨åˆ†var dataSet = $('.moduleTitle').data();// æŸ¥è¯¢ ï¼ˆjQueryä¸ºäº†éµå®ˆè§„èŒƒè‡ªåŠ¨è½¬æ¢data-*è‡ªå®šä¹‰å±æ€§ä¸ºâ€œé©¼å³°â€è®¿é—®æ–¹å¼.ï¼‰var camelOptions = $('.moduleTitle').data('camelOptions');// ä¿®æ”¹ (jQueryä½¿ç”¨è‡ªå·±æ•°æ®ç¼“å­˜æ¨¡å—ï¼Œä¸å†åŒæ­¥ä¿®æ”¹data-camel-optionså±æ€§)$('.moduleTitle').data('camelOptions', 3);$('.moduleTitle').data('camelOptions'); // 3$('.moduleTitle').attr('data-camel-options'); // 234 æ³¨æ„ï¼š â€‹ jQuery.dataè®¿é—®data-è‡ªå®šä¹‰å±æ€§æ˜¯æœ‰ä¼˜å…ˆçº§é¡ºåºï¼Œå…ˆä»$.cacheä¸­è·å–ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰å°è¯•è‡ªå®šä¹‰å±æ€§è·å–ã€‚â€‹ jQuery.dataæ–¹æ³•åªèƒ½ä¿®æ”¹è‡ªå·±ç¼“å­˜å†…çš„æ•°æ®ï¼Œä¸ä¼šä¿®æ”¹data-å±æ€§çš„æ•°æ®ï¼›æ‰€ä»¥åƒä¸‡ä¸è¦ä½¿ç”¨jQuery().attrå’ŒjQuery.dataæ··åˆä½¿ç”¨æ“ä½œdata-è‡ªå®šä¹‰å±æ€§ã€‚","tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://betgar.github.io/tags/jQuery/"}]},{"title":"ä½¿ç”¨jQuery UI widgetç¼–å†™æœ‰çŠ¶æ€çš„æ’ä»¶","date":"2017-05-07T12:00:00.000Z","path":"2017/05/07/building-stateful-plugins-with-jquery-ui-widget/","text":"ä½¿ç”¨jQuery UI widgetç¼–å†™æœ‰çŠ¶æ€çš„æ’ä»¶ jQueryæœ€å¥½çš„è®¾è®¡åœ¨äºä¸¤ä¸ªæ–¹é¢ï¼Œä¸€æ˜¯å®ƒçš„APIï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å®ƒçš„æ’ä»¶ç³»ç»Ÿã€‚è¿™ä¹Ÿæ˜¯jQueryè¿™äº›å¹´å¼‚å†›çªèµ·çš„åŸå› ï¼Œè™½ç„¶ç°åœ¨é‡åˆ°äº†æ–°çš„å±æœºï¼ŒVueï¼ŒAngularï¼ŒReactçš„å‡ºç°ç»™åœ¨ç°ä»£çš„æµè§ˆå™¨å¼€æ”¾å¸¦æ¥äº†æ–°çš„å¼€å‘ä½“éªŒã€‚ è¿™ä¸¤å¹´å‰ç«¯åº“æˆ–è€…æ¡†æ¶æ›´æ–°å¤ªå¿«ï¼Œä½†æ˜¯å¦‚æœä½ æ˜¯ä¸€ä¸ªçœŸæ­£çš„å®è·µè€…ï¼Œæ—¶é—´é•¿äº†ä½ æ…¢æ…¢å‘ç°å…¶å®å¾ˆå¤šçš„å‰ç«¯å¼€å‘æ¡†æ¶éƒ½æ˜¯å½“æ—¶ç¼–ç¨‹æ€æƒ³çš„ä¸åŒå®ç°ã€‚ æœ¬äººçš„JavaScriptç¼–ç¨‹èƒ½åŠ›ï¼Œä¹Ÿä»æœ€åˆçš„é¢å‘è¿‡ç¨‹çš„é¢æ¡å¼ä»£ç ï¼Œè½¬å˜åˆ°é¢å‘å¯¹è±¡å’Œä½¿ç”¨ä¸€äº›MVCæ–¹å¼æ¥ç»„ç»‡ä»£ç ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œè¿›å…¥æ­£é¢˜ã€‚ [TOC] å®šä¹‰æ’ä»¶çš„æ­¥éª¤ é¦–å…ˆæ’ä»¶å®šä¹‰æ—¶ï¼Œä¸ºäº†é˜²æ­¢å¤–éƒ¨å½±å“æ’ä»¶ï¼Œä¸€èˆ¬æ’ä»¶å®šä¹‰å…¨éƒ¨æ”¾åœ¨é—­åŒ…å†…éƒ¨ã€‚ å®šä¹‰æ’ä»¶çš„é—­åŒ… 123(function () &#123;// define you plugin&#125;)() åŸºäºjQueryæ¥å®šä¹‰æ’ä»¶ 123456789101112// ä»¥stepæ’ä»¶ä¸ºä¾‹;(function ($) &#123; $.fn.step = function (element, options) &#123; // do something &#125; $.fn.step.prototype = &#123; options: &#123; version: '0.0.1', name: 'step' &#125; &#125;;&#125;)(jQuery) ä½¿ç”¨extendæ‰©å±•jQueryå¯¹è±¡ï¼ˆjQueryä¹Ÿæ˜¯è¿™æ ·æ‰©å±•è€Œæˆçš„ï¼‰ 123456789;(function ($) &#123; $.extend($.fn, &#123; // æ’ä»¶å±æ€§ options: &#123; version: '0.0.1', name: 'step' &#125; &#125;);&#125;)(jQuery) æ’ä»¶å®šä¹‰çš„å¤§è‡´æ­¥éª¤ ä¸¾ä¸€ä¸ªbootstrapæ’ä»¶Alertçš„ä¾‹å­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// ä»¥Alertä¸ºä¾‹+function ($) &#123; 'use strict'; // ALERT CLASS DEFINITION // ====================== // Alertæ„é€ å‡½æ•° var Alert = function (el) &#123; &#125; // å…¬å…±å±æ€§ Alert.VERSION = '3.3.7' Alert.TRANSITION_DURATION = 150 Alert.prototype.close = function (e) &#123; &#125; // å¤‡ä»½jQueryçš„prototypeä¸Šå·²ç»æœ‰çš„alert // ä¸ºäº†åé¢é˜²å†²çªå¤„ç†ä½¿ç”¨. var old = $.fn.alert $.fn.alert = Plugin $.fn.alert.Constructor = Alert // ALERT NO CONFLICT // ================= // é˜²å†²çªå¤„ç† $.fn.alert.noConflict = function () &#123; $.fn.alert = old return this &#125; // ALERT PLUGIN DEFINITION // ======================= // DOM-TO-Objectçš„æ¡¥æ¥æ¨¡å¼ function Plugin(option) &#123; return this.each(function () &#123; var $this = $(this) var data = $this.data('bs.alert') if (!data) $this.data('bs.alert', (data = new Alert(this))) if (typeof option == 'string') data[option].call($this) &#125;) &#125;&#125;(jQuery); ä»ä¸Šé¢çš„ä¾‹å­ï¼Œå¯ä»¥çœ‹å‡ºå®šä¹‰æ’ä»¶éœ€è¦å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š å®šä¹‰æ’ä»¶çš„æ„é€ å‡½æ•°ã€‚ å®šä¹‰æ’ä»¶çš„å‚æ•°ï¼ˆåŒ…å«å…¬å…±å±æ€§ï¼‰æ’ä»¶å¯ä»¥é€šè¿‡åˆå§‹åŒ–å‚æ•°ï¼Œæˆ–è€…åŠ¨æ€çš„æ”¹å˜å‚æ•°ï¼Œæ¥æ”¹å˜è‡ªå·±çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚ å®šä¹‰æ’ä»¶çš„è¡Œä¸ºæ–¹æ³•ï¼Œæ¥å…·ä½“çš„æ§åˆ¶æ’ä»¶çš„çŠ¶æ€ã€‚ æ’ä»¶çš„å…¬å…±éƒ¨åˆ†ï¼ˆæ‰€æœ‰çš„æ’ä»¶éƒ½ä¼šæ¶‰åŠï¼Œä¾‹å¦‚ï¼šé˜²å†²çªå¤„ç†ï¼Œä¸€èˆ¬æä¾›noConflictæ–¹æ³•ï¼›ä½¿ç”¨DOM-to-Objectçš„æ¡¥æ¥æ¨¡å¼ç­‰ï¼‰ã€‚ æ —å­ï¼šStepæ’ä»¶ 1234567891011121314151617181920212223// Stepæ’ä»¶(function ($) &#123; /** *@param &#123;Object&#125; options åŠ¨æ€å‚æ•° */ function Step (options) &#123; // do something &#125; // å…¬å…±å±æ€§ Step.VERSION = '0.0.1'; Step.NAME = 'step'; // åŸå‹å®šä¹‰ï¼Œæ‰€æœ‰çš„å®ä¾‹(instance)éƒ½ä¼šæ‹¥æœ‰çš„æ–¹æ³• Step.prototype = &#123; constructor: Step, // ä¿®æ­£æ„é€ å‡½æ•°å±æ€§çš„æŒ‡å‘ // æ’ä»¶å‚æ•° options : &#123; &#125;, // å¾ˆå¤šæ’ä»¶ç³»ç»Ÿçš„é»˜è®¤åˆå§‹åŒ–æ–¹æ³• _init: function (options) &#123;&#125; &#125;;&#125;)(jQuery) jQuery UIæ’ä»¶ç¼–å†™çš„æ–¹å¼ ä¸Šé¢æ€»ç»“çš„å®šä¹‰æ’ä»¶æ­¥éª¤å…¶å®è¿˜ä¸å®Œæ•´ï¼Œå®šä¹‰ä¸€ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬å°±è¦æƒ³åˆ°ï¼Œæ’ä»¶å®ä¾‹ä»æ— åˆ°æœ‰ï¼Œè¿˜è¦ä»æœ‰åˆ°æ— ã€‚æˆ‘ä»¬å®šä¹‰çš„æ’ä»¶ï¼Œéœ€è¦æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè€Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œå…¶å®æ˜¯æ‰€æœ‰æ’ä»¶éƒ½è¦å¤„ç†çš„ï¼Œå…¶å®å®ƒæ˜¯ä¸€ä¸ªå…¬å…±éƒ¨åˆ†ã€‚æ—¢ç„¶æ˜¯å…¬å…±éƒ¨åˆ†(DRYåŸåˆ™)ï¼Œå¿…é¡»æ˜¯èƒ½å¤Ÿé‡ç”¨ï¼Œè€Œä¸ç”¨é‡å¤è¿™éƒ¨åˆ†ä»£ç ã€‚ å¦‚æœä½ å¤šçœ‹å‡ ä¸ªbootstrapçš„æ’ä»¶ï¼Œä½ ä¼šå‘ç°å‡ ä¹æ¯ä¸€ä¸ªæ’ä»¶éƒ½æœ‰å¦‚ä¸‹çš„ä»£ç ï¼š 1234567891011121314 // ALERT PLUGIN DEFINITION // ======================= function Plugin(option) &#123; return this.each(function () &#123; var $this = $(this) var data = $this.data('plug.name') if (!data) $this.data('plug.name', (data = new Step(this))) if (typeof option == 'string') data[option].call($this) &#125;); &#125;// è¿™æ®µä»£ç ä¹‹æ‰€ä»¥ä¼šé‡å¤å‡ºç°ï¼Œæ˜¯å› ä¸ºbootstrapçš„è®¾è®¡è€…ï¼Œæƒ³å‡å°‘bootstrapå¯¹å…¶å®ƒåº“çš„ä¾èµ–ã€‚// è¿™æ®µä»£ç åœ¨$.widget.bridgeä¸­æœ‰éå¸¸å·§å¦™çš„å®ç°(jquery.ui.widget.jsæˆ–è€…widget.js)ã€‚ ä½¿ç”¨$.Widgetå¯¹è±¡æ‰©å±•æ§ä»¶ jQuery widget factory å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ï¼Œå°¤å…¶ä¸€äº›æ’ä»¶å…¬å…±éƒ¨åˆ†çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œéƒ½å¸®æˆ‘ä»¬å®ç°äº†ï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ªjQuery UIç»„ä»¶ä»widget factoryå¼€å§‹ã€‚ jQueryUIçš„widgetå…¬å…±æ¨¡å—ï¼Œåªä¾èµ–jQueryï¼Œæ²¡æœ‰å’ŒjQueryUIçš„coreæ¨¡å—è€¦åˆï¼Œæ˜¯ä¸€ä¸ªçº¯ç²¹çš„å·¥å‚å‡½æ•°å®ç°ï¼Œå¾ˆæ–¹ä¾¿å®šä¹‰è‡ªå·±çš„uiç»„ä»¶ã€‚ ä¸¾ä¸ªæ —å­ï¼š 123$.widget('repay.step', &#123; _create: function () &#123;&#125;&#125;) å‘½åç©ºé—´(namespace)ï¼š â€˜repay.stepâ€™ï¼Œå…¶ä¸­repayæ˜¯namespaceï¼›stepæ˜¯æ§ä»¶åç§°ã€‚ui å‘½åç©ºé—´é»˜è®¤ç•™ç»™jquery.uiä½¿ç”¨äº†ã€‚ 12// è°ƒç”¨$('table').step(); ç»§ç»­stepçš„ä¾‹å­ 12345678&lt;!-- è¿™ä¸ªæ˜¯æ§ä»¶çš„æ¨¡ç‰ˆ --&gt; &lt;table name=\"step\" class=\"step\"&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td class=\"text-center\"&gt;ç¬¬ä¸€æ­¥&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; æ§ä»¶çš„æ¯ä¸€æ­¥æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šåŸå§‹çŠ¶æ€ï¼Œæ´»åŠ¨çŠ¶æ€ï¼Œç„¦ç‚¹çŠ¶æ€ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394/** * @date 2017-05-08 * @author lijunnan */(function ($) &#123; var baseClass = 'step', textClass = 'text-center', activeClass = 'active', focusClass = 'js-focus'; $.widget('repay.step', &#123; options: &#123; VERSION: '0.0.1', NAME: 'step', template: '&lt;td&gt;&lt;/td&gt;' &#125;, /** * åˆ›å»ºæ§ä»¶çš„æ—¶å€™è°ƒç”¨. */ _create: function () &#123; if (!this._haveContainer()) &#123; this._addContainer(); &#125; this.refresh(); this.$container = this.element.find('tr'); &#125;, add: function (name) &#123; $(this.options.template).appendTo(this.$container).text(name); this.refresh(); &#125;, refresh: function () &#123; this.element.addClass(baseClass); this.element.find('td').addClass(textClass); &#125;, activate: function (index, onFocus) &#123; onFocus = typeof onFocus === 'boolean' ? onFocus : true; var classes = onFocus ? activeClass + \" \" + focusClass : activeClass; this.element.find('td').eq(this._constrainedIndex(index)) .addClass(classes); &#125;, isFocus: function (index) &#123; return this.element.find('td').eq(this._constrainedIndex(index)) .hasClass(focusClass); &#125;, isActive: function (index) &#123; return this.element.find('td').eq(this._constrainedIndex(index)) .hasClass(activeClass); &#125;, _haveContainer: function () &#123; return this.element.find('tr').length &gt; 0; &#125;, _addContainer: function () &#123; this.element.append('&lt;tbody&gt;&lt;tr&gt;&lt;/tr&gt;&lt;/tbody&gt;'); &#125;, _constrainedIndex: function (index) &#123; var $allSteps = this.element.find('td'), lastIndex = $allSteps.length - 1; if (typeof index !== 'number') &#123; index = 0; &#125; index = index &lt; 0 ? 0 : index; index = index &gt; lastIndex ? lastIndex : index; return index; &#125;, _destroy: function () &#123; this.element.remove(); &#125;, next: function () &#123; var activeSelector = '.' + activeClass, focusSelector = '.' + focusClass, focusIndex, $allSteps = this.element.find('td'), maxIndex = $allSteps.length - 1; var $focusNode = $allSteps.filter(activeSelector + focusSelector); if ($focusNode.length === 0) &#123; this.activate(0); this._trigger('start', null, &#123; name: $allSteps.first().text(), index: 0 &#125;); &#125; else &#123; focusIndex = this._constrainedIndex($focusNode.next().index()); $focusNode.removeClass(focusClass) .next('td').addClass(activeClass + ' ' + focusClass); if (focusIndex === maxIndex) &#123; this._trigger('done', null, &#123; name: $focusNode.text(), index: focusIndex &#125;); &#125; &#125; &#125; &#125;);&#125;)(jQuery); ä¸Šé¢çš„ä»£ç æ§ä»¶å·²ç»å®Œæˆäº†ã€‚ 12345678910&lt;!-- æ¨¡ç‰ˆ1 --&gt; &lt;table name=\"step\" class=\"step\"&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td class=\"text-center\"&gt;ç¬¬1æ­¥&lt;/td&gt; &lt;td class=\"text-center\"&gt;ç¬¬2æ­¥&lt;/td&gt; &lt;td class=\"text-center\"&gt;ç¬¬3æ­¥&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; æ§ä»¶çš„åˆå§‹åŒ– 12// æ§ä»¶çš„åˆå§‹åŒ–è°ƒç”¨$('table').step(); // è¿™æ ·å°±åˆ›å»ºäº†stepæ§ä»¶å®ä¾‹ æ§ä»¶çš„æ–¹æ³•è°ƒç”¨ 12345678// æ´»åŠ¨çŠ¶æ€$('table').step('next');// è°ƒç”¨å¸¦å‚æ•°çš„æ–¹æ³•$('table').step('isActive', 0);// é”€æ¯æ§ä»¶$('table').step('destroy'); äº‹ä»¶ äº‹ä»¶æ˜¯æ§ä»¶çš„å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œäº‹ä»¶æ˜¯æ§ä»¶å’Œå¤–ç•Œå…¶å®ƒæ§ä»¶è§£è€¦çš„å…³é”®ã€‚ æ —å­ä¸­nextæ–¹æ³•ï¼š 123456789// è§¦å‘çš„startthis._trigger('start', null, &#123; name: $allSteps.first().text(), index: 0&#125;);this._trigger('done', null, &#123; name: $focusNode.text(), index: focusIndex&#125;); this._triggeræ–¹æ³•æ˜¯ä»jQuery.Widgetç»§æ‰¿çš„ ï¼Œ æ­¤æ–¹æ³•å¯¹è§¦å‘äº‹ä»¶åšäº†ç‰¹æ®Šå¤„ç†ï¼Œæ‰€ä»¥æ§ä»¶å¯¹å¤–å‘å¸ƒçš„äº‹ä»¶ä¼šå˜æˆæ§ä»¶å+äº‹ä»¶å ã€‚æ‰€ä»¥startå’Œdoneäº‹ä»¶ï¼Œå¯¹å¤–å‘å¸ƒçš„äº‹ä»¶æ˜¯stepstartå’Œstepdoneã€‚ ç›‘å¬äº‹ä»¶ äº‹ä»¶å¯¹å¤–å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ§ä»¶å‘å¸ƒçš„äº‹ä»¶ï¼Œåšä¸€äº›å…¶å®ƒçš„ä¸šåŠ¡å¤„ç†ã€‚ 1234567$(document).on('stepstart', function (evt, data) &#123; var args = arguments; console.log('stepstart');&#125;).on('stepdone', function () &#123; var args = arguments; console.log('stepdone');&#125;); å°ç»“ stepå·²ç»å®Œæˆäº†ä¸€ä¸ªå®Œæ•´çš„æ§ä»¶ä¾‹å­çš„å±•ç¤ºï¼Œä»createæ§ä»¶å»ºç«‹æ§ä»¶åˆ°destoryæ§ä»¶ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€‚ ä¸€ä¸ªæ§ä»¶æœ€ç»ˆè¦çš„å°±æ˜¯å‡ ä¸ªéƒ¨åˆ†ï¼š åˆå§‹åŒ–æ¸²æŸ“(create) æ§ä»¶çš„äº‹ä»¶(event) æ§ä»¶çš„é”€æ¯(destroy) æ§ä»¶çš„æ‰©å±•æ€§(extend) å¯é…ç½®æ€§(configurable)ï¼šé€šè¿‡optionæ¥åŠ¨æ€æ”¹å˜æ§ä»¶çš„çŠ¶æ€ã€‚ å‚è€ƒèµ„æ–™https://www.smashingmagazine.com/2011/10/essential-jquery-plugin-patterns/ http://www.cnblogs.com/timy/archive/2011/04/01/2001871.html","tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://betgar.github.io/tags/jQuery/"},{"name":"jQuery Widget","slug":"jQuery-Widget","permalink":"https://betgar.github.io/tags/jQuery-Widget/"}]},{"title":"Oracleä¸­è¢«é”å®šçš„è¡¨","date":"2017-04-18T12:00:00.000Z","path":"2017/04/18/query-oracle-table-locked/","text":"Oracle ä¸­è¢«é”å®šçš„è¡¨ æŸ¥è¯¢oracleä¸­è¢«é”å®šçš„è¡¨ 12345678-- ç›¸å…³è¡¨SELECT * FROM V$LOCK;SELECT * FROM V$SQLAREA;SELECT * FROM V$SESSION;SELECT * FROM V$PROCESS ;SELECT * FROM V$LOCKED_OBJECT;SELECT * FROM ALL_OBJECTS;SELECT * FROM V$SESSION_WAIT; æŸ¥è¯¢é”å®šçš„å¯¹è±¡ æŸ¥è¯¢æ•°æ®åº“ä¸­é”å®šçš„å¯¹è±¡ 123456-- å¯ä»¥æ ¹æ®æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·åæŸ¥è¯¢SELECT B.OWNER, B.OBJECT_NAME, A.SESSION_ID, A.LOCKED_MODE, A.PROCESS, A.OS_USER_NAME FROM V$LOCKED_OBJECT A, DBA_OBJECTS B WHERE B.OBJECT_ID = A.OBJECT_ID -- AND A.OS_USER_NAME = 'æ“ä½œç³»ç»Ÿç”¨æˆ·åç§°'; æŸ¥è¯¢Sessionå’ŒSERIAL#åºå· 123456-- SESSION_IDä¼šè¯idSELECT B.USERNAME, B.SID, B.SERIAL#, LOGON_TIME FROM V$LOCKED_OBJECT A, V$SESSION B WHERE A.SESSION_ID = B.SID AND A.SESSION_ID IN (404) -- ä¼šè¯id ORDER BY B.LOGON_TIME; æ€æ­»é”å®šè¡¨çš„ä¼šè¯(Session)1234567891011121314151617-- æŸ¥è¯¢è¢«é”å®šçš„è¡¨-- OS_USER_NAMEæ“ä½œç³»ç»Ÿç”¨æˆ·åç§°SELECT B.OWNER, B.OBJECT_NAME, A.SESSION_ID, A.LOCKED_MODE, A.PROCESS, A.OS_USER_NAME FROM V$LOCKED_OBJECT A, DBA_OBJECTS B WHERE B.OBJECT_ID = A.OBJECT_ID -- AND A.OS_USER_NAME = 'os';-- æŸ¥è¯¢Sessionå’ŒSERIAL#åºå·SELECT B.USERNAME, B.SID, B.SERIAL#, LOGON_TIME FROM V$LOCKED_OBJECT A, V$SESSION B WHERE A.SESSION_ID = B.SID AND A.SESSION_ID IN (404) ORDER BY B.LOGON_TIME; -- æ ¹æ®Sessionå’ŒSERIAL#åºå·æ€æ­»é”å®šçš„ä¼šè¯ ALTER SYSTEM KILL SESSION '404,6797';","tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://betgar.github.io/tags/Oracle/"}]},{"title":"ç¾½æ¯›çƒèµ›è§„åˆ™","date":"2017-04-14T12:00:00.000Z","path":"2017/04/14/the-rules-of-badminton/","text":"ç¾½æ¯›çƒèµ›è§„åˆ™ èµ›äº‹è§„åˆ™ï¼Œåƒæˆ‘è¿™ç§çš„éå¸¸å¿…è¦äº†è§£ã€‚ è§„åˆ™é¦–å±€è·èƒœä¸€æ–¹åœ¨æ¥ä¸‹æ¥çš„ä¸€å±€æ¯”èµ›ä¸­å…ˆå‘çƒã€‚ ç¾½æ¯›çƒåŒæ‰“æ¯”èµ›è¿˜æœ‰å…¶å®ƒçš„ä¸€äº›è§„åˆ™ï¼ŒåŒ…æ‹¬ï¼š ä¸€å±€æ¯”èµ›å¼€å§‹åº”ä»å³å‘çƒåŒºå‘çƒã€‚ åªæœ‰æ¥å‘çƒå‘˜æ‰èƒ½æ¥å‘çƒï¼›å¦‚æœä»–çš„åŒä¼´å»æ¥çƒæˆ–è¢«çƒè§¦åŠï¼Œå‘çƒæ–¹å¾—ä¸€åˆ†ã€‚ è‡ªå‘çƒè¢«å›å‡»åï¼Œç”±å‘çƒæ–¹çš„ä»»ä½•ä¸€äººå‡»çƒï¼Œç„¶åç”±æ¥å‘çƒæ–¹çš„ä»»ä½•ä¸€äººå‡»çƒï¼Œå¦‚æ­¤å¾€è¿”ç›´è‡³æ­»çƒã€‚ è‡ªå‘çƒè¢«å›å‡»åï¼Œè¿åŠ¨å‘˜å¯ä»¥ä»ç½‘çš„å„è‡ªä¸€æ–¹ä»»ä½•ä½ç½®å‡»çƒã€‚ æ¥å‘çƒæ–¹è¿ä¾‹æˆ–å› çƒè§¦åŠæ¥å‘çƒæ–¹åœºåŒºå†…çš„åœ°é¢è€Œæˆæ­»çƒï¼Œå‘çƒæ–¹å¾—ä¸€åˆ†ï¼ŒåŸåŒæ‰“å‘çƒå‘˜ç»§ç»­å‘çƒã€‚ å‘çƒæ–¹è¿ä¾‹æˆ–åº”çƒè§¦åŠå‘çƒæ–¹åœºåŒºå†…çš„åœ°é¢è€Œæˆæ­»çƒï¼ŒåŸåŒæ‰“å‘çƒå‘˜å³å¤±å»å‘çƒæƒï¼Œå¯¹æ–¹å¾—åˆ†ã€‚ åŒæ‰“æ¯”èµ›ä¸­ï¼Œå½“æ¯”åˆ†ä¸º0æˆ–å¶æ•°æ—¶ï¼Œçƒç”±å³å‘çƒåŒºå¯¹è§’å‘å‘å¯¹æ–¹åœºåœ°çš„å³æ¥å‘çƒåŒºï¼›å½“æ¯”åˆ†ä¸ºå¥‡æ•°æ—¶ï¼Œçƒç”±å·¦å‘çƒåŒºå¯¹è§’å‘å‘å¯¹æ–¹åœºåœ°çš„å·¦æ¥å‘çƒåŒºã€‚åŒæ‰“æ¯”èµ›ä¸­ï¼Œåªæœ‰å½“ä¸€æ–¹è¿ç»­å¾—åˆ†æ—¶ï¼Œå‘çƒå‘˜å¿…é¡»åœ¨å³æˆ–å·¦å‘çƒåŒºäº¤æ›¿å‘çƒï¼Œè€Œæ¥å‘çƒæ–¹é˜Ÿå‘˜çš„ä½ç½®ä¸å˜ã€‚å…¶å®ƒæƒ…å†µä¸‹ï¼Œé€‰æ‰‹åº”ç«™åœ¨ä¸Šä¸€å›åˆçš„å„è‡ªå‘çƒåŒºä¸å˜ï¼Œä»¥æ­¤ä¿è¯å‘çƒå‘˜çš„äº¤æ›¿ã€‚ ç¾½æ¯›çƒåŒæ‰“æ¯”èµ›ä¸€æ–¹æ¯æ¬¡åªæœ‰ä¸€æ¬¡å‘çƒæƒã€‚å‘çƒæ–¹å¤±è¯¯ä¸ä»…ä¸¢å¤±å‘çƒæƒä¹Ÿå°†ä¸¢å¤±1åˆ†ï¼Œå¦‚æœè¿™æ—¶å¾—å‘çƒæƒçš„ä¸€æ–¹å¾—åˆ†ä¸ºå¥‡æ•°æ—¶ï¼Œåˆ™å¿…é¡»æ˜¯ä½äºå·¦å‘çƒåŒºçš„é€‰æ‰‹å‘çƒï¼Œå¦‚æœæ­¤æ—¶å¾—å‘çƒæƒçš„ä¸€æ–¹å¾—åˆ†ä¸ºå¶æ•°æ—¶ï¼Œåˆ™å¿…é¡»æ˜¯ä½äºå³å‘çƒåŒºçš„é€‰æ‰‹å‘çƒã€‚ ç¾½æ¯›çƒåŒæ‰“æ¯”èµ›åªæœ‰æ¥å‘çƒé˜Ÿå‘˜æ‰èƒ½æ¥å‘çƒï¼Œè‹¥å…¶åŒä¼´æ¥å‘çƒæˆ–è¢«çƒè§¦åŠåˆ™â€œè¿ä¾‹â€ï¼Œåˆ¤å‘çƒæ–¹å¾—åˆ†ï¼Œå½“å‘çƒè¢«å›å‡»åï¼Œçƒå¯ç”±äºŒäººä¸­ä»»ä¸€äººå‡»å›ï¼Œä¸å¾—è¿å‡»ï¼Œå¦‚æ­¤å¾€è¿”ç›´è‡³æ­»çƒã€‚ ç¾½æ¯›çƒåŒæ‰“æ¯”èµ›å‘çƒæ—¶ï¼Œå‘çƒé˜Ÿå‘˜å’Œæ¥å‘çƒé˜Ÿå‘˜å¿…é¡»ç«™åœ¨è§„å®šçš„å‘çƒåŒºå’Œæ¥å‘çƒåŒºå†…å‘çƒå’Œæ¥å‘çƒï¼Œä»–ä»¬çš„åŒä¼´ç«™ä½å¯ä»¥ä¸å—é™åˆ¶ï¼Œä½†ä¸å¾—å¦¨ç¢å¯¹æ–¹ã€‚è¿åŠ¨å‘˜å‘çƒå’Œæ¥å‘çƒé¡ºåºæœ‰è¯¯ï¼Œå·²å¾—æ¯”åˆ†æœ‰æ•ˆï¼Œçº æ­£æ–¹ä½æˆ–é¡ºåºã€‚","tags":[{"name":"sports","slug":"sports","permalink":"https://betgar.github.io/tags/sports/"}]},{"title":"nbtstat","date":"2017-04-10T12:00:00.000Z","path":"2017/04/10/how-to-use-nbtstat-command-get-ip-address/","text":"nbtstatè®¡ç®—æœºåç§°å’ŒMACäº’è½¬èƒŒæ™¯ å› ä¸ºä¸ªäººéƒ¨ç½²äº†ä¸€ä¸ªå°åšå®¢ï¼Œå‘å¸ƒä¸€äº›ç»éªŒæ€»ç»“æ–¹ä¾¿è‡ªå·±ï¼ˆé¡ºä¾¿æ–¹ä¾¿ä¸€ä¸‹å¤§å®¶ï¼‰ã€‚å› ä¸ºä¸ªäººçš„ç”µè„‘IPåœ°å€æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥ç»å¸¸å¯¼è‡´ä¹‹å‰åˆ†äº«çš„åœ°å€ä¸èƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥ç»è¿‡ç ”ç©¶ï¼Œå‘ä¸‹äº†ä¸€ä¸ªä¸€åŠ³æ°¸é€¸çš„å¥½åŠæ³•ï¼Œå”¯ä¸€è¦æ±‚åªéœ€è¦ä½ è®°å¾—è®¡ç®—æœºåç§°(computer name)ã€‚ å¦‚æœç”µè„‘å¤„äºä¼‘çœ çŠ¶æ€è¿˜éœ€è¦ä½ è®°å¾—MACåœ°å€ï¼ˆæœ€å¥½è®°ä½è¿™ä¸ªï¼‰ã€‚ MAC : D43D7ED1CE05 ä¸ªäººè®¡ç®—æœºåç§° JN 1MACåœ°å€ï¼šD43D7ED1CE05 é€šè¿‡è®¡ç®—æœºåç§°æŸ¥è¯¢MACå’ŒIPåœ°å€1nbtstat -a LIJN é€šè¿‡IPæŸ¥è¯¢è®¡ç®—æœºåç§°å’ŒMACåœ°å€1nbtstat -A 10.11.4.11 æŸ¥çœ‹å¸®åŠ©1nbtstat /? # å¸®åŠ©","tags":[{"name":"cmd","slug":"cmd","permalink":"https://betgar.github.io/tags/cmd/"}]},{"title":"Linuxå‘½ä»¤å­¦ä¹ ç¬”è®°","date":"2017-03-29T12:00:00.000Z","path":"2017/03/29/the-linux-command-line-learn-note/","text":"Linuxå‘½ä»¤å­¦ä¹ ç¬”è®°Linuxç³»ç»Ÿç›®å½•ç»“æ„123456789101112131415161718192021222324252627/-- # root |--bin # Essential command binaries |--boot # Static files of the boot loader |--dev # Device files |--etc # Host-specific system configuration |--lib # Essential shared libraries and kernel modules |--media # Mount point for removeable media |--mnt # Mount point for mounting a filesystem temporarily |--opt # Add-on application software packages |--sbin # Essential system binaries |--srv # Data for services provided by this system |--tmp # Temporary files |--usr # Secondary hierarchy |--var # Variable data Linuxç³»ç»Ÿç›®å½•ç®€å†™åç§°Linuxå‘½ä»¤ç¼©å†™å«ä¹‰ï¼ˆLinux short command meaningï¼‰ pwd: print work directory cd: change directory 123cd ~cd - # åœ¨ä¸Šä¸€ä¸ªå’Œå½“å‰ç›®å½•ä¹‹é—´åˆ‡æ¢cd ~user name # åˆ‡æ¢åˆ°æŒ‡å®šçš„ç”¨æˆ·çš„homeç›®å½• æ–‡ä»¶å’Œç›®å½• ls: list cp: copy mv: move mkdir: make directory rm : remove ln : link less: less is more(moreä¹Ÿæ˜¯ä¸€ä¸ªå‘½ä»¤.zlesså’Œlessä¸€æ ·ï¼Œä½†æ˜¯å¯ä»¥è¯»å–gzipæ–‡ä»¶) file å‘½ä»¤ type which whatis alias info man: manual apropos help é‡å®šå‘ cat: ï¼ˆé“¾æ¥å¤šä¸ªæ–‡ä»¶ï¼‰ head tail sort uniq grep wc æ ‡å‡†é‡å®šå‘ æ ‡å‡†è¾“å…¥ã€è¾“å‡ºã€é”™è¯¯åœ¨shell å†…éƒ¨å‚è€ƒå®ƒä»¬ä¸ºæ–‡ä»¶æè¿°ç¬¦ 0ï¼Œ 1 å’Œ 2ã€‚ é‡å®šå‘æ ‡å‡†è¾“å‡º12345# é‡å®šå‘æ ‡å‡†è¾“å‡ºåˆ°æ–‡ä»¶(è¿™é‡Œä¼šé‡æ–°è¦†å†™ls-stdout.txt)ls -l &gt; ls-stdout.txt# è¿½åŠ åˆ°ls-stdout.txtls -l &gt;&gt; ls-stdout.txt é‡å®šå‘é”™è¯¯ é”™è¯¯æ–‡ä»¶æè¿°ç¬¦ä¸ºï¼š2 12345678# é‡å®šå‘é”™è¯¯ls -l /bin/usr 2&gt; ls-error.txt# æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåˆ°åŒä¸€ä¸ªæ–‡ä»¶ls -l /bin/usr &gt; ls-error.txt 2&gt;&amp;1# bashç°ä»£ç‰ˆæœ¬æ”¯æŒls -l /bin/usr &amp;&gt; ls-error.txt","tags":[{"name":"linux","slug":"linux","permalink":"https://betgar.github.io/tags/linux/"}]},{"title":"UNIXæ–‡ä»¶ç³»ç»Ÿçš„å†å²","date":"2017-03-29T12:00:00.000Z","path":"2017/03/29/a-history-of-unix-directory-structure/","text":"Filesystem Hierarchy Standard é˜®ä¸€å³°è¯‘æ–‡ Rob LandleyåŸæ–‡ On Tuesday 30 November 2010 15:58:00 David Collier wrote: I see that busybox spreads itâ€™s links over these 4 directories. Is there a simple rule which decides which directory each link livesinâ€¦.. For instance I see kill is in /bin and killall in /usr/binâ€¦. I donâ€™thave a grip on what might be the logic for that. You know how Ken Thompson and Dennis Ritchie created Unix on a PDP-7 in 1969?Well around 1971 they upgraded to a PDP-11 with a pair of RK05 disk packs (1.5megabytes each) for storage. When the operating system grew too big to fit on the first RK05 disk pack (theirroot filesystem) they let it leak into the second one, which is where all theuser home directories lived (which is why the mount was called /usr). Theyreplicated all the OS directories under there (/bin, /sbin, /lib, /tmpâ€¦) andwrote files to those new directories because their original disk was out ofspace. When they got a third disk, they mounted it on /home and relocated allthe user directories to there so the OS could consume all the space on bothdisks and grow to THREE WHOLE MEGABYTES (ooooh!). Of course they made rules about â€œwhen the system first boots, it has to come upenough to be able to mount the second disk on /usr, so donâ€™t put things likethe mount command /usr/bin or weâ€™ll have a chicken and egg problem bringingthe system up.â€ Fairly straightforward. Also fairly specific to v6 unix of 35years ago. The /bin vs /usr/bin split (and all the others) is an artifact of this, a1970â€™s implementation detail that got carried forward for decades bybureaucrats who never question why theyâ€™re doing things. It stopped makingany sense before Linux was ever invented, for multiple reasons: 1) Early system bringup is the provice of initrd and initramfs, which dealswith the â€œthis file is needed before that fileâ€ issues. Weâ€™ve already got atemporary system that boots the main system. 2) shared libraries (introduced by the Berkeley guys) prevent you fromindependently upgrading the /lib and /usr/bin parts. They two partitions haveto match or they wonâ€™t work. This wasnâ€™t the case in 1974, back then theyhad a certain level of independence because everything was statically linked. 3) Cheap retail hard drives passed the 100 megabyte mark around 1990, andpartition resizing software showed up somewhere around there (partition magic3.0 shipped in 1997). Of course once the split existed, some people made other rules to justify it.Root was for the OS stuff you got from upstream and /usr was for your site-local files. Then / was for the stuff you got from AT&amp;T and /usr was for thestuff that your distro like IBM AIX or Dec Ultrix or SGI Irix added to it, and/usr/local was for your specific installationâ€™s files. Then somebody decided/usr/local wasnâ€™t a good place to install new packages, so letâ€™s add /opt!Iâ€™m still waiting for /opt/local to show upâ€¦ Of course given 30 years to fester, this split made some interesting distro-specific rules show up and go away again, such as â€œ/tmp is cleared betweenreboots but /usr/tmp isnâ€™tâ€. (Of course on Ubuntu /usr/tmp doesnâ€™t exist andon Gentoo /usr/tmp is a symlink to /var/tmp which now has the â€œnot clearedbetween rebootsâ€ rule. Yes all this predated tmpfs. It has to do with read-only root filesystems, /usr is always going to be read only in that case and/var is where your writable space is, / is mostly read only except for bitsof /etc which they tried to move to /var but really symlinking /etc to/var/etc happens more often than notâ€¦) Standards bureaucracies like the Linux Foundation (which consumed the FreeStandards Group in itsâ€™ ever-growing accretion disk years ago) happilydocument and add to this sort of complexity without ever trying to understandwhy it was there in the first place. â€˜Ken and Dennis leaked their OS into theequivalent of home because an RK05 disk pack on the PDP-11 was too smallâ€ goeswhoosh over their heads. Iâ€™m pretty sure the busybox install just puts binaries wherever other versionsof those binaries have historically gone. Thereâ€™s no actual REASON for any ofit anymore. Personally, I symlink /bin /sbin and /lib to their /usrequivalents on systems I put together. Embedded guys try to understand andsimplifyâ€¦ RobGPLv3: as worthy a successor as The Phantom Menace, as timely as Duke NukemForever, and as welcome as New Coke. On Thursday 09 December 2010 16:45, Rob Landley wrote: The /bin vs /usr/bin split (and all the others) is an artifact of this, a1970â€™s implementation detail that got carried forward for decades bybureaucrats who never question why theyâ€™re doing things. It stopped makingany sense before Linux was ever invented, for multiple reasons:â€¦ Iâ€™m pretty sure the busybox install just puts binaries wherever other versionsof those binaries have historically gone. Thereâ€™s no actual REASON for any ofit anymore. Personally, I symlink /bin /sbin and /lib to their /usrequivalents on systems I put together. Embedded guys try to understand andsimplifyâ€¦ Another simplification: I symlink [/usr]/sbin to bin. If a program shouldnâ€™t be runnable by a non-root,it can easily be arranged by suitable mode in the binary. No need to haveseparate directory for that. â€“vda","tags":[{"name":"FHS","slug":"FHS","permalink":"https://betgar.github.io/tags/FHS/"}]},{"title":"fuel-ux-spinneræºç ","date":"2017-03-04T12:00:00.000Z","path":"2017/03/04/fuel-ux-spinner/","text":"fuel-ux-spinneræºç  ä¹‹å‰ä½¿ç”¨åˆ°äº†bootstrapçš„ä¸€ä¸ªæ’ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰apiï¼Œæ‰€ä»¥ç›´æ¥æŠŠæºç æ‹·è´å‡ºæ¥å¤‡ä»½ä¸€ä¸‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131/* * Fuel UX Spinner * https://github.com/ExactTarget/fuelux * * Copyright (c) 2012 ExactTarget * Licensed under the MIT license. */!function($) &#123; var Spinner = function(element, options) &#123; this.$element = $(element), this.options = $.extend(&#123;&#125;, $.fn.spinner.defaults, options), this.$input = this.$element.find(\".spinner-input\"), this.$element.on(\"keyup\", this.$input, $.proxy(this.change, this)), this.options.hold ? (this.$element.on(\"mousedown\", \".spinner-up\", $.proxy(function() &#123; this.startSpin(!0) &#125;, this)), this.$element.on(\"mouseup\", \".spinner-up, .spinner-down\", $.proxy(this.stopSpin, this)), this.$element.on(\"mouseout\", \".spinner-up, .spinner-down\", $.proxy(this.stopSpin, this)), this.$element.on(\"mousedown\", \".spinner-down\", $.proxy(function() &#123; this.startSpin(!1) &#125;, this))) : (this.$element.on(\"click\", \".spinner-up\", $.proxy(function() &#123; this.step(!0) &#125;, this)), this.$element.on(\"click\", \".spinner-down\", $.proxy(function() &#123; this.step(!1) &#125;, this))), this.switches = &#123; count: 1, enabled: !0 &#125;, this.switches.speed = \"medium\" === this.options.speed ? 300 : \"fast\" === this.options.speed ? 100 : 500, this.lastValue = null, this.render(), this.options.disabled &amp;&amp; this.disable() &#125;; Spinner.prototype = &#123; constructor: Spinner, render: function() &#123; var inputValue = this.$input.val(); inputValue ? this.value(inputValue) : this.$input.val(this.options.value), this.$input.attr(\"maxlength\", (this.options.max + \"\").split(\"\").length) &#125;, change: function() &#123; var value = this.$input.val(); value / 1 ? this.options.value = value / 1 : (value = value.replace(/[^0-9]/g, \"\"), this.$input.val(value), this.options.value = value / 1), this.triggerChangedEvent() &#125;, stopSpin: function() &#123; clearTimeout(this.switches.timeout), this.switches.count = 1, this.triggerChangedEvent() &#125;, triggerChangedEvent: function() &#123; var value = this.value(); value !== this.lastValue &amp;&amp; (this.lastValue = value, this.$element.trigger(\"changed\", value), this.$element.trigger(\"change\")) &#125;, startSpin: function(t) &#123; if (!this.options.disabled) &#123; var i = this.switches.count; 1 === i ? (this.step(t), i = 1) : i = 3 &gt; i ? 1.5 : 8 &gt; i ? 2.5 : 4, this.switches.timeout = setTimeout($.proxy(function() &#123; this.iterator(t) &#125;, this), this.switches.speed / i), this.switches.count++ &#125; &#125;, iterator: function(e) &#123; this.step(e), this.startSpin(e) &#125;, step: function(e) &#123; var t = this.options.value , i = e ? this.options.max : this.options.min; if (e ? i &gt; t : t &gt; i) &#123; var s = t + (e ? 1 : -1) * this.options.step; (e ? s &gt; i : i &gt; s) ? this.value(i) : this.value(s) &#125; else if (this.options.cycle) &#123; var n = e ? this.options.min : this.options.max; this.value(n) &#125; &#125;, value: function(value) &#123; return !isNaN(parseFloat(value)) &amp;&amp; isFinite(value) ? (value = parseFloat(value), this.options.value = value, this.$input.val(value), this) : this.options.value &#125;, disable: function() &#123; this.options.disabled = !0, this.$input.attr(\"disabled\", \"\"), this.$element.find(\"button\").addClass(\"disabled\") &#125;, enable: function() &#123; this.options.disabled = !1, this.$input.removeAttr(\"disabled\"), this.$element.find(\"button\").removeClass(\"disabled\") &#125; &#125;, $.fn.spinner = function(i, s) &#123; var n, a = this.each(function() &#123; var a = $(this) , o = a.data(\"spinner\") , r = \"object\" == typeof i &amp;&amp; i; o || a.data(\"spinner\", o = new Spinner(this,r)), \"string\" == typeof i &amp;&amp; (n = o[i](s)) &#125;); return void 0 === n ? a : n &#125; , $.fn.spinner.defaults = &#123; value: 1, min: 1, max: 999, step: 1, hold: !0, speed: \"medium\", disabled: !1 &#125;, $.fn.spinner.Constructor = Spinner, $(function() &#123; $(\"body\").on(\"mousedown.spinner.data-api\", \".spinner\", function() &#123; var t = $(this); t.data(\"spinner\") || t.spinner(t.data()) &#125;) &#125;)&#125;(window.jQuery);","tags":[{"name":"Bootstrap","slug":"Bootstrap","permalink":"https://betgar.github.io/tags/Bootstrap/"},{"name":"spinner","slug":"spinner","permalink":"https://betgar.github.io/tags/spinner/"}]},{"title":"NPMçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿","date":"2017-03-04T12:00:00.000Z","path":"2017/03/04/use-npm-with-right-posture/","text":"NPMçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ node package manageræ˜¯nodeçš„åŒ…ç®¡ç†å™¨ï¼Œä½¿ç”¨NPMæ¥ç®¡ç†nodeçš„æ¨¡å—ã€‚ ä½†æ˜¯å› ä¸ºä¸­å›½çš„ç‹¬ç‰¹çš„ç½‘ç»œç¯å¢ƒï¼Œæ‰€ä»¥ç»™ä½¿ç”¨NPMå¸¦æ¥å¾ˆå¤šä¸å˜ã€‚ å®‰è£…cnpm cnpmæ˜¯npmçš„ä¸€ä¸ªæ¨¡å—ï¼Œå®ƒæ˜¯æ·˜å®ï¼ˆé˜¿é‡Œï¼‰æ¨å‡ºçš„ä¸€ä¸ªä¸ºä¸­å›½å¤§é™†å¼€å‘è€…çš„å·¥å…·ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨cnpmå®‰è£…é¡¹ç›®ä¾èµ–çš„æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®ä½ ç®€åŒ–å› ä¸ºâ€œç½‘ç»œç¯å¢ƒâ€å¸¦æ¥çš„é—®é¢˜ã€‚ 1npm install -g cnpm é…ç½®npmçš„registry å›½å†…è®¿é—®npmçš„registryå¾ˆæ…¢ï¼Œè€Œä¸”æœ‰æ—¶å€™è¿˜ä¼šå‡ºç°é”™è¯¯ï¼Œæ‰€ä»¥é…ç½®æˆæ·˜å®çš„é•œåƒã€‚ æ³¨æ„ ï¼šå¦‚æœä½ å†³å®šä½¿ç”¨cnpmå®‰è£…ä¾èµ–æ¨¡å—ï¼Œå¯ä»¥ä¸ç”¨é…ç½®npmçš„registry 1234567891011121314# é…ç½®å…¨å±€çš„ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰npm config set registry=\"https://registry.npm.taobao.org\"# ä¸´æ—¶ï¼ˆä¸€æ¬¡æ€§ï¼‰npm install module_name --registry=\"https://registry.npm.taobao.org\"# å¦‚æœå…¬å¸å±è”½äº†taobaonpm config set registry=\"https://r.cnpmjs.org\"# æŸ¥çœ‹registryæ˜¯å¦ç”Ÿæ•ˆnpm config get registry# æŸ¥çœ‹é»˜è®¤çš„npmæ‰€æœ‰é…ç½®npm config list é…ç½®cnpmçš„registry å¦‚æœä½ çš„ç½‘ç»œå±è”½äº†taobaoï¼Œé‚£å°±ä½¿ç”¨https://r.cnpmjs.org 12# å¦‚æœæ²¡æœ‰taobaoè®¿é—®é™åˆ¶ï¼Œä¸éœ€è¦è¿™æ­¥é…ç½®cnpm config set registry=\"https://r.cnpmjs.org\" cnpmä½¿ç”¨ å› ä¸ºcnpmçš„é…ç½®å’Œnpmçš„æ˜¯å®Œå…¨ç‹¬ç«‹ï¼Œæ‰€ä»¥å¦‚æœä½ å¸Œæœ›å•ç‹¬é…ç½®cacheï¼Œè¯·é‡æ–°é…ç½®ã€‚ 123&gt; # &lt;path&gt; æ˜¯çœŸå®è·¯å¾„&gt; cnpm config set cache=\"&lt;path&gt;\"&gt; ç°åœ¨å°±å¯ä»¥ä½¿ç”¨cnpmä»£æ›¿npmæ“ä½œï¼Œä½†æ˜¯å¦‚æœä½ éœ€è¦å‘å¸ƒä¸€ä¸ªæ¨¡å—ï¼Œè¯·åˆ‡æ¢ä½¿ç”¨npmæ¥publishã€‚å› ä¸ºcnpmæ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ¥æ–¹ä¾¿ä¸‹è½½ã€‚ å¼•ç”¨cnpm-github China-mirror cnpmjs","tags":[{"name":"npm","slug":"npm","permalink":"https://betgar.github.io/tags/npm/"}]}]